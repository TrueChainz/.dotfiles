document.addEventListener("DOMContentLoaded",(async()=>{const e={readModeCheckBox:document.getElementById("readMode"),darkModeCheckBox:document.getElementById("darkMode"),rateUslink:document.getElementById("rateUsLink"),colorPickerButton:document.getElementById("drk-th_color_picker"),closeBtn:document.getElementById("drk-th_closeBtn")};e.colorPickerButton.addEventListener("click",(function o(){e.colorPickerButton.removeEventListener("click",o);let t=new Picker({parent:document.getElementsByClassName("drk-th_logo_wrapper")[0],alpha:!1,popup:"bottom"});t.onDone=function(c){e.colorPickerButton.style["background-image"]="none",e.colorPickerButton.style["background-color"]=c.rgbString,chrome.storage.sync.set({isCustomColorSet:1}),chrome.storage.sync.set({customColor:c.rgbString}),chrome.tabs.executeScript(null,{code:`if (!document.getElementById("customMode4530")) {\n                  document.body.appendChild(el1);\n                }\n                document.getElementById("customMode4530").style['background-color'] = '${c.rgbString}'\n                document.documentElement.style['background-color'] = ${c.rgbString}\n                `,allFrames:!0}),t.destroy(),e.colorPickerButton.addEventListener("click",o)},t.show()})),e.rateUslink.addEventListener("click",(()=>{chrome.tabs.create({url:`https://chrome.google.com/webstore/detail/${chrome.runtime.id}/reviews`})})),e.closeBtn.addEventListener("click",(()=>{chrome.storage.sync.set({isCustomColorSet:0,customColor:"none"},(()=>{e.colorPickerButton.style["background-image"]="url('../icons/color-picker-icon.svg')",e.colorPickerButton.style["background-color"]="none",e.colorPickerButton.style.border="none",chrome.tabs.executeScript(null,{code:'if (document.getElementById("customMode4530")) {\n                document.getElementById("customMode4530").remove();\n              }',allFrames:!0})}))})),chrome.tabs.executeScript(null,{file:"scripts/helpers/overlyHelper.js",allFrames:!0}),chrome.storage.sync.get("readMode",(o=>{1==o.readMode?e.readModeCheckBox.checked=!0:(chrome.storage.sync.set({readMode:0}),e.readModeCheckBox.checked=!1)})),chrome.storage.sync.get("darkMode",(o=>{1==o.darkMode?e.darkModeCheckBox.checked=!0:(chrome.storage.sync.set({darkMode:0}),e.darkModeCheckBox.checked=!1)})),chrome.storage.sync.get(["isCustomColorSet","customColor"],(o=>{1==o.isCustomColorSet?(e.colorPickerButton.style["background-image"]="none",e.colorPickerButton.style["background-color"]=o.customColor,e.colorPickerButton.style.border="2px solid white"):(e.colorPickerButton.style["background-image"]="url('../icons/color-picker-icon.svg')",e.colorPickerButton.style["background-color"]="none",e.colorPickerButton.style.border="none")})),e.readModeCheckBox.addEventListener("click",(()=>{e.readModeCheckBox.checked?chrome.storage.sync.get("readMode",(e=>{0==e.readMode&&(chrome.tabs.executeScript(null,{code:'if (!document.getElementById("readMode4530")) {\n                document.body.appendChild(el);\n              }',allFrames:!0}),chrome.storage.sync.set({readMode:1}))})):chrome.storage.sync.get("readMode",(e=>{1==e.readMode&&(chrome.tabs.executeScript(null,{code:'if (document.getElementById("readMode4530")) {\n                document.getElementById("readMode4530").remove();\n              }',allFrames:!0}),chrome.storage.sync.set({readMode:0}))}))})),e.darkModeCheckBox.addEventListener("click",(()=>{e.darkModeCheckBox.checked?chrome.storage.sync.get("darkMode",(e=>{0==e.darkMode&&(chrome.tabs.executeScript(null,{code:'let x = document.querySelectorAll("video");\n              for (let i = 0; i < x.length; i++) {\n                x[i].style.filter = "invert(1)";\n              }',allFrames:!0}),chrome.tabs.executeScript(null,{code:'document.documentElement.style.height =\n                Math.max(\n                  document.body.scrollHeight,\n                  document.body.offsetHeight,\n                  document.documentElement.clientHeight,\n                  document.documentElement.scrollHeight,\n                  document.documentElement.offsetHeight\n                ) + "px"',allFrames:!0}),chrome.tabs.executeScript(null,{code:'document.documentElement.style.filter = "invert(1)"',allFrames:!0}),chrome.tabs.executeScript(null,{code:'document.documentElement.style.backgroundColor = "black"',allFrames:!0}),chrome.tabs.executeScript(null,{code:'for (let i = 0; i < document.images.length; i++) {\n                document.images[i].style.filter = "invert(1)";\n              }',allFrames:!0}),chrome.storage.sync.set({darkMode:1}))})):chrome.storage.sync.get("darkMode",(e=>{1==e.darkMode&&(chrome.tabs.executeScript(null,{code:' let x = document.querySelectorAll("video");\n                          for (let i = 0; i < x.length; i++) {\n                              x[i].style.filter = "invert(0)";\n                          }',allFrames:!0}),chrome.tabs.executeScript(null,{code:'document.documentElement.style.backgroundColor = ""',allFrames:!0}),chrome.tabs.executeScript(null,{code:'  for (let i = 0; i < document.images.length; i++) {\n                              document.images[i].style.filter = "invert(0)";\n                          }',allFrames:!0}),chrome.tabs.executeScript(null,{code:'document.documentElement.style.filter = "invert(0)"',allFrames:!0}),chrome.storage.sync.set({darkMode:0}))}))}))}));