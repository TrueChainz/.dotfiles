(()=>{"use strict";var e={};const t=null&&false;const n=false;const o=null&&true;function getBrowserTheme(){if(o){return chrome.devtools.panels.themeName==="dark"?"dark":"light"}else{if(chrome.devtools&&chrome.devtools.panels){switch(chrome.devtools.panels.themeName){case"dark":return"dark";default:return"light"}}}}const r="compact";const s=[r];const c=n?[{id:"@react-devtools/proxy",js:["build/proxy.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_end"},{id:"@react-devtools/file-fetcher",js:["build/fileFetcher.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_end"}]:[{id:"@react-devtools/proxy",js:["build/proxy.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_end",world:chrome.scripting.ExecutionWorld.ISOLATED},{id:"@react-devtools/file-fetcher",js:["build/fileFetcher.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_end",world:chrome.scripting.ExecutionWorld.ISOLATED},{id:"@react-devtools/hook",js:["build/installHook.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_start",world:chrome.scripting.ExecutionWorld.MAIN},{id:"@react-devtools/renderer",js:["build/renderer.js"],matches:["<all_urls>"],persistAcrossSessions:true,runAt:"document_start",world:chrome.scripting.ExecutionWorld.MAIN}];async function dynamicallyInjectContentScripts(){try{await chrome.scripting.unregisterContentScripts();await chrome.scripting.registerContentScripts(c)}catch(e){console.error(e)}}dynamicallyInjectContentScripts();function setExtensionIconAndPopup(e,t){const o=n?chrome.browserAction:chrome.action;o.setIcon({tabId:t,path:{16:chrome.runtime.getURL(`icons/16-${e}.png`),32:chrome.runtime.getURL(`icons/32-${e}.png`),48:chrome.runtime.getURL(`icons/48-${e}.png`),128:chrome.runtime.getURL(`icons/128-${e}.png`)}});o.setPopup({tabId:t,popup:chrome.runtime.getURL(`popups/${e}.html`)})}const i=setExtensionIconAndPopup;function isRestrictedBrowserPage(e){return!e||new URL(e).protocol==="chrome:"}function checkAndHandleRestrictedPageIfSo(e){if(e&&isRestrictedBrowserPage(e.url)){i("restricted",e.id)}}if(!n){chrome.tabs.query({},(e=>e.forEach(checkAndHandleRestrictedPageIfSo)));chrome.tabs.onCreated.addListener(((e,t,n)=>checkAndHandleRestrictedPageIfSo(n)))}chrome.tabs.onUpdated.addListener(((e,t,o)=>{if(n){if(o.active&&t.status==="loading"){i("disabled",e)}}else{checkAndHandleRestrictedPageIfSo(o)}}));function executeScriptForFirefoxInMainWorld({target:e,files:t}){return chrome.scripting.executeScript({target:e,func:e=>{function injectScriptSync(e){let t="";const n=new XMLHttpRequest;n.addEventListener("load",(function(){t=this.responseText}));n.open("GET",e,false);n.send();const o=document.createElement("script");o.textContent=t;if(document.documentElement){document.documentElement.appendChild(o)}if(o.parentNode){o.parentNode.removeChild(o)}}e.forEach((e=>injectScriptSync(chrome.runtime.getURL(e))))},args:[t]})}function executeScriptInIsolatedWorld({target:e,files:t}){return chrome.scripting.executeScript({target:e,files:t,world:chrome.scripting.ExecutionWorld.ISOLATED})}function executeScriptInMainWorld({target:e,files:t}){if(n){return executeScriptForFirefoxInMainWorld({target:e,files:t})}return chrome.scripting.executeScript({target:e,files:t,world:chrome.scripting.ExecutionWorld.MAIN})}function handleReactDevToolsHookMessage(e,t){const{payload:n}=e;switch(n?.type){case"react-renderer-attached":{i(n.reactBuildType,t.tab.id);break}}}function handleBackendManagerMessage(e,t){const{payload:n}=e;switch(n?.type){case"require-backends":{n.versions.forEach((e=>{if(s.includes(e)){executeScriptInMainWorld({target:{tabId:t.tab.id},files:[`/build/react_devtools_backend_${e}.js`]})}}));break}}}function handleDevToolsPageMessage(e){const{payload:t}=e;switch(t?.type){case"fetch-file-with-cache":{const{payload:{tabId:t,url:n}}=e;if(!t){throw new Error("Couldn't fetch file sources: tabId not specified")}if(!n){throw new Error("Couldn't fetch file sources: url not specified")}chrome.tabs.sendMessage(t,{source:"devtools-page",payload:{type:"fetch-file-with-cache",url:n}});break}case"inject-backend-manager":{const{payload:{tabId:t}}=e;if(!t){throw new Error("Couldn't inject backend manager: tabId not specified")}executeScriptInMainWorld({target:{tabId:t},files:["/build/backendManager.js"]});break}}}function handleFetchResourceContentScriptMessage(e){const{payload:t}=e;switch(t?.type){case"fetch-file-with-cache-complete":case"fetch-file-with-cache-error":chrome.runtime.sendMessage({source:"react-devtools-background",payload:t});break}}const a={};function registerTab(e){if(!a[e]){a[e]={extension:null,proxy:null,disconnectPipe:null}}}function registerExtensionPort(e,t){a[t].extension=e;e.onDisconnect.addListener((()=>{a[t].disconnectPipe?.();delete a[t].extension}))}function registerProxyPort(e,t){a[t].proxy=e;e.onDisconnect.addListener((()=>{a[t].disconnectPipe?.();delete a[t].proxy}))}function isNumeric(e){return+e+""===e}chrome.runtime.onConnect.addListener((e=>{if(e.name==="proxy"){if(e.sender?.tab?.id==null){return}const t=e.sender.tab.id;if(a[t]?.proxy){a[t].disconnectPipe?.();a[t].proxy.disconnect()}registerTab(t);registerProxyPort(e,t);if(a[t].extension){connectExtensionAndProxyPorts(a[t].extension,a[t].proxy,t)}return}if(isNumeric(e.name)){const t=+e.name;registerTab(t);registerExtensionPort(e,t);if(a[t].proxy){connectExtensionAndProxyPorts(a[t].extension,a[t].proxy,t)}return}console.warn(`Unknown port ${e.name} connected`)}));function connectExtensionAndProxyPorts(e,t,n){if(!e){throw new Error(`Attempted to connect ports, when extension port is not present`)}if(!t){throw new Error(`Attempted to connect ports, when proxy port is not present`)}if(a[n].disconnectPipe){throw new Error(`Attempted to connect already connected ports for tab with id ${n}`)}function extensionPortMessageListener(e){try{t.postMessage(e)}catch(e){if(false){}disconnectListener()}}function proxyPortMessageListener(t){try{e.postMessage(t)}catch(e){if(false){}disconnectListener()}}function disconnectListener(){e.onMessage.removeListener(extensionPortMessageListener);t.onMessage.removeListener(proxyPortMessageListener);delete a[n].disconnectPipe}a[n].disconnectPipe=disconnectListener;e.onMessage.addListener(extensionPortMessageListener);t.onMessage.addListener(proxyPortMessageListener);e.onDisconnect.addListener(disconnectListener);t.onDisconnect.addListener(disconnectListener)}chrome.runtime.onMessage.addListener(((e,t)=>{switch(e?.source){case"devtools-page":{handleDevToolsPageMessage(e);break}case"react-devtools-fetch-resource-content-script":{handleFetchResourceContentScriptMessage(e);break}case"react-devtools-backend-manager":{handleBackendManagerMessage(e,t);break}case"react-devtools-hook":{handleReactDevToolsHookMessage(e,t)}}}));chrome.tabs.onActivated.addListener((({tabId:e})=>{for(const t in a){if(a[t].proxy!=null&&a[t].extension!=null){const n=+t;const o=e===n?"resumeElementPolling":"pauseElementPolling";a[t].extension.postMessage({event:o})}}}))})();