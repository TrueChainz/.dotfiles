/*! For license information please see 1518.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[1518],{46560:(e,t,i)=>{i.d(t,{B:()=>r});var n=i(27378);const r=({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.646 7.646a.5.5 0 0 1 .708 0L12 11.293l3.646-3.647a.5.5 0 0 1 .708.708L12.707 12l3.647 3.646a.5.5 0 0 1-.708.708L12 12.707l-3.646 3.647a.5.5 0 0 1-.708-.708L11.293 12 7.646 8.354a.5.5 0 0 1 0-.708Z",fill:"#646B81"}))},17579:(e,t,i)=>{i.d(t,{N:()=>r});var n=i(27378);const r=({title:e,titleId:t,desc:i,descId:r,...s})=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},i?n.createElement("desc",{id:r},i):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6a2 2 0 0 0-2 2v2h4V8a2 2 0 0 0-2-2Zm3 4V8a3 3 0 1 0-6 0v2H6.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5H15Zm-8 1v7h10v-7H7Z",fill:"#646B81"}))},34760:(e,t,i)=>{i.d(t,{v:()=>M,h:()=>Y});var n=i(64681),r=i(95195),s=i(45701),o=i(64015),a=i(48044),l=i(62965),c=i(57050),u=i(14601),d=i(60797),m=i(77176),p=i(41398),h=i(85985),g=i(67434),f=i(98403),y=i(50628),v=i(5114),x=i(83078),b=i(92843),S=i(38983),k=i(31442),C=i(21038),w=i(28811),_=i(50685),I=i(13004),E=i(31384),A=i(66374),O=i(94996),R=i(32952),T=i(44212),P=i(17160),U=i(78929),B=i(26393),N=i(24055),G=i(71078),z=i(19125);class F{constructor(e=new _.WQ(F.name)){this._logger=e,this._alertIds=new Set}hasAlert(e){return this._alertIds.has(e)}processChanges(e){for(const t of e)(0,G.BG)(t)?this._alertIds.add(t.alertId):(0,G.nq)(t)?this._alertIds.delete(t.alertId):(0,G.Jg)(t)&&this._alertIds.clear();e.length>0&&this._logger.debug("Alert collection change",new Set(this._alertIds))}}class j{constructor(e){var t;this._params=e,this._subs=new u.w,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new _.WQ(j.name),this._sduiEvents=new R.xQ,this._alertCollection=new F(this._params.logger),this._sduiManager=new U.G(this._sduiEvents.asObservable(),v.fromPredicate((e=>this._alertCollection.hasAlert(e)))),this.state=this._sduiManager.state,this.onAlertsRefEmpty=this._sduiManager.onAlertsRefEmpty,this.pushRemovedRoot=e=>this._sduiManager.pushRemovedRoot(e),this.pushRemovedAlerts=([e,t])=>this._sduiManager.pushRemovedAlerts([e,t]),this.pushSwitchView=e=>this._sduiManager.pushSwitchView(e),this._subs.add(this._processAlertChanges()),this._subs.add(this._processInboundSDUIMessages()),this._subs.add(this._sduiManagerLifecycleOnAlertsRefEmpty()),this._subs.add(this._sduiEvents.subscribe((e=>this._logger.debug("sdui event",e))))}dispose(){this._subs.unsubscribe(),this._sduiManager.dispose()}_processInboundSDUIMessages(){const e=e=>(0,c.zG)(e.sdui,B.ab.dslRootParser,r.bimap((t=>(this._params.monitoringService.notify(E.jk(e.sduiRootId,t)),t)),(t=>(this._params.monitoringService.notify(A._W(e.sduiRootId)),t))),v.fromEither);return this._params.sduiService.sduiItemCollectionChanges.pipe(T.u(),m.U((t=>(0,z.tC)(t)?(0,c.zG)(t,e,v.map((e=>({kind:N.e.SduiEventKind.Add,sdui:e,sduiRootId:N.e.RawSduiItem.Id.create(t.sduiRootId),rev:0})))):(0,z.Y9)(t)?(0,c.zG)(t,e,v.map((e=>({kind:N.e.SduiEventKind.Update,sdui:e,sduiRootId:N.e.RawSduiItem.Id.create(t.sduiRootId),rev:0})))):(0,z.zi)(t)?v.some({kind:N.e.SduiEventKind.Remove,sduiRootId:N.e.RawSduiItem.Id.create(t.sduiRootId),rev:0}):(0,z.H$)(t)?v.none:(0,c.Rz)(t))),d.oA).subscribe(this._sduiEvents)}_sduiManagerLifecycleOnAlertsRefEmpty(){return this._sduiManager.onAlertsRefEmpty.subscribe(this._params.onAlertsRefEmpty)}_processAlertChanges(){return this._params.alertService.alertCollectionChanges.pipe(P.e(0),T.u()).subscribe((e=>{this._alertCollection.processChanges(e);const t=e.reduce(((e,t)=>{var i;return(0,G.nq)(t)&&"textChange"===t.reason&&e.set("textChange",(null!==(i=e.get("textChange"))&&void 0!==i?i:[]).concat(C.j.AlertId.from(t.alertId))),e}),new Map);e.length>0&&(this._sduiManager.notifyAlertsChanged(),t.size>0&&this._logger.debug("optimistically removing alerts",t),t.forEach(((e,t)=>this.pushRemovedAlerts([e,t]))))}))}}class V{constructor(e){var t;this._params=e,this._sub=new u.w,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new _.WQ(V.name),this._sduiManagerProxy=new j({sduiService:this._params.sduiService,alertService:this._params.alertService,monitoringService:this._params.monitoringService,onAlertsRefEmpty:e=>this._onSDUIManagerProxyAlertsRefEmpty(e)}),this._sduiFeedManager=new k._(this._sduiManagerProxy.state),this.feedState=this._getFeedState(),this._sduiFeedManagerLifecycleOnSelectedAlertIdChanged(),this._sduiFeedManagerLifecycleOnFeedEmpty(),this._sduiFeedManagerLifecycleOnFeedRemoved(),this._sduiFeedManagerLifecycleOnInitialFeedReady(),this._sub.add(this.feedState.subscribe((e=>this._logger.debug("feed state updated",e))))}_onSDUIManagerProxyAlertsRefEmpty(e){(0,c.zG)(this.feedState.get(),v.chain((e=>e.focusedItemId)),v.filter((t=>t===e.sduiRootId)),x.tap((()=>this._processActions(e.emptyStrongAlertRef.onEmpty,e.sduiId,e.emptyStrongAlertRef.alertIds,e.sduiId))))}_sduiFeedManagerLifecycleOnSelectedAlertIdChanged(){this._params.alertService.selectedAlertId.pipe(d.oA,m.U((e=>(0,c.zG)(this.feedState.get(),v.chain((t=>(0,c.zG)(Array.from(t.items.values()),(t=>v.fromNullable(t.find((t=>t.alertIds.includes(C.j.AlertId.from(e)))))),v.map((e=>e.id)))))))),d.oA,p.M(this.feedState.view(v.chain((e=>e.focusedItemId)))),h.h((([e,t])=>e!==v.toNullable(t)))).subscribe((([e])=>this._sduiFeedManager.focusCard(e)))}_sduiFeedManagerLifecycleOnFeedEmpty(){this._sub.add(this._sduiFeedManager.onFeedEmpty.subscribe((e=>{var t;"assistantFeed"===e.content.type?this._processActions(null!==(t=e.content.onEmpty)&&void 0!==t?t:[],e.id,[],e.id):this._params.monitoringService.notify(O._d())})))}_sduiFeedManagerLifecycleOnFeedRemoved(){this._sub.add(this._sduiFeedManager.onFeedRemove.subscribe((e=>{"assistantFeed"===e.content.type?this._processActions(e.content.onRemove,e.id,[],e.id):this._params.monitoringService.notify(O.cd())})))}_getFeedState(){const e=S.h.create(v.none);return this._sub.add(this._sduiFeedManager.feed.pipe(g.R(((e,{feedId:t,feedOrd:i,cards:n,itemIdToSelect:r})=>{const l=new Set,u=(0,c.zG)(n,b.v.reduce(e.items,((e,t,i)=>(l.add(i),e)),((e,t,i)=>(0,c.zG)(e,a.ZQ(C.j.Item.Id.eq)(i.id,i))),((e,t,i)=>(0,c.zG)(e,a.ZQ(C.j.Item.Id.eq)(i,t))))),d=(0,c.zG)(Array.from(u.values()),o.DY(s.contramap((e=>e.content))(i)),o.UI((e=>e.id))),m=Array.from(l.keys()).reduce(((e,t)=>(0,c.zG)(e,a.EG(C.j.Item.Id.eq)(t))),u),p=d.filter((e=>!l.has(e)));return{feedId:t,items:m,orderedItemIds:p,focusedItemId:(0,c.zG)(r,v.fold((()=>(0,c.zG)(e.focusedItemId,v.fold((()=>p.length>0&&0===e.orderedItemIds.length?v.some(p[0]):v.none),(e=>l.has(e)?function(e,t,i){const n=t.findIndex((t=>t===e));if(n<0)return v.none;for(let e=n+1;e<t.length;++e)if(!i.has(t[e]))return v.some(t[e]);for(let e=n-1;e>=0;--e)if(!i.has(t[e]))return v.some(t[e]);return v.none}(e,d,l):v.some(e))))),(0,c.ls)(v.fromNullable,v.fold((()=>v.fromNullable(p[0])),(e=>p.includes(C.j.Item.Id.from(e))?v.some(C.j.Item.Id.from(e)):v.fromNullable(p[0]))))))}}),{feedId:C.j.Item.Id.from(""),items:new Map,orderedItemIds:[],focusedItemId:v.none}),m.U(v.some)).subscribe(f.wW(e))),e.view()}_sduiFeedManagerLifecycleOnInitialFeedReady(){this._sub.add(this._sduiManagerProxy.state.pipe(m.U(w.a.find((e=>"default-feed"===e.id))),d.oA,y.P()).subscribe((()=>this._processActions([{type:"pushAssistantFeed",feedId:"default-feed"}],C.j.Item.Id.from("CheetahWeb:FeedService"),[],"CheetahWeb:FeedService"))))}_switchViewWithinFocusedItem(e){(0,c.zG)(this.feedState.get(),v.chain((e=>e.focusedItemId)),v.filter((t=>e.sduiRootId!==t)),x.tap((t=>this._sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t})))))}_switchViewWithinCurrentFeed(e){(0,c.zG)(this._sduiFeedManager.currentFeed,v.filter((({feedId:t})=>e.sduiRootId!==t)),x.tap((({feedId:t})=>this._sduiManagerProxy.pushSwitchView(Object.assign(Object.assign({},e),{sduiRootId:t})))))}_processActions(e,t,i,n){this._logger.debug("_processActions()",{actions:e,itemId:t,alertIdsInScope:i,sourceId:n}),e.forEach((s=>{var o;switch(s.type){case"notify":this._params.capiService.user_action({userAction:s.userAction,componentId:null!==(o=s.sourceId)&&void 0!==o?o:n});break;case"applyAlerts":{const e=i.map((e=>({alertId:e,alternativeIndex:s.alternativeIndex})));(0,I.tt)("applyAlerts",this._params.alertService.applyAlerts(e),void 0,(()=>this._params.monitoringService.notify(A.$S(e))),(t=>this._params.monitoringService.notify(E.tg(e,t))));break}case"removeAlerts":{const t=e.some((e=>"applyAlerts"===e.type)),n=i.map((e=>({alertId:e,removalReason:t?"alertApplied":"other"})));(0,I.tt)("removeAlerts",(0,c.zG)(this._params.alertService.removeAlerts(n),l.tS((()=>l.tD((()=>this._sduiManagerProxy.pushRemovedAlerts([i.map(C.j.AlertId.from),"removeAlerts"])))))),void 0,(()=>this._params.monitoringService.notify(A.q6(n))),(e=>this._params.monitoringService.notify(E.I(n,e))));break}case"highlightAlert":{const e=[{alertId:i[0],visibility:"emphasized"}];(0,I.tt)("updateAlertsVisibility",this._params.alertService.updateAlertsVisibility(e),void 0,(()=>this._params.monitoringService.notify(A.oM(e))),(t=>this._params.monitoringService.notify(E.rd(e,t))));break}case"removeRoot":this._sduiManagerProxy.pushRemovedRoot([t,"removeRoot"]);break;case"pushAssistantFeed":(0,c.zG)(this._sduiFeedManager.pushFeed(C.j.Item.Id.from(s.feedId),s.cardId),r.bimap((e=>this._params.monitoringService.notify(E.cu(e,s.feedId,s.cardId))),(()=>this._params.monitoringService.notify(A.Np(s.feedId,s.cardId)))));break;case"popAssistantFeed":this._sduiFeedManager.popFeed(v.fromNullable(s.fallbackFeed));break;case"focusAssistantCard":this._sduiFeedManager.focusCard(s.cardId);break;case"prevCard":(0,c.zG)(this.feedState.get(),v.chain((e=>(0,c.zG)(e.focusedItemId,v.map((t=>e.orderedItemIds.findIndex((e=>e===t)))),v.chain((t=>v.fromNullable(e.orderedItemIds[t-1])))))),x.tap((e=>this._sduiFeedManager.focusCard(e))));break;case"nextCard":(0,c.zG)(this.feedState.get(),v.chain((e=>(0,c.zG)(e.focusedItemId,v.map((t=>e.orderedItemIds.findIndex((e=>e===t)))),v.chain((t=>v.fromNullable(e.orderedItemIds[t+1])))))),x.tap((e=>this._sduiFeedManager.focusCard(e))));break;case"openLink":case"upgradeToPremium":case"nativeOpenAssistant":case"openCreateSnippetModal":case"newRevision":case"copyToClipboard":case"interactPopover":case"closePopover":case"hideHighlights":case"showHighlights":case"closeCard":case"openGrammarlyGo":case"openToneDetector":case"selectAlternative":case"stopApplyingAlerts":case"transition":case"openSettings":case"openFeedback":case"enablePlagiarismCheck":case"disablePlagiarismCheck":case"openLearnMore":break;case"switchView":{const e={where:s.where,selected:s.selected,sduiRootId:t};this._sduiManagerProxy.pushSwitchView(e),this._switchViewWithinFocusedItem(e),this._switchViewWithinCurrentFeed(e);break}default:(0,c.Rz)(s)}}))}processActions(e,t,i,n){this._processActions(e,t.id,i||t.alertIds,null!=n?n:t.id)}onItemFocused(e,t){this._sduiFeedManager.notifyCardFocused(e.id),t&&this.processActions(t,e)}dispose(){this._sub.unsubscribe(),this._sduiManagerProxy.dispose(),this._sduiFeedManager.dispose()}}var M,D=i(16118),H=i(66310),L=i(80900),K=i(40151),$=i(8125),Z=i(79880);class W{constructor(e){this._params=e,this._subs=new u.w,this._internalFeedState=this._params.feedService.feedState.view(v.chain((e=>(0,c.zG)(e.focusedItemId,v.chain((t=>v.fromNullable(e.items.get(t)))),v.map((t=>{const i=e.orderedItemIds.findIndex((e=>e===t.id)),n=0===i,r=i===e.orderedItemIds.length-1;return{kind:"nonEmptyState",focused:Object.assign(Object.assign({},t),{content:(0,c.zG)(q(t.content,n,r),v.getOrElse((()=>t.content)))}),isFirst:n,isLast:r}})))))),this._state=S.h.create({kind:"loadingState"}),this.state=this._state.view(),this._subs.add(this._handleNonEmptyState()),this._subs.add(this._resetLoadingAndSuccessStates()),this._subs.add(this._handleSuccessState())}processActions(e,t,i,n){this._params.feedService.processActions(e.map((e=>{switch(e.type){case"positionedClick":case"hoverStateChanged":return;default:return e}})).filter($.$K),t,i.alertRefs,n)}onMountItem(e){var t;this._params.feedService.onItemFocused(e,null===(t=v.toUndefined(function(e){if("assistantCard"===e.content.type)return v.some(e.content);if("strongAlertRef"===e.content.type&&"assistantCard"===e.content.child.type)return v.some(e.content.child);return v.none}(e)))||void 0===t?void 0:t.onFocus)}dispose(){this._subs.unsubscribe()}_handleNonEmptyState(){return this._internalFeedState.pipe(d.oA).subscribe(f.wW(this._state))}_handleSuccessState(){return this._internalFeedState.pipe(D.G(),h.h((([e,t])=>v.isSome(e)&&v.isNone(t))),m.U((()=>({kind:"successState"})))).subscribe(f.wW(this._state))}_resetLoadingAndSuccessStates(){return this._state.view("kind").pipe(H.w((e=>"loadingState"===e||"successState"===e?L.H(1e3).pipe(m.U((()=>({kind:"emptyState"})))):K.E))).subscribe(f.wW(this._state))}}function q(e,t,i){return B.ab.map(e,(e=>{if("button"===e.type&&e.name.value===String(Z.MU.ButtonPrev)){const i=t?Z.BN.Disabled:Z.BN.Enabled;return Object.assign(Object.assign({},e),{state:i})}if("button"===e.type&&e.name.value===String(Z.MU.ButtonNext)){const t=i?Z.BN.Disabled:Z.BN.Enabled;return Object.assign(Object.assign({},e),{state:t})}return e}))}function Y(e){const t=new V(e),i=new W({feedService:t});return{revisionEngine:M.wrap({singleCardFeedViewModel:i}),dispose:()=>{i.dispose(),t.dispose()}}}!function(e){const t=n.k4();e.wrap=function(e){return t.wrap(e)},e.unwrap=function(e){return t.unwrap(e)}}(M||(M={}))},21878:(e,t,i)=>{i.r(t),i.d(t,{createAlertAdded:()=>p.Tm,createAlertCollectionReset:()=>p.cT,createAlertRemoved:()=>p.qQ,createRevisionEngine:()=>g.h,createSDUIItemAdd:()=>h.K5,createSDUIItemCollectionReset:()=>h.ex,createSDUIItemRemove:()=>h.Ul,createSDUIItemUpdate:()=>h.FE,isAlertAdded:()=>p.BG,isAlertCollectionReset:()=>p.Jg,isAlertRemoved:()=>p.nq,isApplyAlertsFailed:()=>s.pS,isApplyAlertsSuccessful:()=>o.dK,isRemoveAlertsFailed:()=>s.$C,isRemoveAlertsSuccessful:()=>o.X9,isRevisionMonitoringEvent:()=>d,isRevisionMonitoringEventError:()=>l,isRevisionMonitoringEventInfo:()=>u,isRevisionMonitoringEventWarning:()=>c,isSDUIDSLParseFailed:()=>s.Gp,isSDUIDSLParseSuccessful:()=>o.bp,isSDUIFeedOnEmptyDSLActionsSkipped:()=>a.dh,isSDUIFeedOnRemoveDSLActionsSkipped:()=>a.SZ,isSDUIItemAdd:()=>h.tC,isSDUIItemCollectionChange:()=>h.Zw,isSDUIItemCollectionReset:()=>h.H$,isSDUIItemRemove:()=>h.zi,isSDUIItemUpdate:()=>h.Y9,isSDUIPushAssistantFeedFailed:()=>s.Ls,isSDUIPushAssistantFeedSuccessful:()=>o.Zs,isUpdateAlertsVisibilityFailed:()=>s.EF,isUpdateAlertsVisibilitySuccessful:()=>o.uB,revisionMonitoringEventToJSON:()=>m});var n=i(57050),r=i(8125),s=i(31384),o=i(66374),a=i(94996);function l(e){return"revision"===e.source&&"error"===e.kind}function c(e){return"revision"===e.source&&"warning"===e.kind}function u(e){return"revision"===e.source&&"info"===e.kind}const d=(0,r.Kg)(l,c,u);function m(e){return l(e)?(0,s.au)(e):c(e)?(0,a.au)(e):u(e)?(0,o.au)(e):(0,n.Rz)(e)}var p=i(71078),h=i(19125),g=i(34760)},71078:(e,t,i)=>{function n(e){return"alertAdded"===e.kind}function r(e){return{kind:"alertAdded",alertId:e}}function s(e){return"alertRemoved"===e.kind}function o(e,t){return{kind:"alertRemoved",alertId:e,reason:t}}function a(e){return"alertCollectionReset"===e.kind}function l(){return{kind:"alertCollectionReset"}}i.d(t,{BG:()=>n,Jg:()=>a,Tm:()=>r,cT:()=>l,nq:()=>s,qQ:()=>o})},31384:(e,t,i)=>{i.d(t,{$C:()=>a,EF:()=>c,Gp:()=>p,I:()=>o,Ls:()=>d,au:()=>h,cu:()=>u,jk:()=>m,pS:()=>s,rd:()=>l,tg:()=>r});var n=i(57050);function r(e,t){return{kind:"error",source:"revision",name:"applyAlertsFailed",applyAlertsInfo:e,rawError:t}}function s(e){return"applyAlertsFailed"===e.name}function o(e,t){return{kind:"error",source:"revision",name:"removeAlertsFailed",removeAlertsInfo:e,rawError:t}}function a(e){return"removeAlertsFailed"===e.name}function l(e,t){return{kind:"error",source:"revision",name:"updateAlertsVisibilityFailed",alertsVisibilityInfo:e,rawError:t}}function c(e){return"updateAlertsVisibilityFailed"===e.name}function u(e,t,i){return{kind:"error",source:"revision",name:"sduiPushAssistantFeedFailed",reason:e,feedId:t,cardId:i}}function d(e){return"sduiPushAssistantFeedFailed"===e.name}function m(e,t){return{kind:"error",source:"revision",name:"sduiDSLParseFailed",sduiRootId:e,rawError:t}}function p(e){return"sduiDSLParseFailed"===e.name}function h(e){var t,i,r,o;const l={kind:e.kind,source:e.source,name:String(e.name)};return s(e)?JSON.stringify(Object.assign(Object.assign({},l),{applyAlertsInfo:e.applyAlertsInfo,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(t=e.rawError.stack)&&void 0!==t?t:""})):a(e)?JSON.stringify(Object.assign(Object.assign({},l),{removeAlertsInfo:e.removeAlertsInfo,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(i=e.rawError.stack)&&void 0!==i?i:""})):c(e)?JSON.stringify(Object.assign(Object.assign({},l),{alertsVisibilityInfo:e.alertsVisibilityInfo,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(r=e.rawError.stack)&&void 0!==r?r:""})):p(e)?JSON.stringify(Object.assign(Object.assign({},l),{sduiRootId:e.sduiRootId,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(o=e.rawError.stack)&&void 0!==o?o:""})):d(e)?JSON.stringify(Object.assign(Object.assign({},l),{reason:e.reason,feedId:e.feedId,cardId:e.cardId})):(0,n.Rz)(e)}},66374:(e,t,i)=>{i.d(t,{$S:()=>r,Np:()=>m,X9:()=>a,Zs:()=>p,_W:()=>u,au:()=>h,bp:()=>d,dK:()=>s,oM:()=>l,q6:()=>o,uB:()=>c});var n=i(57050);function r(e){return{kind:"info",source:"revision",name:"applyAlertsSuccessful",applyAlertsInfo:e}}function s(e){return"applyAlertsSuccessful"===e.name}function o(e){return{kind:"info",source:"revision",name:"removeAlertsSuccessful",removeAlertsInfo:e}}function a(e){return"removeAlertsSuccessful"===e.name}function l(e){return{kind:"info",source:"revision",name:"updateAlertsVisibilitySuccessful",alertsVisibilityInfo:e}}function c(e){return"updateAlertsVisibilitySuccessful"===e.name}function u(e){return{kind:"info",source:"revision",name:"sduiDSLParseSuccessful",sduiRootId:e}}function d(e){return"sduiDSLParseSuccessful"===e.name}function m(e,t){return{kind:"info",source:"revision",name:"sduiPushAssistantFeedSuccessful",feedId:e,cardId:t}}function p(e){return"sduiPushAssistantFeedSuccessful"===e.name}function h(e){const t={kind:e.kind,source:e.source,name:String(e.name)};return s(e)?JSON.stringify(Object.assign(Object.assign({},t),{applyAlertsInfo:e.applyAlertsInfo})):a(e)?JSON.stringify(Object.assign(Object.assign({},t),{removeAlertsInfo:e.removeAlertsInfo})):c(e)?JSON.stringify(Object.assign(Object.assign({},t),{alertsVisibilityInfo:e.alertsVisibilityInfo})):d(e)?JSON.stringify(Object.assign(Object.assign({},t),{sduiRootId:e.sduiRootId})):p(e)?JSON.stringify(Object.assign(Object.assign({},t),{feedId:e.feedId,cardId:e.cardId})):(0,n.Rz)(e)}},94996:(e,t,i)=>{i.d(t,{SZ:()=>l,_d:()=>s,au:()=>c,cd:()=>a,dh:()=>o});var n=i(57050),r=i(8125);function s(){return{kind:"warning",source:"revision",name:"sduiFeedOnEmptyDSLActionsSkipped"}}function o(e){return"sduiFeedOnEmptyDSLActionsSkipped"===e.name}function a(){return{kind:"warning",source:"revision",name:"sduiFeedOnRemoveDSLActionsSkipped"}}function l(e){return"sduiFeedOnRemoveDSLActionsSkipped"===e.name}function c(e){return(0,r.Kg)(o,l)(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name)}):(0,n.Rz)(e)}},19125:(e,t,i)=>{function n(e){return"sduiItemAdd"===e.kind}function r(e,t){return{kind:"sduiItemAdd",sduiRootId:e,sdui:t}}function s(e){return"sduiItemUpdate"===e.kind}function o(e,t){return{kind:"sduiItemUpdate",sduiRootId:e,sdui:t}}function a(e){return"sduiItemRemove"===e.kind}function l(e){return{kind:"sduiItemRemove",sduiRootId:e}}function c(e){return"sduiItemCollectionReset"===e.kind}function u(){return{kind:"sduiItemCollectionReset"}}i.d(t,{FE:()=>o,H$:()=>c,K5:()=>r,Ul:()=>l,Y9:()=>s,Zw:()=>d,ex:()=>u,tC:()=>n,zi:()=>a});const d=(0,i(8125).Kg)(n,s,a,c)},37306:(e,t,i)=>{var n;i.d(t,{x:()=>n}),function(e){let t,i;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions"}(i=e.Source||(e.Source={}))}(n||(n={}))},15021:(e,t,i)=>{i.d(t,{_:()=>n});var n,r=i(5114),s=i(57050),o=i(8125);!function(e){let t,i;function n(e){return e.kind===t.activeLimited||e.kind===t.activeUnlimited}function a(e){return e.kind===t.passive}function l(e){return e.kind===t.unknown}function c(e){return n(e)||l(e)}function u(i){if(void 0===i)return{kind:t.unknown,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}};const n=e.Active.parseRefillDate(i.usage.refillDate);return i.usage.promptsRemaining<0?{kind:t.unknown,userSettings:i.settings}:1e4===i.usage.promptsAllocated&&i.usage.promptsRemaining>0?{kind:t.activeUnlimited,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}:i.usage.promptsRemaining>0?{kind:t.activeLimited,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}:{kind:t.passive,promptsRemaining:i.usage.promptsRemaining,promptsAllocated:i.usage.promptsAllocated,refillDate:n,userSettings:i.settings}}!function(e){e.activeLimited="activeLimited",e.activeUnlimited="activeUnlimited",e.passive="passive",e.unavailable="unavailable",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,o.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function i(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=i,e.daysUntilRefillDate=function(e){return Math.floor(i(e)/24)}}(i=e.Active||(e.Active={})),e.isActive=n,e.isActiveUnlimited=function(e){return e.kind===t.activeUnlimited},e.isPassive=a,e.isActiveOrPassive=(0,o.Kg)(n,a),e.isUnknown=l,e.isUsable=c,e.isVisible=function(e){return c(e)||a(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUserState=u,e.updateUsage=function(e,t){return u({usage:t,settings:e.userSettings})},e.getPromptsAllocated=function(t){return(0,s.zG)(t,r.fromPredicate(e.isActiveOrPassive),r.map((e=>e.promptsAllocated)))}}(n||(n={}))},62074:(e,t,i)=>{i.d(t,{aU:()=>s,pY:()=>n,Xy:()=>r,W2:()=>M.W2,Cl:()=>P,ix:()=>E,ec:()=>N.e,KE:()=>M.KE,JZ:()=>T,_y:()=>o,nF:()=>N.n,x2:()=>_.x,iQ:()=>M.iQ,_4:()=>R._,TG:()=>O.T,lG:()=>B.l,H3:()=>y,s3:()=>x,JS:()=>H,x4:()=>b,z_:()=>f.z_,wR:()=>f.wR,A4:()=>M.A4,GA:()=>M.GA,Jp:()=>M.Jp,bn:()=>M.bn,e4:()=>M.e4,Z7:()=>C,r_:()=>M.r_,Zq:()=>A.Z,Bs:()=>F,T2:()=>M.T2,Nk:()=>M.Nk,pR:()=>M.pR,LA:()=>w.L,bm:()=>w.b,nI:()=>V,e7:()=>f.e7,dr:()=>f.dr,jQ:()=>f.jQ,Gh:()=>f.Gh});var n,r,s,o,a=i(31699),l=i(73975),c=i(45701),u=i(17889),d=i(57050),m=i(22232),p=i(8125),h=i(5114),g=i(13004),f=i(9023);!function(e){let t,i,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(i=e.StringValue||(e.StringValue={})),function(e){e.create=function(e,t){return{id:e,kind:"radio",value:t}}}(n=e.RadioValue||(e.RadioValue={}))}(n||(n={})),function(e){e.match=e=>t=>{const i=t.kind;return"string"===i?e.string(t):"radio"===i?e.radio(t):void(0,m.L0)(i)}}(r||(r={})),function(e){function t(e){return"followUpQuestion"===e.kind}function i(e){return"quickAction"===e.kind}function r(e){return"skillAction"===e.kind}let s,o,m,y,v,x,b,S;e.isFollowUpQuestionActionValue=t,e.isQuickActionValue=i,e.isSkillActionValue=r,e.isListableActionValue=(0,p.Kg)(t,i,r),e.isUserPromptActionValue=function(e){return"userPrompt"===e.kind},e.isQuickRewriteActionValue=function(e){return"quickRewrite"===e.kind},e.isFollowUpQuestionActionInput=function(e){return"followUpQuestion"===e.kind},e.isQuickActionInput=function(e){return"quickAction"===e.kind},e.isSkillActionInput=function(e){return"skillAction"===e.kind},e.createFollowUpQuestionActionInputOrQuickActionInput=function(t,i,r,s){var l;const c=Array.from(new Set(i.map((e=>e.group)).filter((0,d.ff)(m.isPinned)))).findIndex((e=>t.group===e)),p=m.isPinned(t.group)?o.knownStores.pinned:o.knownStores.ideas,y={id:e.Id.create(t.id),iconUrl:t.iconUrl,store:{id:p,label:m.isPinned(t.group)?"":f.wR.isQuickReply(r)?"Ways to reply":h.isSome(s)?`Work with: ${s.value}`:"Ideas for you",view:m.isPinned(t.group)?e.Store.View.pinned:e.Store.View.normal,rank:null!==(l=o.ranks[p])&&void 0!==l?l:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:f.wR.isQuickReply(r)?h.none:h.some(3)},group:{id:m.Id.create(t.group),label:t.group,rank:c>-1?c:Number.MAX_SAFE_INTEGER},label:(0,a.sanitize)(t.label,{ALLOWED_TAGS:g.ap}),searchLabel:(0,a.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesTextType:h.fromNullable(t.generatesTextType)};if(1===t.args.length){const e=t.args[0],i={id:n.Id.create(e.name),label:e.label,hints:(0,d.zG)(h.fromNullable(e.hint),h.map((e=>({header:e.header,items:e.text}))))};return"string"===e.valueType?h.some(Object.assign(Object.assign({},y),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},i),{kind:"string"})],generatesTextType:h.fromNullable(t.generatesTextType)})):"radioButtonGroup"===e.valueType?(0,d.zG)(e.radioButtonGroupValues,u.nI,h.map((e=>Object.assign(Object.assign({},y),{kind:"followUpQuestion",args:[Object.assign(Object.assign({},i),{kind:"radio",radioOptions:e})],generatesTextType:h.fromNullable(t.generatesTextType)})))):h.none}return 0===t.args.length?h.some(Object.assign(Object.assign({},y),{kind:"quickAction",args:[]})):h.none},function(e){e.create=function(e){return e},e.eq=l.yv}(s=e.Id||(e.Id={})),function(e){let t,i;!function(e){e.eq=l.yv}(t=e.Id||(e.Id={})),function(e){e.normal="normal",e.pinned="pinned"}(i=e.View||(e.View={})),e.knownStores={ideas:"ideas",pinned:"pinned",appActions:"app-actions"},e.ranks={[e.knownStores.ideas]:0,[e.knownStores.pinned]:1,[e.knownStores.appActions]:2}}(o=e.Store||(e.Store={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=l.yv}(t=e.Id||(e.Id={})),e.isPinned=function(e){return"pinned"===e}}(m=e.Group||(e.Group={})),function(e){e.fromTextInput=function(e,t){return Object.assign(Object.assign({},e),{args:[n.StringValue.create(e.args[0].id,t)]})},e.fromRadioInput=function(e,t){return Object.assign(Object.assign({},e),{args:[n.RadioValue.create(e.args[0].id,t)]})}}(y=e.FollowUpQuestionActionValue||(e.FollowUpQuestionActionValue={})),function(t){t.fromSkill=function(t,i){var n;const r=o.knownStores.appActions;return{kind:"skillAction",id:s.create(t.id),store:{id:r,label:"App actions",view:e.Store.View.normal,rank:null!==(n=o.ranks[r])&&void 0!==n?n:Number.MAX_SAFE_INTEGER,maxCountBeforeClipping:f.wR.isQuickReply(i)?h.some(1):h.some(3)},group:{id:m.Id.create("app-actions"),label:"App actions",rank:Number.MAX_SAFE_INTEGER},iconUrl:t.iconUrl,label:(0,a.sanitize)(t.displayName,{ALLOWED_TAGS:g.ap}),searchLabel:(0,a.sanitize)(t.displayName,{ALLOWED_TAGS:[]}),searchTags:t.tags,generatesTextType:h.none,args:[],skill:t}}}(v=e.SkillActionInput||(e.SkillActionInput={})),function(e){e.ordByGroup=c.contramap((e=>e.group.rank))(c.ordNumber)}(x=e.ListableActionInput||(e.ListableActionInput={})),function(e){e.fromInput=function(e,t,i,r){return Object.assign(Object.assign({},e),{arg:n.StringValue.create(e.arg.id,t),useReferences:i,omitReferenceIds:r})}}(b=e.UserPromptActionValue||(e.UserPromptActionValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(S=e.QuickRewriteActionValue||(e.QuickRewriteActionValue={}))}(s||(s={})),function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind}}(o||(o={}));var y,v=i(64015);!function(e){let t,i;e.fromOuterContext=function(e){var i,n,r,s;const o=e=>(0,d.zG)(h.fromNullable(null==e?void 0:e.from),h.chain(v.YM),h.fold((()=>t.empty),t.fromNameAndEmailString)),a=e=>(0,d.zG)(h.fromNullable(null==e?void 0:e.to),h.chain(u.c2),h.map(u.UI(t.fromNameAndEmailString)),h.getOrElseW((()=>[]))),l=(0,d.zG)(h.fromNullable(e.items),h.chain(v.YM),h.getOrElseW((()=>{})));return{previousMessageInfo:{author:o(null==l?void 0:l.people),directRecipients:a(null==l?void 0:l.people),text:null!==(i=null==l?void 0:l.text)&&void 0!==i?i:""},title:null!==(n=e.title)&&void 0!==n?n:"",author:o(e.people),directRecipients:a(e.people),indirectRecipients:(0,d.zG)(h.fromNullable(null===(r=e.people)||void 0===r?void 0:r.cc),h.chain(u.c2),h.map(u.UI(t.fromNameAndEmailString)),h.getOrElseW((()=>[]))),undisclosedRecipients:(0,d.zG)(h.fromNullable(null===(s=e.people)||void 0===s?void 0:s.bcc),h.chain(u.c2),h.map(u.UI(t.fromNameAndEmailString)),h.getOrElseW((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,d.zG)(h.fromNullable(t.match(/^([^<]*)<(.*)>$/)),h.map((e=>{var t,i,n,r;return{name:null!==(i=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==i?i:"",email:null!==(r=null===(n=e[2])||void 0===n?void 0:n.trim())&&void 0!==r?r:""}})),h.getOrElse((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(i=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(y||(y={}));var x,b,S=i(8709),k=i(95195);!function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={})),e.create=function(t){return Object.assign(Object.assign({},t),{id:e.Id.create(t.id),url:h.fromNullable(t.url),contextText:h.none})}}(x||(x={})),function(e){let t,i,n,r,s,o,a;function c(e){return"complete"===e.kind}function m(e){return"history"===e.kind}function f(e){return"inProgressOngoing"===e.kind}function y(e){return"inProgressPending"===e.kind}!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e,10)},e.eq=l.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(i=e.Feedback||(e.Feedback={})),function(e){e.insert="insert",e.copy="copy"}(n=e.PrimaryAction||(e.PrimaryAction={})),e.hasId=function(e){return"id"in e},e.isComplete=c,e.isHistory=m,e.isAIUsageNotification=function(e){return"aiUsageNotification"===e.kind},e.isStandardCompletedResult=(0,p.Kg)(c,m),e.isInProgressOngoing=f,e.isInProgressPending=y,e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,p.Kg)(f,y),function(e){e.generic="generic",e.user="user"}(r=e.GeneratedTextVoice||(e.GeneratedTextVoice={})),function(t){t.createFromResultMessage=function(t){return(0,d.zG)(t.withVoiceText,(i=>{var n;const r=(0,d.zG)((0,g.DO)(null===(n=t.text)||void 0===n?void 0:n.delta),h.getOrElse((()=>new S.i)));return(0,d.zG)((0,g.DO)(null==i?void 0:i.delta),k.fromOption((()=>r)),k.map((i=>({generic:r,user:i,preferVoice:!0===(null==t?void 0:t.showVoiceTextByDefault)?e.GeneratedTextVoice.user:e.GeneratedTextVoice.generic}))))}))}}(s=e.ResultDelta||(e.ResultDelta={})),function(t){t.createFromCard=function(t){return{kind:"history",id:e.Id.create(t.id),header:"action"===t.title.kind?{label:t.title.label,iconUrl:""!==t.title.iconUrl.trim()?h.some(t.title.iconUrl):h.none,copiablePrompt:h.none}:{label:t.title.text,iconUrl:h.none,copiablePrompt:""!==t.title.text.trim()?h.some(t.title.text):h.none},replacementDelta:s.createFromResultMessage({text:t.text,withVoiceText:t.text.plain===t.withVoiceText.plain?void 0:t.withVoiceText,showVoiceTextByDefault:t.text.plain===t.withVoiceText.plain?void 0:t.showVoiceTextByDefault}),primaryAction:h.some(e.PrimaryAction.insert),references:(0,d.zG)(t.references,v.UI(x.create),u.c2)}}}(o=e.History||(e.History={})),function(e){e.fromInProgressResult=function(e,t){return Object.assign(Object.assign({},e),{kind:"aiUsageNotification",text:t})}}(a=e.AIUsageNotification||(e.AIUsageNotification={}))}(b||(b={}));var C,w=i(9295),_=i(37306),I=i(71249);!function(e){let t,i,n,r,s,o,a,l,c;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive",e.copy="copy",e.generationCompleted="generationCompleted"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner",e.keepVoiceTag="keepTag",e.removeVoiceTag="removeTag",e.toggleToMyVoice="toggleToMyVoice",e.toggleToNeutral="toggleToNeutral"}(t=e.UserAction||(e.UserAction={}))}(i=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(n=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(r=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(s=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view"}(t=e.UserAction||(e.UserAction={}))}(o=e.HistoryButton||(e.HistoryButton={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(a=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close",e.readyToInteract="readyToInteract"}(t=e.UserAction||(e.UserAction={}))}(l=e.Assistant||(e.Assistant={})),function(e){let t;!function(e){e.dontShowOnDocument="dontShowOnDocument",e.dontShowForever="dontShowForever"}(t=e.UserAction||(e.UserAction={}))}(c=e.AIUsageNotification||(e.AIUsageNotification={})),e.getComponentId=function(e,t,i,r={}){const s=(0,d.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===n.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"historyButton":case"prompt":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":return t;default:return(0,m.L0)(t)}}));return(0,d.zG)(h.fromNullable(i),h.map((e=>`cheetah:history-card:${e}`)),h.getOrElse((()=>`cheetah:${s}${t?`:${t}`:""}`)),(o=r,e=>(0,d.zG)(Object.entries(o),I.u4(e,((e,[t,i])=>{const n=e.includes("?")?"&":"?";return e+`${n}${t}=${i}`})))));var o},e.getUserAction=function(e){return(0,d.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===n.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===l.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"historyButton":case"onboardingPopup":case"BTSonboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":case"onboardingReferencesTooltip":case"onboardingHistoryTooltip":case"aiUsageNotification":return e.userAction;default:return(0,m.L0)(t)}}))}}(C||(C={}));var E,A=i(95010),O=i(47388),R=(i(41458),i(15021));!function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.toolbarCloseButtonClick="toolbarCloseButtonClick",e.toolbarGoBackButtonClick="toolbarGoBackButtonClick",e.toolbarVoiceButtonClick="toolbarVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardOkButtonClick="errorCardOkButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.resultCardCopy="resultCardCopy",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange",e.voiceProfileTabChange="voiceProfileTabChange",e.voiceTagClick="voiceTagClick",e.voiceTagPopoverCloseButtonClick="voiceTagPopoverCloseButtonClick",e.voiceTagPopoverKeepButtonClick="voiceTagPopoverKeepButtonClick",e.voiceTagPopoverRemoveButtonClick="voiceTagPopoverRemoveButtonClick",e.applyVoiceToWritingCheckboxChange="applyVoiceToWritingCheckboxChange",e.voiceDialectDropdownSelectionChange="voiceDialectDropdownSelectionChange",e.voiceRoleDropdownSelectionChange="voiceRoleDropdownSelectionChange",e.voiceSelectionsSaveButtonClick="voiceSelectionsSaveButtonClick",e.voiceSelectionsCancelButtonClick="voiceSelectionsCancelButtonClick",e.voiceSelectionsEditButtonClick="voiceSelectionsEditButtonClick",e.surveyRatingSelectionChange="surveyRatingSelectionChange",e.surveyOpenAnswerChange="surveyOpenAnswerChange",e.surveySubmitButtonClick="surveySubmitButtonClick",e.surveyKeyPressShiftEnter="surveyKeyPressShiftEnter",e.surveyCancelButtonClick="surveyCancelButtonClick",e.surveyCloseButtonClick="surveyCloseButtonClick",e.regenerateWithoutReferenceButtonClick="regenerateWithoutReferenceButtonClick",e.restoreHistoryButtonClick="restoreHistoryButtonClick",e.userPromptSubmit="userPromptSubmit",e.radioOptionsSubmitButtonClick="radioOptionsSubmitButtonClick",e.radioOptionsCancelButtonClick="radioOptionsCancelButtonClick",e.removeSelectionContextClick="removeSelectionContextClick",e.selectionContextInteraction="selectionContextInteraction"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,p.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick),e.is(e.Kind.regenerateWithoutReferenceButtonClick)),e.isSurveyAction=(0,p.Kg)(e.is(e.Kind.surveyOpenAnswerChange),e.is(e.Kind.surveySubmitButtonClick),e.is(e.Kind.surveyKeyPressShiftEnter),e.is(e.Kind.surveyCancelButtonClick),e.is(e.Kind.surveyCloseButtonClick),e.is(e.Kind.surveyRatingSelectionChange)),e.isSurveyImplicitDismissAction=(0,p.Kg)(e.is(e.Kind.promptSubmitButtonClick),e.is(e.Kind.actionBrickClick),e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.resultCardHeaderClick))}(E||(E={})),(0,m.L0)(void 0);var T,P,U,B=i(8887),N=i(34795),G=i(17771),z=i(73129);!function(e){let t;function i(e){switch(e){case t.sensitiveResult:return{header:"Assistance is unavailable",text:"Assistance is unavailable for that text or prompt.\nTry something else."};case t.overload:return{header:"Couldn’t generate text",text:"We’re handling a lot of prompts right now and couldn’t generate that text.\nPlease try again later."};case t.unsupportedLanguage:return{header:"Hmm, don’t know that language",text:"Assistance is currently only available for English."};case t.critical:case t.timeout:case t.emptyResult:case t.truncatedResult:case t.usageExceeded:return{header:"Something went wrong",text:"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."};default:return(0,d.Rz)(e)}}!function(e){e.create=function(t){switch(t){case z.yb.oS.Generic:return e.critical;case z.yb.oS.Overflow:return e.truncatedResult;case z.yb.oS.PromptsLimitExceeded:return e.usageExceeded;case z.yb.oS.SensitiveContent:return e.sensitiveResult;case z.yb.oS.ServerOverloaded:return e.overload;case z.yb.oS.UnsupportedLanguage:return e.unsupportedLanguage;default:return(0,d.Rz)(t)}}}(t=e.Reason||(e.Reason={})),function(e){e.emptyResult="emptyResult",e.truncatedResult="truncatedResult",e.sensitiveResult="sensitiveResult",e.usageExceeded="usageExceeded",e.unsupportedLanguage="unsupportedLanguage",e.overload="overload",e.timeout="timeout",e.critical="critical"}(t=e.Reason||(e.Reason={})),e.create=function(e){const n=t.create(e.kind),r=(0,d.zG)(G.Y(h.Applicative)({header:(0,d.zG)(h.fromNullable(e.title),h.filter((e=>""!==e.trim()))),text:(0,d.zG)(h.fromNullable(e.text),h.filter((e=>""!==e.trim())))}),h.getOrElse((()=>i(n))));return Object.assign({reason:n},r)},e.createCriticalError=function(e){return{reason:t.critical,header:"Something went wrong",text:e?"We’re not sure what happened.\nPlease try again later.":"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:t.emptyResult},i(t.emptyResult))}}(T||(T={})),function(e){let t;!function(e){e.feedbackSubmitted="feedbackSubmitted",e.voiceTagRemoved="voiceTagRemoved"}(t=e.Kind||(e.Kind={}))}(P||(P={})),function(e){let t;e.create=function(e,i,n,r,s){return{id:t.create(e),iconUrl:i,displayName:n,srcUrl:r,tags:s}},function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(U||(U={}));var F,j=i(80800);!function(e){let t;!function(e){let t;!function(e){e.Rating="rating",e.Feedback="feedback",e.Completed="completed",e.Closed="closed"}(t=e.Type||(e.Type={})),e.isOpen=e=>e!==t.Closed,e.toCAPIStage=e=>{switch(e){case t.Rating:return j.v0.Survey.Data.OpenAnswerScoreSurvey.scoreStage;case t.Feedback:case t.Closed:case t.Completed:return j.v0.Survey.Data.OpenAnswerScoreSurvey.submitStage;default:(0,m.L0)(e)}}}(t=e.Stage||(e.Stage={}))}(F||(F={}));var V,M=i(1186);!function(e){const t={"Cheetah/_System/Push/SimplifyRewrite":{copiablePrompt:h.none,iconUrl:h.some("https://assets.grammarly.com/cheetah/v1/actions/simplify.svg"),label:"Simplify your text"},"Cheetah/_System/Push/ImproveParagraph":{copiablePrompt:h.none,iconUrl:h.some("https://assets.grammarly.com/cheetah/v1/actions/improve.svg"),label:"Improve your text"}};e.toPreviousText=function(e){return(0,d.zG)(e,h.fromPredicate((e=>e.alertPname in t)),h.map((e=>({kind:"writerExpert",suggestionId:e.alertId,pname:e.alertPname,text:e.replacementText}))))},e.getInitialResult=function(e){const i=k.left((new S.i).insert(e.replacementText));return(0,d.zG)(h.fromNullable(t[e.alertPname]),h.map((t=>({kind:"complete",id:b.Id.create(0),header:t,replacementDelta:i,text:e.replacementText,references:h.none,source:h.none,changesSummary:h.none,timestamp:Date.now(),isRephraseable:!1,primaryAction:h.some(b.PrimaryAction.insert),boundaryContextId:h.none}))))}}(V||(V={}));var D,H,L=i(69243),K=i(59502),$=i(73915);!function(e){e.Codec=L.readonly(L.type({action:L.readonly(L.string)}))}(D||(D={})),function(e){let t,i,n;!function(e){e.Codec=L.readonly(L.type({action:L.readonly(L.literal("error"))})),e.is=function(t){return e.Codec.is(t)}}(t=e.Error||(e.Error={})),function(e){e.Codec=L.readonly(L.type({action:L.readonly(L.literal("show_survey"))})),e.is=function(t){return e.Codec.is(t)}}(i=e.ShowSurvey||(e.ShowSurvey={})),function(e){let t,i;!function(e){e.Codec=L.readonly(L.type({action:L.readonly(L.literal("cheetah")),id:L.readonly(L.number)})),e.is=e.Codec.is}(t=e.CheetahAck||(e.CheetahAck={})),function(e){e.is=$.n(z.Pb.extend(K.Schemable)({any:K.id(),sensitiveString:K.string,sensitiveDelta:K.id()}))(z.Pb.ServerMessageImplementations).is}(i=e.CheetahProtocolServerMessage||(e.CheetahProtocolServerMessage={})),e.is=(0,p.Kg)(t.is,i.is)}(n=e.CheetahInboundCAPIMessage||(e.CheetahInboundCAPIMessage={})),e.is=function(e){return t.is(e)||i.is(e)||n.is(e)}}(H||(H={}));H.CheetahInboundCAPIMessage.is},1186:(e,t,i)=>{i.d(t,{W2:()=>n,KE:()=>o,iQ:()=>l,A4:()=>c,GA:()=>u,Jp:()=>m,bn:()=>p,e4:()=>h,r_:()=>g,T2:()=>f,Nk:()=>y,pR:()=>v,YP:()=>N,iu:()=>U,DT:()=>B});var n,r=i(8125),s=i(57050);!function(e){let t;!function(e){e.create=function(e){return{source:"assistant",kind:"error",name:"assistantCloseFailed",rawError:e}},e.is=function(e){return"assistantCloseFailed"===e.name}}(t=e.AssistantCloseFailed||(e.AssistantCloseFailed={})),e.toJSON=function(e){var i;return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(i=e.rawError.stack)&&void 0!==i?i:""}):(0,s.Rz)(e)}}(n||(n={}));var o,a,l,c,u,d=i(22232);!function(e){let t,i;!function(e){e.create=function(e,t){return{kind:"error",source:"capi",name:"unsanitizeTextOnInboundCAPIMessageFailed",capiMessageAction:e,rawError:t}},e.is=function(e){return"unsanitizeTextOnInboundCAPIMessageFailed"===e.name}}(t=e.UnsanitizeTextOnInboundCAPIMessageFailed||(e.UnsanitizeTextOnInboundCAPIMessageFailed={})),function(e){e.create=function(e,t){return{kind:"error",source:"capi",name:"sanitizeTextOnOutboundCAPIMessageFailed",capiMessageAction:e,rawError:t}},e.is=function(e){return"sanitizeTextOnOutboundCAPIMessageFailed"===e.name}}(i=e.SanitizeTextOnOutboundCAPIMessageFailed||(e.SanitizeTextOnOutboundCAPIMessageFailed={})),e.toJSON=function(e){var n;return(0,r.Kg)(t.is,i.is)(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),capiMessageAction:e.capiMessageAction,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(n=e.rawError.stack)&&void 0!==n?n:""}):(0,d.L0)(e)}}(o||(o={})),function(e){let t;!function(e){e.create=function(e){return{source:"experiment",kind:"error",name:"fetchTreatmentsFailed",rawError:e}},e.is=function(e){return"fetchTreatmentsFailed"===e.name}}(t=e.FetchTreatmentsFailed||(e.FetchTreatmentsFailed={})),e.toJSON=function(e){var i;return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(i=e.rawError.stack)&&void 0!==i?i:""}):(0,s.Rz)(e)}}(a||(a={})),function(e){let t;!function(e){e.create=function(e){return{source:"feedback",kind:"error",name:"submitFeedbackFailed",rawError:e}},e.is=function(e){return"submitFeedbackFailed"===e.name}}(t=e.SubmitFeedbackFailed||(e.SubmitFeedbackFailed={})),e.toJSON=function(e){var i;return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(i=e.rawError.stack)&&void 0!==i?i:""}):(0,s.Rz)(e)}}(l||(l={})),function(e){let t,i,n,o,a,l,c,u,d,m,p,h,g;!function(e){e.create=function(e){return{source:"session",kind:"error",name:"getContextFailed",sessionMode:e}},e.is=function(e){return"getContextFailed"===e.name}}(t=e.GetContextFailed||(e.GetContextFailed={})),function(e){e.create=function(e){return{source:"session",kind:"error",name:"getHistoryFailed",sessionMode:e}},e.is=function(e){return"getHistoryFailed"===e.name}}(i=e.GetHistoryFailed||(e.GetHistoryFailed={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"actionFailed",sessionMode:e,actionId:t}},e.is=function(e){return"actionFailed"===e.name}}(n=e.ActionFailed||(e.ActionFailed={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"waitForContextTimeout",sourceCommand:t,sessionMode:e}},e.is=function(e){return"waitForContextTimeout"===e.name}}(o=e.WaitForContextTimeout||(e.WaitForContextTimeout={})),function(e){e.create=function(e){return{source:"session",kind:"error",name:"waitForHistoryTimeout",sessionMode:e}},e.is=function(e){return"waitForHistoryTimeout"===e.name}}(a=e.WaitForHistoryTimeout||(e.WaitForHistoryTimeout={})),function(e){e.create=function(e){return{source:"session",kind:"error",name:"waitForResultTimeout",sessionMode:e}},e.is=function(e){return"waitForResultTimeout"===e.name}}(l=e.WaitForResultTimeout||(e.WaitForResultTimeout={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"waitForAckTimeout",sourceCommand:t,sessionMode:e}},e.is=function(e){return"waitForAckTimeout"===e.name}}(c=e.WaitForAckTimeout||(e.WaitForAckTimeout={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"setVoiceProfileFailed",sessionMode:e,rawError:t}},e.is=function(e){return"setVoiceProfileFailed"===e.name}}(u=e.SetVoiceProfileFailed||(e.SetVoiceProfileFailed={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"setNewVoiceProfileFailed",sessionMode:e,rawError:t}},e.is=function(e){return"setNewVoiceProfileFailed"===e.name}}(d=e.SetNewVoiceProfileFailed||(e.SetNewVoiceProfileFailed={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"capiErrorUnhandled",sessionMode:e,capiError:t}},e.is=function(e){return"capiErrorUnhandled"===e.name}}(m=e.CAPIErrorUnhandled||(e.CAPIErrorUnhandled={})),function(e){e.create=function(e,t,i){return{source:"session",kind:"error",name:"regenerateResultFailed",sessionMode:e,resultId:t,reason:i}},e.is=function(e){return"regenerateResultFailed"===e.name}}(p=e.RegenerateResultFailed||(e.RegenerateResultFailed={})),function(e){e.create=function(e,t){return{source:"session",kind:"error",name:"stopInProgressResultFailed",sessionMode:e,rawError:t}},e.is=function(e){return"stopInProgressResultFailed"===e.name}}(h=e.StopInProgressResultFailed||(e.StopInProgressResultFailed={})),function(e){e.create=function(e,t,i){return{source:"session",kind:"error",name:"getTextFailed",sessionMode:e,textRange:t,rawError:i}},e.is=function(e){return"getTextFailed"===e.name}}(g=e.GetTextFailed||(e.GetTextFailed={})),e.toJSON=function(e){var f,y;const v={kind:e.kind,source:e.source,name:String(e.name),sessionMode:e.sessionMode};return(0,r.Kg)(t.is,i.is,l.is,a.is)(e)?JSON.stringify(v):n.is(e)?JSON.stringify(Object.assign(Object.assign({},v),{actionId:e.actionId.toString()})):(0,r.Kg)(c.is,o.is)(e)?JSON.stringify(Object.assign(Object.assign({},v),{sourceCommand:e.sourceCommand})):(0,r.Kg)(u.is,d.is,h.is)(e)?JSON.stringify(Object.assign(Object.assign({},v),{rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(f=e.rawError.stack)&&void 0!==f?f:""})):m.is(e)?JSON.stringify(Object.assign(Object.assign({},v),{errorCode:e.capiError.error,errorSeverity:String(e.capiError.severity)})):p.is(e)?JSON.stringify(Object.assign(Object.assign({},v),{resultId:e.resultId,reason:e.reason})):g.is(e)?JSON.stringify(Object.assign(Object.assign({},v),{textRange:e.textRange,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(y=e.rawError.stack)&&void 0!==y?y:""})):(0,s.Rz)(e)}}(c||(c={})),function(e){let t,i,n,o;!function(e){e.create=function(e){return{source:"session",kind:"info",name:"getContextSuccessful",sessionMode:e}},e.is=function(e){return"getContextSuccessful"===e.name}}(t=e.GetContextSuccessful||(e.GetContextSuccessful={})),function(e){e.create=function(e){return{source:"session",kind:"info",name:"getHistorySuccessful",sessionMode:e}},e.is=function(e){return"getHistorySuccessful"===e.name}}(i=e.GetHistorySuccessful||(e.GetHistorySuccessful={})),function(e){e.create=function(e,t){return{source:"session",kind:"info",name:"actionSuccessful",sessionMode:e,actionId:t}},e.is=function(e){return"actionSuccessful"===e.name}}(n=e.ActionSuccessful||(e.ActionSuccessful={})),function(e){e.create=function(e,t,i){return{source:"session",kind:"info",name:"getTextSuccessful",sessionMode:e,textRange:t,text:i}},e.is=function(e){return"getTextSuccessful"===e.name}}(o=e.GetTextSuccessful||(e.GetTextSuccessful={})),e.toJSON=function(e){const a={kind:e.kind,source:e.source,name:String(e.name),sessionMode:e.sessionMode};return(0,r.Kg)(t.is,i.is)(e)?JSON.stringify(a):n.is(e)?JSON.stringify(Object.assign(Object.assign({},a),{actionId:e.actionId.toString()})):o.is(e)?JSON.stringify(Object.assign(Object.assign({},a),{textRange:e.textRange,text:e.text})):(0,s.Rz)(e)}}(u||(u={}));var m,p,h,g,f,y,v,x=i(5114);function b(e){return"error"===e.kind&&"assistant"===e.source}function S(e){return"error"===e.kind&&"capi"===e.source}function k(e){return"error"===e.kind&&"experiment"===e.source}function C(e){return"error"===e.kind&&"feedback"===e.source}function w(e){return"info"===e.kind&&"session"===e.source}function _(e){return"warning"===e.kind&&"session"===e.source}function I(e){return"error"===e.kind&&"session"===e.source}function E(e){return"info"===e.kind&&"skill"===e.source}function A(e){return"error"===e.kind&&"skill"===e.source}function O(e){return"error"===e.kind&&"uphook"===e.source}function R(e){return"info"===e.kind&&"userSurvey"===e.source}function T(e){return"warning"===e.kind&&"userSurvey"===e.source}function P(e){return"error"===e.kind&&"userSurvey"===e.source}!function(e){let t,i,n,o;!function(e){e.create=function(e,t,i){return{source:"session",kind:"warning",name:"unexpectedChunkReceived",sessionMode:e,expectedInProgressResultId:t,receivedInProgressResultId:i}},e.is=function(e){return"unexpectedChunkReceived"===e.name}}(t=e.UnexpectedChunkReceived||(e.UnexpectedChunkReceived={})),function(e){e.create=function(e,t,i){return{source:"session",kind:"warning",name:"unexpectedResultReceived",sessionMode:e,expectedInProgressResultId:t,receivedInProgressResultId:i}},e.is=function(e){return"unexpectedResultReceived"===e.name}}(i=e.UnexpectedResultReceived||(e.UnexpectedResultReceived={})),function(e){e.create=function(e,t){return{source:"session",kind:"warning",name:"capiErrorHandled",sessionMode:e,capiError:t}},e.is=function(e){return"capiErrorHandled"===e.name}}(n=e.CAPIErrorHandled||(e.CAPIErrorHandled={})),function(e){e.create=function(e){return{kind:"warning",name:"regenerateResultContextNotFound",sessionMode:e,source:"session"}},e.is=function(e){return"regenerateResultContextNotFound"===e.name}}(o=e.RegenerateResultContextNotFound||(e.RegenerateResultContextNotFound={})),e.toJSON=function(e){const a={kind:e.kind,source:e.source,name:String(e.name),sessionMode:e.sessionMode};return o.is(e)?JSON.stringify(a):(0,r.Kg)(t.is,i.is)(e)?JSON.stringify(Object.assign(Object.assign({},a),{expectedInProgressResultId:x.toNullable(e.expectedInProgressResultId),receivedInProgressResultId:e.receivedInProgressResultId})):n.is(e)?JSON.stringify(Object.assign(Object.assign({},a),{errorCode:e.capiError.error,errorSeverity:String(e.capiError.severity)})):(0,s.Rz)(e)}}(m||(m={})),function(e){let t,i,n;!function(e){e.create=function(e){return{kind:"error",source:"skill",name:"getSkillsFailed",rawError:e}},e.is=function(e){return"getSkillsFailed"===e.name}}(t=e.GetSkillsFailed||(e.GetSkillsFailed={})),function(e){e.create=function(e,t){return{kind:"error",source:"skill",name:"initSkillFailed",skillId:(0,s.zG)(e,x.map((e=>e.id)),x.toNullable),rawError:t}},e.is=function(e){return"initSkillFailed"===e.name}}(i=e.InitSkillFailed||(e.InitSkillFailed={})),function(e){e.create=function(e,t){return{kind:"error",source:"skill",name:"terminateSkillFailed",skillId:(0,s.zG)(e,x.map((e=>e.id)),x.toNullable),rawError:t}},e.is=function(e){return"terminateSkillFailed"===e.name}}(n=e.TerminateSkillFailed||(e.TerminateSkillFailed={})),e.toJSON=function(e){var o,a;const l={kind:e.kind,source:e.source,name:String(e.name)};return t.is(e)?JSON.stringify(Object.assign(Object.assign({},l),{rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(o=e.rawError.stack)&&void 0!==o?o:""})):(0,r.Kg)(i.is,n.is)(e)?JSON.stringify(Object.assign(Object.assign({},l),{skillId:e.skillId,rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(a=e.rawError.stack)&&void 0!==a?a:""})):(0,s.Rz)(e)}}(p||(p={})),function(e){let t,i,n;!function(e){e.create=function(e){return{kind:"info",source:"skill",name:"getSkillsSuccessful",skillIds:e.map((e=>e.id))}},e.is=function(e){return"getSkillsSuccessful"===e.name}}(t=e.GetSkillsSuccessful||(e.GetSkillsSuccessful={})),function(e){e.create=function(e){return{kind:"info",source:"skill",name:"initSkillSuccessful",skillId:e.id}},e.is=function(e){return"initSkillSuccessful"===e.name}}(i=e.InitSkillSuccessful||(e.InitSkillSuccessful={})),function(e){e.create=function(e){return{kind:"info",source:"skill",name:"terminateSkillSuccessful",skillId:e.id}},e.is=function(e){return"terminateSkillSuccessful"===e.name}}(n=e.TerminateSkillSuccessful||(e.TerminateSkillSuccessful={})),e.toJSON=function(e){const o={kind:e.kind,source:e.source,name:String(e.name)};return t.is(e)?JSON.stringify(Object.assign(Object.assign({},o),{skillIds:e.skillIds})):(0,r.Kg)(i.is,n.is)(e)?JSON.stringify(Object.assign(Object.assign({},o),{skillId:e.skillId})):(0,s.Rz)(e)}}(h||(h={})),function(e){let t,i;!function(e){e.create=function(e){return{source:"uphook",kind:"error",name:"reportUphookShowFailed",rawError:e}},e.is=function(e){return"reportUphookShowFailed"===e.name}}(t=e.ReportUphookShowFailed||(e.ReportUphookShowFailed={})),function(e){e.create=function(e){return{source:"uphook",kind:"error",name:"reportUphookClickFailed",rawError:e}},e.is=function(e){return"reportUphookClickFailed"===e.name}}(i=e.ReportUphookClickFailed||(e.ReportUphookClickFailed={})),e.toJSON=function(e){var n;return(0,r.Kg)(t.is,i.is)(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(n=e.rawError.stack)&&void 0!==n?n:""}):(0,s.Rz)(e)}}(g||(g={})),function(e){let t;!function(e){e.create=function(e,t,i){return{source:"userSurvey",kind:"error",name:"submitSurveyFailed",surveyPlacement:t,surveyType:e,surveyDetailedPlacement:i}},e.is=function(e){return"submitSurveyFailed"===e.name}}(t=e.SubmitSurveyFailed||(e.SubmitSurveyFailed={})),e.toJSON=function(e){return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),surveyType:e.surveyType,surveyPlacement:e.surveyPlacement}):(0,s.Rz)(e)}}(f||(f={})),function(e){let t;!function(e){e.create=function(e,t,i,n,r,s,o){return{source:"userSurvey",kind:"info",name:"submitSurveySuccessful",surveyPlacement:t,surveyStage:i,surveyType:e,surveyIsDismissed:n,surveyRating:r,surveyOpenAnswer:s,surveyDetailedPlacement:o}},e.is=function(e){return"submitSurveySuccessful"===e.name}}(t=e.SubmitSurveySuccessful||(e.SubmitSurveySuccessful={})),e.toJSON=function(e){var i,n;return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),surveyType:e.surveyType,surveyPlacement:e.surveyPlacement,surveyStage:e.surveyStage,surveyDetailedPlacement:null!==(i=e.surveyDetailedPlacement)&&void 0!==i?i:null,surveyRating:e.surveyRating?e.surveyRating.toString():null,surveyOpenAnswer:null!==(n=e.surveyOpenAnswer)&&void 0!==n?n:null,surveyIsDismissed:e.surveyIsDismissed?String(e.surveyIsDismissed):null}):(0,s.Rz)(e)}}(y||(y={})),function(e){let t;!function(e){e.create=function(e,t,i){return{source:"userSurvey",kind:"warning",name:"unexpectedSurveyFormatReceived",surveyPlacement:t,surveyType:e,surveyDetailedPlacement:i}},e.is=function(e){return"unexpectedSurveyFormatReceived"===e.name}}(t=e.UnexpectedSurveyFormatReceived||(e.UnexpectedSurveyFormatReceived={})),e.toJSON=function(e){return t.is(e)?JSON.stringify({kind:e.kind,source:e.source,name:String(e.name),surveyType:e.surveyType,surveyPlacement:e.surveyPlacement}):(0,s.Rz)(e)}}(v||(v={}));const U=(0,r.Kg)(w,E,R),B=(0,r.Kg)(_,T);function N(e){return b(e)||S(e)||k(e)||C(e)||I(e)||A(e)||O(e)||P(e)}},47388:(e,t,i)=>{i.d(t,{T:()=>n});var n,r=i(22232);!function(e){let t;!function(e){e.initial="initial",e.initialBTS="initialBTS",e.history="history",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub",e.references="references"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:case e.rewrite:return!1;default:return(0,r.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:case e.references:case e.history:return!0;case e.initial:case e.initialBTS:return!1;default:return(0,r.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(n||(n={}))},8887:(e,t,i)=>{i.d(t,{l:()=>n});var n,r=i(22232);!function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(n||(n={})),(0,r.L0)(void 0)},9023:(e,t,i)=>{i.d(t,{z_:()=>n,wR:()=>s.w,e7:()=>o,dr:()=>c,jQ:()=>l,Gh:()=>a});var n,r=i(5114),s=i(11610);function o(e){return s.w.isIdeation(e.mode)}function a(e){return s.w.isRewriteOrQuickRewrite(e.mode)}function l(e){return s.w.isQuickReply(e.mode)}function c(e){return s.w.isPushRewrite(e.mode)}!function(e){let t,i;!function(e){e.restoreDisabled="restoreDisabled",e.unknown="unknown",e.hasHistory="hasHistory",e.noHistory="noHistory",e.historyRequested="historyRequested",e.historyRestored="historyRestored"}(t=e.HistoryStatus||(e.HistoryStatus={})),e.toStarting=function(e){return"starting"===e.kind?r.some(e):r.none},e.toStarted=function(e){return"started"===e.kind?r.some(e):r.none},e.isStartedWithInProgressResult=function(e){return"started"===e.kind&&r.isSome(e.inProgressResult)},function(e){e.initial={kind:"starting",mode:s.w.ideation,selectedRange:r.none,selectedText:r.none,quickReplyContext:r.none,historyStatus:t.unknown,writingExpertContext:r.none,error:r.none,textRevision:0}}(i=e.Starting||(e.Starting={}))}(n||(n={}))},34795:(e,t,i)=>{var n,r;i.d(t,{e:()=>n,n:()=>r}),function(e){e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.creditsInfoButton="creditsInfoButton",e.promptInput="promptInput",e.promptMenuContent="promptMenuContent",e.skill="skill",e.referencesList="referencesList",e.historyButton="historyButton"}(n||(n={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.initialBTSPopupAnchor="initialBTSPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(r||(r={}))},95010:(e,t,i)=>{i.d(t,{Z:()=>n});var n,r=i(95195),s=i(5114),o=i(64015),a=i(57050),l=i(69243),c=i(13004);!function(e){const t=(0,c.$d)()(["initial","initialBTS","prompts","review","rewrite","knowledgeHub","references","history"]),i=(0,c.$d)()(["extension","editor","llamaMac","llamaWin"]);function n(e,t){return`${e}|${t}`}function u(e,t,i){return`${e}|${t}|${i}`}function d(e){return s.isSome(x(e))}function m(e){return s.isSome(b(e))}const p=new l.Type("CompletedStepName",(e=>"string"==typeof e&&d(e)),((e,t)=>"string"==typeof e&&d(e)?l.success(e):l.failure(e,t)),l.identity),h=new l.Type("LastSeenStepName",(e=>"string"==typeof e&&m(e)),((e,t)=>"string"==typeof e&&m(e)?l.success(e):l.failure(e,t)),l.identity),g=l.readonly(l.partial({completed:l.readonlyArray(p),lastSeen:l.readonlyArray(h)}));let f,y,v;function x(e){return(0,a.zG)(s.some(e.split("|")),s.filter((e=>2===e.length)),s.filter((e=>t.includes(e[0])&&i.includes(e[1]))))}function b(e){return(0,a.zG)(s.some(e.split("|")),s.filter((e=>3===e.length)),s.filter((e=>t.includes(e[0])&&i.includes(e[1]))),s.filterMap((e=>(0,a.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?s.none:s.some([e[0],e[1],t]))))))}function S(e,t,i){var n,r,s,o;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(n=i.find((t=>t[0]===e&&"extension"===t[1])))||void 0===n?void 0:n[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=i.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(s=i.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===s?void 0:s[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(o=i.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===o?void 0:o[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(f=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new l.Type("UpstreamOnboarding",(e=>g.is(e)),((e,t)=>(0,a.zG)(g.validate(e,t),r.map((e=>{const t=(0,a.zG)(e.completed||[],o.UI(x),o.oA),i=(0,a.zG)(e.lastSeen||[],o.UI(b),o.oA);return{initial:S("initial",t,i),initialBTS:S("initialBTS",t,i),prompts:S("prompts",t,i),review:S("review",t,i),rewrite:S("rewrite",t,i),knowledgeHub:S("knowledgeHub",t,i),references:S("references",t,i),history:S("history",t,i)}})))),(e=>({completed:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,i])=>i.completed?[n(e,t)]:[])))}(e,t)))),lastSeen:(0,a.zG)(Object.entries(e),o.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),o.tS((([t,i])=>i.lastSeen?[u(e,t,i.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t){return(0,a.zG)(decodeURIComponent(t),(i=>{try{const t=JSON.parse(i);return e.codec.decode(t)}catch(e){return r.left(`Cannot decode raw onboarding state: ${t}.`)}}),r.getOrElse((()=>e.State.empty)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,initialBTS:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep,references:e.emptyStep,history:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],initialBTS:e.initialBTS[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t],references:e.references[t],history:e.history[t]}},t.patch=function(e,t){return i=>({initial:Object.assign(Object.assign({},i.initial),{[t]:e.initial}),initialBTS:Object.assign(Object.assign({},i.initialBTS),{[t]:e.initialBTS}),prompts:Object.assign(Object.assign({},i.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},i.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},i.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},i.knowledgeHub),{[t]:e.knowledgeHub}),references:Object.assign(Object.assign({},i.references),{[t]:e.references}),history:Object.assign(Object.assign({},i.history),{[t]:e.history})})}}(y=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,initialBTS:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep,references:e.emptyClientStep,history:e.emptyClientStep}}(v=e.ClientState||(e.ClientState={}))}(n||(n={}))},41458:(e,t,i)=>{var n;i.d(t,{n:()=>n}),function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(n||(n={}))},9295:(e,t,i)=>{i.d(t,{L:()=>n,b:()=>r});var n,r,s=i(73975),o=i(5114),a=i(64015),l=i(48044),c=i(13853),u=i(22232);!function(e){let t,i,n,r,d,m;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=s.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=s.yv}(t=e.Id||(e.Id={}))}(i=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=s.yv}(t=e.Id||(e.Id={}))}(n=e.Role||(e.Role={})),function(e){let t,i;function n(e){switch(e){case t.american:return"American English";case t.australian:return"Australian English";case t.british:return"British English";case t.canadian:return"Canadian English";case t.indian:return"Indian English";default:return(0,u.L0)(e)}}function r(e){switch(e){case t.american:return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case t.australian:return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case t.british:return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case t.canadian:return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case t.indian:return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,u.L0)(e)}}!function(e){e.fromString=function(t){switch(t){case"american":return e.american;case"australian":return e.australian;case"british":return e.british;case"canadian":return e.canadian;case"indian":return e.indian;default:return(0,u.L0)(t)}}}(t=e.Value||(e.Value={})),function(e){e.american="american",e.australian="australian",e.british="british",e.canadian="canadian",e.indian="indian"}(t=e.Value||(e.Value={})),function(e){e.create=function(e){return e},e.eq=s.yv}(i=e.Id||(e.Id={})),e.american={id:i.create(t.american),label:n(t.american),iconUrl:r(t.american)},e.australian={id:i.create(t.australian),label:n(t.australian),iconUrl:r(t.australian)},e.british={id:i.create(t.british),label:n(t.british),iconUrl:r(t.british)},e.canadian={id:i.create(t.canadian),label:n(t.canadian),iconUrl:r(t.canadian)},e.indian={id:i.create(t.indian),label:n(t.indian),iconUrl:r(t.indian)},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=s.MW({selectedStyle:i.Id.eq,selectedTonesPerStyle:l.Eh(i.Id.eq,c.Eh(t.Id.eq)),selectedRole:o.getEq(n.Id.eq),selectedDialect:r.Id.eq})}(d=e.Selections||(e.Selections={})),e.toLegacyVoiceProfile=function(e){return"legacyVoiceProfile"===e.kind?o.some(e):o.none},function(e){const t=s.MW({name:s.yv,state:s.yv}),i=s.MW({name:s.yv,tags:a.Eh(t)}),l=s.MW({name:s.yv,summary:s.yv,selected:s.vD,sections:a.Eh(i)}),c=a.Eh(l);e.eqByRoleDialectProfileAndIsEnabledByDefault=s.MW({profiles:c,selectedRole:o.getEq(n.Id.eq),selectedDialect:r.Id.eq,isEnabledByDefault:s.vD})}(m=e.NewSelections||(e.NewSelections={})),e.toNewVoiceProfile=function(e){return"newVoiceProfile"===e.kind?o.some(e):o.none}}(n||(n={})),function(e){e.createId=({tagName:e,sectionName:t,profileName:i})=>`${t}-${e}-${i}`}(r||(r={}))},73129:(e,t,i)=>{i.d(t,{Pb:()=>n.Pb,yb:()=>n.yb});i(95611);var n=i(58348)},58348:(e,t,i)=>{i.d(t,{Pb:()=>o,yb:()=>s});var n=i(71761),r=i(9090),s=i(50687);const o=n;r.i},13287:(e,t,i)=>{i.d(t,{t:()=>h});var n=i(57050),r=i(14601),s=i(32952),o=i(85985),a=i(71032),l=i(12126),c=i(5114),u=i(62965),d=i(62074),m=i(13004),p=i(97834);class h{constructor(e){var t;this._params=e,this._sub=new r.w,this._relevantInboundCAPIMessages=new s.xQ,this.relevantInboundCAPIMessages=this._relevantInboundCAPIMessages.asObservable(),this._monitoringService=null!==(t=this._params.monitoringService)&&void 0!==t?t:p.g.getInstance(),this._sub.add(this._getRelevantInboundCAPIMessagesObs().subscribe(this._relevantInboundCAPIMessages))}cheetahGetContext(e){const t=(0,n.zG)(c.fromNullable(this._params.dlpOptions),c.map((({sanitizeText:t})=>(0,m.Av)(e.outerContext,t))),c.getOrElse((()=>Promise.resolve(e.outerContext))));return(0,n.zG)(u.Y3((()=>t),(e=>new Error(JSON.stringify(e)))),u.Vn((e=>(this._monitoringService.notify(d.KE.SanitizeTextOnOutboundCAPIMessageFailed.create("cheetah:getContext",e)),e))),u.tS((t=>this._params.sendCAPIMessage({action:"cheetah:getContext",data:Object.assign(Object.assign({},e),{outerContext:t}),shouldInjectRev:!0,shouldInjectSessionId:!1}))))}cheetahAction(e){const t=(0,n.zG)(c.fromNullable(this._params.dlpOptions),c.map((({sanitizeText:t})=>(0,m.Ly)(e.args,t))),c.getOrElse((()=>Promise.resolve(e.args)))),i=(0,n.zG)(c.fromNullable(this._params.dlpOptions),c.map((({sanitizeText:t})=>(0,m.HL)(e.previousText,t))),c.getOrElse((()=>Promise.resolve(e.previousText))));return(0,n.zG)(u.Y3((()=>t),(e=>new Error(JSON.stringify(e)))),u.tS((e=>u.Y3((()=>i.then((t=>({sanitizedArgs:e,sanitizedPreviousText:t})))),(e=>new Error(JSON.stringify(e)))))),u.Vn((e=>(this._monitoringService.notify(d.KE.SanitizeTextOnOutboundCAPIMessageFailed.create("cheetah:action",e)),e))),u.tS((({sanitizedArgs:t,sanitizedPreviousText:i})=>this._params.sendCAPIMessage({action:"cheetah:action",data:Object.assign(Object.assign({},e),{args:t,previousText:i}),shouldInjectRev:!0,shouldInjectSessionId:!1}))))}cheetahGetHistory(){return this._params.sendCAPIMessage({action:"cheetah:getHistory",shouldInjectRev:!1,data:{},shouldInjectSessionId:!1})}cheetahGetUserState(){return this._params.sendCAPIMessage({action:"cheetah:getUserState",data:{},shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahInterrupt(e){return this._params.sendCAPIMessage({action:"cheetah:interrupt",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSearchReferences(e){return this._params.sendCAPIMessage({action:"cheetah:searchReferences",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoice(e){return this._params.sendCAPIMessage({action:"cheetah:setVoice",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}cheetahSetVoiceProfile(e){return this._params.sendCAPIMessage({action:"cheetah:setVoiceProfile",data:e,shouldInjectRev:!1,shouldInjectSessionId:!1})}user_action(e){return this._params.sendCAPIMessage({action:"user_action",data:e,shouldInjectRev:!1,shouldInjectSessionId:!0})}set_context(e){return this._params.sendCAPIMessage({action:"set_context",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}submit_survey_result(e){return this._params.sendCAPIMessage({action:"submit_survey_result",data:e,shouldInjectRev:!0,shouldInjectSessionId:!1})}dispose(){this._sub.unsubscribe()}_getRelevantInboundCAPIMessagesObs(){const e=this._params.inboundCAPIMessages.pipe(o.h(d.JS.is));return(0,n.zG)(c.fromNullable(this._params.dlpOptions),c.fold((()=>e),(({unsanitizeText:t})=>e.pipe(a.b((e=>l.D((0,n.zG)(e,(e=>"cheetah:setContext"===e.action&&e.context.intent?(0,m.Tc)(e,t):"cheetah:chunk"===e.action?(0,m.bB)(e,t):"cheetah:result"===e.action?(0,m.li)(e,t):Promise.resolve(e)),(t=>t.catch((t=>(this._monitoringService.notify(d.KE.UnsanitizeTextOnInboundCAPIMessageFailed.create(e.action,new Error(`${t}`))),e))))))))))))}}},49320:(e,t,i)=>{i.d(t,{CI:()=>r});var n=i(33290);i(62074),i(97834);const r={CheetahFetchSkills:new n.Cc("cheetah_fetch_skills"),CheetahSelectionContextUpdates:new n.Cc("cheetah_selection_context_updates")}},89766:(e,t,i)=>{i.d(t,{L:()=>m});var n=i(5114),r=i(57050),s=i(9922),o=i(85985),a=i(77176),l=i(60797),c=i(98403),u=i(38983),d=i(62074);class m{constructor(e,t){this._capiService=e,this._genAIFeaturesState=t,this._subs=new s.w.Keeper,this._availability=u.h.create({kind:d._4.Kind.pending,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}}),this.availability=this._availability.view(),this._subs.push(this._genAIFeaturesState.subscribe((e=>this._availability.set(e.enabled?d._4.fromUserState(e.userState):{kind:d._4.Kind.unavailable,userSettings:{inlineQuickReplyEnabled:!1,inlineRewriteEnabled:!1}})))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,o.h(d.JS.CheetahInboundCAPIMessage.is),a.U((e=>"cheetah:setUserState"===e.action?n.some(e.state):n.none)),l.oA,a.U(d._4.fromUserState)).subscribe(c.wW(this._availability))),this._subs.push((0,r.zG)(this._capiService.relevantInboundCAPIMessages,o.h(d.JS.CheetahInboundCAPIMessage.is),a.U((e=>{switch(e.action){case"cheetah:setContext":case"cheetah:result":return n.some(e.usage);default:return n.none}})),l.oA,a.U((e=>d._4.updateUsage(this._availability.get(),e)))).subscribe(c.wW(this._availability)))}dispose(){this._subs.dispose()}}},50685:(e,t,i)=>{i.d(t,{WQ:()=>r.W,gz:()=>n.g,jI:()=>r.j});i(85612),i(89766),i(9137);var n=i(97834),r=(i(13287),i(75055));i(36582),i(49320)},75055:(e,t,i)=>{var n;i.d(t,{W:()=>r,j:()=>n}),function(e){e.isErrorLike=function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}}(n||(n={}));class r{constructor(e){this.namespace=e}static configureAllLoggers(e){r._isEnabled="prod"!==e.env}trace(e,t,i){this._printToConsole("trace",e,t,i)}warn(e,t,i){this._printToConsole("warn",e,t,i)}debug(e,t,i){this._printToConsole("debug",e,t,i)}info(e,t,i){this._printToConsole("info",e,t,i)}error(e,t,i){this._printToConsole("error",e,t,i)}fatal(e,t,i){this._printToConsole("fatal",e,t,i)}_getMsgWithNamespace(e){return`[${r._rootNamespace}.${this.namespace}]: ${e}`}_printToConsole(e,t,i,n){if("fatal"===e)return void console.error(t,i,n);if(!r._isEnabled)return;const s=this._getMsgWithNamespace(t);i&&n?console[e](s,i,n):!i&&n?console[e](s,n):i&&!n?console[e](s,i):console[e](s)}}r._rootNamespace="CheetahWeb",r._isEnabled=!1},97834:(e,t,i)=>{i.d(t,{g:()=>r});var n=i(32952);class r{constructor(){this._events=new n.xQ}static getInstance(){return null===r.instance&&(r.instance=new r),r.instance}notify(e){this._events.next(e)}get events(){return this._events.asObservable()}}r.instance=null},85612:(e,t,i)=>{i.d(t,{Z:()=>Q});var n=i(17771),r=i(64015),s=i(17889),o=i(62965),a=i(57050),l=i(28043),c=i(50628),u=i(84966),d=i(9922),m=i(98403),p=i(66310),h=i(55935),g=i(60797),f=i(66081),y=i(2834),v=i(40151),x=i(80900),b=i(5114),S=i(83078),k=i(22232),C=i(8125),w=i(38983),_=i(62074),I=i(73129),E=i(13004),A=i(49320),O=i(75055),R=i(97834),T=i(30816),P=i(31699),U=i(95195),B=i(32426);function N(e,t){switch(e.historyStatus){case _.z_.HistoryStatus.restoreDisabled:return e.historyStatus;case _.z_.HistoryStatus.unknown:case _.z_.HistoryStatus.noHistory:case _.z_.HistoryStatus.hasHistory:return void 0!==t?t>0?_.z_.HistoryStatus.hasHistory:_.z_.HistoryStatus.noHistory:_.z_.HistoryStatus.unknown;case _.z_.HistoryStatus.historyRequested:case _.z_.HistoryStatus.historyRestored:return"started"===e.kind&&void 0!==e.results.find(_.x4.isHistory)?_.z_.HistoryStatus.historyRestored:_.z_.HistoryStatus.restoreDisabled;default:(0,k.L0)(e.historyStatus)}}function G(e,t=!1){return(0,a.zG)(e.replacementDelta,U.fold(a.yR,(({preferVoice:e,generic:i,user:n})=>t?e===_.x4.GeneratedTextVoice.generic?i:n:i)),(e=>(0,E.l)(e,"")))}function z(e){return o.fj((()=>"started"===e.kind?U.right(e):U.left(new Error("Session not started"))))}function F(e,t,i,n){var s;const o=(0,a.zG)(_.z_.toStarted(i),b.fold((()=>[]),(e=>e.voiceProfile.roles)));return{kind:"newVoiceProfile",userName:e.userName,title:e.title,subTitle:e.subTitle,profiles:e.profiles,isEnabledByDefault:e.myVoiceIsEnabledByDefault.state,isEnabledByDefaultLabel:e.myVoiceIsEnabledByDefault.label,dialects:_.LA.Dialect.all(),roles:(0,a.zG)(null!==(s=t.roles)&&void 0!==s?s:[],r.UI((e=>({id:_.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:o)),selectedDialect:(0,a.zG)(_.z_.toStarted(i),b.fold((()=>_.LA.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),selectedRole:(0,a.zG)(b.fromNullable(t.selectedRole),b.map((e=>e.trim())),b.filter((e=>""!==e)),b.map(_.LA.Role.Id.create)),needsSetup:!1}}function j(e,t,i){var n,s;const o=(0,a.zG)(_.z_.toStarted(t),b.map((e=>e.voiceProfile)),b.chain(_.LA.toLegacyVoiceProfile),b.fold((()=>[]),(e=>e.styles))),l=(0,a.zG)(_.z_.toStarted(t),b.fold((()=>[]),(e=>e.voiceProfile.roles))),c=(0,a.zG)(null!==(n=e.styles)&&void 0!==n?n:[],r.UI((e=>({id:_.LA.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:_.LA.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:o)),u=_.LA.Style.Id.create(e.selectedStyle),d=c.find((e=>_.LA.Style.Id.eq.equals(e.id,u)));return{kind:"legacyVoiceProfile",styles:c,roles:(0,a.zG)(null!==(s=e.roles)&&void 0!==s?s:[],r.UI((e=>({id:_.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:l)),selectedStyle:u,selectedTonesPerStyle:(new Map).set(u,new Set(e.selectedTones.filter((e=>null==d?void 0:d.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,a.zG)(b.fromNullable(e.selectedRole),b.map((e=>e.trim())),b.filter((e=>""!==e)),b.map(_.LA.Role.Id.create)),dialects:_.LA.Dialect.all(),selectedDialect:(0,a.zG)(_.z_.toStarted(t),b.fold((()=>_.LA.Dialect.Id.create(i)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function V(e,t,i,n){return[...(0,a.zG)(e,r.UI((t=>_.aU.createFollowUpQuestionActionInputOrQuickActionInput(t,e,i,n))),r.oA),...t.map((e=>_.aU.SkillActionInput.fromSkill(e,i)))]}function M(e,t){const i=(0,a.zG)(e.args,r.YM,b.map((t=>({id:_.aU.Id.create(e.id),kind:"userPrompt",arg:{id:_.pY.Id.create(t.name),kind:"string",label:t.label,hints:(0,a.zG)(b.fromNullable(t.hint),b.map((e=>({header:e.header,items:e.text}))))},generatesTextType:b.some(I.yb.cX.Insertable),useReferences:b.none,omitReferenceIds:b.none}))));return b.isNone(i)&&t.warn("_extractUserPromptAction() - failed to extract user prompt action, received empty action args",{promptAction:e}),i}function D(e){return{kind:"quickRewrite",id:_.aU.Id.create(e.id),label:(0,P.sanitize)(e.label,{ALLOWED_TAGS:E.ap}),iconUrl:e.iconUrl,generatesTextType:b.fromNullable(e.generatesTextType)}}function H(e){return(0,a.zG)(b.fromNullable(e),b.map((e=>(0,P.sanitize)(e,{ALLOWED_TAGS:[...E.ap,"person"]}))),b.map((e=>e.trim())),b.filter((e=>e.length>0)))}function L(e){return{kind:_.x4.isComplete(e)?"regular":_.x4.isHistory(e)?"history":(0,k.L0)(e),text:G(e)}}const K=b.fromNullable;function $(e){switch(e){case _.wR.ideation:return I.yb.s2.Ideation;case _.wR.rewrite:return I.yb.s2.Rewrite;case _.wR.quickRewrite:return I.yb.s2.QuickRewrite;case _.wR.quickReply:return I.yb.s2.QuickReply;case _.wR.pushRewrite:return I.yb.s2.PushRewrite;default:return(0,a.Rz)(e)}}function Z(e){return(0,a.zG)(e.quickReplyContext,b.map(_.H3.toOuterContext))}function W(e){var t;return(0,a.zG)(null!==(t=function(e){var t;return null===(t=e.match(/^https:\/\/docs.google.com\/[a-zA-Z0-9-_]+\/d\/([a-zA-Z0-9-_]+)/))||void 0===t?void 0:t[1]}(e))&&void 0!==t?t:function(e){var t;const i=null!==(t=e.match(/^https:\/\/([a-zA-Z0-9-_]+).atlassian.net\/wiki\/spaces\/[a-zA-Z0-9-_]+\/pages\/([0-9]+)/))&&void 0!==t?t:[];return i[1]&&i[2]?`${i[1]}:${i[2]}`:void 0}(e),b.fromNullable,b.map(q))}function q(e){const t=(new TextEncoder).encode(e);return T.Buffer.from((0,E.Bk)(t)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}var Y=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class Q{constructor(e){var t,i,n,r,s,o;if(this._params=e,this._subs=new d.w.Keeper,this._session=w.h.create(_.z_.Starting.initial),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._historyResultIdByGetContextMessageId=new Map,this._contextMessageIdsTriggeredBySelectionChanges=new Set,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=w.h.create(_.LA.Dialect.Id.create(_.LA.Dialect.Value.american)),this._cheetahAckIds=new Set,this._searchReferencesUrlsById=new Map,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._historyTimeout=void 0,this._cheetahAckTimeout=void 0,this._historyAckHandler=void 0,this._skills=[],this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:2e4,this._contextTimeoutMs=null!==(i=this._params.contextTimeoutMs)&&void 0!==i?i:2e4,this._historyTimeoutMs=null!==(n=this._params.historyTimeoutMs)&&void 0!==n?n:2e4,this._cheetahAckTimeoutMs=null!==(r=this._params.cheetahAckTimeoutMs)&&void 0!==r?r:2e4,this._monitoringService=null!==(s=this._params.monitoringService)&&void 0!==s?s:R.g.getInstance(),this._logger=null!==(o=this._params.logger)&&void 0!==o?o:new O.W(Q.name),this.session=this._session.view(),this._handleCAPIMessage=e=>{switch(e.action){case"error":return this._handleError(e);case"cheetah":return this._handleCheetahAck(e);case"cheetah:setContext":return this._handleCheetahSetContext(e);case"cheetah:chunk":return this._handleCheetahChunk(e);case"cheetah:result":return this._handleCheetahResult(e);case"cheetah:error":return this._handleCheetahError(e);case"cheetah:setUserState":return this._handleCheetahSetUserState(e);case"cheetah:searchReferencesResult":return this._handleCheetahSearchReferencesResult(e);case"cheetah:invalidateContext":return this._getContext();case"cheetah:setHistory":return this._handleCheetahSetHistory(e);case"show_survey":return;default:return(0,a.Rz)(e)}},(0,_.Gh)(this._params.startSessionOptions)){const e=this._params.textEditorService.selectedRange.get();(0,a.zG)(e,b.fold((()=>this._init()),(e=>(0,E.tt)("getText",this._params.textEditorService.getText(e),this._logger,(t=>{this._monitoringService.notify(_.GA.GetTextSuccessful.create(this._params.startSessionOptions.mode,e,t)),this._init({selectedRange:e,selectedText:t})}),(t=>{this._logger.warn("getText() - failed to get text from host, defaulting to empty text",{selectedRange:e,error:t}),this._monitoringService.notify(_.A4.GetTextFailed.create(this._params.startSessionOptions.mode,e,t)),this._init()})))))}else this._init()}_init(e){this._session.set({kind:"starting",mode:this._params.startSessionOptions.mode,selectedRange:b.fromNullable(null==e?void 0:e.selectedRange),selectedText:(0,a.zG)(b.fromNullable(null==e?void 0:e.selectedText),b.filter((e=>e.length>0))),quickReplyContext:b.fromNullable((0,_.jQ)(this._params.startSessionOptions)?this._params.startSessionOptions.quickReplyContext:void 0),writingExpertContext:b.fromNullable((0,_.dr)(this._params.startSessionOptions)?this._params.startSessionOptions.writingExpertContext:void 0),historyStatus:_.z_.HistoryStatus.unknown,error:b.none,textRevision:0}),this._subs.push(this._params.capiService.relevantInboundCAPIMessages.subscribe((e=>this._handleCAPIMessage(e)))),this._subs.push(this._params.userService.user.view("dialect").subscribe((e=>m.wW(this._upstreamDialect)(_.LA.Dialect.Id.create(e))))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.subscribe((e=>this._logger.debug("Session updated:",e)))),this._subs.push(this._session.pipe((0,l.x)(((e,t)=>e.kind===t.kind)),(0,c.P)((e=>"started"===e.kind))).subscribe((()=>{this._params.trackingService.trackReadyToInteract()}))),this._params.selectionContextAvailability&&(this._subs.push(this._params.selectionContextAvailability.view("contextUpdatesClient").pipe(p.w((e=>e?this._params.textEditorService.selectedRange.pipe(h.T(1),g.oA,f.e(500),y.b((e=>{this._handleSelectedRangeUpdate(e)}))):v.E))).subscribe()),this._subs.push(this._params.selectionContextAvailability.view("contextUpdatesClient").pipe(p.w((e=>e?this._params.textEditorService.textUpdated.pipe(y.b((()=>{this._handleTextUpdated()}))):v.E))).subscribe())),this._startSession(this._params.startSessionOptions)}_startSession(e,t){(0,E.tt)("flush",this._params.textEditorService.flush(),this._logger,(()=>{const i=(0,_.Gh)(e)?this._params.textEditorService.selectedRange.get():b.fromNullable(void 0),r=function(e){const t=(0,a.zG)(e,b.fromPredicate((e=>(0,_.e7)(e)&&!!e.documentUrl)),b.map((e=>e.documentUrl)),b.chain(b.fromNullable),b.chain(W),b.map((e=>({pageIdHash:e})))),i=(0,a.zG)(e,b.fromPredicate(_.jQ),b.map((e=>_.H3.toOuterContext(e.quickReplyContext))));return b.getMonoid((0,B.getFirstSemigroup)()).concat(t,i)}(e),s=b.fromNullable((0,_.dr)(e)?e.writingExpertContext:void 0),l={generationMode:$(e.mode),selectedRange:b.toUndefined(i),outerContext:b.toUndefined(r),stateBlob:t,metadata:e.metadata,previousText:(0,a.zG)(s,b.chain(_.nI.toPreviousText),b.toUndefined)};if(this._params.skillService){const e={skills:this._params.skillService.getSkills(),shouldShowSkills:(0,a.zG)(this._params.experimentService?this._params.experimentService.isGateEnabled(A.CI.CheetahFetchSkills):o.F2(!1),o.Vn((e=>new Error(e))))};(0,E.tt)("getSkills",n.Y(E.Lm)(e),this._logger,(({skills:e,shouldShowSkills:t})=>{this._monitoringService.notify(_.e4.GetSkillsSuccessful.create(e)),t&&(this._skills=e,(0,a.zG)(_.z_.toStarted(this._session.get()),b.filter((e=>!e.activeContext.availableActions.some((e=>"skillAction"===e.kind)))),S.tap((e=>this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{availableActions:e.activeContext.availableActions.concat(this._skills.map((e=>_.aU.SkillActionInput.fromSkill(e,this._session.get().mode))))})}))))))}),(e=>this._monitoringService.notify(_.bn.GetSkillsFailed.create(e))))}this._getContext(l)}))}_handleSelectedRangeUpdate(e){this._logger.debug("_handleSelectedRangeUpdate()",{selectedRange:e}),(0,E.tt)("getText",this._params.textEditorService.getText(e),this._logger,(t=>{t.length?(this._session.modify((i=>(0,a.zG)(i,_.z_.toStarted,b.fold((()=>i),(i=>Object.assign(Object.assign({},i),{mode:_.wR.rewrite,activeContext:Object.assign(Object.assign({},i.activeContext),{kind:"pending",isBoundary:!0,textRevision:b.some(i.textRevision)}),selectedRange:b.some(e),selectedText:(0,a.zG)(b.some(t),b.filter((e=>e.length>0)))})))))),this._getContext(void 0,void 0,!0)):this._session.modify((t=>Object.assign(Object.assign({},t),{selectedRange:b.some(e),selectedText:b.none})))}))}_handleTextUpdated(){this._logger.debug("_handleTextUpdated()"),this._session.modify((e=>(0,a.zG)(e,_.z_.toStarted,b.fold((()=>e),(e=>Object.assign(Object.assign({},e),{textRevision:e.textRevision+1}))))))}submitAction(e,t){this._logger.debug("submitAction()",{actionValue:e,selectedVoice:t}),this._submitAction(e,void 0,void 0,void 0,void 0,t)}setVoiceProfile(e){return this._logger.debug("setVoiceProfile()",{voiceProfileSelections:e}),(0,a.zG)(z(this._session.get()),o.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending"})})),t))),o.tS((t=>(0,a.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,a.zG)(e.selectedRole,b.toUndefined),needSetup:!1}}),o.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!_.LA.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),o.tS((t=>t?n.g(o.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:e.selectedDialect}}),o.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(e.selectedDialect),o.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):o.of(null))),o.Pd((e=>(this._monitoringService.notify(_.A4.SetVoiceProfileFailed.create(this._session.get().mode,e)),e)),a.Q1)))))}setNewVoiceProfile(e){var{selectedDialect:t}=e,i=Y(e,["selectedDialect"]);return this._logger.debug("setNewVoiceProfile()",{dialect:t,voiceProfile:i}),(0,a.zG)(z(this._session.get()),o.UI((e=>(this._session.set(Object.assign(Object.assign({},e),{activeContext:Object.assign(Object.assign({},e.activeContext),{kind:"pending"})})),e))),o.tS((e=>(0,a.zG)(this._params.capiService.cheetahSetVoiceProfile({role:(0,a.zG)(i.selectedRole,b.toUndefined),isEnabledByDefault:i.isEnabledByDefault,profiles:i.profiles}),o.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!_.LA.Dialect.Id.eq.equals(e.voiceProfile.selectedDialect,t))),o.tS((e=>e?n.g(o.qA)((0,a.zG)(this._params.capiService.set_context({documentContext:{dialect:t}}),o.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,a.zG)(this._params.userService.setDialect(t),o.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):o.of(null))),o.Pd((e=>(this._monitoringService.notify(_.A4.SetNewVoiceProfileFailed.create(this._session.get().mode,e)),e)),a.Q1)))))}stopInProgressResult(){return this._logger.debug("stopInProgressResult()"),(0,a.zG)(this._session.get(),o.DT(_.z_.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result."))),o.tS((e=>(this._clearResultRelatedTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{activeContext:(0,a.zG)(e.results.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),b.getOrElse((()=>e.activeContext))),inProgressResult:_.x4.isInProgressPending(e.inProgressResult.value)?b.some(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):_.x4.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:_.x4.isInProgressOngoing(e.inProgressResult.value)?b.none:(0,k.L0)(e.inProgressResult.value)}))),(0,a.zG)(e.inProgressResult.value,b.fromPredicate(_.x4.isInProgressOngoing),b.fold((()=>o.of(-1)),(e=>this._params.capiService.cheetahInterrupt({promptId:_.x4.Id.toPrimitive(e.id)}))))))),o.Pd((e=>(this._monitoringService.notify(_.A4.StopInProgressResultFailed.create(this._session.get().mode,e)),e)),a.Q1))}regenerateResult(e,t,i){this._logger.debug("regenerateResult()",{resultId:e,options:t,selectedVoice:i}),(0,a.zG)(_.z_.toStarted(this._session.get()),S.tapLeft((()=>this._logger.warn("regenerateResult() - trying to regenerate result with a session that is not `started`, skipping",{session:this._session.get(),resultId:e}))),b.chain((t=>(0,a.zG)(b.fromNullable(this._resultById.get(e)),b.filter(_.x4.isComplete),b.filter((e=>e.isRephraseable)),b.map((e=>({session:t,result:e}))),S.tapLeft((()=>{this._logger.warn("regenerateResult() - could not find a rephraseable result for provided result ID, skipping",{session:t,resultId:e}),this._monitoringService.notify(_.A4.RegenerateResultFailed.create(this._session.get().mode,e,"not-found"))}))))),b.chain((({session:t,result:i})=>(0,a.zG)(n.Y(b.option)({resultSource:i.source,boundaryContextId:i.boundaryContextId}),b.map((({resultSource:e,boundaryContextId:n})=>({resultSource:e,boundaryContextId:n,resultText:G(i),session:t}))),S.tapLeft((()=>{this._logger.warn("regenerateResult() - trying to regenerate result without source action or boundaryContext",{session:t,result:i}),this._monitoringService.notify(_.A4.RegenerateResultFailed.create(t.mode,e,"no-source-action"))}))))),b.map((({resultSource:n,boundaryContextId:r,resultText:o,session:l})=>{const c=n.actionValue,u=b.getMonoid(s.jG()).concat,d=(0,a.zG)(c,b.fromPredicate(_.aU.isUserPromptActionValue),b.fold((0,a.a9)(c),(e=>Object.assign(Object.assign({},e),{omitReferenceIds:u(e.omitReferenceIds,t.omitReferenceIds)})))),m=this._contextIdByResultId.get(e);void 0===m&&this._monitoringService.notify(_.Jp.RegenerateResultContextNotFound.create(l.mode)),this._submitAction(d,n.contextId,m,r,{kind:"regular",text:o},i),this._params.trackingService.trackResultRephrase(m)})))}searchReferences(e){const t=this._session.get();"started"===t.kind?t.detectedReferences.has(e)||(this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(e,b.none)})),this._setupCheetahAckHandler("searchReferences",(t=>{this._searchReferencesUrlsById.set(t,e)})),(0,E.tt)("cheetahSearchReferences",this._params.capiService.cheetahSearchReferences({url:e}),this._logger)):this._logger.warn("searchReferences() - trying to search a reference with a session that is not `started`, skipping",{session:t})}dismissResult(e){this._logger.debug("dismissResult()",{resultId:e});const t=this._session.get();let i=null;if("started"===t.kind){if(this._resultById.delete(e)){const n=t.results.findIndex((t=>t.id===e));i=t.results[n];let r=t.activeContext,s=t.activeBoundaryContext,o=null;if(0===n&&t.results.length>1){this._logger.debug("dismissResult() - dismissing latest result, will try to restore context from previous result",{session:t,resultId:e});const i=b.toUndefined(this._extractPreviousResultContext(t)),n=(0,a.zG)(this._extractPreviousResultBoundaryContext(t),b.alt((()=>b.fromNullable(this._initialReceivedContext))),b.toUndefined),l=b.toUndefined(this._extractLatestResultBoundaryContext(t));i?n!==l?(this._logger.debug("dismissResult() - previous result was for different boundary context, will keep currently active boundary context",{session:t,resultId:e}),r=t.activeBoundaryContext):(this._logger.debug("dismissResult() - found context for previous result, will restore its context",{session:t,resultId:e,previousResultContext:i}),r=i,n&&(s=n)):t.results[1]&&_.x4.isHistory(t.results[1])&&(0,a.zG)(b.fromNullable(this._contextIdByResultId.get(t.results[1].id)),b.chain((e=>b.fromNullable(this._contextById.get(e)))),b.isNone)?o=t.results[1].id:this._logger.warn("dismissResult() - could not find context for previous result, context will not be updated",{session:t,resultId:e})}else 1===t.results.length&&(r=t.activeBoundaryContext);this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},r),{kind:null!==o?"pending":r.kind,availableActions:o?[]:r.availableActions}),activeBoundaryContext:s,results:t.results.filter((t=>!_.x4.Id.eq.equals(t.id,e)))}));const l=this._contextIdByResultId.get(e);this._params.trackingService.trackResultDismiss(l,_.x4.isHistory(i)?e:void 0),"aiUsageNotification"===i.kind&&this._params.trackingService.trackAINotificationDismiss("document"),o&&this._getContext(void 0,o)}else this._logger.warn("dismissResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("dismissResult() - trying to dismiss result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissError(){this._logger.debug("dismissError()"),this._session.lens("error").set(b.none)}restoreHistory(){this._getHistory()}trackResultInsert(e,t=!1){this._logger.debug("trackResultInsert()",{resultId:e});const i=this._resultById.get(e);if(i){const n=this._contextIdByResultId.get(e);this._params.trackingService.trackResultInsert(n,_.x4.isHistory(i)?i.id:void 0,t)}else this._logger.warn("trackResultInsert() - could not find result for provided result ID, skipping",{resultId:e})}trackResultCopy(e){this._logger.debug("trackResultCopy()",{resultId:e});const t=this._resultById.get(e);if(t){const i=this._contextIdByResultId.get(e);this._params.trackingService.trackResultCopy(i,_.x4.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultCopy() - could not find result for provided result ID, skipping",{resultId:e})}_trackResultGenerationCompleted(e){this._logger.debug("trackResultGenerationCompleted()",{resultId:e});const t=this._resultById.get(e);if(t){const i=this._contextIdByResultId.get(e);this._params.trackingService.trackResultGenerationCompleted(i,_.x4.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultGenerationCompleted() - could not find result for provided result ID, skipping",{resultId:e})}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{resultId:e});const t=this._resultById.get(e);if(t){const i=this._contextIdByResultId.get(e);this._params.trackingService.trackResultOffensive(i,_.x4.isHistory(t)?t.id:void 0)}else this._logger.warn("trackResultOffensive() - could not find result for provided result ID, skipping",{resultId:e})}trackActionsOffensive(){this._logger.debug("trackActionsOffensive()");const e=this._session.get();if("started"!==e.kind)return this._logger.warn("trackActionsOffensive() - tracking actions as offensive with a session that is not `started`, skipping");this._params.trackingService.trackActionsOffensive(e.activeContext.id)}getContextById(e){return b.fromNullable(this._contextById.get(e))}dismissActiveBoundaryContext(){if(this._logger.debug("dismissActiveBoundaryContext()"),(0,a.zG)(this._session.get(),_.z_.toStarted,b.filter((e=>e.activeContext.id===e.activeBoundaryContext.id)),b.fold(a.W8,a.jv)))return this._logger.warn("dismissActiveBoundaryContext() - there are results within this boundary, can't remove");const e=b.toNullable((0,a.zG)(this._session.get(),_.z_.toStarted,b.chain((e=>this._extractLatestResultContext(e))))),t=b.toNullable((0,a.zG)(this._session.get(),_.z_.toStarted,b.chain((e=>this._extractLatestResultBoundaryContext(e))),b.alt((()=>this._extractInitialContext()))));this._session.modify((i=>(0,a.zG)(i,_.z_.toStarted,b.fold((()=>i),(i=>e&&t?Object.assign(Object.assign({},i),{mode:i.results.length?i.mode:_.wR.ideation,activeContext:e,activeBoundaryContext:t}):Object.assign(Object.assign({},i),{kind:"starting",activeContext:Object.assign(Object.assign({},i.activeContext),{selection:b.none,kind:"pending"}),activeBoundaryContext:void 0,selectedRange:b.none,selectedText:b.none})))))),e&&t||this._getContext()}dispose(){this._subs.dispose()}_getContext(e,t,i=!1){this._logger.debug("_getContext()",{data:e,fetchContextForHistoryCardId:t}),this._setupCheetahAckHandler("getContext",(e=>{this._setupContextTimeout("getContext"),void 0!==t&&this._historyResultIdByGetContextMessageId.set(e,t),i&&this._contextMessageIdsTriggeredBySelectionChanges.add(e)}));const n=this._session.get();(0,E.tt)("cheetahGetContext",this._params.capiService.cheetahGetContext(null!=e?e:{generationMode:$(i?_.wR.rewrite:n.mode),selectedRange:b.toUndefined(n.selectedRange),outerContext:b.toUndefined(Z(n)),stateBlob:(0,a.zG)(_.z_.toStarted(n),b.map((e=>e.activeContext)),b.fold(a.r5,(e=>this._stateBlobByContextId.get(e.id)))),previousText:!i&&"started"===n.kind&&n.results.length>0&&_.x4.isStandardCompletedResult(n.results[0])?L(n.results[0]):void 0}),this._logger,(()=>this._monitoringService.notify(_.GA.GetContextSuccessful.create(this._session.get().mode))),(()=>this._monitoringService.notify(_.A4.GetContextFailed.create(this._session.get().mode))))}_handleCheetahSetContext(e){var t,i;this._logger.debug("_handleCheetahSetContext()",{message:e}),this._clearContextTimeout();const r=this._session.get(),s=(0,a.zG)(b.fromNullable(null===(t=e.context)||void 0===t?void 0:t.voiceProfileSettings),b.fold((()=>j(e.context.voice,r,this._upstreamDialect.get())),(t=>F(t,e.context.voice,r,this._upstreamDialect.get())))),o={id:_._y.Id.create(e.context.id),availableActions:V(e.context.availableActions,this._skills,r.mode,r.selectedText),userPromptAction:M(e.context.promptAction,this._logger),quickRewriteAction:D(e.context.quickRewriteAction),intent:H(e.context.intent),documentOverview:K(e.context.documentOverview),specialView:b.fromNullable(e.context.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?b.none:(0,a.zG)(n.Y(b.option)({text:r.selectedText,range:r.selectedRange})),textRevision:(null===(i=this._params.selectionContextAvailability)||void 0===i?void 0:i.get().contextUpdatesClient)?b.some(r.textRevision):b.none},l=0===this._contextById.size,c=e.progressMessage?Object.assign(Object.assign({},o),{kind:"pending",isBoundary:!1}):Object.assign(Object.assign({},o),{kind:"received",isBoundary:l||this._contextMessageIdsTriggeredBySelectionChanges.has(e.promptId)});if(this._shouldSkipContextUpdate(e))return void this._logger.debug("skipping context update for missing history card");0===this._contextById.size&&_._y.isReceived(c)&&(this._initialReceivedContext=c),this._contextById.set(c.id,c),this._stateBlobByContextId.set(c.id,e.context.stateBlob),this._bindContextToHistoryCardIfNeeded(e,c.id);const u=(0,a.zG)(r.writingExpertContext,b.chain(_.nI.getInitialResult),S.tap((e=>{this._resultById.set(e.id,e),this._contextIdByResultId.set(e.id,c.id)})),b.fold((()=>[]),(e=>[e])));if(this._session.set(Object.assign(Object.assign({},r),{kind:"started",voiceProfile:s,activeContext:c,inProgressResult:"started"===r.kind?r.inProgressResult:b.none,results:"started"===r.kind?r.results:u,detectedReferences:"started"===r.kind?r.detectedReferences:new Map,activeBoundaryContext:c.isBoundary?c:"started"===r.kind?r.activeBoundaryContext:c})),l&&_.wR.isQuickRewrite(r.mode)){const t=_.aU.QuickRewriteActionValue.fromInput(D(e.context.quickRewriteAction));this._logger.debug("_handleCheetahSetContext() - received initial context for quick rewrite session, submitting quick rewrite action",{session:r,message:e,quickRewriteAction:t}),this._submitAction(t)}}_shouldSkipContextUpdate(e){return(0,a.zG)(b.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),b.fold(a.jv,(e=>(0,a.zG)(_.z_.toStarted(this._session.get()),b.map((e=>e.results)),b.fold(a.W8,(t=>!t.some((t=>t.id===e))))))))}_bindContextToHistoryCardIfNeeded(e,t){(0,a.zG)(b.fromNullable(this._historyResultIdByGetContextMessageId.get(e.promptId)),b.filter((e=>(0,a.zG)(b.fromNullable(this._contextIdByResultId.get(e)),b.fold(a.W8,(e=>void 0===this._contextById.get(e)))))),S.tap((e=>this._contextIdByResultId.set(e,t))))}_handleCheetahSetUserState(e){this._logger.debug("_handleCheetahUserState()",{message:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{historyStatus:N(t,e.state.historyItems)})))}_getHistory(){if(this._logger.debug("_getHistory()"),void 0!==this._historyAckHandler)return this._logger.warn("_getHistory() called when a cheetah:getHistory request hasn't been ack'ed yet, skipping");this._historyAckHandler=()=>{this._historyAckHandler=void 0,this._setupHistoryTimeout()},this._setupCheetahAckHandler("getHistory",this._historyAckHandler),this._session.lens("historyStatus").set(_.z_.HistoryStatus.historyRequested),(0,E.tt)("cheetahGetHistory",this._params.capiService.cheetahGetHistory(),this._logger,(()=>this._monitoringService.notify(_.GA.GetHistorySuccessful.create(this._session.get().mode))),(()=>this._monitoringService.notify(_.A4.GetHistoryFailed.create(this._session.get().mode))))}_handleCheetahSetHistory(e){void 0!==this._historyAckHandler&&(this._removeCheetahAckHandler(this._historyAckHandler),this._historyAckHandler=void 0),this._clearHistoryTimeout();const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahSetHistory() - trying to handle `cheetah:setHistory` result with a session that is not `started`, skipping",{session:t});(0,a.zG)(e.cards,r.UI(_.x4.History.createFromCard),r.GY,s.c2,b.fold((()=>this._session.lens("historyStatus").set(_.z_.HistoryStatus.noHistory)),(e=>{e.forEach((e=>this._resultById.set(e.id,e))),this._session.set(Object.assign(Object.assign({},t),{activeContext:Object.assign(Object.assign({},t.activeContext),{kind:"pending",textRevision:b.none,availableActions:[],selection:b.none}),historyStatus:_.z_.HistoryStatus.historyRestored,results:[...t.results,...e],selectedRange:b.none,selectedText:b.none})),this._getContext(void 0,e[0].id)})))}_handleCheetahChunk(e){this._logger.debug("_handleCheetahChunk()",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahChunk() - received chunk with a session that is not `started`, skipping",{session:t,message:e});const i=_.x4.Id.create(e.promptId);(0,a.zG)(t.inProgressResult,b.filter(_.x4.isInProgressOngoing),b.filter((e=>_.x4.Id.eq.equals(e.id,i))),b.fold((()=>{const e=(0,a.zG)(t.inProgressResult,b.filter(_.x4.isInProgressOngoing),b.map((e=>e.id)));this._monitoringService.notify(_.Jp.UnexpectedChunkReceived.create(this._session.get().mode,e,i))}),(i=>{this._clearResultRelatedTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:b.some(Object.assign(Object.assign({},i),{text:i.text+e.token}))})),this._setupResultTimeout()})))}_handleCheetahResult(e){this._logger.debug("_handleCheetahResult()",{message:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahResult() - received result with a session that is not `started`, skipping",{session:t,message:e});const i=_.x4.Id.create(e.promptId);(0,a.zG)(t.inProgressResult,b.filter(_.x4.isInProgressOngoing),b.filter((e=>_.x4.Id.eq.equals(e.id,i))),b.fold((()=>{const e=(0,a.zG)(t.inProgressResult,b.filter(_.x4.isInProgressOngoing),b.map((e=>e.id)));this._monitoringService.notify(_.Jp.UnexpectedResultReceived.create(this._session.get().mode,e,i))}),(i=>{var n,r,s,o;if(this._clearResultRelatedTimeouts(),e.error||!e.text||""===e.text.plain){const i=e.error?_.JZ.create(e.error):_.JZ.createEmptyResultError();this._logger.warn("_handleCheetahResult() - received result with error, adding error to session",{session:t,message:e,error:i}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:b.none,error:b.some(i)}))}else if(e.text.interrupted)this._logger.debug("_handleCheetahResult() - received result with interrupted text, skipping",{session:t,message:e});else{let l,c,u,d;if("aiUsageAlert"===(null===(r=null===(n=e.context)||void 0===n?void 0:n.specialView)||void 0===r?void 0:r.kind))l=_.x4.AIUsageNotification.fromInProgressResult(i,e.text.plain);else{const t=(0,a.zG)(i.source,b.map((e=>e.actionValue.generatesTextType)),b.filter(S.contains(I.yb.cX.Insertable)),b.map((()=>_.x4.PrimaryAction.insert))),n=b.isSome(t);l=Object.assign(Object.assign({},i),{text:e.text.plain,kind:"complete",timestamp:Date.now(),replacementDelta:_.x4.ResultDelta.createFromResultMessage(e),primaryAction:t,isRephraseable:n,references:(0,a.zG)(b.fromNullable(e.references),b.map((t=>t.map((t=>{var i;return Object.assign(Object.assign({},t),{id:_.s3.Id.create(t.id),url:b.fromNullable(t.url),contextText:(0,a.zG)(b.fromNullable(null===(i=e.metadata)||void 0===i?void 0:i.knowledge_engine_references),b.chainNullableK((e=>{const i=Array.isArray(e)?e.find((e=>e.id===t.id)):void 0,n=null==i?void 0:i.contextText;return"string"==typeof n?n:void 0})))})}))))),changesSummary:b.fromNullable(e.changesSummary)})}this._logger.debug("_handleCheetahResult() - received complete result, saving complete result into history",{session:t,message:e,result:l}),e.context?(u=(null===(s=e.context)||void 0===s?void 0:s.voiceProfileSettings)?F(null===(o=e.context)||void 0===o?void 0:o.voiceProfileSettings,e.context.voice,t,this._upstreamDialect.get()):j(e.context.voice,t,this._upstreamDialect.get()),c={kind:"received",id:_._y.Id.create(e.context.id),availableActions:V(e.context.availableActions,this._skills,t.mode,t.selectedText),userPromptAction:M(e.context.promptAction,this._logger),intent:H(e.context.intent),documentOverview:K(e.context.documentOverview),specialView:b.fromNullable(e.context.specialView),selection:this._historyResultIdByGetContextMessageId.has(e.promptId)?b.none:(0,a.zG)(i.source,b.chain((({contextId:e})=>(0,a.zG)(b.fromNullable(this._contextById.get(e)),b.chain((({selection:e})=>e)))))),isBoundary:!1,textRevision:(0,a.zG)((0,a.zG)(i.boundaryContextId,b.chain((e=>b.fromNullable(this._contextById.get(e)))),b.chain((({textRevision:e})=>e))))},d=e.context.stateBlob,this._logger.debug("_handleCheetahResult() - received result with context, will update voice profile and context accordingly",{session:t,message:e,voiceProfile:u,context:c})):(this._logger.warn("_handleCheetahResult() - received result without context, keeping latest voice profile and context",{session:t,message:e}),u=t.voiceProfile,c=t.activeContext,d=this._stateBlobByContextId.get(t.activeContext.id)),this._contextById.set(c.id,c),void 0!==d&&this._stateBlobByContextId.set(c.id,d),this._resultById.set(l.id,l),this._contextIdByResultId.set(l.id,c.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:u,activeContext:c,inProgressResult:b.none,results:[l,...t.results]})),this._trackResultGenerationCompleted(l.id)}})))}_handleCheetahSearchReferencesResult(e){const t=this._session.get();if("started"===t.kind){const i=this._searchReferencesUrlsById.get(e.promptId);if(i){const n=e.references[0];n&&this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(i,b.some(_.s3.create(n)))}))}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result that did not have a corresponding cheetah:searchReferences request, skipping",{message:e})}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result with a session that is not `started`, skipping",{session:t})}_handleCheetahError(e){this._logger.debug("_handleCheetahError",{message:e}),this._clearAllTimeouts();const t=_.JZ.create(e.error);this._logger.warn("_handleCheetahError - received error, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none,error:b.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("_handleUpstreamDialectChange()",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const i=_.LA.Dialect.Id.create(e);this._logger.debug("_handleUpstreamDialectChange() - dialect changed on upstream services, updating selected dialect on voice profile",{session:t,selectedDialect:i}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:i})}))}}_handleCheetahAck(e){this._logger.debug("_handleCheetahAck()",{message:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("_handleCheetahAck() - extracting `cheetah:ack` handler from queue and executing it",{message:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===u.jK.SESSION_NOT_INITIALIZED){const t=(0,a.zG)(_.z_.toStarted(this._session.get()),b.map((e=>this._stateBlobByContextId.get(e.activeContext.id))),b.toUndefined);this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none}))),this._startSession(this._params.startSessionOptions,t),this._monitoringService.notify(_.Jp.CAPIErrorHandled.create(this._session.get().mode,e))}else{const t=_.JZ.createCriticalError((0,a.zG)(_.z_.toStarting(this._session.get()),b.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none,error:b.some(t)}))),this._monitoringService.notify(_.A4.CAPIErrorUnhandled.create(this._session.get().mode,e))}else this._monitoringService.notify(_.A4.CAPIErrorUnhandled.create(this._session.get().mode,e))}_submitAction(e,t,i,n,r,l){var c;this._logger.debug("_submitAction()",{actionValue:e,contextId:t,triggerContextId:i,boundaryContextId:n,previousText:r,selectedVoice:l});const u=this._session.get();if("started"===u.kind){const d=null!=t?t:u.activeContext.id,m=null!=n?n:u.activeBoundaryContext.id,p=this._stateBlobByContextId.get(d);if(void 0===p)return this._logger.warn("_submitAction() - cannot find state blob for context ID, skipping",{session:u,contextId:d,triggerContextId:i,contextStateBlob:p});const h="aiUsageNotification"===(null===(c=u.results[0])||void 0===c?void 0:c.kind)?u.results.slice(1):u.results;this._session.set(Object.assign(Object.assign({},u),{results:h,historyStatus:_.z_.HistoryStatus.restoreDisabled,activeContext:Object.assign(Object.assign({},u.activeContext),{kind:"pending"}),inProgressResult:b.isSome(e.generatesTextType)?b.some({kind:"inProgressPending",header:{label:_.aU.isUserPromptActionValue(e)?e.arg.value:e.label,iconUrl:_.aU.isUserPromptActionValue(e)||""===e.iconUrl.trim()?b.none:b.some(e.iconUrl),copiablePrompt:_.aU.isUserPromptActionValue(e)&&""!==e.arg.value.trim()?b.some(e.arg.value):b.none},text:"",source:b.some({contextId:d,actionValue:e}),boundaryContextId:b.some(m)}):b.none,error:b.none})),this._setupCheetahAckHandler("action",(e=>{(0,a.zG)(_.z_.toStarted(this._session.get()),b.chain((e=>e.inProgressResult)),b.filter((0,C.Kg)(_.x4.isInProgressPending,_.x4.isInProgressInterrupted)),b.fold((()=>(this._logger.warn("received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping",{ackId:e}),o.of(void 0))),(t=>{if(_.x4.isInProgressInterrupted(t))return this._logger.info("received `cheetah:ack` related to in-progress-interrupted result, sending `cheetah:interrupt`",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none}))),this._params.capiService.cheetahInterrupt({promptId:e});if(_.x4.isInProgressPending(t)){this._setupContextTimeout("action"),this._setupResultTimeout();const i=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:_.x4.Id.create(e)});return this._logger.debug("received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing",{ackId:e,inProgressResult:i}),this._resultById.set(i.id,i),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.some(i)}))),o.of(void 0)}(0,k.L0)(t)})))()}));const g=Object.assign({contextId:d,triggerContextId:null!=i?i:u.activeContext.id,actionId:e.id,args:_.aU.isUserPromptActionValue(e)?[{name:e.arg.id,value:e.arg.value}]:(0,a.zG)(s.c2(e.args),b.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:p,previousText:null!=r?r:u.results.length>0&&_.x4.isStandardCompletedResult(u.results[0])?L(u.results[0]):void 0},l?{metadata:{selectedVoice:l}}:null),f=(0,a.zG)(e,b.fromPredicate(_.aU.isUserPromptActionValue),b.fold((0,a.a9)(g),(e=>Object.assign(Object.assign({},g),{useReferences:b.toUndefined(e.useReferences),omitReferenceIds:b.toUndefined(e.omitReferenceIds)}))));this._logger.debug("_submitAction() - sending `cheetah:action` to CAPI",{data:f}),(0,E.tt)("cheetahAction",this._params.capiService.cheetahAction(f),this._logger,(()=>this._monitoringService.notify(_.GA.ActionSuccessful.create(this._session.get().mode,e.id))),(()=>this._monitoringService.notify(_.A4.ActionFailed.create(this._session.get().mode,e.id))))}else this._logger.warn("_submitAction() - submitting action with a session that is not `started`, skipping",{session:u,actionValue:e,contextId:t})}_extractLatestResultContext(e){return this._extractContextFromResults(e,0)}_extractLatestResultBoundaryContext(e){return this._extractBoundaryContextFromResults(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResults(e,1)}_extractPreviousResultBoundaryContext(e){return this._extractBoundaryContextFromResults(e,1)}_extractContextFromResults(e,t){const i=(0,a.zG)(b.fromNullable(e.results[t]),b.map((e=>e.id)),b.chain((e=>b.fromNullable(this._contextIdByResultId.get(e)))),b.chain((e=>b.fromNullable(this._contextById.get(e)))));return b.isNone(i)&&this._logger.warn("_extractContextFromResults() - could not find context for result",{session:e,resultIndex:t}),i}_extractBoundaryContextFromResults(e,t){return(0,a.zG)(b.fromNullable(e.results[t]),b.filter(_.x4.isComplete),b.chain((({boundaryContextId:e})=>e)),b.chain((e=>b.fromNullable(this._contextById.get(e)))),S.tapLeft((()=>{this._logger.warn("_extractBoundaryContext() - could not find boundary context for result index")})))}_extractInitialContext(){return null!==this._initialReceivedContext?b.some(this._initialReceivedContext):(this._logger.warn("_extractInitialContext() - could not find initial context"),b.none)}_setupResultTimeout(){this._clearResultTimeout(),this._resultTimeout=x.H(this._resultTimeoutMs).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none,error:b.some(_.JZ.createCriticalError((0,a.zG)(_.z_.toStarting(this._session.get()),b.isSome)))}))),this._monitoringService.notify(_.A4.WaitForResultTimeout.create(this._session.get().mode))}))}_setupContextTimeout(e){this._logger.debug("_setupContextTimeout()",{sourceCommand:e}),this._clearContextTimeout(),this._contextTimeout=x.H(this._contextTimeoutMs).subscribe((()=>{const t=_.JZ.createCriticalError((0,a.zG)(_.z_.toStarting(this._session.get()),b.isSome));this._logger.warn("waited too long to receive `cheetah:setContext`, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none,error:b.some(t)}))),this._monitoringService.notify(_.A4.WaitForContextTimeout.create(this._session.get().mode,e))}))}_setupHistoryTimeout(){this._clearHistoryTimeout(),this._historyTimeout=x.H(this._historyTimeoutMs).subscribe((()=>{const e=_.JZ.createCriticalError((0,a.zG)(_.z_.toStarting(this._session.get()),b.isSome));this._logger.warn("waited too long to receive `cheetah:setHistory`, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:b.none,error:b.some(e)}))),this._monitoringService.notify(_.A4.WaitForHistoryTimeout.create(this._session.get().mode))}))}_setupCheetahAckTimeout(e){this._logger.debug("_setupCheetahAckTimeout()",{sourceCommand:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=x.H(this._cheetahAckTimeoutMs).subscribe((()=>{const t=_.JZ.createCriticalError((0,a.zG)(_.z_.toStarting(this._session.get()),b.isSome));this._logger.warn("waited too long to receive an ACK for a `cheetah:*` command, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:b.none,error:b.some(t)}))),this._monitoringService.notify(_.A4.WaitForAckTimeout.create(this._session.get().mode,e))}))}_clearResultTimeout(){var e;null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearHistoryTimeout(){var e;null===(e=this._historyTimeout)||void 0===e||e.unsubscribe(),this._historyTimeout=void 0}_clearCheetahAckTimeout(){var e;null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearResultRelatedTimeouts(){this._clearContextTimeout(),this._clearResultTimeout(),this._clearCheetahAckTimeout()}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearHistoryTimeout(),this._clearCheetahAckTimeout()}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}_removeCheetahAckHandler(e){this._cheetahAckHandlers=this._cheetahAckHandlers.filter((t=>t!==e)),0===this._cheetahAckHandlers.length&&this._clearCheetahAckTimeout()}}},9137:(e,t,i)=>{i.d(t,{c:()=>o});var n=i(13004),r=i(62074),s=i(75055);class o{constructor(e,t=new s.W(o.name)){this._capiService=e,this._logger=t}trackResultInsert(e,t,i=!1){this._logger.debug("trackResultInsert()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultInsert() - tracking result insert without context"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.insert},e,t,{withVoiceProfile:i})}trackResultOffensive(e,t){this._logger.debug("trackResultOffensive()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultOffensive() - tracking result offensive without context"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.offensive},e,t)}trackResultDismiss(e,t){this._logger.debug("trackResultDismiss()",{contextId:e,historyResultId:t}),e||this._logger.warn("trackResultDismiss() - tracking result dismiss without context"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.dismiss},e,t)}trackResultRephrase(e){this._logger.debug("trackResultRephrase()",{contextId:e}),e||this._logger.warn("trackResultRephrase() - tracking result rephrase without context"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.rephrase},e)}trackResultCopy(e,t){this._logger.debug("trackCopy()"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.copy},e,t)}trackResultGenerationCompleted(e,t){this._logger.debug("trackResultGenerationCompleted()"),this._trackUxInteraction({kind:"result",userAction:r.Z7.Result.UserAction.generationCompleted},e,t)}trackVoiceProfileOpen(e){this._logger.debug("trackVoiceProfileOpen()",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?r.Z7.VoiceProfile.UserAction.open:r.Z7.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("trackVoiceProfileSkip()"),this._trackUxInteraction({kind:"voiceProfile",userAction:r.Z7.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("trackActionsOpenStore()"),this._trackUxInteraction({kind:"actions",userAction:r.Z7.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("trackActionsOffensive()"),e||this._logger.warn("trackActionsOffensive() - tracking actions offensive without context"),this._trackUxInteraction({kind:"actions",userAction:r.Z7.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("trackPromptSearch()"),this._trackUxInteraction({kind:"prompt",userAction:r.Z7.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("trackUsageInfoClick()"),this._trackUxInteraction({kind:"usageInfo",userAction:r.Z7.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("trackUsageInfoHover()"),this._trackUxInteraction({kind:"usageInfo",userAction:r.Z7.UsageInfo.UserAction.hover})}trackHistoryButtonView(){this._logger.debug("trackHistoryButtonView()"),this._trackUxInteraction({kind:"historyButton",userAction:r.Z7.HistoryButton.UserAction.view})}trackOnboardingPopupView(){this._logger.debug("trackOnboardingPopupView()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){this._logger.debug("trackOnboardingPopupSkip()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:r.Z7.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){this._logger.debug("trackOnboardingPopupNext()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:r.Z7.Onboarding.UserAction.next})}trackBTSOnboardingPopupView(){this._logger.debug("trackBTSOnboardingPopupView()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:r.Z7.Onboarding.UserAction.view})}trackBTSOnboardingPopupSkip(){this._logger.debug("trackBTSOnboardingPopupSkip()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:r.Z7.Onboarding.UserAction.skip})}trackBTSOnboardingPopupNext(){this._logger.debug("trackBTSOnboardingPopupNext()"),this._trackUxInteraction({kind:"BTSonboardingPopup",userAction:r.Z7.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){this._logger.debug("trackOnboardingPromptsTooltipView()"),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){this._logger.debug("trackOnboardingReviewTooltipView()"),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingReferencesTooltipView(){this._logger.debug("trackOnboardingReferencesTooltipView()"),this._trackUxInteraction({kind:"onboardingReferencesTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackOnboardingHistoryTooltipView(){this._logger.debug("trackOnboardingHistoryTooltipView()"),this._trackUxInteraction({kind:"onboardingHistoryTooltip",userAction:r.Z7.Onboarding.UserAction.view})}trackAssistantClose(){this._logger.debug("trackAssistantClose()"),this._trackUxInteraction({kind:"assistant",userAction:r.Z7.Assistant.UserAction.close})}trackVoiceProfileRemoveTag(){this._logger.debug("trackVoiceProfileRemoveTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:r.Z7.VoiceProfile.UserAction.removeVoiceTag})}trackVoiceProfileKeepTag(){this._logger.debug("trackVoiceProfileKeepTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:r.Z7.VoiceProfile.UserAction.keepVoiceTag})}trackAINotificationDismiss(e){this._logger.debug("trackAINotificationDismiss()"),this._trackUxInteraction({kind:"aiUsageNotification",userAction:"document"===e?r.Z7.AIUsageNotification.UserAction.dontShowOnDocument:r.Z7.AIUsageNotification.UserAction.dontShowForever})}trackReadyToInteract(){this._logger.debug("trackReadyToInteract()"),this._trackUxInteraction({kind:"assistant",userAction:r.Z7.Assistant.UserAction.readyToInteract})}trackMyVoiceCardToggle(e){this._logger.debug("trackMyVoiceCardToggle"),this._trackUxInteraction({kind:"voiceProfile",userAction:e?r.Z7.VoiceProfile.UserAction.toggleToMyVoice:r.Z7.VoiceProfile.UserAction.toggleToNeutral})}_trackUxInteraction(e,t,i,s={}){const o=r.Z7.getComponentId(e,t,i,s),a=r.Z7.getUserAction(e);this._logger.debug("_trackUxInteraction() - sending `user_action` to CAPI",{componentId:o,userAction:a,uxInteraction:e,contextId:t}),(0,n.tt)("sendUserAction",this._capiService.user_action({componentId:o,userAction:a}),this._logger)}}},36582:(e,t,i)=>{i.d(t,{p:()=>m});var n=i(5114),r=i(57050),s=i(80800),o=i(9922),a=i(85985),l=i(38983),c=i(62074),u=i(13004),d=i(97834);class m{constructor(e){var t;this._params=e,this._subs=new o.w.Keeper,this._activeSurvey=l.h.create(n.none),this.activeSurvey=this._activeSurvey.view(),this._monitoringService=null!==(t=this._params.monitoringService)&&void 0!==t?t:d.g.getInstance(),this._init()}dispose(){this._subs.dispose()}submitSurveyResult(e){(0,u.tt)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:e.rating,stage:c.Bs.Stage.toCAPIStage(e.stage),open_answer:n.getOrElse((()=>""))(e.openAnswer),detailed_placement:e.detailedPlacement,type:e.type}),void 0,(()=>this._monitoringService.notify(c.Nk.SubmitSurveySuccessful.create(e.type,e.placement,e.stage,!1,e.rating,n.getOrElse((0,r.a9)(""))(e.openAnswer),e.detailedPlacement))),(()=>this._monitoringService.notify(c.T2.SubmitSurveyFailed.create(e.type,e.placement,e.detailedPlacement))))}dismissSurvey(e){(0,u.tt)("submitSurveyResult",this._params.capiService.submit_survey_result({placement:e.placement,score:"declined",stage:c.Bs.Stage.toCAPIStage(e.stage),detailed_placement:e.detailedPlacement,type:e.type}),void 0,(()=>this._monitoringService.notify(c.Nk.SubmitSurveySuccessful.create(e.type,e.placement,e.stage,!0))),(()=>this._monitoringService.notify(c.T2.SubmitSurveyFailed.create(e.type,e.placement,e.detailedPlacement))))}_init(){this._subs.push(this._params.capiService.relevantInboundCAPIMessages.pipe(a.h(c.JS.ShowSurvey.is)).subscribe((e=>this._handleShowSurvey(e))))}_handleShowSurvey(e){(0,r.zG)(e.survey,n.fromPredicate((e=>e.placement===s.v0.Survey.Data.BaseSurvey.Placement.ggo)),n.chain((e=>"open_answer_score"===e.type?n.some(e):n.none)),n.chain((e=>{var t;return"string"==typeof e.detailed_placement&&2===(null===(t=e.detailed_placement)||void 0===t?void 0:t.split(":").length)?n.some({survey:e,detailedPlacement:e.detailed_placement}):n.none})),n.chain((({survey:e,detailedPlacement:t})=>{const[i,r]=t.split(":"),s=Math.abs(Number.parseInt(r,10));return Number.isNaN(s)?n.none:n.some({survey:e,detailedPlacement:t,sessionId:i,resultId:c.x4.Id.create(s)})})),n.fold((()=>this._monitoringService.notify(c.pR.UnexpectedSurveyFormatReceived.create(e.survey.type,e.survey.placement,e.survey.detailed_placement))),(({survey:e,detailedPlacement:t,resultId:i})=>{this._activeSurvey.modify((()=>n.some({placement:e.placement,title:e.title,detailedPlacement:t,type:s.v0.Survey.Data.OpenAnswerScoreSurvey.type,resultId:i,maxScore:e.max_score,boxText:n.fromNullable(e.box_text),ratingLabels:e.score_labels,acknowledgmentTitle:n.fromNullable(e.acknowledgment_title),acknowledgment:n.fromNullable(e.acknowledgment),skipOpenAnswerFrom:e.skip_open_answer_from,openAnswer:n.fromNullable({placeholder:e.open_answer.placeholder,maxLen:e.open_answer.max_len,minLen:n.fromNullable(e.open_answer.min_len)})})))})))}}},18695:(e,t,i)=>{i.d(t,{s_:()=>ut,Dj:()=>R,tk:()=>We,Gi:()=>n,qA:()=>Sd,XR:()=>xd});var n,r=i(95195),s=i(45701),o=i(64015),a=i(17889),l=i(57050),c=i(14601),u=i(24209),d=i(60797),m=i(77176),p=i(19751),h=i(78674),g=i(85985),f=i(98403),y=i(2834),v=i(5114),x=i(83078),b=i(38983),S=i(62074),k=i(50685),C=i(13004),w=i(73975);!function(e){e.eq=r.getEq(w.yv,S.x4.Id.eq),e.card=function(e){return r.right(e)},e.uiItem=function(e){return r.left(e)},e.toCard=function(e){return v.fromEither(e)},e.toUIItem=function(e){return(0,l.zG)(e,r.fold(v.some,(()=>v.none)))}}(n||(n={}));var _=i(62965);function I(e){return(0,l.zG)(S.z_.toStarted(e),v.filter((e=>(0,l.zG)(e.activeContext.specialView,x.forAll((({kind:e})=>"aiUsageAlert"!==e))))),v.map((e=>e.activeContext.availableActions)),v.chain(a.c2))}function E(e,t){return(0,l.zG)(S.z_.toStarted(e),v.chain((e=>(0,l.zG)(A(t),v.map(o.DZ((t=>{var i;return null!==(i=e.detectedReferences.get(t))&&void 0!==i?i:v.none}))),v.chain(a.c2)))))}function A(e){return(0,l.zG)(e.split(/\s/).filter((e=>e.length>3&&e.includes("."))),a.nI)}function O(e){return Object.assign(Object.assign({},e),{handlers:Object.assign(Object.assign({},e.handlers),{close:()=>(0,l.zG)(_.fF((()=>new Promise((e=>setTimeout(e))))),_.tS(e.handlers.close))})})}var R,T,P=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){let t;!function(e){e.make=function(e){return{kind:"backendAction",action:e}},e.ordByActionStore=s.contramap((e=>e.action.store.rank))(s.ordNumber)}(t=e.BackendAction||(e.BackendAction={}))}(R||(R={})),function(e){e.create=function(){return{textBox:"",selectedAction:v.none,contentOverflowUnderToolbar:!1,promptAutofocusToken:0,cardsState:{hoveredCard:v.none,focusedCard:v.none},reportMenuVisible:v.none,referencesVisibility:new Map,detectedReferences:v.none,overrideCardVoice:new Map}}}(T||(T={}));class U{constructor(e){var t,i;this._params=e,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new k.WQ(U.name),this._monitoringService=null!==(i=this._params.monitoringService)&&void 0!==i?i:k.gz.getInstance(),this._state=b.h.create(T.create()),this._subs=new c.w,this._reportMenuVisibleDebounced=b.h.create(v.none),this.state=b.h.combine(this._state,this._params.userService.user,this._params.genAIAvailabilityService.availability,this._params.sessionService.session,this._reportMenuVisibleDebounced,((e,t,i,r,s)=>{var{cardsState:a,reportMenuVisible:c,textBox:u}=e,d=P(e,["cardsState","reportMenuVisible","textBox"]);return Object.assign(Object.assign({},d),{textBox:u,user:t,genAIAvailability:i,session:r,userPromptAction:(0,l.zG)(S.z_.toStarted(r),v.chain((e=>e.activeContext.userPromptAction))),activeCards:new Set((0,l.zG)([a.hoveredCard,(0,l.zG)(a.focusedCard,x.orElse((0,l.zG)(s,v.chain(n.toCard))))],o.oA)),canScroll:v.isNone(c),contextualActions:I(r),detectedReferences:E(r,u)})})),this._subs.add(this.state.subscribe((e=>this._logger.debug("State update",e)))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(u.T(this._state.view("reportMenuVisible").pipe(d.oA,m.U(v.some)),this._state.view("reportMenuVisible").pipe(p.skipBy(v.getEq(n.eq)),h.b(250),g.h(v.isNone))).subscribe(f.wW(this._reportMenuVisibleDebounced))),this._subs.add(this._params.routingViewModel.activeView.subscribe((()=>this._state.modify((0,l.ls)(C.eG.set("reportMenuVisible",v.none),C.eG.set("cardsState",{hoveredCard:v.none,focusedCard:v.none})))))),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}contentOverflowUnderToolbar(e){this._state.lens("contentOverflowUnderToolbar").set(e)}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}getContextById(e){return this._params.sessionService.getContextById(e)}dispose(){this._subs.unsubscribe()}_updateActiveView(){return u.T(this._params.sessionService.session.view((0,l.ls)(S.z_.toStarting,v.chain((e=>e.error)),x.tap((()=>this._params.routingViewModel.replace("loadingError"))))),this._state.view("selectedAction").pipe(d.oA,y.b((()=>this._params.routingViewModel.push("actionSelected")))),this._params.sessionService.session.view((0,l.ls)(S.z_.toStarted,v.filter((()=>v.isNone(this._state.get().selectedAction))),v.map((e=>e.results.length>0||v.isSome(e.inProgressResult))),x.tap((e=>this._params.routingViewModel.replace(e?"afterResults":"beforeResults"))))))}_handleUIAction(e){switch(e.kind){case S.ix.Kind.toolbarCloseButtonClick:return void this._close(e);case S.ix.Kind.toolbarGoBackButtonClick:case S.ix.Kind.radioOptionsCancelButtonClick:return this._goBack();case S.ix.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case S.ix.Kind.actionBrickClick:return this._executeAction(e.action);case S.ix.Kind.promptSubmitButtonClick:return this._go(v.none);case S.ix.Kind.userPromptSubmit:return this._go(v.some(e.prompt));case S.ix.Kind.radioOptionsSubmitButtonClick:return this._submitSelectedAction({selectedRadioOption:e.selectedOption});case S.ix.Kind.generateStopButtonClick:return this._stop();case S.ix.Kind.resultCardInsertButtonClick:return this._insert(e.result,e.selectedVoice);case S.ix.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result,e.selectedVoice);case S.ix.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case S.ix.Kind.errorCardOkButtonClick:return this._dismissError();case S.ix.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case S.ix.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case S.ix.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case S.ix.Kind.creditsInfoHover:return this._params.trackingService.trackUsageInfoHover();case S.ix.Kind.creditsInfoClick:return this._onCreditsInfoClick();case S.ix.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case S.ix.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case S.ix.Kind.resultCardCopy:return this._onCardCopy(e.resultId);case S.ix.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case S.ix.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case S.ix.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case S.ix.Kind.regenerateWithoutReferenceButtonClick:return this._regenerateWithoutReference(e.result,e.referenceId,e.selectedVoice);case S.ix.Kind.mount:return this._handleMount(e);case S.ix.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case S.ix.Kind.promptFieldKeyPressEnter:return e.text.trim().length>0?this._go(v.none):this._tryInsertLatestResult();case S.ix.Kind.restoreHistoryButtonClick:return this._params.sessionService.restoreHistory();case S.ix.Kind.removeSelectionContextClick:return this._params.sessionService.dismissActiveBoundaryContext();case S.ix.Kind.selectionContextInteraction:return this._params.textEditorService.setContextHighlight(e.range,e.visibility);default:return}}_handleMount(e){e.name===S.ec.creditsInfoButton?(0,C.tt)("reportUphookShow",this._params.uphookService.reportUphookShow(this._params.userService.user.get()),this._logger,void 0,(e=>this._monitoringService.notify(S.r_.ReportUphookShowFailed.create(e)))):e.name===S.ec.historyButton&&this._params.trackingService.trackHistoryButtonView()}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>v.some(e):v.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>v.some(e):v.filter((t=>t!==e)))}_onCardCopy(e){this._params.sessionService.trackResultCopy(e)}_onCardReportMenuVisibilityChange(e,t){this._state.modify((i=>Object.assign(Object.assign({},i),{reportMenuVisible:t?v.some(e):(0,l.zG)(i.reportMenuVisible,v.filter((t=>!n.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},i.cardsState),{hoveredCard:(0,l.zG)(n.toCard(e),v.fold((()=>i.cardsState.hoveredCard),(e=>t?i.cardsState.hoveredCard:(0,l.zG)(i.cardsState.hoveredCard,v.filter((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((i=>new Map(i).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((i=>{var n;const r=new Map(i),s=(null!==(n=i.get(e))&&void 0!==n?n:t)===S.x4.GeneratedTextVoice.generic?S.x4.GeneratedTextVoice.user:S.x4.GeneratedTextVoice.generic;return r.set(e,s),this._params.trackingService.trackMyVoiceCardToggle(s===S.x4.GeneratedTextVoice.user),r}))}_close(e){S.ix.is(S.ix.Kind.toolbarCloseButtonClick)(e)&&this._params.trackingService.trackAssistantClose(),(0,C.tt)("close",this._params.handlers.close(),this._logger,void 0,(e=>this._monitoringService.notify(S.W2.AssistantCloseFailed.create(e))))}_goBack(){"actionSelected"===this._params.routingViewModel.activeView.get()&&this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:v.none,textBox:""}))),this._params.routingViewModel.pop()}_updateTextBox(e){this._state.lens("textBox").set(e),this._searchReferences(e)}_executeAction(e){if("backendAction"===e.kind)if(S.aU.isFollowUpQuestionActionInput(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedAction:v.some(t)})))}else S.aU.isQuickActionInput(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedAction:v.none}))),this._params.sessionService.submitAction(e.action,v.toUndefined(this._lastResultSelectedVoice()))):S.aU.isSkillActionInput(e.action)||(0,l.Rz)(e.action);else"allResults"===e.kind||("go"===e.kind?this._go(v.none):(0,l.Rz)(e))}_handleAIUsageNotificationOnPromptSubmit(){(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.chain((e=>e.activeContext.specialView)),v.filter((e=>"aiUsageAlert"===e.kind)),x.tap((()=>this._params.trackingService.trackAINotificationDismiss("document"))))}_go(e){v.isSome(e)?(this._handleAIUsageNotificationOnPromptSubmit(),this._params.sessionService.submitAction(x.unsafeGet(e),v.toUndefined(this._lastResultSelectedVoice()))):v.isSome(this._state.get().selectedAction)?this._submitSelectedAction({textBox:this._state.get().textBox}):(this._handleAIUsageNotificationOnPromptSubmit(),this._submitUserPromptAction())}_stop(){this._params.sessionService.stopInProgressResult()()}_insert(e,t){(0,C.tt)("insertText",this._params.textEditorService.insertText((0,C.l)((0,l.zG)(e.replacementDelta,r.fold(l.yR,(e=>t===S.x4.GeneratedTextVoice.user?e.user:e.generic))),"")),this._logger,(()=>{this._params.sessionService.trackResultInsert(e.id,t===S.x4.GeneratedTextVoice.user)}))}_tryInsertLatestResult(){(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.map((e=>e.results)),v.chain(o.YM),v.filter(S.x4.isStandardCompletedResult),x.tap((e=>this._insert(e,(0,l.zG)(this._lastResultSelectedVoice(),v.getOrElse((()=>S.x4.GeneratedTextVoice.generic)))))))}_onPromptFieldKeyPressEscape(e){(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.chain((e=>e.inProgressResult)),v.fold((()=>this._close(e)),(()=>this._stop())))}_rephrase(e,t){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:v.none},t)}_dismissResult(e){this._params.sessionService.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,l.zG)(t.reportMenuVisible,v.filter((t=>!n.eq.equals(t,n.card(e.id))))),cardsState:{hoveredCard:(0,l.zG)(t.cardsState.hoveredCard,v.filter((t=>t!==e.id))),focusedCard:(0,l.zG)(t.cardsState.hoveredCard,v.filter((t=>t!==e.id)))}})))}_dismissError(){this._params.sessionService.dismissError()}_reportOffensiveResult(e){this._params.sessionService.trackResultOffensive(e.id)}_reportOffensiveActions(){this._params.sessionService.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoClick(){this._params.trackingService.trackUsageInfoClick(),(0,C.tt)("reportUphookClick",this._params.uphookService.reportUphookClick(this._params.userService.user.get()),this._logger,void 0,(e=>this._monitoringService.notify(S.r_.ReportUphookClickFailed.create(e))))}_submitSelectedAction(e){(0,l.zG)(this._state.get().selectedAction,v.chain((t=>(0,l.zG)(t.args[0],S.Xy.match({string:()=>{var i;return(0,l.zG)(v.fromNullable(null===(i=e.textBox)||void 0===i?void 0:i.trim()),v.filter((e=>e.length>0)),v.map((e=>S.aU.FollowUpQuestionActionValue.fromTextInput(t,e))))},radio:()=>(0,l.zG)(v.fromNullable(e.selectedRadioOption),v.map((e=>S.aU.FollowUpQuestionActionValue.fromRadioInput(t,e))))})))),x.tap((e=>{this._state.modify((e=>Object.assign(Object.assign({},e),{selectedAction:v.none,textBox:""}))),this._params.sessionService.submitAction(e,v.toUndefined(this._lastResultSelectedVoice()))})))}_lastResultSelectedVoice(){return(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.map((e=>e.results)),v.chain(o.YM),v.chain((e=>v.fromNullable(this._state.lens("overrideCardVoice").view((t=>t.get(e.id))).get()))))}_submitUserPromptAction(){(0,l.zG)(this._state.get().textBox.trim(),v.fromPredicate((e=>""!==e)),v.chain((e=>(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.chain((t=>(0,l.zG)(t.activeContext.userPromptAction,v.map((i=>({text:e,session:t,userPromptAction:i}))))))))),x.tap((({text:e,session:t,userPromptAction:i})=>{this._state.lens("textBox").set(""),this._params.sessionService.submitAction(S.aU.UserPromptActionValue.fromInput(i,e,(0,l.zG)(E(t,e),v.map(o.DZ((e=>(0,l.zG)(e.url,v.map((t=>({url:t,referenceId:e.id}))))))),v.chain(a.nI)),v.none),v.toUndefined(this._lastResultSelectedVoice()))})))}_regenerateWithoutReference(e,t,i){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:v.some([t])},i)}_searchReferences(e){(0,l.zG)(A(e),x.tap((e=>e.forEach((e=>this._params.sessionService.searchReferences(e))))))}}var B=i(80900),N=i(28043),G=i(8125);class z{constructor(e,t,i=3e3,n=1){this._assistantUIActions=e,this._activeView=t,this._notificationsDurationMs=i,this._maxNotificationsCountAtOnce=n,this._state=b.h.create([]),this._notificationsSubs=new Map,this._subs=new c.w,this._nextToastId=0,this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe()),this._subs.add(this._removeVoiceTagNotification().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(o.hX((t=>t.id!==e)))}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){const t=this._nextToastId++;this._notificationsSubs.set(t,B.H(this._notificationsDurationMs).subscribe((()=>this.dismiss(t)))),this._state.modify((0,l.ls)(o.QI({kind:e,id:t}),o.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(g.h((0,G.Kg)(S.ix.is(S.ix.Kind.feedbackFormSubmitButtonClick),S.ix.is(S.ix.Kind.reportOffensiveResultButtonClick),S.ix.is(S.ix.Kind.reportOffensiveActionsButtonClick))),y.b((()=>this._showNotification(S.Cl.Kind.feedbackSubmitted))))}_removeVoiceTagNotification(){return this._assistantUIActions.pipe(g.h(S.ix.is(S.ix.Kind.voiceTagPopoverRemoveButtonClick)),y.b((()=>this._showNotification(S.Cl.Kind.voiceTagRemoved))))}_clearNotificationsOnViewChange(){return this._activeView.pipe(N.x(),y.b((e=>{"feedbackForm"!==e&&"voiceProfile"!==e||this.clearAll()})))}}var F,j=i(22232);!function(e){e.empty={activeSurvey:v.none,stage:S.Bs.Stage.Type.Rating,transitionStage:S.Bs.Stage.Type.Rating,rating:v.none,errors:v.none,openAnswer:v.none}}(F||(F={}));class V{constructor(e){this._params=e,this._state=b.h.create(F.empty),this._subs=new c.w,this._stageTimeoutClear=void 0,this.state=this._state.view(),this._updateStageAfterTransition(),this._subscribeToActiveSurvey(),this._subs.add(this._params.assistantUIActions.subscribe((e=>{(0,G.Kg)(S.ix.isSurveyAction,S.ix.isSurveyImplicitDismissAction)(e)&&this._handleUIAction(e)})))}get _activeSurvey(){return this.state.get().activeSurvey}_subscribeToActiveSurvey(){this._subs.add(this._params.userSurveyService.activeSurvey.subscribe((e=>{(0,l.zG)(e,v.map((e=>{(0,l.zG)(this._activeSurvey,v.fold((()=>this._updateActiveSurvey(e)),(t=>{t.detailedPlacement!==e.detailedPlacement&&this._updateActiveSurvey(e)})))})))})))}_updateActiveSurvey(e){this._state.set(Object.assign(Object.assign({},F.empty),{activeSurvey:v.some(e)}))}_handleUIAction(e){switch(e.kind){case S.ix.Kind.surveySubmitButtonClick:case S.ix.Kind.surveyKeyPressShiftEnter:this._onSurveyCompleted();break;case S.ix.Kind.surveyCancelButtonClick:case S.ix.Kind.surveyCloseButtonClick:this._onDismissExplicitly();break;case S.ix.Kind.surveyOpenAnswerChange:this._onOpenAnswerChange(e.openAnswer);break;case S.ix.Kind.surveyRatingSelectionChange:this._onRatingSelectionChange(e.rating);break;case S.ix.Kind.promptSubmitButtonClick:case S.ix.Kind.actionBrickClick:case S.ix.Kind.resultCardInsertButtonClick:case S.ix.Kind.resultCardRephraseButtonClick:case S.ix.Kind.resultCardHeaderClick:case S.ix.Kind.resultCardDismissButtonClick:this._onDismissImplicitly();break;default:(0,j.L0)(e)}}_onRatingSelectionChange(e){(0,l.zG)(this._activeSurvey,v.map((e=>e.skipOpenAnswerFrom)),v.map((t=>{e<t?this._state.modify((t=>Object.assign(Object.assign({},t),{rating:v.some(e),transitionStage:S.Bs.Stage.Type.Feedback}))):this._state.modify((t=>Object.assign(Object.assign({},t),{rating:v.some(e),transitionStage:S.Bs.Stage.Type.Completed}))),this._reportCompleting()})))}_onOpenAnswerChange(e){(0,l.zG)(this._activeSurvey,v.chain((({openAnswer:e})=>e)),v.map((({maxLen:t})=>{e.length<=t&&this._state.modify((t=>Object.assign(Object.assign({},t),{openAnswer:v.some(e),errors:v.none})))})))}_onSurveyCompleted(){(0,l.zG)(this._activeSurvey,v.chain((({openAnswer:e})=>e)),v.chain((({minLen:e})=>e)),v.fold((()=>this._complete()),(e=>{(0,l.zG)(this._state.get().openAnswer,v.fold((()=>this._setOpenAnswerError("This field is required.")),(t=>{t.length<e?this._setOpenAnswerError(e>0?`Please enter at least ${e} characters.`:"This field is required."):this._complete()})))})))}_complete(){this._reportCompleting(),this._state.lens("transitionStage").set(S.Bs.Stage.Type.Completed)}_reportCompleting(){(0,l.zG)(this._activeSurvey,v.chain((e=>(0,l.zG)(this._state.get().rating,v.map((t=>({survey:e,rating:t})))))),v.map((({survey:e,rating:t})=>this._params.userSurveyService.submitSurveyResult({rating:t,openAnswer:this._state.get().openAnswer,placement:e.placement,detailedPlacement:e.detailedPlacement,stage:this.state.get().stage,type:e.type}))))}_setOpenAnswerError(e){this._state.lens("errors").set(v.some({openAnswerError:v.some(e)}))}_onDismissExplicitly(){(0,l.zG)(this._activeSurvey,v.map((e=>{const t=this.state.get().stage;t===S.Bs.Stage.Type.Rating&&this._params.userSurveyService.dismissSurvey({placement:e.placement,detailedPlacement:e.detailedPlacement,type:e.type,stage:t})}))),this._state.lens("transitionStage").set(S.Bs.Stage.Type.Closed)}_onDismissImplicitly(){this._state.lens("transitionStage").set(S.Bs.Stage.Type.Closed)}_updateStageAfterTransition(){this._subs.add(this._state.subscribe((e=>{this._clearStageTimeout(),this._stageTimeoutClear=setTimeout((()=>{this._state.lens("stage").set(e.transitionStage)}),M[e.transitionStage])})))}_clearStageTimeout(){void 0!==this._stageTimeoutClear&&(clearTimeout(this._stageTimeoutClear),this._stageTimeoutClear=void 0)}dispose(){this._subs.unsubscribe(),this._clearStageTimeout()}}const M={[S.Bs.Stage.Type.Rating]:0,[S.Bs.Stage.Type.Feedback]:300,[S.Bs.Stage.Type.Completed]:0,[S.Bs.Stage.Type.Closed]:0};class D{constructor(e,t,i,n=k.gz.getInstance()){this._assistantUIActions=e,this._router=t,this._skillService=i,this._monitoringService=n,this._subs=new c.w,this._state=b.h.create(v.none),this.state=this._state.view(),this._skillService&&this._subs.add(this._skillService.skillRequests.subscribe((e=>{e.close?(this._onSkillClosed(),this._state.set(v.none)):e.size&&this._state.modify(v.map((t=>Object.assign(Object.assign({},t),{size:e.size}))))}))),this._subs.add(this._assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case S.ix.Kind.actionBrickClick:if("backendAction"===e.action.kind&&S.aU.isSkillActionInput(e.action.action)){const t=e.action.action.skill;this._onSkillOpened(),this._state.set(v.some({skill:t,status:"loading",size:{width:416,height:245}}))}break;case S.ix.Kind.mount:e.name===S.ec.skill&&(0,C.tt)("initSkill",(0,l.zG)((0,l.zG)(this._state.get(),_.Yo((()=>new Error("Cannot init Skill. No Skill state available.")))),_.tS((t=>this._skillService?(0,l.zG)(this._skillService.initSkill(t.skill,e.element),_.UI((e=>Object.assign(Object.assign({},t),{size:e})))):_.t$(new Error("Cannot init Skill. No `SkillService` available."))))),void 0,(e=>{this._state.set(v.some(Object.assign(Object.assign({},e),{status:"ready"}))),this._monitoringService.notify(S.e4.InitSkillSuccessful.create(e.skill))}),(e=>{this._state.modify(v.map((e=>Object.assign(Object.assign({},e),{status:"error"})))),this._monitoringService.notify(S.bn.InitSkillFailed.create((0,l.zG)(this._state.get(),v.map((e=>e.skill))),e))}));break;case S.ix.Kind.unmount:e.name===S.ec.skill&&(0,C.tt)("terminateSkill",(0,l.zG)((0,l.zG)(this._state.get(),_.Yo((()=>new Error("Cannot terminate Skill. No Skill state available.")))),_.tS((e=>this._skillService?(0,l.zG)(this._skillService.terminateSkill(e.skill),_.UI((()=>e))):_.t$(new Error("Cannot terminate Skill. No `SkillService` available."))))),void 0,(e=>{this._state.set(v.none),this._monitoringService.notify(S.e4.TerminateSkillSuccessful.create(e.skill))}),(e=>{this._state.set(v.none),this._monitoringService.notify(S.bn.TerminateSkillFailed.create((0,l.zG)(this._state.get(),v.map((e=>e.skill))),e))}))}}_onSkillOpened(){this._router.push("skill")}_onSkillClosed(){"skill"===this._router.activeView.get()&&this._router.pop()}}var H=i(32952),L=i(41398),K=i(16118),$=i(2844),Z=i(66310),W=i(76974),q=i(93508),Y=i(27378),Q=i(12187),X=i(5739),J=i(56370),ee=i(18313),te=i(9546),ie=i(62172),ne=i(13578),re=i(89894);const se="brick",oe=C.Es.buttonOverrideSpecificity({padding:`0 ${re.ux.rem(te.x)} 0 ${re.ux.rem(te.F2)}`},se),ae={display:"flex",alignItems:"center",gap:re.ux.rem(te.x)},le=C.Es.buttonOverrideSpecificity({minHeight:re.ux.rem(1.75),fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),color:ie.BlueGray80},se),ce=C.Es.buttonOverrideSpecificity({minHeight:re.ux.rem(2),fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),color:ne.XY.Content.Primary.Default},se),ue=C.Es.buttonOverrideSpecificity({boxShadow:`inset 0 0 0 ${re.ux.rem(.125)} ${C.BO.BrandGreen60}`},se),de=C.Es.buttonOverrideSpecificity({boxShadow:"none",color:ie.NeutralGray70,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{color:C.BO.BlueGray80,boxShadow:`inset 0 0 0 1px ${C.BO.BlueGray40}`,backgroundColor:C.BO.BlueGray5}}},se),me={textAlign:"left",whiteSpace:"initial",lineHeight:re.ux.rem(1.125),margin:`${re.ux.rem(.25)} 0 ${re.ux.rem(.25)} 0`},pe=Object.assign({},C.Es.iconSizeRems(1.5)),he=re.ux.joinClasses([se,re.ux.style(oe)]),ge=re.ux.style(ae),fe=re.ux.style(le),ye=re.ux.style(ce),ve=re.ux.style(ue),xe=re.ux.style(de),be=re.ux.style(me),Se=re.ux.style(pe),ke=re.ux.style(pe),Ce=(0,Q.xb)(ee.zx.Secondary),we="actionBrick",_e=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(Ce,Object.assign({onClick:e("action").pipe(m.U((e=>t({kind:S.ix.Kind.actionBrickClick,action:e})))),name:"actionBrick"},(0,Q.Sh)(we,he,e("action").pipe(m.U((({kind:e})=>"go"===e?ve:null))),e("mode").pipe(m.U((e=>"compact"===e?fe:"standard"===e?ye:(0,j.L0)(e)))),e("customViewOpts").pipe(m.U((e=>(null==e?void 0:e.isPinned)?xe:null))))),Y.createElement(X.F.div,{className:ge},e("icon").pipe(m.U(r.fold((({kind:e})=>{switch(e){case"allResults":return Y.createElement(ee.k8,{className:Se});case"go":return Y.createElement(ee.CT,{className:ke});default:return(0,j.L0)(e)}}),(({url:e})=>Y.createElement("img",{src:e,style:{width:20,height:20}}))))),Y.createElement(X.F.span,Object.assign({className:be},(0,C.E)(e("label"))))))));function Ie(e,t,i,n){return J.Z.fromSideEffect((t=>e.notify(t)),$.aj([t,e.assistant.state.view("textBox")]).pipe(m.U((([e,t])=>({icon:"backendAction"===e.kind?r.right({url:e.action.iconUrl}):r.left({kind:e.kind}),label:"backendAction"===e.kind?e.action.label:"allResults"===e.kind?"More":"go"===e.kind?`”${t.trim()}”`:(0,j.L0)(e),action:e,mode:i,customViewOpts:n})))))}const Ee=J.UI.List.make(o.bw,_e);function Ae(e,t,i,n){return J.Z.composeList(o.Ot,(()=>t.pipe(m.U(v.getOrElse((()=>[]))))),(t=>Ie(e,W.of(t),i,n)))}function Oe(e,t=l.W8,i=v.some(3)){const n=(0,l.zG)(a.hX((e=>t(e.action)))(e),v.getOrElseW((()=>o.cS)));return(0,l.zG)(i,v.filter((e=>n.length>e)),v.map((e=>a.Ss(o.ke(e)(n),{kind:"allResults",filterPredicate:t}))),v.getOrElseW((()=>n)))}const Re=({style:e,contentStyle:t,children:i,header:n})=>Y.createElement("div",{className:re.ux.style(Te,e)},n,Y.createElement("div",{className:re.ux.style(Pe,t)},i)),Te={background:"white",display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)},Pe={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:re.ux.rem(te.x)},Ue=(0,Q.xb)(ee.hS),Be=({active:e,children:t})=>Y.createElement("h1",{className:Ge},e?Y.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:Ne,"aria-hidden":"true"},Y.createElement("rect",{width:"16",height:"16",rx:"5",fill:"#018374"}),Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"white"})):Y.createElement("svg",{viewBox:"0 0 16 16",fill:"none",className:Ne,"aria-hidden":"true"},Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 13.5C9.5 13.7761 9.72386 14 10 14H11C12.6569 14 14 12.6569 14 11V10C14 9.72386 13.7761 9.5 13.5 9.5C13.2239 9.5 13 9.72386 13 10V11C13 12.1046 12.1046 13 11 13H10C9.72386 13 9.5 13.2239 9.5 13.5ZM9.5 2.5C9.5 2.77614 9.72386 3 10 3H11C12.1046 3 13 3.89543 13 5V6C13 6.27614 13.2239 6.5 13.5 6.5C13.7761 6.5 14 6.27614 14 6V5C14 3.34315 12.6569 2 11 2H10C9.72386 2 9.5 2.22386 9.5 2.5ZM6 2C6.27614 2 6.5 2.22386 6.5 2.5C6.5 2.77614 6.27614 3 6 3H5C3.89543 3 3 3.89543 3 5V6C3 6.27614 2.77614 6.5 2.5 6.5C2.22386 6.5 2 6.27614 2 6V5C2 3.34315 3.34315 2 5 2H6ZM6 13C6.27614 13 6.5 13.2239 6.5 13.5C6.5 13.7761 6.27614 14 6 14H5C3.34315 14 2 12.6569 2 11V10C2 9.72386 2.22386 9.5 2.5 9.5C2.77614 9.5 3 9.72386 3 10V11C3 12.1046 3.89543 13 5 13H6ZM5.5 6.5C5.5 6.22386 5.72386 6 6 6H10C10.2761 6 10.5 6.22386 10.5 6.5C10.5 6.77614 10.2761 7 10 7H6C5.72386 7 5.5 6.77614 5.5 6.5ZM6 9C5.72386 9 5.5 9.22386 5.5 9.5C5.5 9.77614 5.72386 10 6 10H8.5C8.77614 10 9 9.77614 9 9.5C9 9.22386 8.77614 9 8.5 9H6Z",fill:"#646B81"})),Y.createElement(Ue,{dynamic:!0,maxTailWordsCount:3},t)),Ne=re.ux.style({width:re.ux.rem(1),height:re.ux.rem(1)}),Ge=re.ux.style({display:"grid",gridTemplateColumns:`${re.ux.rem(1)} auto`,justifyItems:"start",alignItems:"center",gap:re.ux.rem(te.x),color:ne.XY.Content.Secondary.Default,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"normal",margin:0}),ze=J.UI.Grid.make((({slots:e,state:t})=>Y.createElement(X.F.Fragment,null,t.pipe(m.U((({label:t,view:i})=>i===S.aU.Store.View.normal?Y.createElement(Re,{header:e.header,style:He,key:t},e.actions):i===S.aU.Store.View.pinned?Y.createElement(Re,{style:Ze,key:t},e.actions):(0,j.L0)(i))))))),Fe=J.UI.Node.make((({view:e})=>Y.createElement(ee.Ol,null,e("label")))),je=J.UI.Node.make((({view:e,notify:t})=>Y.createElement("div",{className:Le},Y.createElement(Be,{active:!0},e("label")),Y.createElement(ee.zx.Tertiary,{onClick:t({kind:S.ix.Kind.removeSelectionContextClick}),compact:!0,size:"small",name:"removeContext",title:"Delete"},Y.createElement(ee.L3,{className:$e}))))),Ve=J.UI.Union.make("kind",{default:Fe,withSelectionContext:je}),Me=J.UI.Knot.make(ze,{actions:Ee,header:Ve}),De=J.UI.List.make(o.bw,Me),He={background:"transparent",padding:`${re.ux.rem(te.x)} 0`},Le=re.ux.style({display:"grid",gridTemplateColumns:`auto ${re.ux.rem(1)}`,justifyItems:"start",alignItems:"center",alignContent:"center",gap:re.ux.rem(te.x),paddingRight:re.ux.rem(te.x),height:re.ux.rem(1)}),Ke="ignoreIcon",$e=re.ux.joinClasses([Ke,re.ux.style(C.Es.buttonOverrideSpecificity(C.Es.iconSizeRems(1.5),Ke))]),Ze=Object.assign(Object.assign({},He),{padding:`${re.ux.rem(te.x)} 0`,marginTop:re.ux.rem(-1*te.x),borderTop:`1px solid ${ie.NeutralGray0}`});var We,qe=i(17771);function Ye(e,t){return J.Z.composeList(o.Ot,(()=>t.pipe(m.U((e=>(0,l.zG)(e,o.Su(((e,t)=>({category:t,isFirst:0===e})))))))),(({category:t,isFirst:i})=>function(e,t,i){const n=e.assistant.state.view((({session:e,contextualActions:t})=>(0,l.zG)(qe.g(v.option)((0,l.zG)(e,S.z_.toStarted,v.chain((e=>e.activeBoundaryContext.selection))),t),v.fold(l.jv,l.W8))));return J.Z.composeKnot({root:()=>W.of({label:t.label,view:t.view}),actions:Ae(e,W.of(v.some(t.actions)),"standard",{isPinned:t.view===S.aU.Store.View.pinned}),header:J.Z.composeUnion({default:()=>W.of({label:t.label}),withSelectionContext:J.Z.fromSideEffect((t=>e.notify(t)),W.of({label:t.label}))},(()=>n.pipe(m.U((e=>({kind:e&&i?"withSelectionContext":"default"}))))))})}(e,t,i)))}function Qe(e){return(0,l.zG)(e,o.pO((e=>{const{init:t,rest:i}=o.zT((t=>S.aU.Group.Id.eq.equals(t.group.id,e[0].group.id)))(e);return[t,i]})),o.UI((e=>qe.Y(v.Applicative)({label:(0,l.zG)(e,o.YM,v.map((e=>e.group.label))),view:v.some(S.aU.Store.View.normal),actions:(0,l.zG)(e,o.UI(R.BackendAction.make),a.c2),withContext:v.some(!1)}))),o.oA,a.c2,v.getOrElse((()=>[{label:e[0].group.label,view:S.aU.Store.View.normal,actions:[R.BackendAction.make(e[0])],withContext:!1}])))}!function(e){e.isActionsStore=function(e){return"actionsStore"===e.kind},e.isSearchResults=function(e){return"searchResults"===e.kind}}(We||(We={}));class Xe{constructor(e,t,i,n,r,s){var u,p,x;this._genAIAvailabilityService=t,this._sessionService=i,this._trackingService=n,this._focusPromptField=s,this._subs=new c.w,this._state=b.h.create(v.none),this._userTyped=new H.xQ,this._promptOrMenuFocused=new H.xQ,this._promptMenuActions=new H.xQ,this._promptMenuContainer=v.none,this._cachedActionBricks=v.none,this.state=this._state.view(),this._subs.add(this._userTyped.pipe(h.b(150),g.h((()=>!r())),L.M(this._state.view((0,l.ls)(v.map((e=>e.filterPredicate)),v.getOrElse((()=>l.W8))))),y.b((([e,t])=>this._promptMenuActions.next({kind:"showSearchResults",search:e,filterPredicate:t})))).subscribe()),this._subs.add((u=this._promptMenuActions,p=this._sessionService.session,x=this._genAIAvailabilityService.availability,$.aj([u.pipe(Z.w((e=>"showSearchResults"===e.kind?p.view(S.z_.toStarted).pipe(m.U((t=>(0,l.zG)(t,v.filter((()=>""!==e.search.trim())),v.chain((t=>{return i=t.activeContext.availableActions,n=e.search,(0,l.zG)(i,o.DZ((e=>(0,l.zG)((0,C.lA)(n,e.searchLabel,e.searchTags),v.map((t=>({data:e,matchScore:t})))))),o.DY((0,C.JY)()),o.UI((({data:e})=>e)),a.c2);var i,n})),v.map((t=>({kind:"searchResults",actions:t,filterPredicate:e.filterPredicate}))))))):"showActionsStore"===e.kind?p.view((0,l.ls)(I,v.map((t=>({kind:"actionsStore",actions:t,filterPredicate:e.filterPredicate}))))):"close"===e.kind?W.of(v.none):(0,j.L0)(e))),q.O(v.none)),x]).pipe(m.U((([e,t])=>(0,l.zG)(e,v.filter((()=>!S._4.isUnavailable(t)))))))).subscribe(f.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(h.b(100),g.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe(K.G(),g.h((([e,t])=>v.isNone(e)&&v.isSome(t))),m.U((([e,t])=>t)),d.oA).subscribe((e=>{"actionsStore"===e.kind?this._trackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._trackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(g.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks()))),this._subs.add(e.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case S.ix.Kind.mount:return void(this._promptMenuContainer=v.some(e.element));case S.ix.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case S.ix.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case S.ix.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case S.ix.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case S.ix.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case S.ix.Kind.collapsePromptMenuButtonClick:case S.ix.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case S.ix.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case S.ix.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionsStore",filterPredicate:e.action.filterPredicate}):this._promptMenuActions.next({kind:"close"});case S.ix.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=v.none}_getActionBricks(){return(0,l.zG)(this._cachedActionBricks,v.getOrElse((()=>{const e=(0,l.zG)(this._promptMenuContainer,v.fold((()=>[]),(e=>o.nI(Array.from(e.querySelectorAll(".actionBrick")).filter(C.Re)))));return this._cachedActionBricks=v.some(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),i=(0,C.vY)((null===(e=v.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,l.zG)(v.fromNullable(t.findIndex((e=>e===i))),x.tap((e=>{var i;e+1>=t.length?this._focusPromptField():null===(i=t[e+1])||void 0===i||i.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),i=(0,C.vY)((null===(e=v.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,l.zG)(v.fromNullable(t.findIndex((e=>e===i))),x.tap((e=>{var i;e-1<0?this._focusPromptField():null===(i=t[e-1])||void 0===i||i.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var Je=i(2768),et=i(49708);function tt(e){return(0,l.zG)(e,v.fromPredicate((e=>"initial"===e.kind||"dragged"===e.kind)))}class it{constructor(e,t){this._positionInfo=e,this._handlers=t,this._internalState=b.h.create({managedPositionInfo:v.none,assistant:v.none,dragState:v.none,assistantMaxHeight:v.none}),this.state=this._internalState.view((e=>(0,l.zG)(e.dragState,v.map((t=>{return i=t,n=e.assistantMaxHeight,{kind:"dragged",dragging:i.dragging,referencePosition:i.translationOrigin,assistantMaxHeight:n,translation:(0,C.NN)(Object.assign(Object.assign({},i.assistantSize),{top:i.viewportSize.height-i.translationOrigin.bottom-i.assistantSize.height,left:i.viewportSize.width-i.translationOrigin.right-i.assistantSize.width}),Object.assign({left:0,top:0},i.viewportSize))(i.translation)};var i,n})),v.alt((()=>(0,l.zG)(e.managedPositionInfo,v.map((t=>({kind:"initial",referenceElement:t.referenceElement,placement:t.placement,offset:t.offset,assistantMaxHeight:e.assistantMaxHeight})))))),v.getOrElse((()=>({kind:"none"})))))),this._subs=new c.w,this._subs.add(this._positionInfo.pipe(Je.R(this._internalState.view("dragState").pipe(g.h(v.isSome))),y.b((e=>this._internalState.lens("managedPositionInfo").set(v.some(e))))).subscribe()),this._subs.add(et.R(self,"resize").pipe(y.b((()=>this._internalState.lens("dragState").modify(v.map(C.eG.set("viewportSize",(0,l.zG)((0,C.C7)(),(({width:e,height:t})=>({width:e,height:t}))))))))).subscribe())}onFocusChange(e){this._handlers.onFocusChange(e)}onMount(e){this._internalState.lens("assistant").set(v.some(e))}onResize(e){this._internalState.lens("dragState").modify(v.map(C.eG.set("assistantSize",(0,l.zG)(e,(({width:e,height:t})=>({width:e,height:t}))))))}onMaxHeightChange(e){this._internalState.lens("assistantMaxHeight").set(v.some(e))}onDrag(e){this._internalState.modify((t=>Object.assign(Object.assign({},t),{dragState:(0,l.zG)(t.dragState,v.map((0,l.ls)(C.eG.set("translation",e),C.eG.set("dragging",!0))),v.alt((()=>(0,l.zG)(t.assistant,v.map((e=>({assistantRect:e.getBoundingClientRect(),viewportSize:(0,l.zG)((0,C.C7)(),(({width:e,height:t})=>({width:e,height:t})))}))),v.map((({assistantRect:t,viewportSize:i})=>({dragging:!0,viewportSize:i,assistantSize:{width:t.width,height:t.height},translation:e,translationOrigin:{bottom:i.height-(t.top+t.height),right:i.width-(t.left+t.width)}})))))))})))}onDragEnd(){this._internalState.lens("dragState").modify(v.map(C.eG.set("dragging",!1)))}dispose(){this._subs.unsubscribe()}}var nt,rt=i(48044),st=i(13853);class ot{constructor(e){var t;this._params=e,this._subs=new c.w,this._state=b.h.create({stagingNewVoiceProfile:v.none,stagingVoiceProfile:v.none}),this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new k.WQ(ot.name),this.state=this._state.view(),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case S.ix.Kind.toolbarGoBackButtonClick:return this._handleGoBack();case S.ix.Kind.toolbarVoiceButtonClick:return this._openVoiceProfile("toolbar");case S.ix.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case S.ix.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case S.ix.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case S.ix.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case S.ix.Kind.styleToggleClick:return this._selectStyle(e.id);case S.ix.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,l.zG)(e.role,v.map((e=>e.id))));case S.ix.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case S.ix.Kind.voiceProfileTabChange:return this._switchNewVoiceProfileTab(e.profileName);case S.ix.Kind.voiceTagPopoverRemoveButtonClick:return this._removeVoiceTag(e);case S.ix.Kind.voiceTagPopoverCloseButtonClick:return this._closeVoiceTagPopover();case S.ix.Kind.voiceTagPopoverKeepButtonClick:return this._keepVoiceTagPopover();case S.ix.Kind.applyVoiceToWritingCheckboxChange:return this._updateMyVoiceIsEnabled(e.checked);case S.ix.Kind.voiceTagClick:return this._toggleVoiceTag(e);case S.ix.Kind.voiceDialectDropdownSelectionChange:return this._selectNewVoiceDialect(e.dialect.id);case S.ix.Kind.voiceRoleDropdownSelectionChange:return this._selectNewVoiceRole(e.role.id);case S.ix.Kind.voiceSelectionsSaveButtonClick:return this._saveNewVoiceSelections();case S.ix.Kind.voiceSelectionsCancelButtonClick:return this._cancelNewVoiceSelectionChanges();case S.ix.Kind.voiceSelectionsEditButtonClick:return this._editNewVoiceSelections();case S.ix.Kind.promptFieldKeyPressEscape:case S.ix.Kind.toolbarCloseButtonClick:return this._trySaveNewProfileIfChanged();default:return}}_handleGoBack(){(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),x.tap((e=>{"newVoiceProfile"===e.voiceProfile.kind?(this._trySaveNewProfileIfChanged(),this._state.lens("stagingNewVoiceProfile").set(v.none)):"legacyVoiceProfile"===e.voiceProfile.kind&&this._state.lens("stagingVoiceProfile").set(v.none)})))}_createVoiceProfile(e){var t;return"newVoiceProfile"===e.kind?C.eG.set("stagingNewVoiceProfile",v.some({selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles,activeTagId:v.none,activeProfileName:v.fromNullable(null===(t=e.profiles.find((e=>e.selected)))||void 0===t?void 0:t.name),stagingSelections:v.none})):C.eG.set("stagingVoiceProfile",v.some({selectedStyle:e.selectedStyle,selectedTonesPerStyle:e.selectedTonesPerStyle,selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,needsSetup:e.needsSetup}))}_openVoiceProfile(e){(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),x.tap((t=>{this._params.trackingService.trackVoiceProfileOpen(e),this._params.routingViewModel.push("newVoiceProfile"===t.voiceProfile.kind?"voiceProfile":"legacyVoiceProfile"),this._state.modify(this._createVoiceProfile(t.voiceProfile))})))}_closeVoiceProfile(){this._params.trackingService.trackVoiceProfileSkip(),this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(v.none)}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._params.routingViewModel.pop(),this._state.lens("stagingVoiceProfile").set(v.none),(0,l.zG)(e,x.tap((e=>{(0,C.tt)("setVoiceProfile",this._params.sessionService.setVoiceProfile(e),this._logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(v.map((i=>Object.assign(Object.assign({},i),{selectedTonesPerStyle:(0,l.zG)(i.selectedTonesPerStyle,t?(0,C.ni)(S.LA.Style.Id.eq)(i.selectedStyle,v.fold((()=>new Set([e])),st.$T(S.LA.Tone.Id.eq)(e))):(0,l.ls)(rt.cq(S.LA.Style.Id.eq)(i.selectedStyle,st.Od(S.LA.Tone.Id.eq)(e)),v.getOrElse((()=>i.selectedTonesPerStyle))))}))))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(v.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(v.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(v.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_editNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:v.some({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole})})))}_cancelNewVoiceSelectionChanges(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:v.none})))}_saveNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{selectedDialect:(0,l.zG)(e.stagingSelections,v.fold((()=>e.selectedDialect),(e=>e.selectedDialect))),selectedRole:(0,l.zG)(e.stagingSelections,v.fold((()=>e.selectedRole),(e=>e.selectedRole))),stagingSelections:v.none})))}_selectNewVoiceRole(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,l.zG)(t.stagingSelections,v.map((t=>Object.assign(Object.assign({},t),{selectedRole:v.some(e)}))))})))}_selectNewVoiceDialect(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,l.zG)(t.stagingSelections,v.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))})))}_updateNewProfileStateIfAny(e){this._state.lens("stagingNewVoiceProfile").modify(v.map(e))}_keepVoiceTagPopover(){this._params.trackingService.trackVoiceProfileKeepTag(),this._closeVoiceTagPopover()}_closeVoiceTagPopover(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{activeTagId:v.none})))}_toggleVoiceTag({tagName:e,sectionName:t,profileName:i}){this._updateNewProfileStateIfAny((n=>Object.assign(Object.assign({},n),{activeTagId:v.toNullable(n.activeTagId)===S.bm.createId({tagName:e,sectionName:t,profileName:i})?v.none:v.some(S.bm.createId({tagName:e,sectionName:t,profileName:i}))})))}_updateMyVoiceIsEnabled(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{isEnabledByDefault:e})))}_removeVoiceTag({tagName:e,profileName:t,sectionName:i}){this._params.trackingService.trackVoiceProfileRemoveTag(),this._updateNewProfileStateIfAny((n=>Object.assign(Object.assign({},n),{profiles:(0,l.zG)(n.profiles,o.UI((n=>n.name===t?Object.assign(Object.assign({},n),{sections:n.sections.map((t=>t.name===i?Object.assign(Object.assign({},t),{tags:t.tags.filter((t=>t.name!==e))}):t))}):n)))})))}_switchNewVoiceProfileTab(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeProfileName:v.some(e)})))}_trySaveNewProfileIfChanged(){(0,l.zG)(qe.Y(v.option)({editedVoiceProfile:this._state.view("stagingNewVoiceProfile").get(),sessionVoiceProfile:(0,l.zG)(S.z_.toStarted(this._params.sessionService.session.get()),v.map((e=>e.voiceProfile)),v.chain(S.LA.toNewVoiceProfile))}),v.filter((({editedVoiceProfile:e,sessionVoiceProfile:t})=>!S.LA.NewSelections.eqByRoleDialectProfileAndIsEnabledByDefault.equals(e,t))),x.tap((({editedVoiceProfile:e})=>{(0,C.tt)("setNewVoiceProfile",this._params.sessionService.setNewVoiceProfile({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles}),this._logger)})))}}class at{constructor(e){var t,i;this._params=e,this._state=b.h.create({}),this._subs=new c.w,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:new k.WQ(at.name),this._monitoringService=null!==(i=this._params.monitoringService)&&void 0!==i?i:k.gz.getInstance(),this.stagingFeedbackFormData=this._state.view(),this._subs.add(this._params.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case S.ix.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case S.ix.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case S.ix.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);default:return}}_openFeedbackForm(e){this._params.routingViewModel.push("feedbackForm"),this._state.set({source:e})}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),e)))}_submitFeedbackForm(e){this._params.routingViewModel.pop(),this._state.set({}),(0,C.tt)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._logger,void 0,(e=>this._monitoringService.notify(S.iQ.SubmitFeedbackFailed.create(e))))}}!function(e){e.eq=w.yv}(nt||(nt={}));class lt{constructor(e,t){this._initialView=e,this._viewEq=t,this._viewStack=b.h.create([this._initialView]),this.activeView=this._viewStack.view(a.YM)}push(e){this._viewStack.modify((t=>this._viewEq.equals(e,t[0])?t:a.QI(e,t)))}pop(){this._viewStack.modify((0,l.ls)(a.pW,(([e,t])=>(0,l.zG)(a.c2(t),v.getOrElse((()=>[e]))))))}replace(e){this._viewStack.modify((t=>(0,l.zG)(a.QI(e,a.Gb(t)))))}}var ct,ut,dt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){e.create=function(e){const t=O(e),i=new H.xQ,n=new lt("loading",nt.eq),r=new U(Object.assign({assistantUIActions:i,routingViewModel:n},t)),s=new ot({assistantUIActions:i,trackingService:t.trackingService,sessionService:t.sessionService,monitoringService:t.monitoringService,logger:t.logger,routingViewModel:n}),o=new at({assistantUIActions:i,sessionService:t.sessionService,feedbackService:t.feedbackService,monitoringService:t.monitoringService,logger:t.logger,routingViewModel:n}),a=new Xe(i,t.genAIAvailabilityService,t.sessionService,t.trackingService,(()=>v.isSome(r.state.get().selectedAction)),(()=>r.focusPromptField())),l=new z(i,n.activeView),c=new V({userSurveyService:t.userSurveyService,assistantUIActions:i}),u=new D(i,n,t.skillService);return{assistant:r,promptMenu:a,notifications:l,voiceProfile:s,feedbackForm:o,userSurvey:c,skill:u,revision:v.fromNullable(t.revisionEngine),routing:n,actions:i.asObservable(),notify:e=>i.next(e),dispose:()=>{r.dispose(),a.dispose(),l.dispose(),s.dispose(),o.dispose(),c.dispose(),u.dispose()}}}}(ct||(ct={})),function(e){e.create=function(e){const{positionInfo:t,handlers:i}=e,n=dt(e,["positionInfo","handlers"]),r=ct.create(Object.assign(Object.assign({},n),{handlers:{close:()=>i.close()}})),s=new it(t,{onFocusChange:e=>i.onFocusChange(e)});return Object.assign(Object.assign({},r),{position:s,dispose:()=>{s.dispose(),r.dispose()}})}}(ut||(ut={}));var mt=i(90845),pt=i(99094),ht=i(31278),gt=i(56133),ft=i(88392);const yt="content",vt="toolbar",xt=e=>re.ux.color(ie.BlueGray40).toRGBA().fade(e).toString(),bt="#FCFCFC",St={fontFamily:"Inter, sans-serif",width:re.ux.rem(26.875),borderRadius:re.ux.rem(ft.ze),background:"linear-gradient(180deg, #FCFCFC 0%, #FCFCFC 100%)",$nest:{"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${yt}`]:{pointerEvents:"none"},[`.${vt}`]:{pointerEvents:"none"}}}}},kt=Object.assign(Object.assign({},St),{boxShadow:`0px 0px 0px 0.5px ${ie.BlueGray40}, 0px 0px 2px 0.5px ${xt(.5)}, 0px 1px 8px 0.5px ${xt(.1)}, 0px 2px 12px 0.5px ${xt(.1)}, 0px 4px 20px 0.5px ${xt(.25)}`,backdropFilter:`blur(${re.ux.rem(.34375)})`}),Ct={maxWidth:re.ux.rem(40),minWidth:re.ux.rem(18),width:re.ux.percent(100)},wt={display:"flex",alignItems:"center",justifyContent:"space-between",gap:re.ux.rem(te.F2),padding:`0 ${re.ux.rem(te.x)}`,height:re.ux.rem(2.5),boxSizing:"border-box","--grammarly-app-region":"drag",$nest:{button:{"--grammarly-app-region":"no-drag"}}},_t={borderBottom:`0.5px solid ${ie.BlueGray10}`},It=re.ux.style(kt),Et=(re.ux.style(St),re.ux.style(kt,Ct)),At=re.ux.style(St,Ct),Ot=re.ux.joinClasses([vt,re.ux.style(wt)]),Rt=re.ux.joinClasses([vt,re.ux.style(wt,{cursor:"grab",$nest:{"&:active":{cursor:"grabbing"}}})]),Tt=re.ux.style(_t),Pt=yt,Ut=J.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{ref:n,onMount:r}=mt.P.useElWatcher();return Y.createElement(gt.l.Provider,{value:{portalContainer:n}},Y.createElement(pt.f.Context.Provider,{value:pt.f.emptyWithName("cheetahAssistant")},Y.createElement(X.F.Fragment,null,t.pipe(m.U((t=>"initial"===t.kind||"dragged"===t.kind?Y.createElement(gt.Q,{placement:t,onFocus:i({kind:"focus",focused:!0}),onBlur:i({kind:"focus",focused:!1}),onMount:e=>{i({kind:"mount",element:e})(),r(e)},onMaxSizeChange:e=>i({kind:"maxSize",maxSize:e})(),"data-grammarly-part":"ideation-assistant","data-dragging":"dragged"===t.kind&&t.dragging,className:It},Y.createElement("header",Object.assign({},(0,Q.Sh)(Rt,t.contentOverflowUnderToolbar?Tt:null),{ref:e=>e&&i({kind:"dragHandleMount",element:e})()}),e.toolbar,Y.createElement(ee.zx.Tertiary,{onClick:i({kind:S.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},Y.createElement(ht.JO.Close,null))),Y.createElement("main",{className:Pt},e.content)):"none"===t.kind?null:(0,j.L0)(t)))))))}));var Bt=i(38194),Nt=i(49143),Gt=i(85089),zt=i(83401);function Ft(e){return(0,l.ls)(Bt.B(),(t=>{return u.T(t.pipe(y.b((t=>function(e,t){switch(e.kind){case"focus":return t.position.onFocusChange(e.focused);case"mount":return t.position.onMount(e.element);case"maxSize":return t.position.onMaxHeightChange(e.maxSize.height);case"dragHandleMount":break;case S.ix.Kind.toolbarCloseButtonClick:return t.notify(e);default:return(0,j.L0)(e)}}(t,e))),Nt.l()),t.pipe((i=e.position,(0,l.ls)(m.U((e=>"dragHandleMount"===e.kind?v.some(e.element):v.none)),d.oA,(0,C.uj)(),(n=i,(0,l.ls)(Bt.B(),(e=>(0,l.zG)(u.T(e.pipe(g.h((e=>C.E9.l1Distance(C.E9.fromCartesian(e.translate),C.E9.fromCartesian(e.lastTranslate))>=3)),y.b((e=>n.onDrag(e.translate)))),e.pipe(g.h((e=>e.dragEnd)),y.b((()=>n.onDragEnd())))),Nt.l())))),Nt.l()))),t.pipe(function(e){return(0,l.ls)(m.U((e=>"mount"===e.kind?v.some(e.element):v.none)),d.oA,Z.w((e=>Gt.YC(e).pipe(q.O(null),m.U((()=>e.getBoundingClientRect()))))),y.b((t=>e.onResize(t))),Nt.l())}(e.position)),t.pipe((0,l.ls)(m.U((e=>"mount"===e.kind?v.some(e.element):v.none)),d.oA,m.U(v.some),mt.P.FocusTrap.dynamicFocusTrap(mt.P.FocusTrap.InitialFocus.none,jt,Vt),Nt.l())),$.aj([e.position.state,e.assistant.state,e.routing.activeView]).pipe(m.U((([e,{contentOverflowUnderToolbar:t},i])=>Object.assign(Object.assign({},e),{contentOverflowUnderToolbar:t&&"voiceProfile"!==i&&"feedbackForm"!==i})))));var i,n}))}function jt(e){var t;if(e instanceof HTMLIFrameElement){const i=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(i){const e=i.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function Vt(e,t){return e instanceof HTMLIFrameElement?e.contentDocument?et.R(e.contentDocument.body,t):zt.C:et.R(e,t)}const Mt=J.UI.Grid.make((({slots:e,state:t,notify:i})=>{const{ref:n,onMount:r}=mt.P.useElWatcher();return Y.createElement(gt.l.Provider,{value:{portalContainer:n}},Y.createElement(pt.f.Context.Provider,{value:pt.f.emptyWithName("cheetahAssistant")},Y.createElement(X.F.Fragment,null,t.pipe(m.U((t=>Y.createElement(X.F.div,Object.assign({dir:"ltr"},(0,Q.Sh)(t.includeBoxShadow?Et:At),{key:"ideation-assistant-container",mount:e=>{(0,l.zG)(v.fromNullable(e),x.tap((e=>{i({kind:"mount",element:e})}))),r(e)}}),Y.createElement(X.F.header,Object.assign({},(0,Q.Sh)(Ot,t.contentOverflowUnderToolbar?Tt:null)),e.toolbar,Y.createElement(ee.zx.Tertiary,{onClick:i({kind:S.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},Y.createElement(ht.JO.Close,null))),Y.createElement(X.F.main,{className:Pt},e.content))))))))}));var Dt;!function(e){e.empty={includeBoxShadow:!0}}(Dt||(Dt={}));const Ht=({options:e,onSubmit:t,onCancel:i})=>{const[n,r]=Y.useState(v.none),[s,a]=Y.useState(!1);return Y.createElement(X.F.form,{id:"radioOptionsForm",onSubmit:e=>{(0,l.zG)(n,v.fold((()=>a(!0)),t)),e.preventDefault()},className:re.ux.style(Lt)},Y.createElement("fieldset",{className:qt,style:{borderColor:s?ie.Red60:"transparent"}},(0,l.zG)(e,o.UI((e=>Y.createElement("span",{key:e,className:Kt},Y.createElement("input",{type:"radio",id:e,value:e,name:e,checked:(0,l.zG)(n,v.filter((t=>t===e)),v.isSome),onChange:()=>{a(!1),r(v.some(e))},style:{margin:`0 ${re.ux.rem(.5)} 0 0`}}),Y.createElement("label",{htmlFor:e},e)))))),s&&Y.createElement("div",{className:Wt},Y.createElement(ee.Pz,{className:Zt})," Make a selection"),Y.createElement("div",{className:$t},Y.createElement(ee.zx.Primary,{type:"submit",form:"radioOptionsForm",name:"submitSelectedRadioOption",style:{base:Lt}},"Submit"),"  ",Y.createElement(ee.zx.Tertiary,{onClick:i,name:"cancelRadioOptionSelection",style:{base:Lt}},"Cancel")))},Lt={fontSize:re.ux.rem(.875)},Kt=re.ux.style({display:"inline-flex",alignItems:"center"}),$t=re.ux.style({paddingTop:re.ux.rem(.5)}),Zt=re.ux.style({minWidth:"unset",minHeight:"unset"}),Wt=re.ux.style({color:ie.Red60,lineHeight:re.ux.rem(1.5)}),qt=re.ux.style({marginLeft:`calc(-1 * ${re.ux.rem(.25)})`,padding:re.ux.rem(.25),display:"flex",flexDirection:"column",gap:re.ux.rem(.5),width:"fit-content",border:"1px solid transparent",borderRadius:re.ux.rem(.25),margin:0}),Yt=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(ee.Zb,{style:Xt},Y.createElement("div",{className:Jt},Y.createElement(X.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),Y.createElement(X.F.span,Object.assign({},(0,C.E)(e("header"))))),Y.createElement(X.F.div,null,e("hintsHeader")),Y.createElement(X.F.Fragment,null,e("hintsItems").pipe(m.U(o.UI((e=>Y.createElement("li",{key:e},e)))),g.h(o.Od),m.U((e=>Y.createElement("ul",{key:"action-followup-radio-list",className:ei},e))))),Y.createElement(X.F.Fragment,null,e("radioOptions").pipe(d.oA,m.U((e=>Y.createElement(Ht,{key:"radioOptions",options:e,onSubmit:e=>t({kind:S.ix.Kind.radioOptionsSubmitButtonClick,selectedOption:e})(),onCancel:t({kind:S.ix.Kind.radioOptionsCancelButtonClick})})))))))),Qt=J.UI.Union.asOption(Yt),Xt={fontWeight:400,fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125)},Jt=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x),color:ne.XY.Content.Secondary.Default,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)}),ei=re.ux.style({padding:`0 0 0 ${re.ux.rem(te.sD+te.yC)}`,margin:0}),ti=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(ee.Zb,null,Y.createElement(X.F.div,{className:ni},e("error").pipe(m.U((e=>Y.createElement(Y.Fragment,null,Y.createElement(ee.T6,{className:oi}),Y.createElement("span",{className:ri},e.header)))))),Y.createElement(X.F.div,{className:si},e("error").pipe(m.U((e=>e.text)))),Y.createElement(X.F.Fragment,null,e("showGotItButton").pipe(m.U((e=>e?Y.createElement(ee.zx.Primary,{className:ai,name:"gotItButton",onClick:t({kind:S.ix.Kind.errorCardOkButtonClick}),size:"small"},"OK"):null))))))),ii=J.UI.Union.asOption(ti),ni=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.F2)}),ri=re.ux.style({fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),fontWeight:700,color:ne.XY.Content.Primary.Default}),si=re.ux.style({fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),color:ne.XY.Content.Secondary.Default,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),oi=re.ux.style(Object.assign({padding:re.ux.rem(te.yC)},C.Es.iconSizeRems(1.125))),ai=re.ux.style({alignSelf:"flex-start"});function li(e){const t=e.assistant.state.view("session").pipe(m.U((e=>e.error)));return J.Z.composeOption(function(e,t){const i=e.routing.activeView.view((e=>"loadingError"!==e));return J.Z.fromSideEffect((t=>e.notify(t)),t.pipe(L.M(i),m.U((([e,t])=>({error:e,showGotItButton:t})))))}(e,t.pipe(d.oA)),(()=>t))}var ci=i(18702),ui=i(74219);const di=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(ee.Zb,{style:{padding:0,paddingTop:re.ux.rem(te.qp)}},Y.createElement(ee.Ol,{customStyle:{padding:`0 ${re.ux.rem(te.qp)}`}},"Review suggestions"),Y.createElement(X.F.Fragment,null,e("item").pipe(m.U((e=>Y.createElement(ci.P,{key:e.id,sduiRootId:e.id,content:e.content,designSystem:Object.assign(Object.assign({},ui.k),{nativeExperimentalGBConsistencyUpsellFooter:()=>Y.createElement("div",null,"nativeExperimentalGBConsistencyUpsellFooter not implemented")}),notify:(i,n,r)=>t({item:e,sourceId:i,actions:n,actionScope:r})(),transitions:[],prevContent:v.none,onAnimationEnd:l.Q1,onMount:l.Q1})))))))),mi=J.UI.Node.make((()=>Y.createElement(ee.Zb,{style:yi},Y.createElement("p",{className:fi},"Looking good so far. Keep writing to see suggestions.")))),pi=J.UI.Node.make((()=>Y.createElement(ee.Zb,{style:yi},Y.createElement("p",{className:fi},"All clear!")))),hi=J.UI.Node.make((()=>Y.createElement(ee.Zb,{"aria-busy":"true",style:yi},Y.createElement("p",{className:fi},"Checking your text...")))),gi=J.UI.Union.make("kind",{none:J.UI.Node.empty,loadingState:hi,emptyState:mi,successState:pi,nonEmptyState:di}),fi=re.ux.style({margin:0,color:C.BO.TextBaseSubduedColor,fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125)}),yi={padding:`${re.ux.rem(te.qp)} ${re.ux.rem(te.mh)}`};var vi=i(34760);function xi(e){const t=(0,l.zG)(e,v.map(vi.v.unwrap),v.map((e=>e.singleCardFeedViewModel)));return e=>u.T(e.pipe(m.U((e=>e.action)),y.b((e=>(0,l.zG)(t,x.tap((t=>{t.processActions(e.actions,e.item,e.actionScope,e.sourceId)}))))),Nt.l()),(0,l.zG)(t,v.fold((()=>W.of({kind:"none"})),(e=>e.state.view((e=>"nonEmptyState"===e.kind?{kind:"nonEmptyState",item:e.focused}:e))))))}const bi=re.ux.keyframes({"0%":{backgroundPositionX:"-300px"},"85%":{backgroundPositionX:"600px"},"100%":{backgroundPositionX:"600px"}}),Si=e=>{var t,i,n;const r=re.ux.color(null!==(t=e.overlayGradientCenterColor)&&void 0!==t?t:"rgba(0, 0, 0, 1)"),s=re.ux.color(null!==(i=e.overlayGradientEndColor)&&void 0!==i?i:"rgba(255, 255, 255, 0)"),o=`rgba(${r.red()}, ${r.green()}, ${r.blue()}, ${r.alpha()})`,a=`rgba(${s.red()}, ${s.green()}, ${s.blue()}, ${s.alpha()})`;return re.ux.style({position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"none",mixBlendMode:null!==(n=e.overlayBlendMode)&&void 0!==n?n:"overlay",background:`linear-gradient(90deg, ${a} 0px, ${o} 120px, ${o} 150px, ${o} 170px, ${a} 300px)`,backgroundRepeat:"no-repeat",backgroundPositionX:"-300px",backgroundSize:1e3,animationDelay:"300ms",animationDuration:"1.5s",animationName:bi,animationTimingFunction:"linear",animationIterationCount:"infinite"})},ki=e=>Y.createElement("div",{className:Si(e)}),Ci=J.UI.Node.make((({view:e})=>Y.createElement(ee.Zb,{"aria-busy":"true"},Y.createElement(ee.Ol,null,e("header")),Y.createElement("div",{className:wi},Y.createElement(ki,null))))),wi=re.ux.style({height:re.ux.rem(.5),borderRadius:re.ux.rem(te.W9),background:ie.BlueGray5,flexGrow:1,maxWidth:re.ux.rem(22.5),position:"relative",marginBottom:re.ux.rem(te.F2)}),_i=J.UI.Node.make((({view:e})=>Y.createElement(ee.Zb,{style:Ai},Y.createElement(ee.Ol,null,e("header")),Y.createElement(X.F.div,Object.assign({className:Oi},(0,C.E)(e("text"),[...C.ap,"person"])))))),Ii=J.UI.Union.make("kind",{loading:Ci,loaded:_i}),Ei=J.UI.Union.asOption(Ii),Ai={gap:re.ux.rem(te.yC)},Oi=re.ux.style({color:ne.XY.Content.Primary.Default,fontStyle:"normal",fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{color:ie.Blue60,fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:re.ux.rem(1),height:re.ux.rem(1),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${ie.Blue60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${ie.Blue60}"/></svg>`)}')`}}}}});function Ri(e){const t=e.state.view("session").view((0,l.ls)(v.fromPredicate((e=>S.wR.isQuickReply(e.mode))),v.chain((e=>(0,l.zG)("started"===e.kind?(0,l.zG)(e.activeContext.intent,v.map((e=>({kind:"loaded",text:e})))):v.some({kind:"loading"}),v.map((e=>Object.assign(Object.assign({},e),{header:"Sender’s intent"}))))))));return J.Z.composeOption(J.Z.composeUnion({loading:()=>t.pipe(d.oA),loaded:()=>t.pipe(m.U(v.chain((e=>"loaded"===e.kind?v.some({text:e.text,header:e.header}):v.none))),d.oA)},(()=>t.pipe(d.oA))),(()=>t))}var Ti=i(80544),Pi=i(79692),Ui=i(9223);const Bi=Y.createContext({notifyUnmount:l.Q1}),Ni=({style:e,mode:t="standard"})=>{const i="standard"==t?1:.875;return Y.createElement("div",{className:re.ux.style({height:re.ux.rem(2*i),display:"flex",alignItems:"center",gap:re.ux.rem(te.x),padding:`0 ${re.ux.rem(te.x)} 0 ${re.ux.rem(te.F2)}`,borderRadius:re.ux.rem(te.F2),border:`1px solid ${ie.BlueGray5}`,boxSizing:"border-box"},e)},Y.createElement("div",{className:re.ux.style({width:re.ux.rem(1.5*i),height:re.ux.rem(1.5*i),borderRadius:re.ux.rem(1.5*i),background:ie.BlueGray5})}),Y.createElement("div",{className:re.ux.style({height:re.ux.rem(.5*i),borderRadius:re.ux.rem(te.W9),background:ie.BlueGray5,flexGrow:1})}))},Gi=J.UI.Node.make((({view:e})=>Y.createElement(ee.Zb,{"aria-busy":"true"},Y.createElement(X.F.Fragment,null,e("withContext").pipe(m.U((0,G.RN)(Y.createElement(Be,{active:!0},e("header")),Y.createElement(ee.Ol,null,e("header")))))),Y.createElement(X.F.div,{className:zi},Y.createElement(ki,null),e("isQuickReply").pipe(m.U((0,G.RN)(Y.createElement(Y.Fragment,null,Y.createElement(Ni,{style:{width:re.ux.rem(23)}}),Y.createElement(Ni,{style:{width:re.ux.rem(21.5)}}),Y.createElement(Ni,{style:{width:re.ux.rem(20.5)}})),Y.createElement(Y.Fragment,null,Y.createElement(Ni,{style:{width:re.ux.rem(8.375)}}),Y.createElement(Ni,{style:{width:re.ux.rem(9.3125)}}),Y.createElement(Ni,{style:{width:re.ux.rem(10.5)}}),Y.createElement(Ni,{style:{width:re.ux.rem(10.75)}}),Y.createElement(Ni,{style:{width:re.ux.rem(4.9375)}}))))))))),zi=re.ux.style({display:"flex",flexWrap:"wrap",gap:re.ux.rem(te.x),position:"relative"}),Fi=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t,state:i})=>{const{ref:r,onMount:s}=mt.P.useElWatcher(),{notifyUnmount:o}=Y.useContext(Bi),a=Y.useMemo((()=>r.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>t({kind:S.ix.Kind.mount,name:S.ec.initialActionsList,element:e})())),Ui.x((()=>o({kind:S.ix.Kind.unmount,name:S.ec.initialActionsList}))))),[r]);return mt.P.useSubscriptionTo(a),Y.createElement(ee.Zb,{style:Vi,ref:s},Y.createElement(X.F.Fragment,null,i.pipe(m.U((({isQuickReply:e})=>e?Y.createElement(ee.PG,{reportMenuButtonClassName:Mi,onClickProvideFeedback:t({kind:S.ix.Kind.openFeedbackFormButtonClick,source:S.x2.Source.quickReplyInitialActions}),onClickReportOffensive:t({kind:S.ix.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:S.ix.Kind.reportMenuVisibilityChange,trigger:n.uiItem(S.ec.initialActionsList),visible:e})()}):null))),e.actions))})),{actions:De}),ji=J.UI.Union.make("kind",{none:J.UI.Node.empty,loading:Gi,loaded:Fi}),Vi={position:"relative",padding:`${re.ux.rem(te.F2)} ${re.ux.rem(te.qp)}`},Mi=re.ux.style({position:"absolute",top:re.ux.rem(te.qp),right:re.ux.rem(te.qp)});function Di(e){const t=e.assistant.state.view("session").view((e=>S.wR.isQuickReply(e.mode))),i=e.assistant.state.view("session").view("selectedText"),n=e.assistant.state.view("contextualActions").view((e=>(0,l.zG)(e,v.map(a.UI(R.BackendAction.make)),v.map(a.IR(R.BackendAction.ordByActionStore)),v.map(a.UI((e=>({label:e[0].action.store.label,actions:Oe(e,(t=>S.aU.Store.Id.eq.equals(t.store.id,e[0].action.store.id)),e[0].action.store.maxCountBeforeClipping),view:e[0].action.store.view})))))));return J.Z.composeUnion({none:()=>W.of(null),loading:()=>b.h.combine(t,i,((e,t)=>({header:e?"Ways to reply":v.isSome(t)?`Work with: ${t.value}`:"Ideas for you",isQuickReply:e,withContext:v.isSome(t)}))),loaded:Hi(e,n,t)},(()=>b.h.combine(n,e.assistant.state.view("session"),((e,t)=>v.isSome(e)?"started"===t.kind&&"pending"===t.activeContext.kind?{kind:"loading"}:{kind:"loaded"}:"started"===t.kind?{kind:"none"}:{kind:"loading"}))))}function Hi(e,t,i){return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),i.view((e=>({isQuickReply:e})))),actions:Ye(e,t.pipe(d.oA))})}const Li=J.UI.Node.make((({view:e})=>Y.createElement(ee.Zb,{style:$i},Y.createElement("div",{className:Zi},"This document"),Y.createElement(X.F.div,{className:Wi},e("title")),Y.createElement(X.F.div,{className:qi},e("summary"))))),Ki=J.UI.Union.asOption(Li),$i={position:"relative",padding:`${re.ux.rem(te.x)} ${re.ux.rem(te.qp)}`,gap:re.ux.rem(te.x),fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC)},Zi=re.ux.style({borderBottom:`${re.ux.rem(te.W9)} solid ${ne.XY.Boundaries.Secondary.Default}`,paddingBottom:re.ux.rem(te.F2),marginBottom:re.ux.rem(te.F2),color:ne.XY.Content.Secondary.Default,userSelect:"none"}),Wi=re.ux.style({fontSize:re.ux.rem(te.qp+te.yC),color:ne.XY.Content.Secondary.Default,fontWeight:600}),qi=re.ux.style({color:ne.XY.Content.Primary.Default});function Yi(e){const t=e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.chain((e=>e.activeContext.documentOverview))));return J.Z.composeOption((()=>(0,l.zG)(t,d.oA)),(()=>t))}const Qi=J.UI.Node.make((({notify:e})=>Y.createElement(ee.Zb,{style:en},Y.createElement("div",{className:tn},"Set your voice"),Y.createElement("div",{className:nn},"Choose how you want your generated text to sound."),Y.createElement(ee.zx.Primary,{className:sn,onClick:e({kind:S.ix.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},Y.createElement(ee.uA,{className:rn}),"Set voice")))),Xi=J.UI.Union.asOption(Qi),Ji="setVoiceBtn",en={gap:0,backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},tn=re.ux.style({fontWeight:700,fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),color:ne.XY.Content.Primary.Default}),nn=re.ux.style({fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),color:ne.XY.Content.Secondary.Default}),rn=re.ux.style({stroke:"white"}),sn=re.ux.joinClasses([Ji,re.ux.style(C.Es.buttonOverrideSpecificity({alignSelf:"flex-start",marginTop:re.ux.rem(te.x),padding:`0 ${re.ux.rem(te.x)} 0 ${re.ux.rem(te.F2)}`,lineHeight:re.ux.rem(1.125),gap:re.ux.rem(te.F2),$nest:{"& > i":Object.assign({marginLeft:0},C.Es.iconSizeRems(1.5))}},Ji))]);function on(e){const t=e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.fold(l.jv,(e=>e.voiceProfile.needsSetup))));return J.Z.composeOption(J.Z.fromSideEffect((t=>e.notify(t)),null),(()=>t.view((e=>e?v.some(null):v.none))))}const an=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:cn},e.suggestions,e.voiceBanner,e.documentOverview,e.intent,e.actions))),ln=J.UI.Knot.make(an,{suggestions:gi,voiceBanner:Xi,intent:Ei,actions:ji,documentOverview:Ki}),cn=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)});function un(e){return J.Z.composeKnot({suggestions:xi(e.revision),voiceBanner:on(e),intent:Ri(e.assistant),actions:Di(e),documentOverview:Yi(e)})}var dn=i(60135);const mn=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t})=>{const{ref:i,onMount:n}=mt.P.useElWatcher(),{notifyUnmount:r}=Y.useContext(Bi),s=Y.useMemo((()=>i.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>t({kind:S.ix.Kind.mount,name:S.ec.followUpActionsList,element:e})())),Ui.x((()=>r({kind:S.ix.Kind.unmount,name:S.ec.followUpActionsList}))))),[i]);return mt.P.useSubscriptionTo(s),Y.createElement("div",{className:re.ux.style(yn),ref:n},e.actions)})),{actions:Ee}),pn=re.ux.color(bt),hn=J.UI.Node.make((()=>Y.createElement("div",{"aria-busy":!0,className:re.ux.style(yn,{position:"relative"})},Y.createElement(ki,{overlayGradientEndColor:`rgba(${pn.red()}, ${pn.green()}, ${pn.blue()}, 0)`,overlayGradientCenterColor:`rgba(${pn.red()}, ${pn.green()}, ${pn.blue()}, 0.5)`,overlayBlendMode:"screen"}),Y.createElement(Ni,{style:{width:re.ux.rem(8.5)},mode:"compact"}),Y.createElement(Ni,{style:{width:re.ux.rem(9.25)},mode:"compact"}),Y.createElement(Ni,{style:{width:re.ux.rem(8)},mode:"compact"}),Y.createElement(Ni,{style:{width:re.ux.rem(4.5)},mode:"compact"})))),gn=J.UI.Union.make("kind",{none:J.UI.Node.empty,loading:hn,actions:mn}),fn=J.UI.Knot.make(J.UI.Grid.make((({slots:e})=>Y.createElement(Y.Fragment,null,e.actions))),{actions:gn}),yn={display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",flexDirection:"row",width:"100%",gap:re.ux.rem(te.x),marginBottom:re.ux.rem(te.x)},vn=J.UI.Knot.make(J.UI.Grid.make((({slots:e})=>Y.createElement(ee.Zb,{style:kn},e.actions))),{actions:De}),xn=J.UI.Union.make("kind",{loading:Gi,loaded:vn}),bn=J.UI.Knot.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",null,e.actions))),{actions:xn}),Sn=J.UI.Union.asOption(bn),kn={position:"relative",padding:`${re.ux.rem(te.F2)} ${re.ux.rem(te.qp)}`},Cn=J.UI.Union.make("kind",{followUp:fn,newContext:Sn});function wn(e){const t=e.assistant.state.view("contextualActions").view((e=>(0,l.zG)(e,v.map(a.UI(R.BackendAction.make)),v.map((e=>Oe(e,(0,l.ff)(S.aU.isSkillActionInput)))),v.chain(a.c2))));return J.Z.composeUnion({none:()=>W.of(null),loading:()=>W.of(null),actions:J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),null),actions:Ae(e,t,"compact")})},(()=>b.h.combine(t,e.assistant.state.view("genAIAvailability"),e.assistant.state.view("session"),((e,t,i)=>(0,l.zG)(S.z_.toStarted(i),v.map((e=>e.activeContext)),v.fold((()=>"none"),(i=>(0,l.zG)(e,v.filter((()=>!S._4.isUnavailable(t))),v.fold((()=>S._4.isUnavailable(t)||!S._y.isPending(i)?"none":"loading"),(()=>"actions"))))),(e=>({kind:e})))))))}function _n(e){return()=>e.assistant.state.view("session").view("selectedText").pipe(m.U((e=>({header:v.isSome(e)?`Work with: ${e.value}`:"Ideas for you",isQuickReply:!1,withContext:v.isSome(e)}))))}function In(e){const t=e.assistant.state.view("contextualActions").view((e=>(0,l.zG)(e,v.chain(a.hX((0,G.ff)(S.aU.isSkillActionInput))),v.map(a.UI(R.BackendAction.make)),v.map(a.IR(R.BackendAction.ordByActionStore)),v.map(a.UI((e=>({label:e[0].action.store.label,actions:Oe(e,(t=>S.aU.Store.Id.eq.equals(t.store.id,e[0].action.store.id))),view:e[0].action.store.view})))))));return J.Z.composeKnot({actions:Ye(e,t.pipe(d.oA))})}function En(e){return J.Z.composeOption(J.Z.composeKnot({actions:J.Z.composeUnion({loading:_n(e),loaded:In(e)},(()=>e.assistant.state.view("session").view(S.z_.toStarted).pipe(m.U(v.map((e=>"pending"===e.activeContext.kind?{kind:"loading"}:{kind:"loaded"}))),d.oA)))}),(()=>e.assistant.state.view("session").view(S.z_.toStarted)))}function An(e){return J.Z.composeUnion({followUp:J.Z.composeKnot({actions:wn(e)}),newContext:En(e)},(()=>e.assistant.state.view("session").view(S.z_.toStarted).pipe(m.U((e=>(0,l.zG)(e,v.map((e=>e.activeContext.isBoundary&&v.isSome(e.activeContext.textRevision)?"newContext":"followUp"))))),d.oA,m.U((e=>({kind:"followUp"===e?"followUp":"newContext"}))))))}const On="primaryBtn",Rn="rephraseBtn",Tn="dismissBtn",Pn="reportBtn",Un=({isActive:e,id:t,children:i,onHovered:n,onFocused:r,onCopy:s,customStyles:o})=>{const a=Y.useRef(null);return Y.createElement(ee.Zb,{ref:a,style:Object.assign(Object.assign({},Nn),o),"data-active":e,"data-id":t,onMouseEnter:()=>null==n?void 0:n(!0),onMouseLeave:()=>null==n?void 0:n(!1),onFocus:()=>{var e;return null==r?void 0:r((null===(e=a.current)||void 0===e?void 0:e.contains((0,C.vY)(document)))||!1)},onBlur:()=>{var e;return null==r?void 0:r((null===(e=a.current)||void 0===e?void 0:e.contains((0,C.vY)(document)))||!1)},onCopy:s},i)},Bn={backgroundColor:ne.XY.Surface.Primary.Default,$nest:{[`& .${Tn}, & .${Pn}`]:{opacity:1,pointerEvents:"auto"},[`& ${C.Es.repeatClassSelector(On,C.Es.cheetahButtonContentOverrideSpecificity)}`]:{color:ne.XY.Surface.Primary.Default,backgroundColor:C.BO.BrandGreen60,border:"1px solid transparent"}}},Nn={backgroundColor:"transparent",$nest:{"&:not(:last-of-type)":{borderBottom:`0.5px solid ${ie.BlueGray10}`},[`& ${C.Es.repeatClassSelector(On,C.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:re.ux.rem(1.125),backgroundColor:ne.XY.Surface.Primary.Default,color:ne.XY.Content.Secondary.Default,border:`1px solid ${ie.BlueGray5}`,boxSizing:"border-box"},[`& ${C.Es.repeatClassSelector(Rn,C.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:re.ux.rem(1.5)},[`& .${Tn}, & .${Pn}`]:{opacity:0,pointerEvents:"none",justifyContent:"center"},"&:focus, &:hover":Object.assign({},Bn),"&[data-active='true']":Object.assign({},Bn)}},Gn=({header:e,footer:t,isActive:i,resultId:n,onHovered:r,onFocused:s,onCopy:o,body:a,customStyles:l})=>Y.createElement(Un,{id:n,isActive:i,onHovered:r,onFocused:s,customStyles:l,onCopy:o},e,a,t),zn=({onInsert:e,onRephrase:t,onDismiss:i,onProvideFeedback:n,onReportOffensive:r,onReportMenuVisibilityChange:s,disabled:o})=>Y.createElement("div",{className:jn},Y.createElement("div",{className:Mn},(0,l.zG)(e,v.map((e=>Y.createElement(ee.zx.Primary,{className:Kn,name:"insertResult",onClick:e,size:"small",key:"insert"},"Insert"))),v.toNullable),(0,l.zG)(t,v.map((e=>Y.createElement(ee.zx.Tertiary,{className:$n,name:"rephraseResult",onClick:e,disabled:o,size:"small",key:"rephase"},"Rephrase"))),v.toNullable)),Y.createElement("div",{className:Dn},Y.createElement(ee.zx.Tertiary,{onClick:i,className:Hn,compact:!0,size:"small",name:"dismissResult",title:"Delete"},Y.createElement(ee.L3,{className:Zn})),Y.createElement(ee.PG,{reportMenuButtonClassName:Ln,onClickProvideFeedback:n,onClickReportOffensive:r,onOpenChange:s}))),Fn="ignoreIcon",jn=re.ux.style({gap:re.ux.rem(te.x),display:"flex",alignItems:"center",justifyContent:"space-between"}),Vn={display:"flex",alignItems:"center",gap:re.ux.rem(te.x)},Mn=re.ux.style(Vn),Dn=re.ux.style(Vn),Hn=Tn,Ln=Pn,Kn=On,$n=Rn,Zn=re.ux.joinClasses([Fn,re.ux.style(C.Es.buttonOverrideSpecificity(C.Es.iconSizeRems(1.5),Fn))]),Wn=({header:e,onClick:t,disabled:i})=>Y.createElement(ee.zx.Tertiary,{compact:!0,disabled:i,onClick:t,className:ir,name:"editResultPrompt",size:"small"},Y.createElement("div",{className:nr},Y.createElement("div",Object.assign({className:sr},(0,C.E)(e))),Y.createElement("div",{className:er},"Edit")));var qn;!function(e){e.FadeIn="FadeIn",e.FadeOut="FadeOut"}(qn||(qn={}));const Yn=({iconUrl:e,loading:t,header:i})=>{const[n,r]=Y.useState({text:i,animationState:qn.FadeIn});return Y.useEffect((()=>{r((e=>Object.assign(Object.assign({},e),{animationState:e.text!==i?qn.FadeOut:e.animationState})));const e=setTimeout((()=>r({text:i,animationState:qn.FadeIn})),250);return()=>clearTimeout(e)}),[i]),Y.createElement("div",{className:tr},t?Y.createElement(ee.Ho,{className:rr}):(0,l.zG)(e,v.fold(l.gn,(e=>Y.createElement("img",{src:e,style:{width:re.ux.rem(1.25),height:re.ux.rem(1.25)}})))),Y.createElement("span",Object.assign({"aria-live":"assertive"},(0,Q.Sh)(sr,n.animationState===qn.FadeIn&&or,n.animationState===qn.FadeOut&&ar),(0,C.E)(n.text))))},Qn="editHeaderBtn",Xn="headerBtn",Jn=C.Es.buttonOverrideSpecificity({height:re.ux.rem(1.5),lineHeight:re.ux.rem(1.125),padding:`0 ${re.ux.rem(te.F2)}`,margin:`0 ${re.ux.rem(-te.F2)}`,overflow:"hidden",$nest:{[`& .${Qn}`]:{opacity:0,pointerEvents:"none"},"&:focus, &:hover":{background:ie.BlueGray0,[`& .${Qn}`]:{opacity:1,pointerEvents:"auto",color:ne.XY.Content.Primary.Default}}}},Xn),er=Qn,tr=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x+te.yC),height:re.ux.rem(1.5),fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),color:ie.BlueGray60,overflow:"hidden"}),ir=re.ux.joinClasses([Xn,re.ux.style(Jn)]),nr=re.ux.style({display:"flex",justifyContent:"space-between",width:"100%",gap:re.ux.rem(te.F2)}),rr=re.ux.style({marginBottom:`-${re.ux.rem(te.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center"}),sr=re.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",transitionProperty:"opacity",transitionDuration:re.ux.seconds(.25)}),or=re.ux.style({opacity:1}),ar=re.ux.style({opacity:0});var lr=i(18208),cr=i(65223),ur=i(37360);const dr=({title:e,url:t,contextText:i})=>{const n=Y.useRef(null),r=(0,ur.KL)(n,e),s=(0,l.zG)(i,v.getOrElse((()=>r)));return(0,l.zG)(t,v.fold((()=>Y.createElement(hr,{tooltip:s},Y.createElement("span",{className:mr,ref:n},e))),(t=>Y.createElement(hr,{tooltip:s},Y.createElement("div",{className:pr},Y.createElement(ee.dL,{href:t,className:mr,ref:n},e))))))},mr=re.ux.style({display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",maxWidth:"100%",$nest:{"&:visited":{color:"inherit"}}}),pr=re.ux.style({display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}),hr=({children:e,tooltip:t})=>t?Y.createElement(cr.u,{align:"topCenter",title:Y.createElement("div",{className:gr},t)},e):Y.createElement(Y.Fragment,null,e),gr=re.ux.style({maxWidth:re.ux.rem(80*te.F2),textAlign:"left",whiteSpace:"normal",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":5,"-webkit-box-orient":"vertical"}),fr=({title:e,titleId:t,desc:i,descId:n,...r})=>Y.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...r},i?Y.createElement("desc",{id:n},i):null,e?Y.createElement("title",{id:t},e):null,Y.createElement("path",{d:"M12 10.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm-10 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#646B81"})),yr=({title:e,titleId:t,desc:i,descId:n,...r})=>Y.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...r},i?Y.createElement("desc",{id:n},i):null,e?Y.createElement("title",{id:t},e):null,Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.194 7.5H7.5v-1H11V10h-1V8.18a4.926 4.926 0 0 0-2.5 4.32 5.002 5.002 0 0 0 3.214 4.672l-.357.934A6.002 6.002 0 0 1 6.5 12.5a5.925 5.925 0 0 1 2.694-5Zm8.306 5c0-2.128-1.33-3.92-3.214-4.64l.357-.934c2.251.86 3.857 3.011 3.857 5.574a5.988 5.988 0 0 1-2.655 5H17.5v1H14V15h1v1.848a4.985 4.985 0 0 0 2.5-4.348Z",fill:"#646B81"}));var vr=i(53702);const xr=({onRegenerateWithoutReference:e})=>Y.createElement(ee.h_,{name:"referenceMenu",title:"Reference menu","aria-label":"Reference menu",label:Y.createElement(fr,null),theme:{button:br},onAction:t=>{if("regenerateWithoutReference"===t)return e()}},Y.createElement(vr.v.Item,{key:"regenerateWithoutReference",textValue:"regenerateWithoutReference"},Y.createElement(yr,{className:Sr}),"Regenerate without this reference")),br=(0,ee.P_)({type:"tertiary",compact:!0,size:"small"}),Sr=re.ux.style({marginRight:re.ux.rem(te.x)}),kr=({privacyLevel:e})=>{switch(e.kind){case"public":return Y.createElement(Cr,null);case"restricted":return Y.createElement(wr,null);default:return(0,l.Rz)(e)}},Cr=()=>Y.createElement(Y.Fragment,null),wr=()=>Y.createElement(cr.u,{align:"topLeft",title:Y.createElement("div",{className:_r},"This item has restricted access and is only visible to those added to the file")},Y.createElement(ee.Ct,{className:Ir},"Private")),_r=re.ux.style({width:re.ux.rem(9),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),Ir=re.ux.style({border:`1px solid ${C.BO.BorderBaseSubduedColor}`,borderRadius:re.ux.rem(te.F2)}),Er=({className:e,isOpen:t,references:i,onOpenChange:n,onRegenerateWithoutReference:r,onReferencesMount:s})=>{const{ref:o,onMount:a}=mt.P.useElWatcher(),l=Y.useMemo((()=>o.pipe(Ti.QV(Pi.E),d.oA,y.b(s))),[o]);return mt.P.useSubscriptionTo(l),Y.createElement(X.F.div,{className:e,mount:a},Y.createElement(ee.zx.Tertiary,{style:Ar,onClick:()=>n(!t),name:"collapseReferencesList",size:"small"},Y.createElement("span",{className:Rr},i.length," ",lr.pluralize(i.length,"reference","references")),t?Y.createElement(ht.JO.Arrow,{direction:ht.n4.up}):Y.createElement(ht.JO.Arrow,{direction:ht.n4.down})),Y.createElement("ul",{className:Tr,hidden:!t,"aria-hidden":!t},i.map((({id:e,privacyLevel:t,title:i,iconUrl:n,url:s,contextText:o},a)=>Y.createElement("li",{key:a,className:Pr},Y.createElement("img",{src:n,className:Ur,alt:""}),Y.createElement(dr,{title:i,url:s,contextText:o}),Y.createElement("div",{className:Br},Y.createElement(kr,{privacyLevel:t}),void 0!==r?Y.createElement(xr,{onRegenerateWithoutReference:()=>r(e)}):null))))))},Ar={base:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:re.ux.rem(te.F2),paddingRight:0}},Or={fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),color:ne.XY.Content.Secondary.Default,userSelect:"none"},Rr=re.ux.style(Or),Tr=re.ux.style({fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),color:ne.XY.Content.Primary.Default,margin:0,padding:0}),Pr=re.ux.style({height:re.ux.rem(te.sD),display:"flex",alignItems:"center",borderRadius:re.ux.rem(ft.xB)}),Ur=re.ux.style({minWidth:re.ux.rem(te.mh),height:re.ux.rem(te.mh),marginRight:re.ux.rem(te.x)}),Br=re.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:"auto"}),Nr=({title:e,titleId:t,desc:i,descId:n,...r})=>Y.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...r},i?Y.createElement("desc",{id:n},i):null,e?Y.createElement("title",{id:t},e):null,Y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.784 6.21a.727.727 0 0 1 .006 1.029L9.203 17.943 4.21 12.895a.727.727 0 1 1 1.034-1.023l3.959 4.003 9.553-9.66a.727.727 0 0 1 1.028-.005Z",fill:"#646B81"})),Gr=({className:e,title:t,description:i})=>Y.createElement("div",{className:re.ux.joinClasses([zr,e])},Y.createElement("div",{className:Fr},Y.createElement("span",{className:Dr},t)),Y.createElement("ul",{className:jr},i.map(((e,t)=>Y.createElement("li",{className:Vr,key:t},Y.createElement(Nr,{className:Mr}),Y.createElement("span",{className:Hr},e)))))),zr=re.ux.style({display:"flex",flexDirection:"column"}),Fr=re.ux.style({display:"flex"}),jr=re.ux.style({display:"flex",flexDirection:"column",listStyle:"none",margin:0,padding:0,$nest:{"& li":{marginTop:re.ux.rem(te.F2)}}}),Vr=re.ux.style({display:"flex",alignItems:"center"}),Mr=re.ux.style({marginRight:re.ux.rem(te.x),width:re.ux.rem(te.mh),maxHeight:re.ux.rem(te.mh+te.yC),$nest:{"& path:first-of-type":{fill:ie.Green60}}}),Dr=re.ux.style({fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),fontWeight:700,color:ne.XY.Content.Secondary.Default}),Hr=re.ux.style({fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),color:ne.XY.Content.Secondary.Default,flex:1}),Lr=({isMyVoice:e,isAnimated:t=!1,isBadge:i=!1,label:n="Use my style",inactiveLabel:r=n,onClick:s})=>Y.createElement(ee.zx.Tertiary,{name:"toggleVoice",onClick:s,size:"small",role:"checkbox","aria-checked":e,compact:!0,style:Kr(e,t,i)},Y.createElement(ee.ln,Object.assign({width:16,height:16},(0,Q.Sh)($r,e?Zr:Wr))),e?n:r);function Kr(e,t,i){return{base:{display:"flex",alignItems:"center",height:re.ux.rem(1.25),lineHeight:re.ux.rem(1.125),color:e?ie.Green80:ie.BlueGray60,backgroundColor:e?ie.Green0:ie.BlueGray0,padding:`0 ${re.ux.rem(te.F2)}`,transition:t?re.ux.seconds(.25):void 0,transitionProperty:t?"color, background-color":void 0},icon:{marginRight:re.ux.rem(te.x),minWidth:re.ux.rem(1),minHeight:re.ux.rem(1)},hovered:{backgroundColor:e?re.ux.color(C.BO.Green10).mix(re.ux.color(C.BO.BlueGray5)).toRGBA().toString():ie.BlueGray10,color:e?ie.Green80:ie.BlueGray60},active:{backgroundColor:e?re.ux.color(C.BO.Green10).mix(re.ux.color(C.BO.BlueGray5)).toRGBA().toString():ie.BlueGray10,color:e?ie.Green80:ie.BlueGray60},disabled:i?{opacity:1,cursor:"default"}:void 0}}const $r=re.ux.style({marginRight:re.ux.rem(te.x),minWidth:re.ux.rem(1),minHeight:re.ux.rem(1),borderWidth:re.ux.px(1),borderStyle:"solid",borderColor:ne.XY.Content.Secondary.Default,borderRadius:re.ux.rem(ft.xB),overflow:"hidden",transitionProperty:"background border-color",transitionDuration:re.ux.seconds(.25),$nest:{svg:{stroke:"none"}}}),Zr=re.ux.style({background:ie.Green60,borderColor:ie.Green60,$nest:{path:{fill:ie.White}}}),Wr=re.ux.style({background:ie.White,borderColor:ne.XY.Content.Secondary.Default,$nest:{path:{fill:"transparent"}}}),qr=J.UI.Node.make((({state:e,notify:t})=>Y.createElement(X.F.div,null,e.pipe(m.U((({selectedRange:e,selectedText:i})=>e?Y.createElement(ee.zx.Tertiary,{title:"Select any text to work with it in Grammarly.",style:{base:Qr},onClick:t({kind:S.ix.Kind.selectionContextInteraction,range:e,visibility:"attention"}),onMouseEnter:t({kind:S.ix.Kind.selectionContextInteraction,range:e,visibility:"visible"}),onMouseLeave:t({kind:S.ix.Kind.selectionContextInteraction,range:e,visibility:"hidden"})},Y.createElement(Be,null,i)):Y.createElement("div",{className:Xr},Y.createElement(Be,null,i)))))))),Yr=J.UI.Union.asOption(qr),Qr={paddingLeft:re.ux.rem(te.qp),paddingRight:re.ux.rem(te.qp),paddingTop:re.ux.rem(te.F2),paddingBottom:re.ux.rem(te.F2),marginBottom:re.ux.rem(-te.F2),justifyContent:"flex-start",minHeight:0},Xr=re.ux.style({paddingLeft:re.ux.rem(te.qp),paddingRight:re.ux.rem(te.qp),paddingTop:re.ux.rem(te.F2),paddingBottom:re.ux.rem(te.F2),marginBottom:re.ux.rem(-te.F2)}),Jr=(e,t,i)=>{const n=e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.chain((e=>v.fromNullable(e.results[i+1]))),v.filter(S.x4.isComplete),v.chain((e=>e.boundaryContextId)))),r=t.pipe(L.M(n),m.U((([e,t])=>(0,l.zG)(e,v.filter((e=>S.x4.isComplete(e)||S.x4.isInProgress(e))),v.chain((e=>e.boundaryContextId)),v.filter((e=>!!v.isNone(t)||e!==t.value)))))),s=r.pipe(m.U(v.chain((t=>e.assistant.getContextById(t))))),o=s.pipe(m.U((e=>(0,l.zG)(e,v.chain((e=>e.selection))))));return J.Z.composeOption(J.Z.fromSideEffect((t=>e.notify(t)),$.aj([s,e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.map((({textRevision:e})=>e))))]).pipe(m.U((([e,t])=>qe.Y(v.option)({selection:(0,l.zG)(e,v.chain((({selection:e})=>e))),currentTextRevision:t,contextTextRevision:(0,l.zG)(e,v.map((({textRevision:e})=>e)))}))),d.oA,m.U((({selection:e,currentTextRevision:t,contextTextRevision:i})=>({selectedText:e.text,selectedRange:v.isSome(i)&&t===i.value?e.range:void 0}))))),(()=>o))};var es=i(36991);const ts=re.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:re.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:re.ux.rem(1.3125),color:ne.XY.Content.Primary.Default}),is=({children:e})=>Y.createElement("div",{className:ts},e);var ns;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(ns||(ns={}));const rs=({insertOp:e})=>{const t=ss(e.attributes),i=os(e.attributes);switch(t){case ns.generatedText:return Y.createElement(ds,{style:i},e.insert);case ns.knowledgeHubTerm:return Y.createElement(ms,{style:i},e.insert);case ns.none:return us(e.attributes)?Y.createElement(hs,{style:i,href:e.attributes.link},e.insert):Y.createElement(ps,{style:i},e.insert);default:return(0,l.Rz)(t)}},ss=e=>{switch(!0){case null==e?void 0:e[ys.knowledgeHubTerm]:return ns.knowledgeHubTerm;case null==e?void 0:e[ys.generatedText]:return ns.generatedText;default:return ns.none}},os=e=>{const t={};return as(e)&&(t.fontWeight="bold"),ls(e)&&(t.fontStyle="italic"),cs(e)&&(t.textDecoration="underline"),us(e)&&(t.color=ie.Blue60),t},as=e=>!0===(null==e?void 0:e.bold),ls=e=>!0===(null==e?void 0:e.italic),cs=e=>!0===(null==e?void 0:e.underline),us=e=>"string"==typeof(null==e?void 0:e.link),ds=({children:e,style:t})=>Y.createElement("span",{className:gs,style:t},e),ms=({children:e,style:t})=>Y.createElement(cr.u,{title:"from Knowledge Share"},Y.createElement("span",{className:fs,style:t},e)),ps=({children:e,style:t})=>Y.createElement("span",{style:t},e),hs=({children:e,style:t,href:i})=>Y.createElement("a",{style:t,href:i,target:"_blank",rel:"noreferrer"},e),gs=re.ux.style({backgroundColor:ie.Green0,borderRadius:re.ux.rem(ft.fe)}),fs=re.ux.style({backgroundColor:ie.Blue0,borderRadius:re.ux.rem(ft.fe)});var ys;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(ys||(ys={}));const vs=({replacementDelta:e})=>Y.createElement(is,null,e.map(((e,t)=>es.s.isInsert(e)?Y.createElement(rs,{key:t,insertOp:e}):null))),xs=({text:e})=>""!==e.trim()?Y.createElement(is,null,e):null,bs=J.UI.Grid.make((({state:e,notify:t,slots:i})=>Y.createElement(X.F.Fragment,null,e.pipe(m.U((({disabled:e,result:r,originalAction:s})=>Y.createElement(Gn,{resultId:r.id,body:Y.createElement(Y.Fragment,null,Y.createElement("div",{className:re.ux.style({borderBottom:`0.5px solid ${ie.BlueGray10}`})},Y.createElement(xs,{text:r.text}),Y.createElement("div",{className:re.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:re.ux.rem(.5),marginTop:re.ux.rem(.5),marginBottom:re.ux.rem(.75)})},i.actions)),(0,l.zG)(s,v.map((i=>Y.createElement("div",null,Y.createElement(xs,{text:"Continue with your original prompt:"}),Y.createElement("div",{className:re.ux.style({paddingTop:re.ux.rem(.125)})},Y.createElement(Ss,{disabled:e,action:i,onClick:t({kind:S.ix.Kind.userPromptSubmit,prompt:i})}))))),v.toNullable)),header:Y.createElement("h2",{className:re.ux.style({fontSize:re.ux.rem(1),marginBottom:re.ux.rem(.2),marginTop:0,lineHeight:re.ux.rem(1.5)})},"Review your AI use"),isActive:!0,footer:Y.createElement(zn,{onRephrase:v.none,onInsert:v.none,onDismiss:t({kind:S.ix.Kind.resultCardDismissButtonClick,result:r}),onProvideFeedback:t({kind:S.ix.Kind.openFeedbackFormButtonClick,source:S.x2.Source.resultCard}),onReportOffensive:t({kind:S.ix.Kind.reportOffensiveResultButtonClick,result:r}),onReportMenuVisibilityChange:e=>t({kind:S.ix.Kind.reportMenuVisibilityChange,trigger:n.card(r.id),visible:e})(),disabled:e}),customStyles:{borderColor:ie.Gold40,borderTopWidth:re.ux.rem(.375)}}))))))),Ss=({action:e,onClick:t,disabled:i})=>Y.createElement("button",{onClick:t,disabled:i,className:re.ux.style({textDecoration:"underline",color:ie.BlueGray60,background:re.ux.important("none"),border:"none",cursor:"pointer",lineHeight:re.ux.rem(1.375),fontSize:re.ux.rem(.875),overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"left"})},'"',e.arg.value,'"'),ks=J.UI.Knot.make(bs,{actions:Ee});var Cs,ws=i(24713),_s=i(26328);function Is(e,t){return J.Z.fromSideEffect((t=>e.notify(t)),t)}function Es(e,t){const i=function(e,t){return e.assistant.state.view((({genAIAvailability:e,session:i})=>(0,l.zG)(S.z_.toStarted(i),v.map((i=>{const n=S._4.isPassive(e)||S._4.isUnavailable(e),r=(0,l.zG)(i.activeContext.userPromptAction,v.chain((e=>(0,l.zG)(t.header.copiablePrompt,v.map((t=>S.aU.UserPromptActionValue.fromInput(e,t,v.none,v.none)))))));return{actions:(0,l.zG)(_s.nI(i.activeContext.availableActions.filter((0,G.Kg)(S.aU.isFollowUpQuestionActionInput,S.aU.isQuickActionInput))),v.filter((()=>!n)),v.map(_s.UI(R.BackendAction.make))),originalAction:r,disabled:n,result:t}}))))).pipe(d.oA)}(e,t),n=i.pipe(ws.j("actions"));return J.Z.composeKnot({root:Is(e,i),actions:Ae(e,n,"standard")})}!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(Cs||(Cs={}));const As=J.UI.Union.asOption(J.UI.Node.make((({notify:e,state:t})=>Y.createElement(X.F.Fragment,null,t.pipe(m.U((t=>Y.createElement(Lr,{key:"voiceButton",isMyVoice:t.selectedVoice===S.x4.GeneratedTextVoice.user,onClick:e({kind:S.ix.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})})))))))),Os=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t,state:i})=>Y.createElement(X.F.div,{className:Rs},i.pipe(m.U((e=>{switch(e.kind){case Cs.clickableSearchLabel:return Y.createElement(Wn,{header:e.label,disabled:e.disabled,onClick:t({kind:S.ix.Kind.resultCardHeaderClick,prompt:e.copiablePrompt})});case Cs.searchLabel:return Y.createElement(Yn,{header:e.label,iconUrl:e.iconUrl,loading:!1});case Cs.knowledgeHub:return Y.createElement(Yn,{header:"Knowledge Share content was used.",iconUrl:v.none,loading:!1});default:return(0,j.L0)(e)}}))),e.voiceButton))),{voiceButton:As}),Rs=re.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:re.ux.rem(te.x)}),Ts=J.UI.Grid.make((({slots:e,state:t,notify:i})=>Y.createElement(X.F.Fragment,null,e.contextHeader,t.pipe(m.U((({result:t,disabled:s,isActive:o,isReferencesOpen:a,isMyVoice:c})=>Y.createElement(Gn,{resultId:t.id,body:Y.createElement(vs,{replacementDelta:(0,l.zG)(t.replacementDelta,r.fold(l.yR,(e=>c?e.user:e.generic)))}),header:e.header,footer:Y.createElement(Y.Fragment,null,(0,l.zG)(S.x4.isComplete(t)?t.changesSummary:v.none,v.map((e=>Y.createElement(Y.Fragment,null,Y.createElement(ee.Z0,{className:Us}),Y.createElement(Gr,{title:e.title,description:e.description,className:Bs})))),v.toNullable),Y.createElement(zn,{onRephrase:(0,l.zG)(t,v.fromPredicate(S.x4.isComplete),v.filter((e=>e.isRephraseable)),v.map((e=>i({kind:S.ix.Kind.resultCardRephraseButtonClick,result:e,selectedVoice:c?S.x4.GeneratedTextVoice.user:S.x4.GeneratedTextVoice.generic})))),onInsert:(0,l.zG)(t.primaryAction,v.filter((e=>e===S.x4.PrimaryAction.insert)),v.map((()=>i({kind:S.ix.Kind.resultCardInsertButtonClick,result:t,selectedVoice:c?S.x4.GeneratedTextVoice.user:S.x4.GeneratedTextVoice.generic})))),onDismiss:i({kind:S.ix.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:i({kind:S.ix.Kind.openFeedbackFormButtonClick,source:S.x2.Source.resultCard}),onReportOffensive:i({kind:S.ix.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>i({kind:S.ix.Kind.reportMenuVisibilityChange,trigger:n.card(t.id),visible:e})(),disabled:s}),(0,l.zG)(t.references,v.filter((e=>e.length>0)),v.map((e=>Y.createElement(Er,{className:Ns,isOpen:a,references:e,onOpenChange:e=>i({kind:S.ix.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onRegenerateWithoutReference:S.x4.isComplete(t)?e=>i({kind:S.ix.Kind.regenerateWithoutReferenceButtonClick,result:t,referenceId:e,selectedVoice:c?S.x4.GeneratedTextVoice.user:S.x4.GeneratedTextVoice.generic})():void 0,onReferencesMount:e=>i({kind:S.ix.Kind.mount,name:S.ec.referencesList,element:e})()}))),v.toNullable)),isActive:o,onHovered:e=>i({kind:S.ix.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>i({kind:S.ix.Kind.resultCardFocusChange,focused:e,resultId:t.id})(),onCopy:i({kind:S.ix.Kind.resultCardCopy,resultId:t.id})}))))))),Ps=J.UI.Knot.make(Ts,{header:Os,contextHeader:Yr}),Us=re.ux.style({margin:`${re.ux.rem(te.F2)} 0`}),Bs=re.ux.style({marginBottom:re.ux.rem(te.F2)}),Ns=re.ux.style({marginTop:re.ux.rem(te.x)});var Gs=i(17343);function zs(e,t,i,n){return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({genAIAvailability:e,activeCards:n,session:s,referencesVisibility:o,overrideCardVoice:a})=>{var c,u;return{disabled:S._4.isUnavailable(e),result:t,isActive:(0,l.zG)(!!n.has(t.id)||0===n.size&&i&&!Fs(S.z_.toStarted(s))),isReferencesOpen:null!==(c=o.get(t.id))&&void 0!==c&&c,isMyVoice:(null!==(u=a.get(t.id))&&void 0!==u?u:(0,l.zG)(t.replacementDelta,r.fold((()=>S.x4.GeneratedTextVoice.generic),(e=>e.preferVoice))))===S.x4.GeneratedTextVoice.user}}))),header:J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(Z.w((e=>{const i=(0,l.zG)(t.header.copiablePrompt,v.fold((()=>({kind:Cs.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(i=>({kind:Cs.clickableSearchLabel,label:t.header.label,disabled:S._4.isUnavailable(e.genAIAvailability),copiablePrompt:i}))));return S.x4.isComplete(t)&&function(e){return(0,l.zG)(e.replacementDelta,r.fold(l.yR,(e=>e.generic)),(e=>e.ops.some((e=>{var t;return es.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[ys.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?B.H(t.timestamp+3e3-Date.now()).pipe(Gs.h(i),q.O({kind:Cs.knowledgeHub})):W.of(i)})))),voiceButton:J.Z.composeOption(J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(m.U((e=>{var i;return{selectedVoice:null!==(i=e.overrideCardVoice.get(t.id))&&void 0!==i?i:(0,l.zG)(t.replacementDelta,r.fold((()=>S.x4.GeneratedTextVoice.generic),(e=>e.preferVoice))),resultId:t.id}})))),(()=>W.of((0,l.zG)(t.replacementDelta,v.fromEither))))}),contextHeader:Jr(e,W.of(v.some(t)),n)})}function Fs(e){return(0,l.zG)(e,v.fold(l.jv,(e=>v.isSome(e.inProgressResult)||v.isSome(e.error))))}const js=J.UI.Node.make((({state:e})=>Y.createElement(X.F.Fragment,null,e.pipe(m.U((({resultText:e,statusText:t,isMyVoiceStatus:i,sourceLabel:n,sourceIconUrl:r})=>Y.createElement(Gn,{resultId:"in-progress",header:Y.createElement(Vs,null,Y.createElement(Yn,{header:e.length>0?n:t,iconUrl:e.length>0?r:v.none,loading:0===e.length}),Y.createElement(Lr,{isBadge:!0,isAnimated:!0,isMyVoice:i,label:"Use my style"})),body:e.length>0?Y.createElement(Y.Fragment,null,Y.createElement(xs,{text:e}),Y.createElement(Ds,null)):null,isActive:!0}))))))),Vs=({children:e})=>Y.createElement("div",{className:Ms},e),Ms=re.ux.style({display:"grid",gridTemplateColumns:"1fr auto"}),Ds=()=>Y.createElement("div",{className:re.ux.style({position:"relative",overflow:"hidden",height:re.ux.rem(.5),borderRadius:re.ux.rem(ft.xB),background:ie.BlueGray5,flexGrow:1})},Y.createElement(ki,null)),Hs=J.UI.Node.make((({state:e})=>Y.createElement(X.F.Fragment,null,e.pipe(m.U((({result:e})=>Y.createElement(Gn,{resultId:"in-progress",body:Y.createElement(xs,{text:e.text}),header:Y.createElement(Yn,{header:"Working on it...",iconUrl:v.none,loading:!0}),isActive:!0}))))))),Ls=J.UI.Union.make("kind",{regularCardInProgress:Hs,myVoiceCardInProgress:js}),Ks=J.UI.Knot.make(J.UI.Grid.make((({slots:e})=>Y.createElement(Y.Fragment,null,e.header,e.content))),{content:Ls,header:Yr}),$s=J.UI.Union.asOption(Ks);var Zs=i(12126),Ws=i(87938),qs=i(77843);const Ys=[{text:"Working on it...",isMyVoice:!1},{text:"Applying your style...",isMyVoice:!0},{text:"Using your preferred words...",isMyVoice:!0},{text:"Structuring sentences your way...",isMyVoice:!0},{text:"Adjusting your formality...",isMyVoice:!0},{text:"Dotting the i’s and crossing the t’s...",isMyVoice:!0}];function Qs(e){const t=e.state.view("session").view(S.z_.toStarted).view(v.chain((e=>e.inProgressResult))),i=t.pipe(d.oA,m.U((e=>e.text)),q.O("")),n=t.pipe(m.U(v.map((e=>e.header.label))),d.oA,q.O("")),r=t.pipe(m.U(v.chain((e=>e.header.iconUrl)))),s=Zs.D(Ys).pipe(Ws.j(((e,t)=>qs.F(3e3*t)))),o=s.pipe(m.U((e=>e.text))),a=s.pipe(m.U((e=>e.isMyVoice)));return()=>$.aj([i,o,a,n,r]).pipe(m.U((([e,t,i,n,r])=>({resultText:e,statusText:t,sourceLabel:n,sourceIconUrl:r,isMyVoiceStatus:i||e.length>0}))))}function Xs(e){return()=>e.assistant.state.view("session").view(S.z_.toStarted).view((0,l.ls)(v.chain((e=>e.inProgressResult)),v.map((e=>({result:e}))))).pipe(d.oA)}function Js(e){const t=e.assistant.state.view("session").view(S.z_.toStarted).view(v.chain((0,l.ls)((e=>e.voiceProfile),S.LA.toNewVoiceProfile,v.map((e=>e.isEnabledByDefault))))).view(v.getOrElse(l.jv));return J.Z.composeUnion({regularCardInProgress:Xs(e),myVoiceCardInProgress:Qs(e.assistant)},(()=>t.pipe(m.U((e=>e?{kind:"myVoiceCardInProgress"}:{kind:"regularCardInProgress"})))))}function eo(e){const t=e.assistant.state.view("session").view(S.z_.toStarted).view((0,l.ls)(v.chain((e=>e.inProgressResult)),v.map((e=>({result:e})))));return J.Z.composeOption(function(e){return J.Z.composeKnot({content:Js(e),header:Jr(e,e.assistant.state.view("session").view(S.z_.toStarted).view(v.chain((e=>e.inProgressResult))),-1)})}(e),(()=>t))}const to=({placeholder:e,error:t,openAnswer:i,onOpenAnswerChange:n,onSubmitButtonClick:r,onCancelButtonClick:s,onKeypressShiftEnter:o})=>Y.createElement("form",{className:no,onSubmit:e=>e.preventDefault()},Y.createElement(ee.b,{className:ao,placeholder:[null!=e?e:""],text:i,onChange:n,ariaLabel:"Open ended answer",fitContentHeight:!0,theme:{fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)},onKeyDownShiftEnter:o}),(0,l.zG)(t,v.fold((()=>null),(e=>Y.createElement("div",{className:lo},e)))),Y.createElement("div",{className:io},Y.createElement("input",{type:"submit",value:"Submit",hidden:!0}),Y.createElement(ee.zx.Secondary,{style:{base:Object.assign(Object.assign({},ro),so),hovered:oo},onClick:r},"Submit"),Y.createElement(ee.zx.Tertiary,{style:{base:ro},onClick:s},"Dismiss"))),io=re.ux.style({display:"flex",justifyContent:"flex-start",alignItems:"center"}),no=re.ux.style({width:re.ux.percent(100)}),ro={minHeight:re.ux.rem(te.sD),lineHeight:re.ux.rem(te.sD)},so={color:ne.C$.Engagement.Primary.Default,fontWeight:"bold",boxShadow:`inset 0 0 0 1px ${ne.C$.Engagement.Primary.Default}`,marginRight:re.ux.rem(te.x)},oo={color:ne.XY.Surface.Primary.Default,backgroundColor:ne.C$.Engagement.Primary.Default},ao=re.ux.style({border:`1px solid ${ie.BlueGray10}`,minHeight:re.ux.rem(7.5*te.F2),backgroundColor:ie.White,borderRadius:re.ux.rem(te.x),width:re.ux.percent(100),padding:`${re.ux.rem(1.25*te.F2)} ${re.ux.rem(te.x)}`,boxSizing:"border-box"}),lo=re.ux.style({color:ne.vU.DangerAndDeletion.Primary.Default,fontSize:re.ux.rem(.75),marginBottom:re.ux.rem(te.F2)});var co=i(77678),uo=i(56377);const mo=({rating:e,ratingLabels:t,maxScore:i})=>(0,l.zG)(e,v.fold((()=>t.length>=i&&i>1?Y.createElement("div",{className:go},Y.createElement("span",{className:ho},t[0]),Y.createElement("span",{className:ho},t[i-1])):null),(e=>e-1>=0&&t.length>=e?Y.createElement("div",{className:po},Y.createElement("span",null,t[e-1])):null))),po=re.ux.style({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",fontWeight:"bold",fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(.875)}),ho=re.ux.style({color:ie.NeutralGray50}),go=re.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(.875)});var fo=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const yo=({disabled:e,rating:t,ratingLabels:i,maxScore:n,onSelectionChange:r})=>{const[s,o]=Y.useState(v.none),a=Y.useMemo((()=>[]),[]),c=t=>{e||r(t+1)},u=t=>{e||o(v.some(t+1))},d=()=>{e||o(v.none)};return Y.createElement(Y.Fragment,null,Y.createElement("div",{className:vo,role:"slider","aria-valuemin":0,"aria-valuenow":(0,l.zG)(t,v.getOrElse((()=>0))),"aria-valuemax":5,"aria-valuetext":(0,l.zG)(t,v.fold((()=>"Not yet rated"),(e=>i[e-1])))},Array.from({length:n}).map(((r,o)=>Y.createElement(xo,{key:o,onClick:()=>c(o),style:{maxWidth:re.ux.percent(n>0?100/n:0)},isFilled:(0,l.zG)(t,v.fold((()=>!1),(e=>o<e)))||(0,l.zG)(s,v.fold((()=>!1),(e=>o<e))),onMouseEnter:()=>u(o),onMouseLeave:d,onFocus:()=>u(o),onBlur:d,isSelected:(0,l.zG)(t,v.fold((()=>!1),(e=>o+1===e))),isFocusable:(0,l.zG)(t,v.fold((()=>0===o),(e=>o+1===e))),ariaLabel:`Rate this generated output as ${i[o]}`,ref:e=>a.push(e),onKeyDown:t=>((t,i)=>{var r,o,u,d;e||("ArrowRight"!==t.key&&"ArrowUp"!==t.key||((0,l.zG)(s,v.fold((()=>!1),(e=>e<n)))?null===(r=a[i+1])||void 0===r||r.focus():null===(o=a[0])||void 0===o||o.focus()),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||((0,l.zG)(s,v.fold((()=>!1),(e=>e>1)))?null===(u=a[i-1])||void 0===u||u.focus():null===(d=a[4])||void 0===d||d.focus()),"Enter"!==t.key&&" "!==t.key||c(i))})(t,o),disabled:e})))),Y.createElement(mo,{rating:(0,l.zG)(t,v.fold((0,l.a9)(s),(0,l.a9)(t))),ratingLabels:i,maxScore:n}),Y.createElement(uo.L,{small:!0}))},vo=re.ux.style({display:"flex",width:re.ux.percent(100),justifyContent:"center"}),xo=Y.forwardRef(((e,t)=>{var{isFilled:i,ariaLabel:n,disabled:r,isSelected:s,isFocusable:o}=e,a=fo(e,["isFilled","ariaLabel","disabled","isSelected","isFocusable"]);return Y.createElement("button",Object.assign({className:bo,role:"radio","aria-label":n,disabled:r,"aria-checked":s,tabIndex:o?0:-1,ref:t},a),Y.createElement(ee.r7,{className:i?So:""}))}));xo.displayName="StarButton";const bo=re.ux.style({border:"none",background:"none",cursor:"pointer",padding:0,borderRadius:re.ux.rem(te.F2),width:re.ux.rem(te.Lw),$nest:{"&:focus-visible":{outlineStyle:"none",boxShadow:`0 0 0 2px ${ne.XY.Content.Secondary.Default}`}}}),So=re.ux.style({$nest:{"& path":{fill:co.CoreYellow50,stroke:co.CoreYellow50}}});var ko=i(59769),Co=i(46560);const wo=({stage:e,rating:t,initialTitle:i,acknowledgment:n,acknowledgmentTitle:r,onCloseButtonClick:s,className:o})=>Y.createElement("div",{className:re.ux.joinClasses([_o,o])},Y.createElement(ko._,{className:Eo,fill:"#000"}),Y.createElement(Ao,{stage:e,rating:t,initialTitle:i,acknowledgment:n,acknowledgmentTitle:r}),Y.createElement(ee.zx.Tertiary,{"aria-label":"Close survey",style:{base:{marginLeft:"auto",padding:0,minWidth:re.ux.rem(te.qp),minHeight:re.ux.rem(te.qp)},hovered:{backgroundColor:ie.BlueGray10},active:{backgroundColor:ie.BlueGray10}},onClick:s},Y.createElement(Co.B,null))),_o=re.ux.style({display:"flex",alignItems:"center"}),Io=re.ux.style({fontSize:re.ux.rem(.75)}),Eo=re.ux.style({marginRight:re.ux.rem(te.qp),$nest:{"& path:first-of-type":{fill:ie.NeutralGray70}}}),Ao=({stage:e,rating:t,initialTitle:i,acknowledgmentTitle:n,acknowledgment:r})=>{switch(e){case S.Bs.Stage.Type.Rating:return Y.createElement("span",{className:Io},i);case S.Bs.Stage.Type.Feedback:return Y.createElement("span",{className:Io},"Your rating:"," ",Array.from({length:t}).map((()=>"⭐")).join(" "));case S.Bs.Stage.Type.Completed:return Y.createElement("span",{className:Io},(0,l.zG)(n,v.fold((()=>Y.createElement("b",null,"Thank you!")),(e=>Y.createElement("b",null,e))))," ",(0,l.zG)(r,v.fold((()=>"Your feedback helps us improve."),(e=>e))));case S.Bs.Stage.Type.Closed:return null;default:return(0,j.L0)(e)}},Oo=J.UI.Union.asOption(J.UI.Node.make((({notify:e,state:t})=>Y.createElement(X.F.Fragment,null,t.pipe(m.U((t=>Y.createElement(Ro,Object.assign({},t,{onRatingSelectionChange:t=>{e({kind:S.ix.Kind.surveyRatingSelectionChange,rating:t})()},onOpenAnswerChange:t=>e({kind:S.ix.Kind.surveyOpenAnswerChange,openAnswer:t})(),onSubmitButtonClick:e({kind:S.ix.Kind.surveySubmitButtonClick}),onKeypressShiftEnter:e({kind:S.ix.Kind.surveyKeyPressShiftEnter}),onCancelButtonClick:e({kind:S.ix.Kind.surveyCancelButtonClick}),onCloseButtonClick:e({kind:S.ix.Kind.surveyCloseButtonClick})}))))))))),Ro=({survey:e,stage:t,transitionStage:i,rating:n,errors:r,openAnswer:s,onOpenAnswerChange:o,onRatingSelectionChange:a,onCloseButtonClick:c,onCancelButtonClick:u,onSubmitButtonClick:d,onKeypressShiftEnter:m})=>Y.createElement("div",{className:To},Y.createElement(wo,{className:re.ux.joinClasses([i===S.Bs.Stage.Type.Feedback?Bo:void 0,t===S.Bs.Stage.Type.Feedback?No:void 0]),stage:t,rating:(0,l.zG)(n,v.getOrElse((0,l.a9)(1))),initialTitle:e.title,acknowledgment:e.acknowledgment,acknowledgmentTitle:e.acknowledgmentTitle,onCloseButtonClick:c}),t!==S.Bs.Stage.Type.Completed&&Y.createElement(Y.Fragment,null,Y.createElement("div",{className:re.ux.joinClasses([Go,i===S.Bs.Stage.Type.Feedback?Bo:void 0,t===S.Bs.Stage.Type.Feedback?No:void 0])},Y.createElement("div",{className:Fo,hidden:t!==S.Bs.Stage.Type.Rating},Y.createElement(yo,{onSelectionChange:a,rating:n,disabled:v.isSome(n),maxScore:e.maxScore,ratingLabels:e.ratingLabels})),(0,l.zG)(e.openAnswer,v.fold((0,l.a9)("(Optional) Please share your feedback to help us improve."),(e=>e.placeholder)),(e=>Y.createElement("div",{className:zo,hidden:t!==S.Bs.Stage.Type.Feedback},Y.createElement(to,{placeholder:e,onSubmitButtonClick:d,onKeypressShiftEnter:m,onCancelButtonClick:u,onOpenAnswerChange:o,openAnswer:s,error:(0,l.zG)(r,v.chain((e=>e.openAnswerError)))}))))))),To=re.ux.style({backgroundColor:ie.BlueGray0,border:`1px solid ${ie.BlueGray10}`,borderRadius:re.ux.rem(te.F2),padding:`${re.ux.rem(te.x)} ${re.ux.rem(te.mh)}`}),Po=re.ux.keyframes({from:{opacity:1},to:{opacity:.3}}),Uo=re.ux.keyframes({from:{opacity:.3},to:{opacity:1}}),Bo=re.ux.style({animation:`${Po} 0.3s ease-in-out`}),No=re.ux.style({animation:`${Uo} 0.3s ease-in-out`}),Go=re.ux.style({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:re.ux.rem(te.yC)}),zo=re.ux.style({width:re.ux.percent(100)}),Fo=re.ux.style({maxWidth:re.ux.percent(100),width:"fit-content",paddingTop:re.ux.rem(te.F2)});function jo(e,t){return J.Z.composeOption(J.Z.fromSideEffect((t=>e.notify(t)),e.userSurvey.state.pipe(m.U((e=>(0,l.zG)(e.activeSurvey,v.map((t=>({survey:t,state:e})))))),d.oA,m.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,l.zG)(t.openAnswer,v.getOrElse((0,l.a9)(""))),ratingLabels:(0,l.zG)(t.activeSurvey,v.fold((0,l.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>b.h.combine(e.userSurvey.state,t,(({activeSurvey:e,stage:t},i)=>(0,l.zG)(e,v.filter((e=>(0,l.zG)(i,x.contains(e.resultId))&&t!==S.Bs.Stage.Type.Closed)))))))}const Vo=J.UI.Grid.make((({slots:e,view:t})=>{const{ref:i,onMount:n}=mt.P.useElWatcher(),r=Y.useMemo((()=>$.aj([i.pipe(d.oA,m.U((e=>v.fromNullable((0,C.$Q)(e,3)))),d.oA),t("scrollToken").pipe(N.x())]).pipe(m.U(dn.li),y.b((e=>{e.scrollTop=e.scrollHeight-e.clientHeight})))),[i]);return mt.P.useSubscriptionTo(r),Y.createElement("div",{className:Wo,ref:n},e.intent,e.results,e.userSurvey,e.belowResults)})),Mo=J.UI.Union.make("kind",{complete:Ps,aiUsageNotification:ks}),Do=J.UI.List.make(o.bw,Mo),Ho=J.UI.Union.asOption(J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:qo},e.history))),Do)),Lo=J.UI.Knot.make(J.UI.Grid.make((({slots:e})=>Y.createElement(Y.Fragment,null,e.actions))),{actions:Cn}),Ko=J.UI.Union.make("kind",{inProgressResult:$s,error:ii,actions:Lo}),$o=J.UI.Union.asOption(Ko),Zo=J.UI.Knot.make(Vo,{intent:Ei,results:Ho,userSurvey:Oo,belowResults:$o}),Wo=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)}),qo=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)});function Yo(e,t){return J.Z.composeList(o.Ot,(()=>t.pipe(m.U((0,l.ls)(o.ke(50),o.Su(((e,t)=>({result:t,isLast:0===e,index:e}))),o.GY)))),(({result:t,isLast:i,index:n})=>function(e,t,i,n){return J.Z.composeUnion({complete:zs(e,t,i,n),aiUsageNotification:Es(e,t)},(()=>W.of(S.x4.isAIUsageNotification(t)?{kind:"aiUsageNotification"}:{kind:"complete"})))}(e,t,i,n)))}function Qo(e,t){return J.Z.composeOption(Yo(e,t.view(v.getOrElse((()=>[])))),(()=>t))}function Xo(e){const t=e.assistant.state.view("session").view(S.z_.toStarted).pipe(m.U(v.map((e=>v.isSome(e.error)?"error":"started"==e.kind&&v.isSome(e.inProgressResult)?"inProgressResult":"actions"))));return J.Z.composeOption(function(e,t){return J.Z.composeUnion({inProgressResult:eo(e),actions:J.Z.composeKnot({actions:An(e)}),error:li(e)},(()=>t.pipe(d.oA,m.U((e=>({kind:e}))))))}(e,t),(()=>t))}function Jo(e){const t=e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.map((e=>e.results)),v.chain(a.c2)));return J.Z.composeKnot({root:()=>e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.chain((e=>e.inProgressResult)),v.map((e=>e.text)))).pipe(d.oA,q.O(""),m.U((e=>({scrollToken:e})))),intent:Ri(e.assistant),results:Qo(e,t),userSurvey:jo(e,t.view(v.map((0,l.ls)(a.YM,(e=>e.id))))),belowResults:Xo(e)})}const ea={padding:0,height:re.ux.rem(14.625),overflow:"hidden",boxSizing:"border-box",maxHeight:"inherit"},ta=re.ux.style({height:"100%",borderRadius:re.ux.rem(ft.xB+ft.fe)}),ia=re.ux.style({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),na=re.ux.style({border:"none",borderRadius:re.ux.rem(ft.xB+ft.fe),margin:"0",height:"100%",width:"100%"}),ra=re.ux.style({color:ne.XY.Content.Secondary.Default,fontSize:re.ux.rem(.75),fontFamily:"Inter",fontWeight:700,lineHeight:re.ux.rem(1.125)}),sa=re.ux.style({color:ne.XY.Content.Secondary.Default,fontSize:re.ux.rem(.75),fontFamily:"Inter",lineHeight:re.ux.rem(1.125)}),oa=re.ux.style({visibility:"hidden",position:"absolute"}),aa=J.UI.Node.make((({view:e,notify:t})=>{const{ref:i,onMount:n}=mt.P.useElWatcher(),{notifyUnmount:r}=Y.useContext(Bi),s=Y.useMemo((()=>i.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>t({kind:S.ix.Kind.mount,name:S.ec.skill,element:e})())),Ui.x((()=>r({kind:S.ix.Kind.unmount,name:S.ec.skill}))))),[i]);mt.P.useSubscriptionTo(s);const o=Y.useMemo((()=>e("status").pipe(K.G(),g.h((([e,t])=>"loading"===e&&"ready"===t)),Z.w((()=>i.pipe(d.oA,y.b((e=>e.focus()))))))),[i]);return mt.P.useSubscriptionTo(o),Y.createElement(X.F.Fragment,null,e("size").pipe(m.U((t=>Y.createElement(ee.Zb,{style:Object.assign(Object.assign({},ea),{height:t.height})},Y.createElement(X.F.Fragment,null,e("status").pipe(m.U((t=>"loading"===t||"ready"===t?Y.createElement(Y.Fragment,null,Y.createElement("div",Object.assign({},(0,Q.Sh)(ta,ia,"ready"===t?oa:void 0)),Y.createElement(ee.Ho,null),Y.createElement("span",{className:sa},"Loading...")),Y.createElement(X.F.Fragment,null,e("srcUrl").pipe(m.U((e=>Y.createElement("iframe",Object.assign({key:e,src:e,ref:n,allow:`clipboard-write ${e}`},(0,Q.Sh)(na,"loading"===t?oa:void 0)))))))):"error"===t?Y.createElement("div",Object.assign({},(0,Q.Sh)(ta,ia)),Y.createElement(ee.T6,null),Y.createElement("span",{className:ra},"Something went wrong"),Y.createElement("span",{className:sa},"Please try again.")):(0,l.Rz)(t))))))))))})),la=J.UI.Union.asOption(aa);function ca(e){const t=e.skill.state.view(v.map((e=>({displayName:e.skill.displayName,status:e.status,srcUrl:e.skill.srcUrl,size:e.size}))));return J.Z.composeOption(function(e,t){return J.Z.fromSideEffect((t=>e.notify(t)),t)}(e,t.pipe(d.oA)),(()=>t))}const ua=J.UI.Union.make("kind",{error:ii,initial:ln,actionFollowup:Qt,results:Zo,skill:la}),da=41.25,ma=J.UI.Grid.make((({slots:e,state:t,view:i,notify:n})=>{const{rect:r,onMount:s}=mt.P.useRectWatcher(),o=Y.useMemo((()=>r.pipe(d.oA,y.b((e=>n({kind:"contentSizeChange",height:e.height})())))),[r]);return mt.P.useSubscriptionTo(o),Y.createElement(X.F.div,{mount:s,onScroll:e=>n({kind:"contentScroll",scrollTop:e.currentTarget.scrollTop})(),style:{overflow:i("canScroll").pipe(m.U((0,G.RN)("auto","hidden"))),maxHeight:t.pipe(m.U((({assistantMaxHeight:e,promptHeight:t})=>function(e,t,i=.25){const n=(0,l.zG)(e,v.map((e=>`min(${re.ux.px(e)}, ${re.ux.rem(da)})`)),v.getOrElse((()=>re.ux.rem(da)))),r=(0,l.zG)(t,v.fold((()=>re.ux.rem(3)),(e=>re.ux.px(e)))),s=`calc(${re.ux.rem(yl+vl+2.5)} + ${r})`;return`calc(${n} - ${s} - ${re.ux.rem(i)})`}(e,t))),q.O(re.ux.rem(34.75)))}},e.content)})),pa=J.UI.Knot.make(ma,{content:ua}),ha=J.UI.Union.asOption(pa);function ga(e){return J.Z.composeOption((t=e,J.Z.fromSideEffect((e=>t.notify(e)),t.assistant.state.view("selectedAction").view(v.chain((e=>(0,l.zG)(e.args[0].hints,v.map((t=>({header:e.label,iconUrl:e.iconUrl,hintsHeader:t.header,hintsItems:t.items,radioOptions:S.Xy.match({string:()=>v.none,radio:e=>v.some(e.radioOptions)})(e.args[0])}))))))).pipe(d.oA))),(()=>e.assistant.state.view("selectedAction").view(v.chain((e=>e.args[0].hints)))));var t}function fa(e,t){return J.Z.composeUnion({error:li(e),initial:un(e),results:Jo(e),actionFollowup:ga(e),skill:ca(e)},(()=>t.pipe(d.oA,m.U((e=>({kind:e}))))))}function ya(e,t,i,n){const r=b.h.combine(e.assistant.state,e.routing.activeView,(({genAIAvailability:e,session:t},i)=>{switch(i){case"loading":return v.some("initial");case"loadingError":return v.some("error");case"beforeResults":return v.isSome(t.error)?v.some("error"):S._4.isUnavailable(e)?v.none:v.some("initial");case"actionSelected":return v.some("actionFollowup");case"afterResults":return v.some("results");case"voiceProfile":case"legacyVoiceProfile":case"feedbackForm":return v.none;case"skill":return v.some("skill");default:return(0,j.L0)(i)}}));return J.Z.composeOption(function(e,t,i,n,r){return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>{switch(t.kind){case"contentScroll":return e.assistant.contentOverflowUnderToolbar(t.scrollTop>0);case"contentSizeChange":return i.set(v.some(t.height+8));default:(0,j.L0)(t)}}),b.h.combine(n,r,e.assistant.state.view("canScroll"),((e,t,i)=>({assistantMaxHeight:e,promptHeight:t,canScroll:i})))),content:fa(e,t)})}(e,r,t,i,n),(()=>r))}const va=({title:e,url:t})=>{const i=Y.useRef(null),n=(0,ur.KL)(i,e);return(0,l.zG)(t,v.fold((()=>Y.createElement("span",{className:xa,title:n,ref:i},e)),(t=>Y.createElement(ee.dL,{className:xa,title:n,ref:i,href:t},e))))},xa=re.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),ba=J.UI.Node.make((({state:e})=>Y.createElement(X.F.Fragment,null,e.pipe(m.U((({detectedReferences:e})=>Y.createElement(ee.Zb,{style:ka},Y.createElement("span",{className:Ca},"Detected references"),Y.createElement("ul",{className:wa},e.map((({title:e,iconUrl:t,url:i},n)=>Y.createElement("li",{key:n,className:_a},Y.createElement("img",{src:t,className:Ia,alt:""}),Y.createElement(va,{title:e,url:i})))))))))))),Sa=J.UI.Union.asOption(ba),ka={position:"relative",padding:`${re.ux.rem(te.F2)} ${re.ux.rem(te.qp)}`,gap:0},Ca=re.ux.style({fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),color:ne.XY.Content.Secondary.Default,userSelect:"none"}),wa=re.ux.style({fontSize:re.ux.rem(te.qp),lineHeight:re.ux.rem(te.mh+te.yC),color:ne.XY.Content.Primary.Default,margin:0,padding:0}),_a=re.ux.style({height:re.ux.rem(te.sD),display:"flex",alignItems:"center",borderRadius:re.ux.rem(ft.xB)}),Ia=re.ux.style({minWidth:re.ux.rem(te.mh),height:re.ux.rem(te.mh),marginRight:re.ux.rem(te.x)});function Ea(e){const t=e.assistant.state.view("detectedReferences");return J.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(m.U(v.getOrElse((0,l.a9)([]))),m.U((e=>({detectedReferences:e}))))}(e),(()=>t))}const Aa="goBtn",Oa="stopBtn",Ra={top:te.x,right:3.5*te.qp,bottom:te.x,left:te.qp},Ta=re.ux.style({display:"flex",position:"relative",alignItems:"flex-start",padding:0,gap:re.ux.rem(te.F2),justifyContent:"space-between"}),Pa=re.ux.style({flexGrow:1,$nest:{"&[data-hasheader='false']":{paddingTop:re.ux.rem(te.F2+te.W9)}}}),Ua=re.ux.style({width:re.ux.percent(100),border:"none"}),Ba={position:"absolute",bottom:re.ux.rem(te.x),right:re.ux.rem(te.qp)},Na=C.Es.buttonOverrideSpecificity(Ba,Oa),Ga=C.Es.buttonOverrideSpecificity(Object.assign(Object.assign({},Ba),{$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:ie.BlueGray30}}}}}),Aa),za=re.ux.joinClasses([Aa,re.ux.style(Ga)]),Fa=re.ux.joinClasses([Oa,re.ux.style(Na)]),ja=J.UI.Node.make((({state:e,view:t,notify:i})=>{const{ref:n,onMount:r}=mt.P.useElWatcher(),s=Y.useMemo((()=>n.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>i({kind:S.ix.Kind.mount,name:S.ec.promptInput,element:e})())))),[n]);return mt.P.useSubscriptionTo(s),Y.createElement(X.F.div,{className:Ta,mount:r},Y.createElement(X.F.div,{className:Pa,"data-hasheader":t("hasHeader")},e.pipe(m.U((({placeholder:e,kind:t,text:n,autofocusToken:r,genAIAvailability:s})=>Y.createElement(ee.b,{text:n,theme:{padding:Ra,maxHeight:18.25,minHeight:2},ariaLabel:"custom prompt",className:Ua,placeholder:"ready"===t?v.toUndefined(e):void 0,fitContentHeight:!0,autofocus:r,onChange:e=>i({kind:S.ix.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:"ready"===t?i({kind:S.ix.Kind.promptFieldKeyPressEnter,text:n}):l.Q1,onKeyUpEscape:i({kind:S.ix.Kind.promptFieldKeyPressEscape}),onFocus:i({kind:S.ix.Kind.promptFieldFocusChange,focused:!0}),onBlur:i({kind:S.ix.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:i({kind:S.ix.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:i({kind:S.ix.Kind.promptFieldKeyPressArrowDown}),disabled:S._4.isUnavailable(s)}))))),e.pipe(m.U((({kind:e,text:t,genAIAvailability:n})=>"waitingForResult"===e?Y.createElement(ee.zx.Tertiary,{className:Fa,onClick:i({kind:S.ix.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},Y.createElement(ee.wN,null)):"ready"===e?Y.createElement(ee.zx.Tertiary,{className:za,onClick:i({kind:S.ix.Kind.promptSubmitButtonClick,text:t}),disabled:""===t.trim()||S._4.isUnavailable(n),name:"promptSend",compact:!0,size:"large"},Y.createElement(ee.kc,null)):null))))}));var Va=i(67434);function Ma(e){const t=e.promptMenu.state.pipe(Va.R(((e,t)=>(0,l.zG)(t,v.fold((()=>e),(()=>e+1)))),0));return J.Z.fromSideEffect((t=>e.notify(t)),$.aj([e.assistant.state,t,e.routing.activeView]).pipe(m.U((([e,t,i])=>{return{kind:(0,l.zG)(S.z_.toStarted(e.session),v.fold((()=>"loading"),(e=>(0,l.zG)(e.inProgressResult,v.fold((()=>"ready"),(()=>"waitingForResult")))))),genAIAvailability:e.genAIAvailability,placeholder:(n=e,(0,l.zG)(n.selectedAction,v.chain((e=>""!==e.args[0].label.trim()?v.some([e.args[0].label]):v.none)),v.alt((()=>(0,l.zG)(n.userPromptAction,v.map((e=>[e.arg.label]))))))),hasHeader:!1,text:e.textBox,autofocusToken:ee.vw.create(`${i}_${(0,l.zG)(S.z_.toStarted(e.session),v.chain((e=>e.inProgressResult)),v.fold((()=>"done"),(()=>"inProgress")))}_${(0,l.zG)(e.selectedAction,v.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuOpen:${t}`)};var n})),N.x()))}const Da=J.UI.Union.asOption(J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Ha},e.content))),(0,l.zG)(De,J.UI.patch("header")((()=>J.UI.Union.make("kind",{default:Fe,withSelectionContext:Fe})))))),Ha=re.ux.style({padding:`${re.ux.rem(te.F2)} ${re.ux.rem(te.qp)}`});function La(e,t){const i=t.pipe(m.U((0,l.ls)(v.map(a.DY(S.aU.ListableActionInput.ordByGroup)),v.map(Qe))));return J.Z.composeOption(Ye(e,i.pipe(d.oA)),(()=>i))}const Ka=J.UI.List.make(o.bw,_e),$a=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Wa},e.customPromptGo,Y.createElement("div",{className:qa},e.searchResults)))),Za=J.UI.Knot.make($a,{searchResults:Ka,customPromptGo:_e}),Wa=re.ux.style({background:"transparent",padding:re.ux.rem(te.qp),display:"flex",flexDirection:"column",alignItems:"flex-start",gap:re.ux.rem(te.x)}),qa=re.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:re.ux.rem(te.x)});function Ya(e,t){return J.Z.composeKnot({searchResults:Ae(e,t.pipe(m.U(v.map(a.UI(R.BackendAction.make)))),"standard"),customPromptGo:Ie(e,W.of({kind:"go"}),"standard")})}const Qa=J.UI.Union.make("kind",{searchResults:Za,actionsStore:Da}),Xa=J.UI.Knot.make(J.UI.Grid.make((({slots:e,view:t,notify:i})=>Y.createElement(X.F.div,{className:el,style:{maxHeight:t("maxHeight")}},Y.createElement(ee.zx.Tertiary,{compact:!0,className:tl,onClick:i({kind:S.ix.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small"},Y.createElement(ht.JO.Arrow,{direction:ht.n4.down,className:rl})),Y.createElement("div",{ref:e=>e&&i({kind:S.ix.Kind.mount,name:S.ec.promptMenuContent,element:e})(),onKeyDown:e=>{"ArrowDown"===e.key?i({kind:S.ix.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&i({kind:S.ix.Kind.promptMenuKeyPressArrowUp})()}},e.content)))),{content:Qa}),Ja=J.UI.Union.asOption(Xa),el=re.ux.style({overflowY:"scroll",borderBottom:`0.5px solid ${ne.XY.Boundaries.Secondary.Default}`}),tl=re.ux.style({position:"absolute",top:re.ux.rem(te.x),right:re.ux.rem(te.x),zIndex:1,$nest:{"&:not(:hover)":{backgroundColor:re.ux.important(ie.White)}}}),il="arrowIcon",nl=C.Es.buttonOverrideSpecificity(C.Es.iconSizeRems(1.5),il),rl=re.ux.joinClasses([il,re.ux.style(nl)]);function sl(e,t){return J.Z.composeOption(J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),$.aj([t.pipe(d.oA),e.assistant.state.view("textBox")]).pipe((0,l.ls)(g.h((([e,t])=>!We.isSearchResults(e)||t.trim().length>0)),m.U(dn.li)))),content:J.Z.composeUnion({searchResults:Ya(e,t.pipe(m.U((0,l.ls)(v.filter(We.isSearchResults),v.chain((e=>a.hX(e.filterPredicate)(e.actions))))))),actionsStore:La(e,t.pipe(m.U((0,l.ls)(v.filter(We.isActionsStore),v.chain((e=>a.hX(e.filterPredicate)(e.actions)))))))},(()=>t.pipe(d.oA)))}),(()=>t))}const ol=J.UI.Grid.make((({slots:e,view:t,notify:i})=>{const{onMount:n,rect:r}=mt.P.useRectWatcher(),s=Y.useMemo((()=>r.pipe(y.b((e=>i({kind:"promptHeightChange",height:(0,l.zG)(e,v.map((e=>e.height)))})())))),[r]);mt.P.useSubscriptionTo(s);const o=Y.useRef(null);return Y.createElement(X.F.div,{className:cl},Y.createElement(X.F.div,{mount:o,className:dl,"data-expanded":t("menuExpanded"),onFocus:()=>{var e;return i({kind:S.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.current)||void 0===e?void 0:e.contains((0,C.vY)(document)))||!1})()},onBlur:()=>{var e;return i({kind:S.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=o.current)||void 0===e?void 0:e.contains((0,C.vY)(document)))||!1})()}},e.promptMenu,Y.createElement("div",{ref:n},e.promptField)),$.aj([r,t("menuExpanded")]).pipe(m.U((([e,t])=>(0,l.zG)(e,v.filter((()=>t)),v.fold(l.gn,(e=>Y.createElement("div",{className:ml,style:{height:e.height}}))))))))})),al=J.UI.Knot.make(ol,{promptField:ja,promptHeader:J.UI.Node.empty,promptMenu:Ja}),ll=J.UI.Union.asOption(al),cl=re.ux.style({position:"relative"}),ul=e=>re.ux.color(ie.BlueGray40).toRGBA().fade(e).toString(),dl=re.ux.style({background:"white",boxShadow:`0px 0px 0px 0.5px ${ie.BlueGray40}, 0px 0px 2px 0.5px ${ul(.5)}, 0px 1px 6px 0.5px ${ul(.25)}`,borderRadius:re.ux.rem(ft.xB+ft.fe),$nest:{"&[data-expanded='true']":{position:"absolute",bottom:0,width:"100%"}}}),ml=re.ux.style({opacity:0,pointerEvents:"none"});var pl=i(598);function hl(e,t,i){const n=$.aj([e.routing.activeView,e.assistant.state.view("selectedAction")]).pipe(m.U((([e,t])=>"loadingError"===e||"skill"===e||(0,l.zG)(t,v.filter((e=>"followUpQuestion"===e.kind&&S.Xy.match({radio:()=>!0,string:()=>!1})(e.args[0]))),v.isSome)?v.none:v.some(!0))));return J.Z.composeOption(function(e,t,i){const n=$.aj([e.promptMenu.state,t]).pipe(m.U((([e,t])=>(0,l.zG)(qe.Y(v.Applicative)({maxHeight:t,menu:e}),v.map((({menu:e,maxHeight:t})=>Object.assign(Object.assign({},e),{maxHeight:t})))))),p.shareReplay({bufferSize:1,refCount:!0}));return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>{switch(t.kind){case"promptHeightChange":return i.set(t.height);case S.ix.Kind.promptFieldAndMenuFocusChange:return e.notify(t);default:(0,j.L0)(t)}}),n.pipe(m.U((e=>({menuExpanded:v.isSome(e)}))))),promptField:Ma(e),promptHeader:()=>W.of(null),promptMenu:sl(e,n)})}(e,n.pipe(d.oA,pl.c(t)),i),(()=>n))}const gl=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:xl},e.content,e.detectedReferences,e.prompt))),fl=J.UI.Knot.make(gl,{content:ha,detectedReferences:Sa,prompt:ll}),yl=te.x,vl=te.x,xl=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(vl)});var bl;function Sl(e,t=bl.empty){const i=b.h.create(v.none),n=b.h.create(v.none);return J.Z.composeKnot({content:ya(e,i,t.assistantMaxHeight,n),detectedReferences:Ea(e),prompt:hl(e,i,n)})}!function(e){e.empty={assistantMaxHeight:b.h.create(v.none)}}(bl||(bl={}));const kl=(e,t)=>(0,Q.Sh)(wl,e===t&&_l),Cl=re.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:re.ux.rem(te.mh),paddingRight:re.ux.rem(te.mh)}),wl=re.ux.style({width:re.ux.rem(5),height:re.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:re.ux.rem(te.x),borderRadius:re.ux.rem(ft.HP),fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:ne.XY.Surface.Secondary.Default}}}),_l=re.ux.style({backgroundColor:ie.Blue10,$nest:{"&:hover":{backgroundColor:ie.Blue10}}}),Il=re.ux.style(Object.assign({},C.Es.iconSizeRems(1.5))),El="submitBtn",Al={padding:re.ux.rem(te.mh),gap:re.ux.rem(te.mh)},Ol={color:ne.XY.Content.Primary.Default,fontWeight:700,fontSize:re.ux.rem(1.25),lineHeight:re.ux.rem(1.5),margin:0},Rl={border:`${re.ux.px(1)} solid ${ie.NeutralGray20}`,borderRadius:re.ux.rem(ft.xB),padding:`${re.ux.rem(te.x+te.yC)} ${re.ux.rem(te.x)}`,height:re.ux.rem(8)},Tl={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${re.ux.rem(te.W9)} ${re.ux.rem(te.x)} 0 0`,minWidth:re.ux.rem(1),minHeight:re.ux.rem(1)},"& label":{color:ne.XY.Content.Primary.Default,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)}}},Pl=Object.assign({width:re.ux.percent(100)},C.Es.buttonOverrideSpecificity({fontSize:re.ux.rem(.875)},El)),Ul={display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)},Bl=Al,Nl=re.ux.style(Ol),Gl=re.ux.style(Rl),zl=re.ux.style(Tl),Fl=(re.ux.style({fontWeight:700}),re.ux.joinClasses([El,re.ux.style(Pl)])),jl=re.ux.style(Ul),Vl=(0,Q.xb)((({selectedScore:e,onSelectScore:t})=>Y.createElement("div",{className:Cl},Y.createElement("div",Object.assign({},kl(S.x2.Mood.dissatisfied,e),{onClick:()=>t(S.x2.Mood.dissatisfied)}),Y.createElement(ee.XR,{className:Il}),"I dislike it"),Y.createElement("div",Object.assign({},kl(S.x2.Mood.ok,e),{onClick:()=>t(S.x2.Mood.ok)}),Y.createElement(ee.R6,{className:Il}),"It′s OK"),Y.createElement("div",Object.assign({},kl(S.x2.Mood.satisfied,e),{onClick:()=>t(S.x2.Mood.satisfied)}),Y.createElement(ee.OJ,{className:Il}),"I like it!")))),Ml=(0,Q.xb)(ee.b),Dl=(0,Q.xb)(ee.Zb),Hl=J.UI.Node.make((({state:e,view:t,notify:i})=>{const n="domainCheckbox"+lr.alphanumeric(5);return Y.createElement(Dl,{style:Bl},Y.createElement("h1",{className:Nl},"How do you like Grammarly?"),Y.createElement(Vl,{selectedScore:t("formData").pipe(m.U((e=>e.mood))),onSelectScore:e=>i({kind:S.ix.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),Y.createElement(Ml,{ariaLabel:"tell us why",className:Gl,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(m.U((({message:e})=>null!=e?e:""))),onChange:e=>i({kind:S.ix.Kind.feedbackFormChange,feedbackData:{message:e}})()}),e.pipe(m.U((({formData:e,domain:t,source:r})=>Y.createElement("div",{className:jl},(0,l.zG)(t,v.fold(l.gn,(t=>Y.createElement("div",{className:zl},Y.createElement("input",{type:"checkbox",id:n,checked:void 0!==e.domain,onChange:i({kind:S.ix.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),Y.createElement("label",{htmlFor:n},"Include the domain ",Y.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,l.zG)(v.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:r}):null),v.fold((()=>Y.createElement(ee.zx.Primary,{disabled:!0,className:Fl,onClick:l.Q1},"Submit")),(e=>Y.createElement(ee.zx.Primary,{disabled:!1,className:Fl,onClick:i({kind:S.ix.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))}));var Ll;function Kl(e,t=Ll.empty){return J.Z.fromSideEffect((t=>e.notify(t)),e.feedbackForm.stagingFeedbackFormData.view((e=>{var i;return{formData:e,domain:t.showDomainCheckbox,source:null!==(i=null==e?void 0:e.source)&&void 0!==i?i:S.x2.Source.resultCard}})))}!function(e){e.empty={showDomainCheckbox:v.none}}(Ll||(Ll={}));const $l=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(X.F.div,{className:Wl,"data-id":e("id")},e("kind").pipe(m.U((e=>{switch(e){case S.Cl.Kind.feedbackSubmitted:return Y.createElement(Y.Fragment,null,Y.createElement(ee.j4,{className:ql}),Y.createElement("div",null,"Thanks for the feedback!"));case S.Cl.Kind.voiceTagRemoved:return Y.createElement(Y.Fragment,null,Y.createElement(ee.j4,{className:ql}),Y.createElement("div",null,"Removed"));default:return(0,j.L0)(e)}}))),e("id").pipe(m.U((e=>Y.createElement(ee.xx,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e}),size:"small"}))))))),Zl=re.ux.keyframes({from:{transform:`translateY(${re.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),Wl=re.ux.style({background:ne.S5.Surface.Primary.Default,color:ne.S5.Content.Primary.Default,borderRadius:re.ux.rem(ft.xB+ft.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${re.ux.rem(te.x)} ${re.ux.rem(te.qp)}`,gap:re.ux.rem(te.qp),fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),animation:`${Zl} 0.1s ease-in`}),ql=re.ux.style(Object.assign({},C.Es.iconSizeRems(1.5)));const Yl=J.UI.List.make(o.bw,$l),Ql=J.UI.Grid.make((({slots:e,view:t})=>Y.createElement(X.F.div,{className:t("contentOverflowUnderToolbar").pipe(m.U((0,G.RN)(tc,ec)))},e.content))),Xl=J.UI.Knot.make(Ql,{content:Yl}),Jl={position:"absolute",top:0,right:re.ux.rem(te.x),display:"flex",flexDirection:"column",gap:re.ux.rem(te.x),zIndex:1e3,transition:"top 0.1s ease-in"},ec=re.ux.style(Jl),tc=re.ux.style(Jl,{top:re.ux.rem(te.F2)});function ic(e){return J.Z.composeKnot({root:()=>e.assistant.state.view((({contentOverflowUnderToolbar:e})=>({contentOverflowUnderToolbar:e}))),content:(t=e.notifications,J.Z.composeList(o.Ot,(()=>t.state.view(o.GY)),(e=>function(e,t){return J.Z.fromSideEffect((e=>{if("dismissNotification"===e.kind)return t.dismiss(e.id);(0,j.L0)(e.kind)}),e)}(e,t))))});var t}const nc=({kind:e,label:t,description:i,iconUrl:n,isUnselectable:r,onToggle:s})=>Y.createElement(cr.u,{title:i},Y.createElement("button",{disabled:"disabled"===e,className:rc,"data-kind":e,"data-unselectable":r,onClick:(0,C.m)((()=>{"disabled"!==e&&s("selected"!==e&&("unselected"===e||(0,j.L0)(e)))}))},n?Y.createElement("img",{src:n,style:{width:20,height:20}}):null,Y.createElement("span",null,t),r&&"selected"===e?Y.createElement(ee.cv,{className:sc}):null)),rc=re.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:re.ux.rem(te.x),padding:`${re.ux.rem(te.F2)} ${re.ux.rem(.625)} ${re.ux.rem(te.F2)} ${re.ux.rem(te.x)}`,background:ne.XY.Surface.Primary.Default,border:`${re.ux.px(1)} solid transparent`,borderRadius:re.ux.rem(1.875),fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${re.ux.px(1)} solid ${ie.BlueGray5}`,color:ne.XY.Content.Primary.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${re.ux.px(1)} solid ${ie.BlueGray5}`,color:ie.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${re.ux.px(2)} solid ${C.BO.BrandGreen60}`,padding:`${re.ux.rem(.1875)} ${re.ux.rem(.5625)} ${re.ux.rem(.1875)} ${re.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),sc=re.ux.style(Object.assign(Object.assign({position:"absolute",top:re.ux.rem(-(te.F2+te.W9)),right:re.ux.rem(-(te.F2+te.W9)),boxSizing:"content-box"},C.Es.iconSizeRems(.75)),{border:`${re.ux.rem(.125)} solid white`,borderRadius:"50%",background:C.BO.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),oc=({chips:e,className:t,onToggle:i})=>Y.createElement(X.F.div,Object.assign({},(0,Q.Sh)(ac,t)),e.pipe(m.U(o.UI((e=>Y.createElement(nc,Object.assign({},e,{onToggle:t=>i(e,t),key:e.label}))))))),ac=re.ux.style({display:"flex",flexWrap:"wrap",gap:re.ux.rem(te.F2),$nest:{div:{marginTop:re.ux.rem(te.F2)}}}),lc={margin:0,padding:re.ux.rem(te.mh),gap:re.ux.rem(te.mh)},cc={color:ne.XY.Content.Primary.Default,fontWeight:700,fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),margin:0},uc={color:ne.XY.Content.Secondary.Default,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)},dc={marginTop:re.ux.rem(te.x)},mc={color:ie.BlueGray60,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)},pc={display:"flex",justifyContent:"flex-end",gap:re.ux.rem(te.x)},hc={fontSize:re.ux.important(re.ux.rem(.875))},gc={marginTop:re.ux.rem(te.x)},fc={marginTop:re.ux.rem(te.x)},yc={display:"flex",alignItems:"center",gap:re.ux.rem(te.x)},vc={width:re.ux.rem(1.5),height:re.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},xc=lc,bc=re.ux.style(cc),Sc=re.ux.style(dc),kc=re.ux.style(uc),Cc=re.ux.style(mc),wc=re.ux.style(pc),_c=re.ux.style(hc),Ic=re.ux.style(hc),Ec=re.ux.style(gc),Ac=re.ux.style(fc),Oc=re.ux.style(yc),Rc=re.ux.style(vc),Tc=J.UI.Node.make((({view:e,state:t,notify:i})=>Y.createElement(ee.Zb,{style:xc},Y.createElement("section",null,Y.createElement("h2",{className:bc},"Formality"),Y.createElement(oc,{className:Sc,chips:e("styles").pipe(m.U(o.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>i({kind:S.ix.Kind.styleToggleClick,id:e.id})()})),Y.createElement("section",null,Y.createElement("h2",{className:bc},"Tone"),Y.createElement(X.F.div,{className:kc},"Select up to"," ",e("maxSelectableTones").pipe(m.U((e=>(0,C.xs)(e)?(0,C.mA)(e):`${e}`)))),Y.createElement(oc,{className:Sc,chips:e("tones").pipe(m.U(o.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>i({kind:S.ix.Kind.toneToggleClick,selected:t,id:e.id})()})),Y.createElement(X.F.Fragment,null,t.pipe(m.U((e=>(0,l.zG)(e.roles,a.c2,v.fold(l.gn,(t=>Y.createElement("section",null,Y.createElement("h2",{className:bc},"Your profession"),Y.createElement(ee.pY,{className:Ec,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>i({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>i({kind:S.ix.Kind.roleTypeaheadSelectionChange,role:v.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0}))))))))),Y.createElement("section",null,Y.createElement("h2",{className:bc},"I write in"),Y.createElement(X.F.Fragment,null,t.pipe(m.U((({dialects:e,selectedDialect:t})=>Y.createElement(ee.Ph,{className:Ac,options:e.filter((e=>!S.LA.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>i({kind:S.ix.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>Y.createElement("div",{className:Oc},Y.createElement("div",{className:Rc},Y.createElement("img",{src:e.iconUrl,style:{width:re.ux.rem(1),height:re.ux.rem(1)}})),e.label)})))))),Y.createElement(X.F.Fragment,null,e("description").pipe(m.U((e=>""!==e.trim()?Y.createElement("div",{className:Cc},e):null)))),Y.createElement(X.F.div,{className:wc},Y.createElement(ee.zx.Tertiary,{className:Ic,onClick:i({kind:S.ix.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(m.U((e=>Y.createElement(ee.zx.Primary,{className:_c,onClick:i({kind:S.ix.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))));function Pc(e){const t=b.h.create("");return J.Z.fromSideEffect((i=>{"updateRoleTypeaheadText"===i.kind?(t.set(i.text),""===i.text&&e.notify({kind:S.ix.Kind.roleTypeaheadSelectionChange,role:v.none})):(i.kind===S.ix.Kind.roleTypeaheadSelectionChange&&t.set((0,l.zG)(i.role,v.fold((()=>""),(e=>e.label)))),e.notify(i))}),b.h.combine(e.assistant.state.view("session"),e.voiceProfile.state.view("stagingVoiceProfile"),t,((e,t,i)=>(0,l.zG)(qe.Y(v.Applicative)({voiceProfile:(0,l.zG)(S.z_.toStarted(e),v.map((e=>e.voiceProfile)),v.chain(S.LA.toLegacyVoiceProfile)),stagingVoiceProfile:t}),v.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:S.LA.Dialect.all(),selectedDialect:S.LA.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,l.zG)(t.styles,o.Ew((t=>t.id===e.selectedStyle)),(n=>({styles:(0,l.zG)(t.styles,o.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,l.zG)(n,v.fold((()=>[]),(t=>(0,l.zG)(t.tones,o.UI((i=>Object.assign(Object.assign({},i),{kind:(0,l.zG)(v.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),v.getOrElse((()=>new Set)),(e=>e.has(i.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,l.zG)(n,v.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!S.LA.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate.",roleTypeaheadText:(0,l.zG)(e.selectedRole,v.filter((()=>""===i)),v.chain((e=>v.fromNullable(t.roles.find((t=>t.id===e))))),v.fold((()=>i),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>S.LA.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||S.LA.Dialect.american})))))))))}const Uc=Y.forwardRef((function({name:e,active:t,onClick:i},n){return Y.createElement("button",{role:"button",tabIndex:0,"aria-label":e,"aria-pressed":t,"data-active":t,onClick:i,ref:n,className:Bc},e)})),Bc=re.ux.style({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",height:re.ux.rem(2),borderRadius:re.ux.rem(ft.xB),border:`${re.ux.rem(te.yC)} solid transparent`,padding:`${re.ux.rem(te.yC+te.F2)} ${re.ux.rem(te.x)}`,backgroundColor:C.BO.Green0,color:C.BO.Green90,lineHeight:re.ux.rem(1.3125),fontSize:re.ux.rem(.875),$nest:{"&:hover":{backgroundColor:re.ux.color(C.BO.Green10).mix(re.ux.color(C.BO.BlueGray5)).toRGBA().toString(),color:C.BO.Green80},'&[data-active="true"]':{outline:`${re.ux.rem(te.yC)} solid ${C.BO.Green80}`}}}),Nc=({title:e,titleId:t,desc:i,descId:n,...r})=>Y.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...r},i?Y.createElement("desc",{id:n},i):null,e?Y.createElement("title",{id:t},e):null,Y.createElement("path",{d:"M18.5 11.25a.958.958 0 0 1-.064.34l-2.248 4.267a1.009 1.009 0 0 1-.938.643H9.5c-.554 0-1-.446-1-1V10a1 1 0 0 1 .294-.706l4.586-4.587.432.432a.664.664 0 0 1 .188.433l-.016.175-.654 3.151a.5.5 0 0 0 .49.602H18c.274 0 .5.226.5.5v1.25ZM6 9.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h1Z",stroke:"#646B81",strokeLinejoin:"round"})),Gc=({title:e,titleId:t,desc:i,descId:n,...r})=>Y.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...r},i?Y.createElement("desc",{id:n},i):null,e?Y.createElement("title",{id:t},e):null,Y.createElement("path",{d:"M5 12.75c0-.114.023-.233.065-.34l2.247-4.267.01-.017.007-.017c.155-.357.51-.609.921-.609H14c.554 0 1 .446 1 1V14a1 1 0 0 1-.294.706l-4.586 4.587-.432-.432a.664.664 0 0 1-.188-.433l.016-.175.654-3.151.124-.602H5.5A.503.503 0 0 1 5 14v-1.25Zm12.5 1.75a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-1Z",stroke:"#646B81"})),zc=({onKeepClick:e,onRemoveClick:t})=>Y.createElement("div",{className:Fc},Y.createElement("h1",{className:jc},"Does this sound like you?"),Y.createElement("div",{className:Vc},Y.createElement(ee.zx.Primary,{onClick:e,style:Mc},Y.createElement(Nc,null),"Yes, keep it"),Y.createElement(ee.zx.Primary,{onClick:t,style:Mc},Y.createElement(Gc,null),"No, remove it"))),Fc=re.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start"}),jc=re.ux.style({fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.375),fontWeight:700,margin:`0 0 ${re.ux.rem(te.mh)} 0`}),Vc=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x)}),Mc={base:{gap:re.ux.rem(te.F2),padding:`0 ${re.ux.rem(te.x)} 0 ${re.ux.rem(te.F2)}`,color:C.BO.TextBaseDefault,backgroundColor:ne.XY.Surface.Primary.Default},hovered:{color:C.BO.TextBaseDefault,backgroundColor:C.BO.BlueGray5},active:{color:C.BO.TextBaseDefault,backgroundColor:C.BO.BlueGray5}};var Dc=i(17579);const Hc={editBtn:"editBtn",cancelBtn:"cancelBtn",saveBtn:"saveBtn"},Lc={base:{backgroundColor:C.BO.BlueGray0}},Kc={gap:0,backgroundImage:"url(https://assets.grammarly.com/cheetah/v1/voice-profile/cheetah-my-voice-bg.svg)",backgroundPosition:"right",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",$nest:{[`.${Hc.editBtn}`]:{opacity:0,pointerEvents:"none",$nest:{"&:focus":{opacity:1,pointerEvents:"auto"}}},[`&:hover .${Hc.editBtn}, &:focus .${Hc.editBtn}`]:{opacity:1,pointerEvents:"auto"}}},$c=e=>re.ux.style({display:"flex",justifyContent:"space-between",marginBottom:e?re.ux.rem(te.x):re.ux.rem(te.yC+te.F2)}),Zc=re.ux.style({margin:0,fontSize:re.ux.rem(1.25),lineHeight:re.ux.rem(1.5),fontWeight:700}),Wc=re.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}),qc=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.x)}),Yc=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.F2)}),Qc=re.ux.style({color:C.BO.TextBaseSubduedColor,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),margin:0}),Xc=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x)}),Jc=re.ux.style({width:re.ux.rem(1.5),height:re.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center",$nest:{"& img":{width:re.ux.rem(1),height:re.ux.rem(1)}}}),eu=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.F2)}),tu=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.F2),height:re.ux.rem(1.5),color:C.BO.TextBaseSubduedColor,fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125),fontWeight:500}),iu=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x)});function nu({label:e,enabled:t,onChange:i}){return Y.createElement("div",{className:ru},Y.createElement("input",{type:"checkbox",id:"voice-checkbox",checked:t,onChange:i}),Y.createElement("label",{htmlFor:"voice-checkbox"},e))}const ru=re.ux.style({display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${re.ux.rem(te.W9)} ${re.ux.rem(te.x)} 0 0`,minWidth:re.ux.rem(1),minHeight:re.ux.rem(1),accentColor:ie.Green80,cursor:"pointer"},"& label":{color:ne.XY.Content.Primary.Default,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),cursor:"pointer"}}}),su=({profile:e,activeProfileName:t,activeTagId:i,onCloseButtonClick:n,onKeepClick:r,onRemoveClick:s,onVoiceTagClick:o})=>Y.createElement(ee.E2,{id:ee.OK.Id.create(e.name),isActive:e.name===v.toNullable(t),className:ou},e.summary,Y.createElement("div",{className:lu},e.sections.map((t=>Y.createElement("div",{key:t.name},t.name,Y.createElement("div",{className:cu},0===t.tags.length?Y.createElement("div",{className:au},"Detected qualities will appear here"):t.tags.map((a=>Y.createElement(ee.it,{key:a.name,active:(0,l.zG)(i,v.fold(l.jv,(i=>i===S.bm.createId({tagName:a.name,sectionName:t.name,profileName:e.name})))),onCloseButtonClick:n,body:Y.createElement(zc,{onKeepClick:r,onRemoveClick:()=>s(a.name,e.name,t.name)})},Y.createElement(Uc,{name:a.name,active:(0,l.zG)(i,v.fold(l.jv,(i=>i===S.bm.createId({tagName:a.name,sectionName:t.name,profileName:e.name})))),onClick:()=>o(a.name,e.name,t.name)})))))))))),ou=re.ux.style({fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125),display:"flex",flexDirection:"column",gap:re.ux.rem(te.qp),paddingTop:re.ux.rem(te.x)}),au=re.ux.style({padding:`0 ${re.ux.rem(te.x)}`,background:C.BO.BlueGray0,color:C.BO.TextBaseSubduedColor,borderRadius:re.ux.rem(ft.xB),height:re.ux.rem(2),fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125),display:"flex",justifyContent:"center",alignItems:"center"}),lu=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.qp)}),cu=re.ux.style({marginTop:re.ux.rem(te.x),display:"flex",flexWrap:"wrap",gap:re.ux.rem(te.F2)}),uu=(0,Q.xb)((({onEditButtonClick:e,onSaveButtonClick:t,onCancelButtonClick:i,onDialectDropdownChange:n,onRoleDropdownChange:r,userName:s,isEditing:o,selectedRole:a,roles:c,dialects:u,selectedDialect:d})=>Y.createElement(ee.Zb,{style:Kc},Y.createElement("div",{className:$c(o)},Y.createElement("h1",{className:Zc},s),o?null:Y.createElement(ee.zx.Secondary,{onClick:e,className:Hc.editBtn,style:Lc,size:"small"},"Edit")),o?Y.createElement("div",{className:Wc},Y.createElement("div",{className:qc},0!==c.length&&Y.createElement("div",{className:Yc},Y.createElement("h2",{className:Qc},"My role"),Y.createElement(ee.Ph,{placeholder:"Select a role...",options:c,selection:v.toUndefined(a),onSelectionChange:r,label:e=>e.id,renderOption:e=>e.id})),Y.createElement("div",{className:Yc},Y.createElement("h2",{className:Qc},"I write in"),Y.createElement(ee.Ph,{options:u,selection:d,onSelectionChange:n,label:e=>e.label,renderOption:e=>Y.createElement("div",{className:Xc},Y.createElement("div",{className:Jc},Y.createElement("img",{src:e.iconUrl,alt:""})),e.label)}))),Y.createElement("div",{className:iu},Y.createElement(ee.zx.Tertiary,{onClick:i},"Cancel"),Y.createElement(ee.zx.Primary,{onClick:t},"Save"))):Y.createElement("div",{className:eu},(0,l.zG)(a,v.fold(l.gn,(e=>Y.createElement("div",{className:tu},Y.createElement(Dc.N,null),Y.createElement("span",null,e.label))))),Y.createElement("div",{className:tu},Y.createElement("div",{className:Jc},Y.createElement("img",{src:d.iconUrl,alt:""})),Y.createElement("span",null,d.label)))))),du=J.UI.Node.make((({view:e,state:t,notify:i})=>Y.createElement("div",{className:mu},Y.createElement(uu,{onEditButtonClick:i({kind:S.ix.Kind.voiceSelectionsEditButtonClick}),onDialectDropdownChange:e=>i({kind:S.ix.Kind.voiceDialectDropdownSelectionChange,dialect:e})(),onRoleDropdownChange:e=>i({kind:S.ix.Kind.voiceRoleDropdownSelectionChange,role:e})(),onSaveButtonClick:i({kind:S.ix.Kind.voiceSelectionsSaveButtonClick}),onCancelButtonClick:i({kind:S.ix.Kind.voiceSelectionsCancelButtonClick}),userName:e("userName"),isEditing:e("isEditing"),selectedRole:e("selectedRole"),selectedDialect:e("selectedDialect"),roles:e("roles"),dialects:e("dialects")}),Y.createElement(ee.Zb,{style:pu},Y.createElement(X.F.div,null,t.pipe(m.U((e=>Y.createElement(Y.Fragment,null,Y.createElement("div",{className:hu},Y.createElement("div",null,Y.createElement("h1",{className:gu},e.title),Y.createElement("h2",{className:fu},e.subTitle)),Y.createElement(ee.mQ,{key:"Tabs",tabs:e.profiles.map((e=>({id:ee.OK.Id.create(e.name),label:e.name}))),activeTabId:ee.OK.Id.create(v.toNullable(e.activeProfileName)||""),onActiveTabChange:e=>i({kind:S.ix.Kind.voiceProfileTabChange,profileName:e})()})),e.profiles.map((t=>Y.createElement(su,{key:t.name,profile:t,activeProfileName:e.activeProfileName,activeTagId:e.activeTagId,onCloseButtonClick:i({kind:S.ix.Kind.voiceTagPopoverCloseButtonClick}),onKeepClick:i({kind:S.ix.Kind.voiceTagPopoverKeepButtonClick}),onRemoveClick:(e,t,n)=>i({kind:S.ix.Kind.voiceTagPopoverRemoveButtonClick,tagName:e,profileName:t,sectionName:n})(),onVoiceTagClick:(e,t,n)=>i({kind:S.ix.Kind.voiceTagClick,tagName:e,profileName:t,sectionName:n})()})))))))),Y.createElement(ee.Z0,null),Y.createElement(X.F.Fragment,null,t.pipe(m.U((({isEnabledByDefault:e,isEnabledByDefaultLabel:t})=>Y.createElement(nu,{enabled:e,label:t,onChange:i({kind:S.ix.Kind.applyVoiceToWritingCheckboxChange,checked:!e})}))))))))),mu=re.ux.style({display:"flex",flexDirection:"column",gap:re.ux.rem(te.x),maxHeight:re.ux.rem(35),overflowY:"scroll"}),pu={gap:re.ux.rem(te.mh)},hu=re.ux.style({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),gu=re.ux.style({fontSize:re.ux.rem(.875),lineHeight:re.ux.rem(1.3125),fontWeight:700,margin:0}),fu=re.ux.style({color:C.BO.TextBaseSubduedColor,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),margin:0});function yu(e){return J.Z.fromSideEffect((t=>e.notify(t)),b.h.combine(e.assistant.state.view("session"),e.voiceProfile.state.view("stagingNewVoiceProfile"),((e,t)=>(0,l.zG)(qe.Y(v.Applicative)({sessionVoiceProfile:(0,l.zG)(S.z_.toStarted(e),v.map((e=>e.voiceProfile)),v.chain(S.LA.toNewVoiceProfile)),stagingVoiceProfile:t}),v.fold((()=>({userName:"",title:"",subTitle:"",roles:[],dialects:S.LA.Dialect.all(),selectedDialect:S.LA.Dialect.american,isEnabledByDefault:!0,isEnabledByDefaultLabel:"",profiles:[],activeProfileName:v.none,activeTagId:v.none,isEditing:!1,selectedRole:v.none})),(({sessionVoiceProfile:e,stagingVoiceProfile:t})=>({userName:e.userName,title:e.title,subTitle:e.subTitle,isEnabledByDefault:t.isEnabledByDefault,isEnabledByDefaultLabel:e.isEnabledByDefaultLabel,profiles:t.profiles,roles:(0,l.zG)(vu(t,e),v.fold((()=>e.roles),(t=>e.roles.filter((e=>e.id!==t.id))))),dialects:(0,l.zG)(xu(t,e),(t=>e.dialects.filter((e=>e.id!==t.id)))),selectedRole:vu(t,e),selectedDialect:xu(t,e),activeProfileName:t.activeProfileName,activeTagId:t.activeTagId,isEditing:v.isSome(t.stagingSelections)})))))))}function vu(e,t){return(0,l.zG)(e.stagingSelections,v.chain((e=>e.selectedRole)),v.alt((()=>e.selectedRole)),v.chain((e=>v.fromNullable(t.roles.find((t=>S.LA.Role.Id.eq.equals(t.id,e)))))))}function xu(e,t){return(0,l.zG)(e.stagingSelections,v.fold((()=>e.selectedDialect),(e=>e.selectedDialect)),(e=>t.dialects.find((t=>S.LA.Dialect.Id.eq.equals(t.id,e)))||S.LA.Dialect.american))}const bu=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Cu},e.notifications,e.content))),Su=J.UI.Union.make("kind",{chat:fl,legacyVoiceProfile:Tc,newVoiceProfile:du,feedbackForm:Hl}),ku=J.UI.Knot.make(bu,{content:Su,notifications:Xl}),Cu=re.ux.style({position:"relative",padding:re.ux.rem(te.x),paddingTop:0});var wu;function _u(e,t=wu.empty){return J.Z.composeKnot({content:Iu(e,t),notifications:ic(e)})}function Iu(e,t=wu.empty){return J.Z.composeUnion({chat:Sl(e,t.chatFlowOptions),legacyVoiceProfile:Pc(e),newVoiceProfile:yu(e),feedbackForm:Kl(e,t.feedbackFormFlowOptions)},(()=>e.routing.activeView.view((e=>({kind:"voiceProfile"===e?"newVoiceProfile":"legacyVoiceProfile"===e?"legacyVoiceProfile":"feedbackForm"===e?e:"chat"})))))}!function(e){e.empty={chatFlowOptions:bl.empty,feedbackFormFlowOptions:Ll.empty}}(wu||(wu={}));var Eu=i(13444);const Au=J.UI.Node.make((({state:e,notify:t})=>{const{ref:i,onMount:n}=mt.P.useElWatcher(),{ref:r,onMount:s}=mt.P.useElWatcher(),o=Y.useMemo((()=>i.pipe(d.oA,Z.w((e=>et.R(e,"mouseenter").pipe(pl.c(W.of(null).pipe(Eu.g(500),Je.R(et.R(e,"mouseleave"))))))),y.b(t({kind:S.ix.Kind.creditsInfoHover})))),[i]);mt.P.useSubscriptionTo(o);const a=Y.useMemo((()=>r.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>t({kind:S.ix.Kind.mount,name:S.ec.creditsInfoButton,element:e})())))),[r]);return mt.P.useSubscriptionTo(a),Y.createElement(X.F.Fragment,null,e.pipe(m.U((({user:e,genAIAvailability:i})=>{const r=S._4.isActive(i)?function(e){const t=`${Number(e.promptsRemaining).toLocaleString()}/${Number(e.promptsAllocated).toLocaleString()} prompts left. `,i=S._4.Active.daysUntilRefillDate(e.refillDate),n=S._4.Active.hoursUntilRefillDate(e.refillDate);return i>0?t+`Next refill in ${i} ${lr.pluralize(i,"day","days")}.`:n>0?t+`Next refill in ${n} ${lr.pluralize(n,"hour","hours")}.`:t+"Next refill in less than an hour."}(i):e.isPremium?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium.",o=S._4.isActive(i)?`${Number(i.promptsRemaining).toLocaleString()} ${lr.pluralize(i.promptsRemaining,"prompt","prompts")}`:e.isPremium?"0 prompts":Y.createElement(Y.Fragment,null,"0 prompts. ",Y.createElement("span",{className:Tu},"Upgrade"));return e.isPremium&&S._4.isActive(i)?Y.createElement(Y.Fragment,null,S._4.isActiveUnlimited(i)?null:Y.createElement(cr.u,{title:r},Y.createElement("div",{ref:n,className:Ru},o))):Y.createElement(ee.zx.Tertiary,{onClick:t({kind:S.ix.Kind.creditsInfoClick}),title:r,name:"creditsInfo",mount:s},Y.createElement("div",{ref:n},o))}))))})),Ou=J.UI.Union.asOption(Au),Ru=re.ux.style({padding:`${re.ux.rem(te.x)}`,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125),color:ne.XY.Content.Secondary.Default,cursor:"default"}),Tu=re.ux.style({color:ie.Blue60});function Pu(e){const t=e.assistant.state.view((e=>(0,l.zG)(e.genAIAvailability,v.fromPredicate(S._4.isActiveOrPassive),v.filter((()=>v.isSome(S.z_.toStarted(e.session)))))));return J.Z.composeOption(function(e,t,i){return J.Z.fromSideEffect((t=>e.notify(t)),(0,l.zG)($.aj([t,i]),m.U((([e,t])=>({user:e,genAIAvailability:t})))))}(e,e.assistant.state.view("user"),t.pipe(d.oA)),(()=>b.h.combine(t,e.routing.activeView,((e,t)=>(0,l.zG)(e,v.filter((()=>"voiceProfile"!==t&&"feedbackForm"!==t&&"skill"!==t)))))))}const Uu=J.UI.Node.make((({view:e,notify:t})=>{const{ref:i,onMount:n}=mt.P.useElWatcher(),r=Y.useMemo((()=>i.pipe(Ti.QV(Pi.E),d.oA,y.b((e=>t({kind:S.ix.Kind.mount,name:S.ec.historyButton,element:e})())))),[i]);return mt.P.useSubscriptionTo(r),Y.createElement(ee.zx.Tertiary,{mount:n,onClick:t({kind:S.ix.Kind.restoreHistoryButtonClick}),disabled:e("disabled"),compact:!0,style:Nu,size:"medium",name:"restoreHistory",title:"Pick up where you left off"},Y.createElement(ee.ck,null))})),Bu=J.UI.Union.asOption(Uu),Nu={base:{boxShadow:`0px 0px 1px ${re.ux.color(ie.BlueGray40).toRGBA().fade(.5).toString()}, 0px 0.5px 8px -0.5px ${re.ux.color(ie.BlueGray40).toRGBA().fade(.5).toString()}`}};function Gu(e){return J.Z.fromSideEffect((t=>e.notify(t.action.action)),b.h.combine(e.assistant.state.view("session"),e.routing.activeView,((e,t)=>"started"!==e.kind||"loading"!==t&&"beforeResults"!==t||e.historyStatus!==S.z_.HistoryStatus.hasHistory&&e.historyStatus!==S.z_.HistoryStatus.historyRequested?v.none:v.some({disabled:e.historyStatus===S.z_.HistoryStatus.historyRequested}))))}const zu=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(ee.zx.Tertiary,{className:Vu,onClick:t({kind:S.ix.Kind.toolbarVoiceButtonClick}),name:"toolbarVoiceProfile"},Y.createElement(ee.qG,null),Y.createElement(X.F.span,null,e("styleLabel"))))),Fu="voiceBtn",ju=C.Es.buttonOverrideSpecificity({padding:0,paddingRight:re.ux.rem(te.x),paddingLeft:re.ux.rem(te.x),minHeight:re.ux.rem(1.625),lineHeight:re.ux.rem(1.625),border:re.ux.px(1),borderStyle:"solid",borderColor:ie.BlueGray20,borderRadius:re.ux.rem(.8125),gap:re.ux.rem(te.F2),flexWrap:"nowrap",$nest:{"& > i":Object.assign({},C.Es.iconSizeRems(1.5))}},Fu),Vu=re.ux.joinClasses([Fu,re.ux.style(ju)]),Mu=J.UI.Node.make((({notify:e,view:t})=>Y.createElement("div",{className:Du},Y.createElement(ee.zx.Tertiary,{compact:!0,onClick:e({kind:S.ix.Kind.toolbarGoBackButtonClick}),name:"goBack"},Y.createElement(ht.JO.Arrow,{direction:ht.n4.left})),Y.createElement(X.F.div,{className:Hu},t("activeViewIconUrl").pipe(m.U(v.fold(l.gn,(e=>Y.createElement("img",{src:e,style:{width:re.ux.rem(1.25),height:re.ux.rem(1.25)}}))))),t("activeViewLabel").pipe(m.U(v.fold(l.gn,(e=>Y.createElement("span",null,e))))))))),Du=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x),color:ie.BlueGray60,fontWeight:400,fontSize:re.ux.rem(.75),lineHeight:re.ux.rem(1.125)}),Hu=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x)}),Lu=re.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:re.ux.rem(te.x)}),Ku=(J.UI.Node.make((({view:e})=>Y.createElement("div",{className:Lu},Y.createElement(X.F.img,{src:e("iconUrl"),style:{width:re.ux.rem(1),height:re.ux.rem(1)}}),Y.createElement(X.F.span,null,e("name"))))),"logo"),$u="sepAndRight",Zu=re.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",width:re.ux.percent(100),height:re.ux.percent(100),gap:re.ux.rem(te.x),position:"relative",overflow:"hidden"}),Wu=re.ux.style({display:"flex",alignItems:"center",gap:re.ux.rem(te.x),paddingRight:re.ux.rem(te.x)}),qu=re.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:re.ux.rem(te.x)}),Yu={height:re.ux.rem(1),borderLeft:`1px solid ${ie.BlueGray20}`},Qu=re.ux.style(Yu),Xu=re.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:re.ux.rem(te.F2)}),Ju=re.ux.joinClasses([re.ux.style({display:"flex",alignItems:"center",justifyContent:"center",height:re.ux.rem(2)}),Ku]),ed=re.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),td=(re.ux.style(Object.assign(Object.assign({},Yu),{marginLeft:re.ux.rem(te.x),marginRight:re.ux.rem(te.F2)})),re.ux.joinClasses([re.ux.style({display:"flex",alignItems:"center"}),$u])),id=(re.ux.style({display:"flex",flexDirection:"row",alignItems:"center",height:re.ux.rem(2)}),J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:qu},e.back,Y.createElement("div",{className:Qu}),e.voice)))),nd=J.UI.Knot.make(id,{back:Mu,voice:zu}),rd=()=>Y.createElement("div",{className:ed},Y.createElement(ee.Ji,{className:Ju})),sd=J.UI.Node.make(rd),od=J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Xu},Y.createElement(rd,null),Y.createElement("div",{className:td},e.content)))),zu),ad=J.UI.Union.make("kind",{logoOnly:sd,logoAndVoiceButton:od,backButton:Mu,backButtonAndVoiceButton:nd}),ld=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Wu},e.historyButton,e.credits))),cd=J.UI.Knot.make(ld,{historyButton:Bu,credits:Ou}),ud=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Zu},e.left,e.right))),dd=J.UI.Knot.make(ud,{left:ad,right:cd});function md(e){return J.Z.composeKnot({left:pd(e),right:J.Z.composeKnot({historyButton:Gu(e),credits:Pu(e)})})}function pd(e){const t=b.h.combine(e.assistant.state,e.routing.activeView,(({session:e},t)=>(0,l.zG)(S.z_.toStarted(e),v.fold((()=>"logoOnly"),(()=>"loadingError"===t?"logoOnly":"loading"===t||"beforeResults"===t||"afterResults"===t?"logoAndVoiceButton":"voiceProfile"===t||"feedbackForm"===t||"legacyVoiceProfile"===t||"skill"===t?"backButton":"actionSelected"===t?"backButtonAndVoiceButton":(0,j.L0)(t))))));return J.Z.composeUnion({logoOnly:()=>W.of(null),logoAndVoiceButton:yd(e),backButton:hd(e),backButtonAndVoiceButton:fd(e)},(()=>t.pipe(q.O("logoOnly"),m.U((e=>({kind:e}))))))}function hd(e){return J.Z.fromSideEffect((t=>e.notify(t)),b.h.combine(e.routing.activeView,e.skill.state,((e,t)=>"voiceProfile"===e||"legacyVoiceProfile"===e?{activeViewIconUrl:v.none,activeViewLabel:v.some("Style")}:"feedbackForm"===e?{activeViewIconUrl:v.none,activeViewLabel:v.some("Share your thoughts")}:"skill"===e?(0,l.zG)(t,v.fold((()=>({activeViewIconUrl:v.none,activeViewLabel:v.none})),(e=>({activeViewIconUrl:v.some(e.skill.iconUrl),activeViewLabel:v.some(e.skill.displayName)})))):{activeViewIconUrl:v.none,activeViewLabel:v.none})))}function gd(e){return(0,l.zG)(e,v.fold((()=>""),(e=>(0,l.zG)(S.LA.toLegacyVoiceProfile(e),v.fold((()=>"Style"),(e=>(0,l.zG)(v.fromNullable(e.styles.find((t=>S.LA.Style.Id.eq.equals(t.id,e.selectedStyle)))),v.fold((()=>""),(e=>e.label)))))))))}function fd(e){return J.Z.fromSideEffect((t=>e.notify(t.action)),e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.map((e=>e.voiceProfile)))).pipe(m.U((e=>({back:{activeViewIconUrl:v.none,activeViewLabel:v.none},voice:{styleLabel:gd(e)}})))))}function yd(e){return J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("session").view((0,l.ls)(S.z_.toStarted,v.map((e=>e.voiceProfile)))).pipe(m.U((e=>({kind:"logoAndVoiceButton",styleLabel:gd(e)})))))}const vd=J.UI.Knot.make(Ut,{toolbar:dd,content:ku});function xd(e){return J.UI.Knot.make(J.UI.Grid.make((({slots:t})=>Y.createElement(Bi.Provider,{value:{notifyUnmount:t=>e.notify(t)}},t.assistant))),{assistant:vd})}var bd;function Sd(e,t=bd.empty){return J.Z.composeKnot({assistant:J.Z.composeKnot({root:Ft(e),content:_u(e,Object.assign(Object.assign({},t.contentFlowOptions),{chatFlowOptions:{assistantMaxHeight:b.h.combine(t.contentFlowOptions.chatFlowOptions.assistantMaxHeight,e.position.state,((e,t)=>(0,l.zG)(e,v.alt((()=>(0,l.zG)(t,tt,v.chain((e=>e.assistantMaxHeight))))))))}})),toolbar:md(e)})})}!function(e){e.empty={contentFlowOptions:wu.empty}}(bd||(bd={}));J.UI.Knot.make(Mt,{toolbar:dd,content:ku});var kd;!function(e){e.empty={fixedContainerFlowOptions:Dt.empty,contentFlowOptions:wu.empty}}(kd||(kd={}))},56133:(e,t,i)=>{i.d(t,{l:()=>d,Q:()=>c});var n=i(27378),r=i(74204),s=i(5114),o=i(57050),a=i(37360),l=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const c=e=>{var{placement:t,onMount:i,onMaxSizeChange:c,children:u}=e,d=l(e,["placement","onMount","onMaxSizeChange","children"]);const[m,p]=n.useState(null),h="initial"===t.kind?t:void 0,g=(0,a.gM)(c),f=(0,a.n4)(),{styles:y}=(0,r.D)(null==h?void 0:h.referenceElement,m,{placement:null==h?void 0:h.placement,modifiers:[g,{name:"preventOverflow",options:{padding:5,mainAxis:!0,altAxis:!0,tether:!1}},f,...(0,o.zG)((null==h?void 0:h.offset)||s.none,s.fold((()=>[]),(e=>[{name:"offset",options:{offset:e}}])))]});return n.createElement("div",Object.assign({dir:"ltr",ref:e=>{p(e),e&&e!==m&&i(e)},style:"initial"===t.kind?y.popper:{position:"fixed",top:t.referencePosition.top,left:t.referencePosition.left,bottom:t.referencePosition.bottom,right:t.referencePosition.right,transform:`translate(${t.translation.x}px, ${t.translation.y}px)`},tabIndex:0},d),u)};var u=i(38983);const d=n.createContext({portalContainer:u.h.create(s.none)})},18313:(e,t,i)=>{i.d(t,{vw:()=>ie,Ct:()=>Ke,zx:()=>M,Zb:()=>Ut,Ol:()=>Gt,j4:()=>O,xx:()=>Qe,XR:()=>_,h_:()=>mt,Pz:()=>P,dL:()=>gt,Ji:()=>C,CT:()=>c,rN:()=>w,k8:()=>u,L3:()=>a,qq:()=>it,Ho:()=>v,R6:()=>I,hS:()=>Dt,kc:()=>k,J2:()=>Ct,PG:()=>Tt,Ph:()=>Le,cv:()=>x,Z0:()=>Bt,OJ:()=>E,ck:()=>T,r7:()=>R,wN:()=>d,qG:()=>U,OK:()=>ft,E2:()=>xt,mQ:()=>vt,b:()=>Q,it:()=>Et,pY:()=>Ae,ln:()=>o,uA:()=>s,T6:()=>b,P_:()=>V});var n=i(27378),r=i(31278);const s=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),n.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),n.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),n.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),n.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),n.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),o=e=>n.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),n.createElement("rect",{width:"16",height:"16",rx:"2"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7072 5.41421L6.50008 12.6213L2.29297 8.41421L3.70718 7L6.50008 9.79289L12.293 4L13.7072 5.41421Z",fill:"white"})),a=e=>n.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",stroke:"none"}));var l=i(13578);const c=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),n.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:l.XY.Content.Secondary.Default,strokeMiterlimit:"4.25735"})),u=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),n.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),n.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),n.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),n.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:l.XY.Content.Secondary.Default,stroke:l.XY.Content.Secondary.Default})),d=e=>n.createElement(r.a1,Object.assign({width:"32",height:"32",fill:l.XY.Content.Secondary.Default,viewBox:"0 0 32 32"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"})),m=e=>n.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"}));var p=i(89894),h=i(12187),g=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const f=p.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),y=p.ux.style({animation:`${f} 1s linear infinite`,width:p.ux.rem(1),height:p.ux.rem(1),minWidth:p.ux.rem(1),minHeight:p.ux.rem(1)}),v=e=>{const{className:t}=e,i=g(e,["className"]);return n.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},(0,h.Sh)(y,t),i),n.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),n.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"}))},x=e=>n.createElement(r.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),n.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),b=e=>n.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"#99A0B3"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"}));var S=i(13004);const k=e=>n.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:S.BO.BrandGreen60},e),n.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),C=e=>n.createElement(r.a1,{className:e.className,viewBox:"0 0 22 22",width:22,height:22},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 11C22 17.0749 17.0753 22 11 22C4.92513 22 0 17.0749 0 11C0 4.92465 4.92513 0 11 0C17.0753 0 22 4.92465 22 11Z",fill:"#018374",stroke:"none"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4371 13.3755C12.5021 13.7356 12.8407 13.9824 13.2066 13.9824H14.3592L15.0274 13.8887C13.9584 15.4569 12.1023 16.1786 10.0731 15.8601C8.42114 15.6008 7.00214 14.4831 6.40336 12.9221C5.04414 9.37866 7.63201 5.99545 11.0042 5.99545C12.7618 5.99545 14.3037 7.05097 15.1876 8.29349C15.4224 8.63162 15.8868 8.72871 16.2254 8.49388C16.5468 8.27101 16.6405 7.84775 16.4473 7.51488C15.2249 5.60662 13.0282 4.38562 10.558 4.5511C7.34171 4.76679 4.73901 7.39866 4.55392 10.6169C4.33918 14.3617 7.30966 17.4192 11.0042 17.4192C12.945 17.4192 14.6825 16.5741 15.8662 15.2068L15.7261 15.9911V16.6999C15.7261 17.0653 15.9724 17.4044 16.3325 17.4694C16.8055 17.5545 17.2168 17.1934 17.2168 16.7362V12.4912H13.1698C12.7126 12.4912 12.3515 12.903 12.4371 13.3755Z",fill:"white",stroke:"none"})),w=()=>n.createElement("svg",{width:"240",height:"35",viewBox:"0 0 240 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M209.923 15.8961H197.325V20.5059H200.418C201.204 20.5238 201.989 20.4701 202.766 20.3428L202.807 20.3852C201.358 22.5683 198.746 24.1056 195.687 24.1056C190.757 24.1056 186.845 20.0635 186.845 14.8437C186.845 9.62393 190.757 5.58174 195.687 5.58174C197.113 5.58398 198.514 5.94373 199.775 6.62748C201.035 7.31123 202.116 8.30558 202.926 9.51667L207.343 6.39063C206.054 4.42875 204.315 2.82438 202.279 1.72725C200.245 0.627883 197.977 0.0692616 195.685 0.0960754C193.807 0.080434 191.94 0.449124 190.2 1.18651C188.461 1.92165 186.88 3.00985 185.55 4.38406C184.22 5.75827 183.169 7.39168 182.456 9.19044C181.746 10.9892 181.384 12.9153 181.402 14.8593C181.402 23.1113 187.662 29.6226 195.449 29.6226C200.219 29.6226 204.172 26.8317 205.738 23.7571L205.816 23.7995C205.584 24.7246 205.465 25.6743 205.463 26.6306V28.9388L209.927 28.9254H209.923V15.8984V15.8961Z",fill:"white"}),n.createElement("path",{d:"M225.901 0C218.113 0 211.801 6.62972 211.801 14.8102C211.801 22.9906 218.113 29.6204 225.901 29.6204C233.688 29.6204 240 22.9906 240 14.8102C240 6.62972 233.688 0 225.901 0ZM226.018 24.1191C221.187 24.1191 217.271 20.0054 217.271 14.9308C217.271 9.85632 221.187 5.74263 226.018 5.74263C230.848 5.74263 234.765 9.85632 234.765 14.9308C234.765 20.0054 230.848 24.1191 226.018 24.1191Z",fill:"white"}),n.createElement("path",{d:"M17.223 8.39048C15.737 8.39048 14.5348 9.63062 14.5348 11.1277V11.1635C13.0857 9.52113 11.3528 8.24524 8.41547 8.24524C4.06802 8.24301 0 11.5277 0 17.3642V17.4379C0 23.2386 3.99653 26.5591 8.41763 26.5591C11.2813 26.5591 13.0164 25.3547 14.6063 23.3839V24.3335C14.6063 27.835 12.8734 29.6606 9.19528 29.6606C7.1786 29.6606 5.51717 29.2226 3.96188 28.4942C3.71494 28.3847 3.43117 28.3109 3.07809 28.3109C1.87588 28.3109 0.885953 29.3321 0.885953 30.5722C0.885953 31.5934 1.48814 32.3598 2.40659 32.724C4.63555 33.6357 6.82768 34.0737 9.33824 34.0737C13.0164 34.0737 15.7392 33.2715 17.5089 31.4482C19.1011 29.8058 19.9134 27.2518 19.9134 23.7503V11.1612C19.9134 9.62839 18.7111 8.38825 17.2252 8.38825L17.223 8.39048ZM14.6063 17.4379C14.6063 20.1014 12.5896 21.9628 9.97293 21.9628C7.35622 21.9628 5.3742 20.1394 5.3742 17.4379V17.3642C5.3742 14.7007 7.35406 12.8393 9.97293 12.8393C12.5918 12.8393 14.6063 14.7007 14.6063 17.3642V17.4379Z",fill:"white"}),n.createElement("path",{d:"M32.3836 8.39038C30.7914 8.39038 29.5199 10.1422 28.7401 12.0393V11.1634C28.7401 9.63052 27.5379 8.39038 26.0519 8.39038C24.5659 8.39038 23.3637 9.63052 23.3637 11.1634V25.6093C23.3637 27.1422 24.5659 28.3823 26.0519 28.3823C27.5379 28.3823 28.7401 27.1422 28.7401 25.6093V20.4298C28.7401 16.4904 30.2607 14.3364 32.9836 13.6816C34.0797 13.4269 35.0003 12.551 35.0003 11.0919C35.0003 9.52327 34.045 8.39262 32.3836 8.39262V8.39038Z",fill:"white"}),n.createElement("path",{d:"M44.2178 8.39038C41.7072 8.39038 39.8682 8.7546 38.1699 9.41154C37.3208 9.74001 36.7207 10.5779 36.7207 11.5634C36.7207 12.8392 37.7107 13.8247 38.9497 13.8247C39.1967 13.8247 39.4089 13.7889 39.7274 13.6794C40.7519 13.3509 41.9563 13.132 43.4401 13.132C46.1283 13.132 47.5081 14.4079 47.5081 16.7071V17.0356C46.1651 16.5619 44.7853 16.2334 42.8748 16.2334C38.3843 16.2334 35.2348 18.2042 35.2348 22.4721V22.5459C35.2348 26.4138 38.1699 28.5298 41.7419 28.5298C44.3586 28.5298 46.163 27.5444 47.4713 26.0495V26.0853C47.4713 27.2517 48.4959 28.3846 50.0534 28.3846C51.5025 28.3846 52.6701 27.2182 52.6701 25.7211V16.8189C52.6701 14.1911 52.0332 12.0393 50.6187 10.5802C49.2757 9.1948 47.1529 8.39038 44.2178 8.39038ZM47.5775 21.2677C47.5775 23.2743 45.8792 24.6977 43.3686 24.6977C41.6357 24.6977 40.4335 23.8217 40.4335 22.3269V22.2531C40.4335 20.5013 41.848 19.5539 44.1463 19.5539C45.4546 19.5539 46.6568 19.8466 47.5775 20.2846V21.27V21.2677Z",fill:"white"}),n.createElement("path",{d:"M78.6766 8.24286C76.0945 8.24286 74.1147 9.33776 72.4511 11.3443C71.4611 9.37351 69.5874 8.24286 67.1115 8.24286C64.3887 8.24286 62.7619 9.73773 61.5229 11.3801V11.1611C61.5229 9.62824 60.3207 8.3881 58.8347 8.3881C57.3487 8.3881 56.1465 9.62824 56.1465 11.1611V25.6093C56.1465 27.1422 57.3487 28.3823 58.8347 28.3823C60.3207 28.3823 61.5229 27.1422 61.5229 25.6093V17.2545C61.5229 14.629 62.7597 13.2772 64.7764 13.2772C66.7931 13.2772 67.9238 14.6268 67.9238 17.2545V25.6093C67.9238 27.1422 69.126 28.3823 70.612 28.3823C72.098 28.3823 73.3002 27.1422 73.3002 25.6093V17.2545C73.3002 14.629 74.5371 13.2772 76.5537 13.2772C78.5704 13.2772 79.7011 14.6268 79.7011 17.2545V25.6093C79.7011 27.1422 80.9034 28.3823 82.3893 28.3823C83.8753 28.3823 85.0775 27.1422 85.0775 25.6093V15.4312C85.0775 10.7254 82.6731 8.24509 78.6766 8.24509V8.24286Z",fill:"white"}),n.createElement("path",{d:"M111.077 8.24286C108.495 8.24286 106.516 9.33776 104.852 11.3443C103.862 9.37351 101.988 8.24286 99.5124 8.24286C96.7895 8.24286 95.1628 9.73773 93.9237 11.3801V11.1611C93.9237 9.62824 92.7215 8.3881 91.2355 8.3881C89.7496 8.3881 88.5474 9.62824 88.5474 11.1611V25.6093C88.5474 27.1422 89.7496 28.3823 91.2355 28.3823C92.7215 28.3823 93.9237 27.1422 93.9237 25.6093V17.2545C93.9237 14.629 95.1606 13.2772 97.1773 13.2772C99.194 13.2772 100.325 14.6268 100.325 17.2545V25.6093C100.325 27.1422 101.527 28.3823 103.013 28.3823C104.499 28.3823 105.701 27.1422 105.701 25.6093V17.2545C105.701 14.629 106.938 13.2772 108.955 13.2772C110.971 13.2772 112.102 14.6268 112.102 17.2545V25.6093C112.102 27.1422 113.304 28.3823 114.79 28.3823C116.276 28.3823 117.478 27.1422 117.478 25.6093V15.4312C117.478 10.7254 115.074 8.24509 111.077 8.24509V8.24286Z",fill:"white"}),n.createElement("path",{d:"M128.461 8.39038C125.95 8.39038 124.111 8.7546 122.413 9.41154C121.564 9.74001 120.964 10.5779 120.964 11.5634C120.964 12.8392 121.954 13.8247 123.193 13.8247C123.44 13.8247 123.652 13.7889 123.97 13.6794C124.995 13.3509 126.199 13.132 127.683 13.132C130.371 13.132 131.751 14.4079 131.751 16.7071V17.0356C130.408 16.5619 129.028 16.2334 127.118 16.2334C122.625 16.2334 119.478 18.2042 119.478 22.4721V22.5459C119.478 26.4138 122.413 28.5298 125.985 28.5298C128.602 28.5298 130.406 27.5444 131.714 26.0495V26.0853C131.714 27.2517 132.739 28.3846 134.296 28.3846C135.745 28.3846 136.913 27.2182 136.913 25.7211V16.8189C136.913 14.1911 136.276 12.0393 134.862 10.5802C133.519 9.1948 131.396 8.39038 128.461 8.39038ZM131.82 21.2677C131.82 23.2743 130.122 24.6977 127.612 24.6977C125.879 24.6977 124.676 23.8217 124.676 22.3269V22.2531C124.676 20.5013 126.091 19.5539 128.389 19.5539C129.698 19.5539 130.9 19.8466 131.82 20.2846V21.27V21.2677Z",fill:"white"}),n.createElement("path",{d:"M149.373 8.39038C147.781 8.39038 146.507 10.1422 145.73 12.0393V11.1634C145.73 9.63052 144.527 8.39038 143.041 8.39038C141.555 8.39038 140.353 9.63052 140.353 11.1634V25.6093C140.353 27.1422 141.555 28.3823 143.041 28.3823C144.527 28.3823 145.73 27.1422 145.73 25.6093V20.4298C145.73 16.4904 147.25 14.3364 149.973 13.6816C151.069 13.4269 151.99 12.551 151.99 11.0919C151.99 9.52327 151.034 8.39262 149.373 8.39262V8.39038Z",fill:"white"}),n.createElement("path",{d:"M156.456 1.31152C154.97 1.31152 153.768 2.55166 153.768 4.08452V25.6093C153.768 27.1422 154.97 28.3823 156.456 28.3823C157.942 28.3823 159.144 27.1422 159.144 25.6093V4.08452C159.144 2.55166 157.942 1.31152 156.456 1.31152Z",fill:"white"}),n.createElement("path",{d:"M176.788 8.39038C175.408 8.39038 174.63 9.3378 174.206 10.5064L170.244 21.8532L166.141 10.4707C165.682 9.15681 164.904 8.39038 163.559 8.39038C162.073 8.39038 160.906 9.48528 160.906 11.0539C160.906 11.4181 161.046 11.9656 161.189 12.3298L167.662 27.7991L167.484 28.2371C166.988 29.2225 166.529 29.4035 165.574 29.4035C165.184 29.4035 164.902 29.3298 164.443 29.1845C164.231 29.1108 163.984 29.0393 163.559 29.0393C162.463 29.0393 161.436 29.9509 161.436 31.3006C161.436 32.6502 162.357 33.3071 163.135 33.5999C164.018 33.9283 164.867 34.1116 166.07 34.1116C169.289 34.1116 170.879 32.6167 172.471 28.6393L179.084 12.2583C179.19 12.0035 179.331 11.3824 179.331 10.9444C179.331 9.48528 178.163 8.39038 176.783 8.39038H176.788Z",fill:"white"})),_=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),n.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),n.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#FFA027"}),n.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),n.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),n.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),I=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),n.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),n.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#FFA027"}),n.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),n.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),n.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),E=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),n.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),n.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),n.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),n.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),n.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#FFA027"}),n.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),n.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),n.createElement("stop",{offset:"1",stopColor:"#FFE261"})),n.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},n.createElement("stop",{stopColor:"#F18D84"}),n.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),n.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),n.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),n.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),n.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},n.createElement("stop",{stopColor:"#F18D84"}),n.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),n.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),n.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),n.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"}))));var A=i(62172);const O=e=>n.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:A.Green30},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"})),R=e=>n.createElement(r.a1,Object.assign({width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},e),n.createElement("path",{d:"M9 1L11.069 6.15226L16.6085 6.52786L12.3477 10.0877L13.7023 15.4721L9 12.52L4.29772 15.4721L5.65228 10.0877L1.39155 6.52786L6.931 6.15226L9 1Z",fill:"transparent",stroke:A.NeutralGray50,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),T=e=>n.createElement(r.a1,Object.assign({width:"17",height:"16",viewBox:"0 0 17 16",fill:S.BO.TextBaseSubduedColor},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 8C2.5 4.41015 5.41015 1.5 9 1.5C12.5899 1.5 15.5 4.41015 15.5 8C15.5 11.5899 12.5899 14.5 9 14.5C7.85901 14.5 6.73812 14.1997 5.75 13.6292C5.51085 13.4911 5.42892 13.1853 5.56699 12.9462C5.70506 12.707 6.01085 12.6251 6.25 12.7631C7.08611 13.2459 8.03455 13.5 9 13.5C9.96545 13.5 10.9139 13.2459 11.75 12.7631C12.5861 12.2804 13.2804 11.5861 13.7631 10.75C14.2459 9.91389 14.5 8.96545 14.5 8C14.5 4.96243 12.0376 2.5 9 2.5C5.96243 2.5 3.5 4.96243 3.5 8V8.29289L4.64645 7.14645C4.84171 6.95118 5.15829 6.95118 5.35355 7.14645C5.54882 7.34171 5.54882 7.65829 5.35355 7.85355L3.35355 9.85355L3 10.2071L2.64645 9.85355L0.646447 7.85355C0.451184 7.65829 0.451184 7.34171 0.646447 7.14645C0.841709 6.95118 1.15829 6.95118 1.35355 7.14645L2.5 8.29289V8ZM9 4C9.27614 4 9.5 4.22386 9.5 4.5V7.5H11.5C11.7761 7.5 12 7.72386 12 8C12 8.27614 11.7761 8.5 11.5 8.5H9H8.5V8V4.5C8.5 4.22386 8.72386 4 9 4Z",stroke:"none"})),P=e=>n.createElement(r.a1,{className:e.className,viewBox:"0 0 20 20",width:20,height:20},n.createElement("path",{d:"M8.58541 3.37143C9.36646 2.59038 10.6328 2.59038 11.4138 3.37143L16.6283 8.5859C17.4094 9.36695 17.4094 10.6333 16.6283 11.4143L11.4138 16.6288C10.6328 17.4098 9.36646 17.4098 8.58541 16.6288L3.37094 11.4143C2.58989 10.6333 2.58989 9.36695 3.37094 8.5859L8.58541 3.37143ZM11.4371 6.25011C11.4371 5.4562 10.7935 4.81261 9.99962 4.81261C9.20571 4.81261 8.56212 5.4562 8.56212 6.25011V10.6251C8.56212 11.3163 9.04996 11.8936 9.70011 12.0314C9.04996 12.1692 8.56212 12.7464 8.56212 13.4376C8.56212 14.2315 9.20571 14.8751 9.99962 14.8751C10.7935 14.8751 11.4371 14.2315 11.4371 13.4376C11.4371 12.7464 10.9493 12.1692 10.2991 12.0314C10.9493 11.8936 11.4371 11.3163 11.4371 10.6251V6.25011Z",fill:"#D31332",stroke:"#D31332"})),U=e=>n.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),n.createElement("path",{d:"M11.1439 8.77381C8.92013 10.9976 5.96543 11.6484 5.12591 10.8089C4.2864 9.96935 4.93718 7.01465 7.16097 4.79086C9.38476 2.56707 12.3395 1.91629 13.179 2.7558C14.0185 3.59531 13.3677 6.55002 11.1439 8.77381Z",stroke:"#646B81"}),n.createElement("path",{d:"M10.0977 5.83569L2.09766 13.8357",stroke:"#646B81",strokeLinecap:"round"}),n.createElement("path",{d:"M7 14C8.81333 12.6019 11.768 10.8841 11 13.9999C12.0667 13.0012 13.744 10.9621 14 12.6398",stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round"}));var B=i(64757),N=i(88392),G=i(9546);const z="button",F=e=>({minWidth:p.ux.rem(e),minHeight:p.ux.rem(e),lineHeight:p.ux.rem(e)}),j=e=>{var t,i,n;const r=(t,i)=>{var n;return Object.assign({"& > i":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.compact?{marginLeft:0}:{marginLeft:p.ux.rem(-.25)}),"small"===e.size?{minWidth:p.ux.rem(1.5)}:{}),"medium"===e.size?{minWidth:p.ux.rem(1.75)}:{}),"large"===e.size?{minWidth:p.ux.rem(2)}:{}),t),"&[data-disabled='true']":Object.assign({opacity:.4,cursor:"not-allowed"},null===(n=e.style)||void 0===n?void 0:n.disabled)},i)};return S.Es.specificity(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({borderRadius:p.ux.rem(N.xB),fontSize:null!==(n=null===(i=null===(t=e.style)||void 0===t?void 0:t.base)||void 0===i?void 0:i.fontSize)&&void 0!==n?n:p.ux.rem(.75),textAlign:"center",padding:`0 ${p.ux.rem(G.x)}`,userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center"},e.compact?{padding:0}:{}),"small"===e.size?F(1.5):{}),"medium"===e.size?F(1.75):{}),"large"===e.size?F(2):{}),"primary"===e.type?((e,t)=>Object.assign(Object.assign({color:l.XY.Content.OnPrimary.Default,backgroundColor:S.BO.BrandGreen60,transitionProperty:"border, background, color",fontWeight:"bold"},null==t?void 0:t.base),{$nest:e((null==t?void 0:t.icon)||{},{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:S.BO.BrandGreen80},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${S.BO.BrandGreen80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:S.BO.BrandGreen60,color:l.XY.Surface.Primary.Default},null==t?void 0:t.active)}}})}))(r,e.style):{}),"secondary"===e.type?((e,t)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:A.BlueGray80,stroke:A.BlueGray80,boxShadow:`inset 0 0 0 1px ${A.BlueGray5}`,transitionProperty:"border, background, color"},null==t?void 0:t.base),{$nest:e(Object.assign({stroke:p.ux.important(A.BlueGray80),fill:p.ux.important(A.BlueGray80)},null==t?void 0:t.icon),{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:A.BlueGray0},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`inset 0 0 0 1px ${A.BlueGray80}, 0 0 0 1px ${A.BlueGray80}, 0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${A.BlueGray80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:"transparent",color:A.BlueGray80},null==t?void 0:t.active)}}})}))(r,e.style):{}),"tertiary"===e.type?((e,t,i)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:l.XY.Content.Secondary.Default,transitionProperty:"border, background, color"},null==i?void 0:i.base),{$nest:t(Object.assign({stroke:p.ux.important(l.XY.Content.Secondary.Default),fill:p.ux.important(l.XY.Content.Secondary.Default)},null==i?void 0:i.icon),{"&:not([data-disabled='true'])":{$nest:Object.assign(Object.assign({"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:A.BlueGray0,color:l.XY.Content.Secondary.Default},null==i?void 0:i.active)},"dark"===e.theme?{"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:p.ux.color(A.BlueGray0).toRGBA().fade(.2).toString()},null==i?void 0:i.active)}:{}),{"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${l.XY.Content.Secondary.Default}`},null==i?void 0:i.focusVisible)})}})}))(e,r,e.style):{}),z,S.Es.baseButtonContentOverrideSpecificity)},V=e=>p.ux.joinClasses([z,p.ux.style(j(e))]);var M,D=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){e.Primary=e=>{var{className:t,compact:i,theme:r,children:s,onClick:o,size:a,style:l}=e,c=D(e,["className","compact","theme","children","onClick","size","style"]);return n.createElement(B.zx.Primary,Object.assign({},(0,h.Sh)(V({compact:i,theme:null!=r?r:"light",size:null!=a?a:"large",type:"primary",style:l}),t),c,{onClick:(0,S.m)(o)}),s)},e.Secondary=e=>{var{className:t,compact:i,theme:r,children:s,onClick:o,size:a,style:l}=e,c=D(e,["className","compact","theme","children","onClick","size","style"]);return n.createElement(B.zx.Ghost,Object.assign({},(0,h.Sh)(V({compact:i,theme:null!=r?r:"light",size:null!=a?a:"large",type:"secondary",style:l}),t),c,{onClick:(0,S.m)(o)}),s)},e.Tertiary=e=>{var{className:t,compact:i,theme:r,children:s,onClick:o,size:a,style:l}=e,c=D(e,["className","compact","theme","children","onClick","size","style"]);return n.createElement(B.zx.Tertiary,Object.assign({},(0,h.Sh)(V({compact:i,theme:null!=r?r:"light",size:null!=a?a:"large",type:"tertiary",style:l}),t),c,{onClick:(0,S.m)(o)}),s)}}(M||(M={}));var H=i(31542),L=i(5114),K=i(15073),$=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Z="#161719",W="#646B81",q=e=>{var{children:t,style:i,dataGrammarlyPart:r="ui-kit-iframe"}=e,s=$(e,["children","style","dataGrammarlyPart"]);const[o,a]=n.useState(null),l=n.useCallback((e=>{var t,i;let n=null;"contentDocument"in e.target&&(n=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),a(n),n&&(n.style.margin="0",n.style.height="100vh",n.style.overflowY="hidden")}),[]),c=n.useContext(K.u.Context);return n.useEffect((()=>{const e=c.subscribe((e=>{o&&K.u.setRootCssVar(o,L.some(e))}));return()=>e.unsubscribe()}),[o]),n.createElement("iframe",Object.assign({},s,{style:Object.assign({},i),onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":r}),o&&(0,H.createPortal)(t,o))},Y=1.375,Q=({fitContentHeight:e,text:t,ariaLabel:i,onChange:r,placeholder:s,disabled:o,className:a,onFocus:l,onBlur:c,onKeyDownEnter:u,autofocus:d,onKeyUpEscape:m,onKeyDownArrowUp:h,onKeyDownArrowDown:g,onKeyDownShiftEnter:f,theme:y})=>{var v,x,b,S,k,C,w,_,I,E,A,O,R,T,P;const U=Y*(s?s.length:1)+(null!==(x=null===(v=null==y?void 0:y.padding)||void 0===v?void 0:v.top)&&void 0!==x?x:0)+(null!==(S=null===(b=null==y?void 0:y.padding)||void 0===b?void 0:b.bottom)&&void 0!==S?S:0),[B,G]=n.useState({kind:"rem",value:U}),[z,F]=n.useState(null);return n.useEffect((()=>{z&&void 0!==d&&(z.focus(),z.selectionStart=t.length,z.selectionEnd=t.length)}),[d,z]),n.useLayoutEffect((()=>{if(""===t)G({kind:"rem",value:U});else{const e=null==z?void 0:z.scrollHeight;G(e?{kind:"px",value:e}:{kind:"rem",value:U})}}),[t,z,s]),n.createElement(q,{className:a,style:{height:e?"rem"===B.kind?p.ux.rem(B.value):p.ux.px(B.value):void 0,maxHeight:(null==y?void 0:y.maxHeight)?p.ux.rem(y.maxHeight):"none",minHeight:(null==y?void 0:y.minHeight)?p.ux.rem(y.minHeight):"none"},title:`${i} container`},n.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${p.ux.rem(N.xB)};\n        overflow-y: auto;\n        padding: ${p.ux.rem(null!==(C=null===(k=null==y?void 0:y.padding)||void 0===k?void 0:k.top)&&void 0!==C?C:0)} ${p.ux.rem(null!==(_=null===(w=null==y?void 0:y.padding)||void 0===w?void 0:w.right)&&void 0!==_?_:0)} ${p.ux.rem(null!==(E=null===(I=null==y?void 0:y.padding)||void 0===I?void 0:I.bottom)&&void 0!==E?E:0)} ${p.ux.rem(null!==(O=null===(A=null==y?void 0:y.padding)||void 0===A?void 0:A.left)&&void 0!==O?O:0)};\n        width: 100%;\n        height: 100%;\n        border: none;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${null!==(R=null==y?void 0:y.fontSize)&&void 0!==R?R:p.ux.rem(.875)};\n        font-weight: 400;\n        color: ${null!==(T=null==y?void 0:y.color)&&void 0!==T?T:Z};\n      }\n      .textarea::placeholder {\n        color: ${W};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${p.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${W};\n      }\n      `}}),n.createElement("div",{className:"container"},n.createElement("textarea",{"aria-label":i,className:"textarea",style:{lineHeight:null!==(P=null==y?void 0:y.lineHeight)&&void 0!==P?P:p.ux.rem(Y)},value:t,ref:F,onChange:e=>r(e.target.value),placeholder:1===(null==s?void 0:s.length)?s[0]:void 0,disabled:o,onFocus:()=>null==l?void 0:l(),onBlur:()=>null==c?void 0:c(),onKeyDown:e=>{var t;u&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),u()):"ArrowUp"===e.key&&h&&(X(t=e.currentTarget)&&0===t.selectionStart)?(e.preventDefault(),e.stopPropagation(),h()):"ArrowDown"===e.key&&g&&function(e){return X(e)&&e.selectionStart===e.value.length}(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),g()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==f||f())},onKeyUp:e=>{m&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),m())}}),((null==s?void 0:s.length)||0)>1&&""===t?n.createElement("div",{className:"placeholder",style:{lineHeight:p.ux.rem(Y)}},(s||[]).map(((e,t)=>n.createElement(n.Fragment,{key:t},e,n.createElement("br",null))))):null))};function X(e){return e.selectionStart===e.selectionEnd}var J=i(22232),ee=function(){function e(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!0),this._capacity=e,this._start=t,this._allowOverflow=i,this._nextId=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._nextId},enumerable:!1,configurable:!0}),e.prototype.newId=function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new J.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e},e.prototype.reset=function(){this._nextId=this._start},e}();const te=new ee(999999);var ie;!function(e){e.create=function(e){return null!=e?e:te.newId()}}(ie||(ie={}));var ne=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const re=e=>{var{text:t,onChange:i,placeholder:r,disabled:s,className:o,onFocus:a,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:d}=e,m=ne(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[h,g]=n.useState(null);return n.useEffect((()=>{h&&void 0!==u&&h.focus()}),[u,h]),n.createElement(q,{className:o,style:{height:p.ux.rem(1.375)}},n.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${p.ux.rem(N.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${p.ux.rem(.875)};\n        font-weight: 400;\n        color: ${Z};\n      }\n      .textBox::placeholder {\n        color: ${W};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `}}),n.createElement("input",Object.assign({},m,{className:"textBox",style:{lineHeight:p.ux.rem(1.375)},value:t,ref:g,onChange:e=>i(e.target.value),placeholder:r,disabled:s,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyDown:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))};var se=i(74204),oe=i(64015),ae=i(57050),le=i(32952),ce=i(90845),ue=i(78674),de=i(85985),me=i(2834);const pe={padding:`${p.ux.rem(G.F2)} ${p.ux.rem(G.F2+G.Ze)} ${p.ux.rem(G.F2)} ${p.ux.rem(G.qp)}`,border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:p.ux.rem(N.xB),width:p.ux.rem(15),height:p.ux.rem(2),boxSizing:"border-box",position:"relative"},he={position:"absolute",right:p.ux.rem(G.x),top:p.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:p.ux.rem(1.5),height:p.ux.rem(1.5),padding:0},ge=Object.assign(Object.assign({},S.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),fe=e=>p.ux.color(A.BlueGray40).toRGBA().fade(e).toString(),ye={padding:p.ux.rem(G.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${A.BlueGray40}, 0px 0px 2px 0.5px ${fe(.5)}, 0px 1px 6px 0.5px ${fe(.25)}`,borderRadius:p.ux.rem(N.xB),width:p.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:p.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},ve={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${p.ux.rem(.1875)} ${p.ux.rem(G.qp)}`,borderRadius:p.ux.rem(N.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:A.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},xe={width:p.ux.percent(100),border:"none"},be=p.ux.style(pe),Se=p.ux.style(he),ke=p.ux.style(ge),Ce=p.ux.style(ye),we=p.ux.style(ve),_e=p.ux.style({whiteSpace:"pre"}),Ie=p.ux.style(xe),Ee=new ee(999999);function Ae({text:e,placeholder:t,clearButton:i,selectOnBlur:s,label:o,options:a,className:l,filterBy:c=((e,t)=>o(e).toLowerCase().includes(t.toLowerCase())),onInputChange:u,onSelectionChange:d}){const[m,p]=n.useState(!1),g=n.useRef(Ee.newId().toString()),[f,y]=n.useState(null),[v,x]=n.useState(null),{styles:b,attributes:k}=(0,se.D)(f,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),C=a.filter((t=>c(t,e.trim()))),w=m&&C.length>0,_=n.useMemo((()=>new le.xQ),[]);return ce.P.useSubscriptionTo(_.pipe(ue.b(50),de.h((e=>!e)),me.b((()=>{p(!1),s&&""!==e.trim()&&d(C.length>0?C[0]:null)})))),n.createElement("div",Object.assign({},(0,h.Sh)(be,l),{ref:y}),n.createElement(re,{className:Ie,placeholder:t,onChange:u,text:e,onFocus:()=>{p(!0),_.next(!0)},onBlur:()=>_.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":g.current,"aria-expanded":w}),""!==e.trim()&&!!i&&n.createElement("button",{onClick:(0,S.m)((()=>d(null))),className:Se,"aria-label":"Clear",type:"button"},n.createElement(r.JO.Close,{className:ke})),w&&n.createElement("div",Object.assign({ref:x,style:b.popper},k.popper,{className:Ce,onFocus:()=>_.next(!0),onBlur:()=>_.next(!1)}),n.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:g.current},C.map((t=>{const i=o(t);return n.createElement("li",{key:i,"aria-label":i,role:"option"},n.createElement("button",{className:we,onClick:(0,S.m)((()=>{d(t),p(!1)}))},n.createElement(Oe,{label:i,pattern:e})))})))))}const Oe=({label:e,pattern:t})=>{if(""===t.trim())return n.createElement(n.Fragment,null,e);const i=t.trim(),r=e.split(new RegExp(i,"i")),s=(0,ae.zG)(r.map(((e,t)=>({token:e,mark:!1,end:t*i.length+r.slice(0,t).join("").length+e.length}))),oe.iD({token:"",mark:!0,end:0})).map(((t,n,r)=>t.mark&&n>0?{token:e.slice(r[n-1].end,r[n-1].end+i.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return n.createElement(n.Fragment,null,s.map(((e,t)=>e.mark?n.createElement("mark",{key:t,className:_e},e.token):n.createElement("span",{key:t,className:_e},e.token))))},Re={border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:p.ux.rem(N.xB),width:p.ux.rem(15),height:p.ux.rem(2),boxSizing:"border-box",position:"relative"},Te={padding:`${p.ux.rem(G.F2)} ${p.ux.rem(G.F2+G.Ze)} ${p.ux.rem(G.F2)} ${p.ux.rem(G.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center"},Pe={fontWeight:400,fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375),color:l.XY.Content.Primary.Default},Ue=Object.assign(Object.assign({position:"absolute",top:p.ux.rem(G.F2),right:p.ux.rem(G.x)},S.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),Be=e=>p.ux.color(A.BlueGray40).toRGBA().fade(e).toString(),Ne={padding:p.ux.rem(G.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${A.BlueGray40}, 0px 0px 2px 0.5px ${Be(.5)}, 0px 1px 6px 0.5px ${Be(.25)}`,borderRadius:p.ux.rem(N.xB),width:p.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:p.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},Ge={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${p.ux.rem(.1875)} ${p.ux.rem(G.qp)}`,borderRadius:p.ux.rem(N.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:A.Blue0}}},ze=p.ux.style(Re),Fe=p.ux.style(Te),je=p.ux.style(Pe),Ve=p.ux.style(Ne),Me=p.ux.style(Ge),De=p.ux.style(Ue),He=new ee(999999);function Le({label:e,selection:t,className:i,placeholder:s,options:o,onSelectionChange:a,renderOption:l}){const[c,u]=n.useState(!1),d=n.useRef(He.newId().toString()),m=n.useRef(He.newId().toString()),p=n.useRef(null),[g,f]=n.useState(null),[y,v]=n.useState(null),{styles:x,attributes:b}=(0,se.D)(g,y,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=n.useMemo((()=>new le.xQ),[]),C=n.useMemo((()=>k.pipe(ue.b(100),de.h((e=>!e)),me.b((()=>{u(!1)})))),[k,u]);return ce.P.useSubscriptionTo(C),n.createElement("div",Object.assign({},(0,h.Sh)(ze,i),{ref:f}),n.createElement("button",{ref:p,className:Fe,onClick:()=>{var e;u(!0),k.next(!0),null===(e=p.current)||void 0===e||e.focus()},onFocus:()=>{u(!0),k.next(!0)},onBlur:()=>k.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":d.current,"aria-expanded":c,"aria-labelledby":m.current},n.createElement("div",{id:m.current,className:je},t?l?l(t):e(t):s),n.createElement(r.JO.Arrow,{direction:r.n4.down,className:De})),c&&n.createElement("div",Object.assign({ref:v,style:x.popper},b.popper,{className:Ve,onFocus:()=>k.next(!0),onBlur:()=>k.next(!1)}),n.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:d.current},o.map(((t,i)=>{const r=e(t);return n.createElement("li",{key:i,"aria-label":r,role:"option"},n.createElement("button",{className:Me,onClick:(0,S.m)((()=>{a(t),u(!1)}))},l?l(t):e(t)))})))))}const Ke=({className:e,children:t})=>n.createElement("div",Object.assign({},(0,h.Sh)($e,e)),t),$e=p.ux.style({color:A.BlueGray60,fontWeight:400,fontSize:p.ux.rem(.625),lineHeight:p.ux.rem(1),background:A.BlueGray0,borderRadius:p.ux.rem(N.fe),padding:`0 ${p.ux.rem(G.F2)}`,cursor:"default"}),Ze="closeBtn",We="closeIcon",qe=S.Es.buttonOverrideSpecificity({$nest:{[`& .${We}`]:Object.assign(Object.assign({},S.Es.iconSizeRems(1.5)),{stroke:p.ux.important(l.S5.Content.Primary.Default)})}},Ze),Ye={closeButton:p.ux.joinClasses([Ze,p.ux.style(qe)]),closeIcon:We},Qe=({name:e,className:t,size:i,onClick:s})=>n.createElement(M.Tertiary,Object.assign({},(0,h.Sh)(Ye.closeButton,t),{onClick:s,compact:!0,size:i,theme:"dark",name:e}),n.createElement(r.JO.Close,{className:Ye.closeIcon})),Xe="closeBtn",Je="closeIcon",et=S.Es.buttonOverrideSpecificity({$nest:{[`& .${Je}`]:Object.assign(Object.assign({},S.Es.iconSizeRems(1.5)),{stroke:p.ux.important(l.vU.InteractiveNeutral.Primary.Default)})}},Xe),tt=p.ux.joinClasses([Xe,p.ux.style(et)]),it=({name:e,className:t,size:i,onClick:s})=>n.createElement(M.Tertiary,Object.assign({},(0,h.Sh)(tt,t),{onClick:s,compact:!0,size:i,theme:"light",name:e}),n.createElement(r.JO.Close,{className:Je}));var nt=i(53702),rt=i(66310),st=i(80900),ot=i(77176),at=i(8125),lt=i(38983),ct=i(5739),ut=i(56133),dt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};function mt(e){var{children:t,onOpenChange:i,title:r,placement:s="bottom end"}=e,o=dt(e,["children","onOpenChange","title","placement"]);const a=n.useMemo((()=>lt.h.create(!1)),[]),l=n.useMemo((()=>a.pipe(de.h((e=>!0===e)),rt.w((()=>st.H(250))),me.b((()=>a.set(!1))))),[a]);return ce.P.useSubscriptionTo(l),n.createElement(ut.l.Consumer,null,(({portalContainer:e})=>n.createElement(ct.F.Fragment,null,e.view(L.fold(ae.gn,(e=>n.createElement(nt.v.Dropdown,Object.assign({title:a.pipe(ot.U((0,at.RN)(void 0,r))),placement:s,portalContainer:e,onOpenChange:e=>{e||a.set(!0),null==i||i(e)}},o),t)))))))}var pt=i(18208),ht=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const gt=n.forwardRef((function(e,t){var{children:i,rel:r}=e,s=ht(e,["children","rel"]);const o=n.useMemo((()=>pt.alphanumeric(10)),[]);return n.createElement(n.Fragment,null,n.createElement("span",{hidden:!0,id:o},"Opens an external site in a new window"),n.createElement("a",Object.assign({},s,{"aria-describedby":o,target:"_blank",rel:null!=r?r:"noopener noreferrer",ref:t}),i))}));var ft,yt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(ft||(ft={}));const vt=({tabs:e,activeTabId:t,onActiveTabChange:i,children:r})=>n.createElement(n.Fragment,null,n.createElement("div",{className:bt,role:"tablist"},e.map((e=>n.createElement("button",{key:e.id,onClick:()=>i(e.id),tabIndex:0,className:St,id:`tab-${e.id}`,"aria-label":`${e.label} ${e.id===t?"Selected.":""}`,"aria-controls":`tabpanel-${e.id}`,"aria-selected":t===e.id,role:"tab",type:"button"},e.label)))),r),xt=e=>{var{id:t,isActive:i,children:r,className:s,style:o}=e,a=yt(e,["id","isActive","children","className","style"]);return n.createElement("div",Object.assign({role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,hidden:!i,style:i?o:void 0,className:i?s:void 0},a),r)},bt=p.ux.style({display:"flex",alignContent:"flex-start",gap:p.ux.rem(G.x)}),St=p.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${p.ux.rem(G.yC)} solid transparent`,fontWeight:400,fontSize:p.ux.rem(.75),lineHeight:p.ux.rem(1.125),height:p.ux.rem(1.5),color:S.BO.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:S.BO.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:A.BlueGray10}}});var kt=i(37360);const Ct=({reference:e,children:t,placement:i,offset:r,theme:s,boundaryAreaPadding:o})=>{var a,l;const[c,u]=n.useState(null),[d,m]=n.useState(null),p=(0,kt.sJ)(),{styles:h,attributes:g,state:f}=(0,se.D)(e,c,{placement:null!=i?i:"top",modifiers:[{name:"offset",options:{offset:[0,12+(null!=r?r:0)]}},{name:"arrow",options:{element:d,padding:12}},{name:"preventOverflow",options:{padding:null!=o?o:5}},p]});return e?n.createElement("div",Object.assign({ref:u,style:h.popper},g.popper,{className:_t(s)}),n.createElement("div",{ref:m,style:h.arrow,className:It(null==s?void 0:s.bgColor),"data-placement":(null===(a=null==f?void 0:f.placement)||void 0===a?void 0:a.startsWith("bottom"))?"bottom":(null==f?void 0:f.placement.startsWith("top"))?"top":(null==f?void 0:f.placement.startsWith("right"))?"right":(null===(l=null==f?void 0:f.placement)||void 0===l?void 0:l.startsWith("left"))?"left":void 0}),t):null},wt=p.ux.keyframes({from:{opacity:0},to:{opacity:1}});function _t(e){var t,i,n;return p.ux.style({animation:`${wt} linear 0.1s`,background:null!==(t=null==e?void 0:e.bgColor)&&void 0!==t?t:l.S5.Surface.Primary.Default,borderRadius:p.ux.rem(G.x),width:null==e?void 0:e.width,color:null!==(i=null==e?void 0:e.fgColor)&&void 0!==i?i:l.S5.Content.Primary.Default,padding:null!==(n=null==e?void 0:e.padding)&&void 0!==n?n:p.ux.rem(G.mh),fontSize:p.ux.rem(.875),lineHeight:p.ux.rem(1.375),display:"flex",flexDirection:"column",gap:p.ux.rem(G.yC),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}})}function It(e=l.S5.Surface.Primary.Default,t=p.ux.rem(.5),i=p.ux.rem(-.5)){return p.ux.style({$nest:{"&[data-placement='bottom']":{top:i,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderBottom:`${t} solid ${e}`},"&[data-placement='top']":{bottom:i,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderTop:`${t} solid ${e}`},"&[data-placement='right']":{left:i,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderRight:`${t} solid ${e}`},"&[data-placement='left']":{right:i,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderLeft:`${t} solid ${e}`}}})}const Et=({children:e,theme:t,body:i,placement:r,active:s,onCloseButtonClick:o})=>{const a=n.useRef(null);return n.createElement(n.Fragment,null,n.createElement(Ct,{placement:r,reference:s&&a.current||void 0,theme:t},n.createElement(Qe,{onClick:o,name:"tooltipClose",className:At,size:"small"}),i),n.cloneElement(e,{ref:a}))},At=p.ux.style({position:"absolute",top:p.ux.rem(G.x),right:p.ux.rem(G.x)}),Ot="reportMenuBtnIcon",Rt=S.Es.buttonOverrideSpecificity(S.Es.iconSizeRems(1.5),Ot),Tt=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:i,onOpenChange:s})=>n.createElement(mt,{"aria-label":"Provide feedback",title:"Provide feedback",name:"reportMenu",label:n.createElement(m,{className:p.ux.joinClasses([Ot,p.ux.style(Rt)])}),theme:{button:p.ux.joinClasses([e,V({type:"tertiary",compact:!0,size:"small"})])},onAction:e=>{switch(e){case"provideFeedback":return i();case"reportOffensive":return t()}},onOpenChange:s},n.createElement(nt.v.Item,{key:"provideFeedback",textValue:"provideFeedback"},n.createElement(r.JO.AssistantFeedback,null),"Share your thoughts"),n.createElement(nt.v.Item,{key:"reportOffensive",textValue:"reportOffensive"},n.createElement(r.JO.Report,null),"Report as offensive"));var Pt=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};const Ut=n.forwardRef((function(e,t){var{children:i,style:r}=e,s=Pt(e,["children","style"]);return n.createElement("section",Object.assign({className:p.ux.style({display:"flex",flexDirection:"column",padding:p.ux.rem(G.qp),gap:p.ux.rem(G.x),background:"transparent",border:`0.5px solid ${A.BlueGray10}`,borderRadius:p.ux.rem(N.xB+N.fe),backgroundColor:l.XY.Surface.Primary.Default,color:l.XY.Content.Primary.Default},r)},s,{ref:t}),i)})),Bt=({className:e})=>n.createElement("div",Object.assign({role:"separator"},(0,h.Sh)(Nt,e))),Nt=p.ux.style({position:"relative",width:"100%",borderBottom:`0.5px solid ${A.BlueGray10}`}),Gt=({children:e,customStyle:t})=>n.createElement(ct.F.h1,{className:p.ux.style(zt,t)},e),zt={color:l.XY.Content.Secondary.Default,margin:0,fontWeight:400,fontSize:p.ux.rem(.75),lineHeight:p.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"};var Ft=i(55721),jt=i(28043),Vt=i(60797);function Mt(e,t=0){const i=function(e){return e.trim().replace(/\s+/g," ")}(e).split(" ").reduce(((e,i,n,r)=>Object.assign(Object.assign({},e),{head:n<r.length-t?e.head.concat(i):e.head,tail:n>=r.length-t?e.tail.concat(i):e.tail})),{head:[],tail:[]});return{head:i.head.join(" "),tail:i.tail.join(" ")}}const Dt=({dynamic:e=!1,maxTailWordsCount:t=0,children:i})=>e?n.createElement(Lt,{maxTailWordsCount:t},i):n.createElement(Ht,{maxTailWordsCount:t},i),Ht=({children:e,maxTailWordsCount:t=0})=>{const i=Mt(e,t);return n.createElement("div",{className:Kt},n.createElement("span",{className:$t},i.head,i.head.length&&i.tail.length?" ":null),i.tail.length?i.tail:null)},Lt=({children:e,maxTailWordsCount:t=0})=>{const[i,r]=n.useState(t),{onMount:s,rect:o}=ce.P.useRectWatcher(),a=n.useRef(null),l=n.useMemo((()=>Mt(e,i)),[i]),c=n.useMemo((()=>new le.xQ),[]);ce.P.useSubscriptionTo(n.useMemo((()=>c.pipe(Ft.p(100),jt.x(),me.b((e=>{r(e)})))),[]));const u=n.useMemo((()=>{return e=a.current,parseInt((null===(n=null===(i=null===(t=null==e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===i?void 0:i.getComputedStyle(e))||void 0===n?void 0:n.fontSize)||(null===(s=null===(r=null==e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===s?void 0:s.getComputedStyle(e.ownerDocument.body).fontSize)||Zt,10);var e,t,i,n,r,s}),[a.current]);return ce.P.useSubscriptionTo(n.useMemo((()=>o.pipe(Vt.oA,jt.x(),de.h((e=>Boolean(e.width&&e.height))),me.b((e=>{if(e.width<9*u)c.next(0);else if(a.current&&a.current.clientWidth<a.current.scrollWidth){const n=a.current.clientWidth/(e.width||1/0);i&&n<.4?c.next(i-1):n>.6&&i<t&&c.next(i+1)}})))),[o])),n.createElement("div",{className:Kt,ref:s},n.createElement("span",{className:$t,ref:a},l.head,l.head.length&&l.tail.length?" ":null),l.tail.length?l.tail:null)},Kt=p.ux.style({display:"flex",flexDirection:"row",whiteSpace:"nowrap",maxWidth:"100%",minWidth:0}),$t=p.ux.style({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",flexShrink:10}),Zt="16px"},37360:(e,t,i)=>{i.d(t,{n4:()=>o,gM:()=>s,sJ:()=>a,KL:()=>l});var n=i(27378),r=i(34530);function s(e){return n.useMemo((()=>({name:"maxSize",phase:"main",enabled:!0,requiresIfExists:["offset","preventOverflow","flip"],fn({state:t,name:i}){const n=(0,r.Z)(t),{x:s,y:o}=t.modifiersData.preventOverflow||{x:0,y:0},{width:a,height:l}=t.rects.popper,[c]=t.placement.split("-"),u="top"===c?"top":"bottom",d={width:a-n["left"===c?"left":"right"]-s,height:l-n[u]-o};t.modifiersData[i]=d,null==e||e(d)}})),[])}function o(){return n.useMemo((()=>({name:"forcePopperUpdateEffect",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}const a=o;function l(e,t){var i,r;const[s,o]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&o(t)}),[null===(i=e.current)||void 0===i?void 0:i.scrollWidth,null===(r=e.current)||void 0===r?void 0:r.clientWidth,t]),s}},33647:(e,t,i)=>{i.d(t,{Xd:()=>n,gy:()=>Ye,kF:()=>F,Bx:()=>Xe});var n,r=i(5114),s=i(57050),o=i(14601),a=i(32952),l=i(98403),c=i(60797),u=i(77176),d=i(93508),m=i(16118),p=i(85985),h=i(2844),g=i(28043),f=i(41398),y=i(67434),v=i(22232),x=i(38983),b=i(62074);!function(e){e.isTooltipOnboardingStep=function(e){return b.TG.StepName.isTooltipOnboardingStep(e.name)}}(n||(n={}));class S{constructor(e){var t,i,n,y,S,w;this._params=e,this._subs=new o.w,this._assistantElements=x.h.create({}),this._externalElements=x.h.create({}),this._hideAssistantTooltips=x.h.create(!1),this._nextCandidateStep=x.h.create(r.none),this.stepsSeenOnThisSession=x.h.create(new Set),this._uiActions=new a.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=x.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,i,n)=>(0,s.zG)(e,r.chain((e=>function(e,t,i,n){switch(e){case b.TG.StepName.initial:return(0,s.zG)(r.fromNullable(i[b.nF.initialPopupAnchor]),r.map((e=>({name:b.TG.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case b.TG.StepName.initialBTS:return(0,s.zG)(r.fromNullable(i[b.nF.initialBTSPopupAnchor]),r.map((e=>({name:b.TG.StepName.initialBTS,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case b.TG.StepName.rewrite:return(0,s.zG)(r.fromNullable(i[b.nF.rewriteTooltipAnchor]),r.map((e=>({name:b.TG.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case b.TG.StepName.prompts:return(0,s.zG)(r.fromNullable(t[b.ec.initialActionsList]),r.map((e=>({name:b.TG.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case b.TG.StepName.review:return(0,s.zG)(r.fromNullable(t[b.ec.followUpActionsList]),r.map((e=>({name:b.TG.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case b.TG.StepName.knowledgeHub:return(0,s.zG)(r.fromNullable(t[b.ec.promptInput]),r.map((e=>({name:b.TG.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case b.TG.StepName.references:return(0,s.zG)(r.fromNullable(t[b.ec.referencesList]),r.map((e=>({name:b.TG.StepName.references,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));case b.TG.StepName.history:return(0,s.zG)(r.fromNullable(t[b.ec.historyButton]),r.map((e=>({name:b.TG.StepName.history,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!n}))));default:return(0,v.L0)(e)}}(e,t,i,n)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this.activeStep,i=this._params.upstreamOnboardingState,n=this._params.session,y=this._params.textStats,S=this._params.forceDisabledOnboardingSteps,w=this._params.client,h.aj([n,i,y.pipe(C()),n.pipe(u.U(r.isSome),g.x(),f.M(i),u.U((([e,t])=>e?r.some(t):r.none)))]).pipe(u.U((([e,i,n,o])=>{if(r.isNone(e)){const e=!(0,s.zG)(t.get(),r.map((e=>e.name===b.TG.StepName.initial)),r.getOrElse(s.jv))&&!S.has(b.TG.StepName.initialBTS)&&!i.initialBTS[w].completed&&void 0===i.initialBTS[w].lastSeen,o=!S.has(b.TG.StepName.initial)&&!i.initial[w].completed&&void 0===i.initial[w].lastSeen&&!i.initialBTS[w].completed&&void 0===i.initialBTS[w].lastSeen,a=!S.has(b.TG.StepName.rewrite)&&!i.rewrite[w].completed&&(i.initial[w].completed||i.initialBTS[w].completed)&&n>=30;return e?r.some(b.TG.StepName.initialBTS):o?r.some(b.TG.StepName.initial):a?r.some(b.TG.StepName.rewrite):r.none}return b.Zq.Step.anyClientCompleted(i.prompts)||S.has(b.TG.StepName.prompts)?b.Zq.Step.anyClientCompleted(i.review)||S.has(b.TG.StepName.review)?b.Zq.Step.anyClientCompleted(i.history)||S.has(b.TG.StepName.history)||!k(o)?b.Zq.Step.anyClientCompleted(i.knowledgeHub)||S.has(b.TG.StepName.knowledgeHub)||!k(o)?b.Zq.Step.anyClientCompleted(i.references)||S.has(b.TG.StepName.references)||!k(o)?r.none:r.some(b.TG.StepName.references):r.some(b.TG.StepName.knowledgeHub):r.some(b.TG.StepName.history):r.some(b.TG.StepName.review):r.some(b.TG.StepName.prompts)})))).subscribe(l.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((i=>Object.assign(Object.assign({},i),{[e]:{reference:t,placement:e===b.ec.historyButton?"bottom":"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(l.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(l.wW(this._hideAssistantTooltips))),this._subs.add(this.activeStep.pipe(c.oA).subscribe((e=>this.stepsSeenOnThisSession.modify((t=>new Set([...t,e.name])))))),this._subs.add(this._params.session.pipe(u.U(r.isSome),d.O(!1),m.G(),p.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function k(e){return(0,s.zG)(e,r.fold(s.jv,(({prompts:e,review:t})=>{const i={prompts:b.Zq.Step.anyClientCompleted(e),review:b.Zq.Step.anyClientCompleted(t)};return Object.values(i).every(s.yR)})))}function C(){return(0,s.ls)(c.oA,u.U((e=>e.wordCount)),d.O(0),m.G(),y.R(((e,[t,i])=>(0,s.zG)(Math.abs(i-t),(t=>t<=2?e+t:e))),0),d.O(0),g.x())}var w,_=i(64015),I=i(66310),E=i(80544),A=i(79692),O=i(2834),R=i(24209),T=i(17343),P=i(40151),U=i(8125),B=i(83078);function N(e,t,i,n,r=1e3){return e.pipe(p.h(b.lG.is(b.lG.Kind.mount)),p.h((e=>i(e.step))),I.w((({step:e})=>t.pipe(u.U(B.contains(e)),I.w((e=>e?n.pipe(T.h(Date.now())):P.E)),p.h((e=>Date.now()-e>=r)),T.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e,stepsSeenOnThisSession:t})=>e.pipe(d.O(r.none),m.G(),u.U((([e,t])=>r.isNone(e)&&r.isSome(t)?r.some(t):r.none)),c.oA,f.M(t),I.w((([e,t])=>(0,s.zG)([t.has(b.TG.StepName.initial)?r.some(b.TG.StepName.initial):r.none,t.has(b.TG.StepName.initialBTS)?r.some(b.TG.StepName.initialBTS):r.none,b.wR.isRewriteOrQuickRewrite(e.value.mode)?r.some(b.TG.StepName.rewrite):r.none],_.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(u.U((0,s.ls)(r.chain(b.z_.toStarted),r.fold((()=>0),(e=>e.results.length)))),m.G(),p.h((([e,t])=>1===e&&2===t)),f.M(t),u.U((([e,t])=>(0,s.zG)(t,r.filter((e=>e===b.TG.StepName.review))))),c.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:i,onboardingUIActions:n})=>N(n,t.pipe(E.QV(A.E)),b.TG.StepName.isAssistantOnboardingStep,e.pipe(m.G(),p.h((([e,t])=>r.isSome(e)&&r.isNone(t)))),i),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(p.h(b.lG.is(b.lG.Kind.close)),u.U((e=>(e.step===b.TG.StepName.initial&&t.trackOnboardingPopupSkip(),e.step===b.TG.StepName.initialBTS&&t.trackBTSOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(p.h(b.lG.is(b.lG.Kind.tryItOut)),u.U((e=>(e.step===b.TG.StepName.initial&&t.trackOnboardingPopupNext(),e.step===b.TG.StepName.initialBTS&&t.trackBTSOnboardingPopupNext(),e.step)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(p.h(b.ix.isResultAction),p.h((e=>b.x4.isStandardCompletedResult(e.result))),u.U((()=>b.TG.StepName.review))),e.completeHistoryStepOnHistoryRestore=({assistantUIActions:e})=>e.pipe(p.h(b.ix.is(b.ix.Kind.restoreHistoryButtonClick)),u.U((()=>b.TG.StepName.history))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(p.h((0,U.Kg)(b.ix.is(b.ix.Kind.actionBrickClick),b.ix.is(b.ix.Kind.promptSubmitButtonClick),b.ix.is(b.ix.Kind.promptFieldKeyPressEnter),b.ix.is(b.ix.Kind.toolbarVoiceButtonClick),b.ix.is(b.ix.Kind.setVoiceButtonClick),b.ix.is(b.ix.Kind.openFeedbackFormButtonClick))),f.M(t),u.U((([e,t])=>(0,s.zG)(t,r.filter(b.TG.StepName.isAssistantOnboardingStep)))),c.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:i,visibleForMs:n})=>N(e,t,(e=>e===b.TG.StepName.initial||e===b.TG.StepName.initialBTS),i,n);const t=e=>t=>i=>t(i).pipe(O.b((t=>{var n;return null===(n=i.logger)||void 0===n?void 0:n.debug(`${e} - step to complete: ${t}`)})));function i(e){return e.pipe(y.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?r.none:r.some(t)})),{seen:new Set,step:r.none}),u.U((e=>e.step)),c.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("user restored history")(e.completeHistoryStepOnHistoryRestore),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return R.T(...e.map((e=>e(t)))).pipe(i)}}(w||(w={}));var G=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class z extends S{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function F(e){var{assistantUIActions:t,trackingService:i,completeOnboardingStep:n,stepCompletionSources:s,disposed:a,logger:l}=e,c=G(e,["assistantUIActions","trackingService","completeOnboardingStep","stepCompletionSources","disposed","logger"]);const u=new o.w,d=new z(Object.assign(Object.assign({},c),{assistantMountActions:t.pipe(p.h(b.ix.is(b.ix.Kind.mount))),assistantUnmountActions:t.pipe(p.h(b.ix.is(b.ix.Kind.unmount)))}),(()=>u.unsubscribe()));return u.add(w.extractStepsToComplete(null!=s?s:w.defaultCompletionSources,{onboardingUIActions:d.uiActions,assistantUIActions:t,activeStep:d.activeStep.view(r.map((e=>e.name))),stepsSeenOnThisSession:d.stepsSeenOnThisSession,session:c.session,trackingService:i,disposed:a,logger:l}).subscribe((e=>{n(e)}))),u.add(function(e,t){return e.pipe(p.h(b.lG.is(b.lG.Kind.mount)),O.b((e=>{switch(e.step){case b.TG.StepName.initial:return t.trackOnboardingPopupView();case b.TG.StepName.initialBTS:return t.trackBTSOnboardingPopupView();case b.TG.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case b.TG.StepName.review:return t.trackOnboardingReviewTooltipView();case b.TG.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case b.TG.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();case b.TG.StepName.references:return t.trackOnboardingReferencesTooltipView();case b.TG.StepName.history:return t.trackOnboardingHistoryTooltipView();default:return(0,v.L0)(e.step)}})))}(d.uiActions,i).subscribe()),d}var j=i(56370),V=i(27378),M=i(13578),D=i(90845),H=i(18313),L=i(74204),K=i(62172),$=i(88392),Z=i(89894),W=i(12187),q=i(37360);const Y=V.forwardRef((function({placement:e,style:t,arrowColor:i},n){return V.createElement("div",{ref:n,style:{width:33}},V.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${Q(e)}deg)`.trimStart()}),X(e))},V.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:i||"white"})))}));function Q(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function X(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const J=(0,W.xb)((({reference:e,placement:t,offset:i,boundaryAreaPadding:n,className:r,arrowColor:s,children:o})=>{const[a,l]=V.useState(null),[c,u]=V.useState(null),d=(0,q.sJ)(),{styles:m,attributes:p,state:h}=(0,L.D)(e,a,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=i?i:0)]}},{name:"arrow",options:{element:c,padding:12}},{name:"preventOverflow",options:{padding:null!=n?n:5}},d]});return V.createElement("div",Object.assign({dir:"ltr",ref:l,style:m.popper},p.popper,(0,W.Sh)(te,r)),V.createElement(Y,{ref:u,style:m.arrow,placement:null==h?void 0:h.placement,arrowColor:s}),o)})),ee=e=>Z.ux.color(K.BlueGray40).toRGBA().fade(e).toString(),te=Z.ux.style({filter:`drop-shadow(0px 0px 0.5px ${K.BlueGray40}) drop-shadow(0px 0px 2px ${ee(.5)}) drop-shadow(0px 1px 6px ${ee(.25)})`,borderRadius:Z.ux.rem($.xB+$.fe)});var ie=i(9546);const ne=({className:e})=>V.createElement("span",Object.assign({},(0,W.Sh)(re,e)),"New"),re=Z.ux.style({color:M.S5.Content.OnPrimary.Default,fontWeight:700,fontSize:Z.ux.rem(.75),lineHeight:Z.ux.rem(1),justifyContent:"center",alignItems:"center",background:"linear-gradient(226.37deg, #BBD86D 0%, #41D9B5 100%)",borderRadius:Z.ux.rem($.HP),padding:`${Z.ux.rem(ie.yC)} ${Z.ux.rem(ie.x)}`,textTransform:"uppercase",width:"fit-content",cursor:"default"});var se=i(13004);const oe="tryItOutBtn",ae="skipBtn",le=Z.ux.rem($.xB+$.fe),ce={width:Z.ux.rem(25.875),background:M.XY.Surface.Primary.Default},ue={display:"flex",alignItems:"center",justifyContent:"center",height:Z.ux.rem(14.5625),width:"100%",backgroundColor:"#00231F",backgroundImage:"url(https://assets.grammarly.com/icons/v1/cheetah-onboarding.2x.png)",backgroundPosition:`top ${Z.ux.rem(1)} left 0`,backgroundSize:"100%",backgroundRepeat:"no-repeat",borderTopLeftRadius:le,borderTopRightRadius:le},de={display:"flex",flexDirection:"column",gap:Z.ux.rem(ie.F2),padding:`${Z.ux.rem(ie.mh)} ${Z.ux.rem(ie.x0)} ${Z.ux.rem(ie.sD)} ${Z.ux.rem(ie.sD)}`,color:M.XY.Content.Primary.Default},me={display:"flex",flexDirection:"row",alignItems:"center",gap:Z.ux.rem(ie.x),fontWeight:"bold",fontSize:Z.ux.rem(1),lineHeight:Z.ux.rem(1.5)},pe={fontSize:Z.ux.rem(.875),lineHeight:Z.ux.rem(1.375)},he={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:le,borderBottomRightRadius:le,padding:`${Z.ux.rem(ie.qp)} ${Z.ux.rem(ie.sD)} ${Z.ux.rem(ie.qp)} ${Z.ux.rem(ie.sD)}`,backgroundColor:M.XY.Surface.Secondary.Default,color:M.XY.Content.Secondary.Default,fontSize:Z.ux.rem(.875),lineHeight:Z.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},ge={width:Z.ux.rem(12),lineHeight:Z.ux.rem(1.25)},fe=Object.assign({marginRight:Z.ux.rem(.5)},se.Es.buttonOverrideSpecificity({fontSize:Z.ux.rem(.875)},ae)),ye=se.Es.buttonOverrideSpecificity({fontSize:Z.ux.rem(.875),fontWeight:"bold"},oe),ve={position:"absolute",top:Z.ux.rem(ie.x),right:Z.ux.rem(ie.x)},xe=Z.ux.style(ce),be=Z.ux.style(ue),Se=Z.ux.style(de),ke=Z.ux.style(me),Ce=Z.ux.style(pe),we=Z.ux.style(he),_e=Z.ux.style(ge),Ie=Z.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),Ee=Z.ux.joinClasses([ae,Z.ux.style(fe)]),Ae=Z.ux.joinClasses([oe,Z.ux.style(ye)]),Oe=Z.ux.style({display:"inline"}),Re=Z.ux.style(ve),Te=(e=b.TG.StepName.initial)=>j.UI.Grid.make((({slots:t,view:i,notify:n})=>{const{ref:r,onMount:s}=D.P.useElWatcher(),o=V.useMemo((()=>r.pipe(E.QV(A.E),c.oA,O.b((t=>n({kind:b.lG.Kind.mount,step:e,element:t})())))),[r]);return D.P.useSubscriptionTo(o),V.createElement(J,{className:xe,reference:i("reference"),placement:i("placement"),offset:i("offset"),boundaryAreaPadding:i("boundaryAreaPadding"),arrowColor:M.XY.Surface.Secondary.Default},V.createElement("div",{ref:s},t.content),V.createElement("div",{className:we},V.createElement("div",{className:_e},t.footerText),V.createElement("div",{className:Ie},V.createElement(H.zx.Tertiary,{onClick:n({kind:b.lG.Kind.close,step:e}),className:Ee,name:"skip"},"Skip"),V.createElement(H.zx.Primary,{onClick:n({kind:b.lG.Kind.tryItOut,step:e}),className:Ae,name:"tryItOut"},"Try it out"))))})),Pe=j.UI.Node.make((({notify:e})=>V.createElement(V.Fragment,null,V.createElement(H.xx,{onClick:e({kind:b.lG.Kind.close,step:b.TG.StepName.initial}),name:"onboardingClose",size:"medium",className:Re}),V.createElement("div",{className:be},V.createElement(H.rN,null)),V.createElement("div",{className:Se},V.createElement("div",{className:ke},V.createElement("div",null,"Write faster with GrammarlyGO")),V.createElement("div",{className:Ce},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips."))))),Ue=j.UI.Node.make((()=>V.createElement(V.Fragment,null,"If you use GrammarlyGO,"," ",V.createElement(H.dL,{href:"https://grammarly.com/terms",className:Oe},"additional terms")," ","apply."))),Be=j.UI.Knot.make(Te(),{content:Pe,footerText:Ue}),Ne=j.UI.Node.make((({notify:e})=>V.createElement(V.Fragment,null,V.createElement(H.qq,{onClick:e({kind:b.lG.Kind.close,step:b.TG.StepName.initial}),name:"onboardingClose",size:"medium",className:Re}),V.createElement("div",{className:Se},V.createElement(ne,null),V.createElement("div",{className:ke},V.createElement("div",null,"Write faster with GrammarlyGO")),V.createElement("div",{className:Ce},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips."))))),Ge=j.UI.Knot.make(Te(),{content:Ne,footerText:Ue}),ze=j.UI.Node.make((({notify:e})=>V.createElement(V.Fragment,null,V.createElement(H.qq,{onClick:e({kind:b.lG.Kind.close,step:b.TG.StepName.initialBTS}),name:"onboardingClose",size:"medium",className:Re}),V.createElement("div",{className:Se},V.createElement(ne,null),V.createElement("div",{className:ke},V.createElement("div",null,"Write better papers faster (for free!)")),V.createElement("div",{className:Ce},"Start with a brainstorm, then get instant feedback, revisions, and citations to ace your assignment."))))),Fe=j.UI.Knot.make(Te(b.TG.StepName.initialBTS),{content:ze,footerText:j.UI.Node.empty}),je=e=>j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA)),Ve=e=>{const t=je(e);return j.Z.composeKnot({root:t,content:t,footerText:t})},Me=e=>{const t=je(e);return j.Z.composeKnot({root:t,content:t,footerText:t})};function De(e){switch(e){case b.TG.StepName.knowledgeHub:return Z.ux.rem(16);case b.TG.StepName.references:return Z.ux.rem(17.8);default:return Z.ux.rem(13.75)}}const He=(0,W.xb)((({reference:e,placement:t,offset:i,boundaryAreaPadding:n,children:r,name:s})=>V.createElement(H.J2,{reference:e,placement:t,offset:i,boundaryAreaPadding:n,theme:{bgColor:K.Green80,fgColor:M.S5.Content.Primary.Default,padding:Z.ux.rem(ie.mh),width:De(s)}},r))),Le={[b.TG.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. You’ll get ${Number(e).toLocaleString()} each month.`:"Choose a suggested prompt, or type your own to get started."},[b.TG.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Don’t forget to check for any inaccuracies. "},[b.TG.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[b.TG.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."},[b.TG.StepName.references]:{title:"GrammarlyGO now incorporates your organizational knowledge",description:"Review the references for accuracy and relevance and regenerate the response without any references that seem irrelevant or outdated."},[b.TG.StepName.history]:{title:"Return to recent history",description:"Pick up where you left off with your latest prompts."}},Ke=j.UI.Node.make((({state:e,view:t,notify:i})=>{const{ref:n,onMount:r}=D.P.useElWatcher(),s=V.useMemo((()=>n.pipe(c.oA,f.M(t("name")),E.QV(A.E),u.U((([e,t])=>({element:e,stepName:t}))),O.b((({element:e,stepName:t})=>i({kind:b.lG.Kind.mount,step:t,element:e})())))),[n]);return D.P.useSubscriptionTo(s),V.createElement(He,{name:t("name"),reference:t("reference"),placement:t("placement"),offset:t("offset"),boundaryAreaPadding:t("boundaryAreaPadding")},e.pipe(u.U((e=>V.createElement(V.Fragment,null,V.createElement(H.xx,{onClick:i({kind:b.lG.Kind.close,step:e.name}),name:"tooltipClose",className:We,size:"small"}),V.createElement("div",{className:Ze},Le[e.name].title),V.createElement("div",{ref:r},e.name===b.TG.StepName.prompts?Le[e.name].description(e.promptsAllocated):Le[e.name].description))))))})),$e=j.UI.Union.asOption(Ke),Ze=Z.ux.style({fontWeight:700}),We=Z.ux.style({position:"absolute",top:Z.ux.rem(ie.x),right:Z.ux.rem(ie.x)});function qe(e){return j.Z.composeOption(function(e){return j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(c.oA,p.h(n.isTooltipOnboardingStep),f.M(e.promptsAllocated.pipe(u.U(r.toUndefined))),u.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(u.U(r.filter(n.isTooltipOnboardingStep)))))}const Ye=j.UI.Union.make("kind",{none:j.UI.Node.empty,initial:Be,initialBTS:Fe,tooltip:$e});j.UI.Union.make("kind",{none:j.UI.Node.empty,initial:Ge,initialBTS:Fe,tooltip:$e});var Qe=i(76974);function Xe(e){return j.Z.composeUnion({none:()=>Qe.of(null),initial:Ve(e),initialBTS:Me(e),tooltip:qe(e)},(()=>e.activeStep.view(Je).view((e=>({kind:e})))))}function Je(e){return(0,s.zG)(e,r.filter((e=>e.show)),r.fold((()=>"none"),(e=>{switch(e.name){case b.TG.StepName.initial:return"initial";case b.TG.StepName.initialBTS:return"initialBTS";case b.TG.StepName.prompts:case b.TG.StepName.review:case b.TG.StepName.rewrite:case b.TG.StepName.knowledgeHub:case b.TG.StepName.references:case b.TG.StepName.history:return"tooltip";default:return(0,v.L0)(e.name)}})))}},13004:(e,t,i)=>{i.d(t,{Es:()=>n,BO:()=>s,eG:()=>Q,E9:()=>h,Lm:()=>Y,ap:()=>m,l:()=>D,$d:()=>G,mA:()=>L,vY:()=>u,$Q:()=>c,JY:()=>U,C7:()=>g,Re:()=>d,xs:()=>H,uj:()=>A,ni:()=>J,m:()=>O,NN:()=>f,tt:()=>q,Ly:()=>ge,Av:()=>he,HL:()=>fe,E:()=>p,Bk:()=>me,DO:()=>M,lA:()=>N,bB:()=>ve,li:()=>xe,Tc:()=>ye});var n={};i.r(n),i.d(n,{baseButtonContentOverrideSpecificity:()=>oe,buttonOverrideSpecificity:()=>le,cheetahButtonContentOverrideSpecificity:()=>ae,heightAndMinHeightRems:()=>ie,iconSizeRems:()=>ne,repeatClassSelector:()=>re,specificity:()=>se,widthAndMinWidthRems:()=>te});var r=i(62172);const s=Object.assign(Object.assign({},r),{BrandGreen60:"#018374",BrandGreen80:"#017467",BorderBaseSubduedColor:"#CDD1DC",TextBaseSubduedColor:"#646B81",TextBaseDefault:"#161719"});var o=i(31699),a=i(77176);function l(e){const t=function(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e,t=3){if(e&&t>0){const i=function(e){const t=(null===(r=null===(n=(i=e).ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getComputedStyle(i))||null;var i,n,r;return t?"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX:null}(e);return i?e:null===i?null:c(null==e?void 0:e.parentElement,t-1)}return null}function u(e){var t,i;return null===(i=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===i?void 0:i.activeElement}function d(e){return e instanceof HTMLElement}const m=["b","i"];function p(e,t=m){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,o.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}}:{dangerouslySetInnerHTML:e.pipe(a.U((e=>({__html:(0,o.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}))))}}var h;function g(e=document){return{top:0,left:0,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function f(e,t){return i=>{const n=function(e,t){const i=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,n=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return Object.assign(Object.assign({},e),{left:i,top:n})}({left:e.left+i.x,top:e.top+i.y,width:e.width,height:e.height},t);return{x:n.left-e.left,y:n.top-e.top}}}!function(e){e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(h||(h={}));var y,v=i(57050),x=i(85985),b=i(28043),S=i(66310),k=i(49708),C=i(2834),w=i(2768),_=i(55721),I=i(39719),E=i(67434);function A(){return(0,v.ls)(x.h((e=>!!e)),b.x(),S.w((e=>k.R(e,"mousedown").pipe(x.h((e=>!e.button)),C.b((e=>e.preventDefault())),a.U((t=>({element:e,startPos:{x:t.clientX,y:t.clientY}}))),S.w((e=>k.R(l(e.element),"mousemove").pipe(w.R(k.R(l(e.element),"mouseup",{capture:!0})),_.p(10),a.U((({clientX:t,clientY:i})=>({kind:"dragInProgress",element:e.element,startPos:e.startPos,delta:{x:t-e.startPos.x,y:i-e.startPos.y}}))),I.l({kind:"dragDone"}))))))),E.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),y.create()))}function O(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}!function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(y||(y={}));var R=i(5114),T=i(45701),P=i(64015);function U(){return T.contramap((({matchScore:e})=>e))(T.ordNumber)}function B(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}function N(e,t,i){const n=B(e),r=[...B(t),...(0,v.zG)(i,P.tS((e=>B(e))))],s=n.map((()=>null));let o=0;for(const e of r){if(o>=n.length)break;e.toLowerCase().includes(n[o].toLowerCase())&&(s[o]=0,++o)}return s.includes(null)?R.none:R.some(s.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}const G=()=>e=>e;var z=i(69243),F=i(8709),j=i(36991);const V=z.readonly(z.type({ops:z.readonlyArray(z.union([z.type({insert:z.readonly(z.string)}),z.type({retain:z.readonly(z.number)}),z.type({delete:z.readonly(z.number)})]))}));function M(e){return(0,v.zG)(e,R.fromPredicate(V.is),R.map((e=>new F.i([...e.ops]))))}function D(e,t){return e.reduce(((e,t)=>(j.s.isInsertString(t)?(e.text=`${e.text.substring(0,e.index)}${t.insert}${e.text.substring(e.index)}`,e.index+=t.insert.length):j.s.isDelete(t)?e.text=`${e.text.substring(0,e.index)}${e.text.substring(e.index+t.delete)}`:j.s.isRetain(t)?e.index+=t.retain:function(e){var t;return j.s.isInsertEmbed(e)&&!0===(null===(t=e.insert)||void 0===t?void 0:t.linebreak)}(t)&&(e.text=`${e.text.substring(0,e.index)}\n${e.text.substring(e.index)}`,e.index+=1),e)),{text:t,index:0}).text}function H(e){return Number.isInteger(e)&&e>=0&&e<10}function L(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}var K=i(95195),$=i(62965),Z=i(50685),W=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function q(e,t,i,n,r){return W(this,void 0,void 0,(function*(){try{const s=yield t();K.isLeft(s)?(null==i||i.error("runTaskEither() - error running task",{taskName:e,result:s}),null==r||r(s.left)):(null==i||i.debug("runTaskEither() - task successful",{taskName:e,result:s.right}),null==n||n(s.right))}catch(t){null==i||i.error("runTaskEither() - promise rejection running task",Z.jI.isErrorLike(t)?t:new Error(String(t)),{taskName:e})}}))}const Y={URI:$.ov,map:$.dO.map,ap:(e,t)=>(0,v.zG)(e,$.ap(t))};var Q;!function(e){e.set=function(e,t){return i=>Object.assign(Object.assign({},i),{[e]:t})}}(Q||(Q={}));var X=i(48044);function J(e){return(t,i)=>n=>(0,v.zG)(n,X.cq(e)(t,(0,v.ls)(R.some,i)),R.getOrElse((()=>(0,v.zG)(n,X.ZQ(e)(t,i(R.none))))))}var ee=i(89894);function te(e){return{width:ee.ux.rem(e),minWidth:ee.ux.rem(e)}}function ie(e){return{height:ee.ux.rem(e),minHeight:ee.ux.rem(e)}}function ne(e,t){return Object.assign(Object.assign({},te(e)),ie(null!=t?t:e))}function re(e,t){return`.${e}`.repeat(t)}function se(e,t,i){return{$nest:{[`&${re(t,i)}`]:e}}}const oe=6,ae=oe+1;function le(e,t){return se(e,t,ae)}const ce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function ue(e,t,i,n,r){let s,o,a,l,c,u,d,m,p,h,g,f,y;for(;r>=64;){for(s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],u=t[5],d=t[6],m=t[7],h=0;h<16;h++)g=n+4*h,e[h]=(255&i[g])<<24|(255&i[g+1])<<16|(255&i[g+2])<<8|255&i[g+3];for(h=16;h<64;h++)p=e[h-2],f=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,p=e[h-15],y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,e[h]=(f+e[h-7]|0)+(y+e[h-16]|0);for(h=0;h<64;h++)f=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&d)|0)+(m+(ce[h]+e[h]|0)|0)|0,y=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0,m=d,d=u,u=c,c=l+f|0,l=a,a=o,o=s,s=f+y|0;t[0]+=s,t[1]+=o,t[2]+=a,t[3]+=l,t[4]+=c,t[5]+=u,t[6]+=d,t[7]+=m,n+=64,r-=64}return n}class de{constructor(){this.digestLength=32,this.blockSize=64,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}reset(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this}clean(){for(let e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(let e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()}update(e,t=e.length){if(this.finished)throw new Error("SHA256: can't update because hash was finished.");let i=0;if(this.bytesHashed+=t,this.bufferLength>0){for(;this.bufferLength<64&&t>0;)this.buffer[this.bufferLength++]=e[i++],t--;64===this.bufferLength&&(ue(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(t>=64&&(i=ue(this.temp,this.state,e,i,t),t%=64);t>0;)this.buffer[this.bufferLength++]=e[i++],t--;return this}finish(e){if(!this.finished){const e=this.bytesHashed,t=this.bufferLength,i=e/536870912|0,n=e<<3,r=e%64<56?64:128;this.buffer[t]=128;for(let e=t+1;e<r-8;e++)this.buffer[e]=0;this.buffer[r-8]=i>>>24&255,this.buffer[r-7]=i>>>16&255,this.buffer[r-6]=i>>>8&255,this.buffer[r-5]=i>>>0&255,this.buffer[r-4]=n>>>24&255,this.buffer[r-3]=n>>>16&255,this.buffer[r-2]=n>>>8&255,this.buffer[r-1]=n>>>0&255,ue(this.temp,this.state,this.buffer,0,r),this.finished=!0}for(let t=0;t<8;t++)e[4*t+0]=this.state[t]>>>24&255,e[4*t+1]=this.state[t]>>>16&255,e[4*t+2]=this.state[t]>>>8&255,e[4*t+3]=this.state[t]>>>0&255;return this}digest(){const e=new Uint8Array(this.digestLength);return this.finish(e),e}_saveState(e){for(let t=0;t<this.state.length;t++)e[t]=this.state[t]}_restoreState(e,t){for(let t=0;t<this.state.length;t++)this.state[t]=e[t];this.bytesHashed=t,this.finished=!1,this.bufferLength=0}}function me(e){const t=(new de).update(e),i=t.digest();return t.clean(),i}new Uint8Array(32);var pe=function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};function he(e,t){return pe(this,void 0,void 0,(function*(){const i=e=>pe(this,void 0,void 0,(function*(){if(e){return(yield Promise.all(Object.keys(e).map((i=>Promise.all(e[i].map((e=>t(e)))).then((e=>({peopleKey:i,sanitizedPeopleValues:e}))))))).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.peopleKey]:t.sanitizedPeopleValues})),{})}}));return void 0===e?Promise.resolve(e):(e.title?t(e.title):Promise.resolve(void 0)).then((n=>pe(this,void 0,void 0,(function*(){return e.items?{sanitizedTitle:n,sanitizedItems:yield Promise.all(e.items.map((e=>t(e.text).then((i=>e.title?t(e.title).then((e=>({sanitizedItemText:i,sanitizedItemTitle:e}))):{sanitizedItemText:i,sanitizedItemTitle:void 0})).then((({sanitizedItemText:t,sanitizedItemTitle:n})=>pe(this,void 0,void 0,(function*(){return{text:t,title:n,people:yield i(e.people)}})))))))}:{sanitizedTitle:n,sanitizedItems:void 0}})))).then((({sanitizedTitle:t,sanitizedItems:n})=>pe(this,void 0,void 0,(function*(){return{title:t,items:n,people:yield i(e.people)}}))))}))}function ge(e,t){return pe(this,void 0,void 0,(function*(){return Promise.all(e.map((e=>t(e.value).then((t=>Object.assign(Object.assign({},e),{value:t}))))))}))}function fe(e,t){return pe(this,void 0,void 0,(function*(){return void 0===e?Promise.resolve(e):t(e.text).then((t=>Object.assign(Object.assign({},e),{text:t})))}))}function ye(e,t){return pe(this,void 0,void 0,(function*(){return void 0===e.context.intent?Promise.resolve(e):t(e.context.intent).then((t=>Object.assign(Object.assign({},e),{context:Object.assign(Object.assign({},e.context),{intent:t})})))}))}function ve(e,t){return pe(this,void 0,void 0,(function*(){return t(e.token).then((t=>Object.assign(Object.assign({},e),{token:t})))}))}function xe(e,t){return pe(this,void 0,void 0,(function*(){const i=e.text;return(i?t(i.plain).then((e=>pe(this,void 0,void 0,(function*(){return{unsanitizedTextPlain:e,unsanitizedTextDelta:yield be(i.delta,t)}})))):Promise.resolve({unsanitizedTextPlain:void 0,unsanitizedTextDelta:new F.i})).then((({unsanitizedTextPlain:i,unsanitizedTextDelta:n})=>pe(this,void 0,void 0,(function*(){const r=e.withVoiceText;return r?{unsanitizedTextPlain:i,unsanitizedTextDelta:n,unsanitizedWithVoiceTextPlain:yield t(r.plain),unsanitizedWithVoiceTextDelta:yield be(r.delta,t)}:{unsanitizedTextPlain:i,unsanitizedTextDelta:n,unsanitizedWithVoiceTextPlain:void 0,unsanitizedWithVoiceTextDelta:new F.i}})))).then((({unsanitizedTextPlain:t,unsanitizedTextDelta:i,unsanitizedWithVoiceTextPlain:n,unsanitizedWithVoiceTextDelta:r})=>Object.assign(Object.assign({},e),{text:e.text?Object.assign(Object.assign({},e.text),{plain:null!=t?t:e.text.plain,delta:i}):void 0,withVoiceText:e.withVoiceText?Object.assign(Object.assign({},e.withVoiceText),{plain:null!=n?n:e.withVoiceText.plain,delta:r}):void 0})))}))}function be(e,t){return pe(this,void 0,void 0,(function*(){const i=yield(0,v.zG)(e,M,R.map((e=>Promise.all(e.ops.map((e=>j.s.isInsertString(e)?t(e.insert).then((t=>Object.assign(Object.assign({},e),{insert:t}))):e))))),R.getOrElse((()=>Promise.resolve([]))));return new F.i([...i])}))}},71761:(e,t,i)=>{i.r(t),i.d(t,{ActionArg:()=>f,ActionArgDef:()=>y,ActionArgDefRadioButtonGroup:()=>S,ActionArgDefRadioButtonGroupHint:()=>b,ActionArgDefString:()=>x,ActionArgDefStringHint:()=>v,ActionDef:()=>C,ActionDefGeneratesTextType:()=>k,ActionInfo:()=>w,AvailableVoiceProfile:()=>A,AvailableVoiceProfileSection:()=>E,AvailableVoiceProfileSectionTag:()=>I,AvailableVoiceProfileSectionTagState:()=>_,AvailableVoiceProfiles:()=>O,ClientMessage:()=>c,ClientMessageImplementations:()=>Ae,Context:()=>R,DocumentOverview:()=>T,Error:()=>U,ErrorKind:()=>P,GeneratedText:()=>B,GenerationMode:()=>N,Message:()=>G,MessageAction:()=>j,MessageChunk:()=>q,MessageError:()=>$,MessageGetContext:()=>z,MessageGetHistory:()=>K,MessageGetUserState:()=>H,MessageInterrupt:()=>D,MessageInvalidateContext:()=>F,MessageResult:()=>Q,MessageResultChangesSummary:()=>Y,MessageSearchReferences:()=>L,MessageSearchReferencesResult:()=>W,MessageSetContext:()=>Z,MessageSetHistory:()=>ne,MessageSetHistoryCard:()=>ie,MessageSetHistoryCardTitle:()=>J,MessageSetHistoryCardTitleAction:()=>te,MessageSetHistoryCardTitleUserPrompt:()=>ee,MessageSetUserState:()=>X,MessageSetVoice:()=>V,MessageSetVoiceProfile:()=>M,Metadata:()=>re,OuterContext:()=>oe,OuterContextItem:()=>se,PreviousText:()=>ae,PreviousTextHistory:()=>ce,PreviousTextRegular:()=>le,PreviousTextWriterExpert:()=>ue,ProtocolMessage:()=>u,Reference:()=>de,ReferencePrivacyLevel:()=>me,ReferencePrivacyLevelPublic:()=>pe,ReferencePrivacyLevelRestricted:()=>he,Root:()=>g,ServerMessage:()=>d,ServerMessageImplementations:()=>Oe,SpecialView:()=>ge,SpecialViewAiUsageAlert:()=>fe,StartMessage:()=>m,StartedMessage:()=>p,Style:()=>ye,Text:()=>ve,TextLike:()=>h,TextRange:()=>xe,Toggle:()=>be,UrlReference:()=>Se,Usage:()=>ke,UserState:()=>we,UserStateSettings:()=>Ce,Voice:()=>_e,VoiceProfileSettings:()=>Ee,VoiceProfileSettingsMyVoiceIsEnabledByDefault:()=>Ie,encoderSchemable:()=>Ne,extend:()=>Be,interpreter:()=>Ue,make:()=>Pe});var n=i(59312),r=i(50687),s=i(83257),o=i(18164),a=i(73915),l=i(57050),c=Pe((function(e){return Te(u(e),e.struct({}))(e)})),u=Pe((function(e){return e.struct({id:e.number})})),d=Pe((function(e){return Te(u(e),e.struct({}))(e)})),m=Pe((function(e){return e.intersect(e.partial({docIdIsTransient:e.boolean}))(e.struct({}))})),p=Pe((function(e){return e.struct({cheetahState:we(e)})})),h=Pe((function(e){return e.struct({plain:e.sensitiveString,delta:e.sensitiveDelta})})),g=Pe((function(e){return G(e)})),f=Pe((function(e){return e.struct({name:e.string,value:e.sensitiveString})})),y=Pe((function(e){var t;return e.sum("valueType")(((t={}).string=x(e),t.radioButtonGroup=S(e),t))})),v=Pe((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),x=Pe((function(e){return e.intersect(e.partial({hint:v(e)}))(e.struct({valueType:e.literal("string"),label:e.string,name:e.string}))})),b=Pe((function(e){return e.struct({header:e.string,text:e.readonly(e.array(e.string))})})),S=Pe((function(e){return e.intersect(e.partial({hint:b(e)}))(e.struct({valueType:e.literal("radioButtonGroup"),label:e.string,name:e.string,radioButtonGroupValues:e.readonly(e.array(e.string))}))})),k=Re(r.cX),C=Pe((function(e){return e.intersect(e.partial({generatesTextType:k(e)}))(e.struct({id:e.string,iconUrl:e.string,group:e.string,label:e.string,searchTags:e.readonly(e.array(e.string)),args:e.readonly(e.array(y(e)))}))})),w=Pe((function(e){return e.intersect(e.partial({useReferences:e.readonly(e.array(Se(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.struct({contextId:e.string,triggerContextId:e.string,actionId:e.string,args:e.readonly(e.array(f(e)))})))})),_=Re(r.ES),I=Pe((function(e){return e.struct({name:e.string,state:_(e)})})),E=Pe((function(e){return e.struct({name:e.string,tags:e.readonly(e.array(I(e)))})})),A=Pe((function(e){return e.struct({name:e.string,summary:e.string,selected:e.boolean,sections:e.readonly(e.array(E(e)))})})),O=Pe((function(e){return e.readonly(e.array(A(e)))})),R=Pe((function(e){return e.intersect(e.partial({voiceProfileSettings:Ee(e)}))(e.intersect(e.partial({intent:e.sensitiveString}))(e.intersect(e.partial({documentOverview:T(e)}))(e.intersect(e.partial({specialView:ge(e)}))(e.intersect(e.partial({textScope:xe(e)}))(e.intersect(e.partial({metadata:re(e)}))(e.struct({id:e.string,voice:_e(e),availableActions:e.readonly(e.array(C(e))),parentAction:w(e),stateBlob:e.string,promptAction:C(e),quickRewriteAction:C(e)})))))))})),T=Pe((function(e){return e.struct({title:e.string,summary:e.string})})),P=Re(r.oS),U=Pe((function(e){return e.struct({kind:P(e),title:e.string,text:e.string})})),B=Pe((function(e){return Te(h(e),e.struct({plain:e.sensitiveString,interrupted:e.boolean,renderDiff:e.boolean,delta:e.sensitiveDelta}))(e)})),N=Re(r.s2),G=Pe((function(e){var t;return Te(u(e),e.sum("action")(((t={})["cheetah:getContext"]=z(e),t["cheetah:invalidateContext"]=F(e),t["cheetah:action"]=j(e),t["cheetah:setVoice"]=V(e),t["cheetah:setVoiceProfile"]=M(e),t["cheetah:interrupt"]=D(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=L(e),t["cheetah:getHistory"]=K(e),t["cheetah:error"]=$(e),t["cheetah:setContext"]=Z(e),t["cheetah:searchReferencesResult"]=W(e),t["cheetah:chunk"]=q(e),t["cheetah:result"]=Q(e),t["cheetah:setUserState"]=X(e),t["cheetah:setHistory"]=ne(e),t)))(e)})),z=Pe((function(e){return Te(c(e),e.intersect(e.partial({outerContext:oe(e)}))(e.intersect(e.partial({selectedRange:xe(e)}))(e.intersect(e.partial({stateBlob:e.string}))(e.intersect(e.partial({previousText:ae(e)}))(e.intersect(e.partial({metadata:re(e)}))(e.struct({action:e.literal("cheetah:getContext"),rev:e.number,generationMode:N(e)})))))))(e)})),F=Pe((function(e){return Te(d(e),e.struct({action:e.literal("cheetah:invalidateContext")}))(e)})),j=Pe((function(e){return Te(c(e),e.intersect(e.partial({useReferences:e.readonly(e.array(Se(e)))}))(e.intersect(e.partial({omitReferenceIds:e.readonly(e.array(e.string))}))(e.intersect(e.partial({previousText:ae(e)}))(e.intersect(e.partial({metadata:re(e)}))(e.struct({action:e.literal("cheetah:action"),rev:e.number,contextId:e.string,triggerContextId:e.string,actionId:e.string,stateBlob:e.string,args:e.readonly(e.array(f(e)))}))))))(e)})),V=Pe((function(e){return Te(c(e),e.struct({action:e.literal("cheetah:setVoice"),voice:_e(e)}))(e)})),M=Pe((function(e){return Te(c(e),e.intersect(e.partial({role:e.string}))(e.intersect(e.partial({isEnabledByDefault:e.boolean}))(e.intersect(e.partial({profiles:O(e)}))(e.struct({action:e.literal("cheetah:setVoiceProfile")})))))(e)})),D=Pe((function(e){return Te(c(e),e.struct({action:e.literal("cheetah:interrupt"),promptId:e.number}))(e)})),H=Pe((function(e){return Te(c(e),e.struct({action:e.literal("cheetah:getUserState")}))(e)})),L=Pe((function(e){return Te(c(e),e.intersect(e.partial({url:e.string}))(e.struct({action:e.literal("cheetah:searchReferences")})))(e)})),K=Pe((function(e){return Te(c(e),e.struct({action:e.literal("cheetah:getHistory")}))(e)})),$=Pe((function(e){return Te(d(e),e.struct({action:e.literal("cheetah:error"),promptId:e.number,error:U(e)}))(e)})),Z=Pe((function(e){return Te(d(e),e.intersect(e.partial({progressMessage:e.string}))(e.struct({action:e.literal("cheetah:setContext"),promptId:e.number,context:R(e),usage:ke(e)})))(e)})),W=Pe((function(e){return Te(d(e),e.struct({action:e.literal("cheetah:searchReferencesResult"),promptId:e.number,references:e.readonly(e.array(de(e)))}))(e)})),q=Pe((function(e){return Te(d(e),e.intersect(e.partial({metadata:re(e)}))(e.struct({action:e.literal("cheetah:chunk"),promptId:e.number,token:e.sensitiveString})))(e)})),Y=Pe((function(e){return e.struct({title:e.string,description:e.readonly(e.array(e.string))})})),Q=Pe((function(e){return Te(d(e),e.intersect(e.partial({metadata:re(e)}))(e.intersect(e.partial({context:R(e)}))(e.intersect(e.partial({error:U(e)}))(e.intersect(e.partial({text:B(e)}))(e.intersect(e.partial({withVoiceText:B(e)}))(e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.intersect(e.partial({references:e.readonly(e.array(de(e)))}))(e.intersect(e.partial({changesSummary:Y(e)}))(e.struct({action:e.literal("cheetah:result"),promptId:e.number,usage:ke(e)}))))))))))(e)})),X=Pe((function(e){return Te(d(e),e.struct({action:e.literal("cheetah:setUserState"),state:we(e)}))(e)})),J=Pe((function(e){var t;return e.sum("kind")(((t={}).userPrompt=ee(e),t.action=te(e),t))})),ee=Pe((function(e){return e.struct({kind:e.literal("userPrompt"),text:e.string})})),te=Pe((function(e){return e.struct({kind:e.literal("action"),iconUrl:e.string,label:e.string})})),ie=Pe((function(e){return e.intersect(e.partial({showVoiceTextByDefault:e.boolean}))(e.struct({id:e.string,text:ve(e),withVoiceText:ve(e),title:J(e),references:e.readonly(e.array(de(e)))}))})),ne=Pe((function(e){return Te(d(e),e.struct({action:e.literal("cheetah:setHistory"),cards:e.readonly(e.array(ie(e)))}))(e)})),re=Pe((function(e){return e.any})),se=Pe((function(e){return e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.struct({text:e.sensitiveString})))})),oe=Pe((function(e){return e.intersect(e.partial({pageIdHash:e.string}))(e.intersect(e.partial({title:e.sensitiveString}))(e.intersect(e.partial({people:e.readonly(e.record(e.readonly(e.array(e.sensitiveString))))}))(e.intersect(e.partial({items:e.readonly(e.array(se(e)))}))(e.struct({})))))})),ae=Pe((function(e){var t;return e.sum("kind")(((t={}).regular=le(e),t.history=ce(e),t.writerExpert=ue(e),t))})),le=Pe((function(e){return e.struct({kind:e.literal("regular"),text:e.string})})),ce=Pe((function(e){return e.struct({kind:e.literal("history"),text:e.string})})),ue=Pe((function(e){return e.struct({kind:e.literal("writerExpert"),text:e.string,suggestionId:e.string,pname:e.string})})),de=Pe((function(e){return e.intersect(e.partial({url:e.string}))(e.struct({id:e.string,privacyLevel:me(e),title:e.string,iconUrl:e.string}))})),me=Pe((function(e){var t;return e.sum("kind")(((t={}).public=pe(e),t.restricted=he(e),t))})),pe=Pe((function(e){return e.struct({kind:e.literal("public")})})),he=Pe((function(e){return e.struct({kind:e.literal("restricted")})})),ge=Pe((function(e){var t;return e.sum("kind")(((t={}).aiUsageAlert=fe(e),t))})),fe=Pe((function(e){return e.struct({kind:e.literal("aiUsageAlert")})})),ye=Pe((function(e){return e.struct({button:be(e),tones:e.readonly(e.array(be(e))),maxTones:e.number})})),ve=Pe((function(e){return Te(h(e),e.struct({}))(e)})),xe=Pe((function(e){return e.struct({start:e.number,end:e.number})})),be=Pe((function(e){return e.struct({iconUrl:e.string,label:e.string,description:e.string})})),Se=Pe((function(e){return e.struct({url:e.string,referenceId:e.string})})),ke=Pe((function(e){return e.struct({promptsRemaining:e.number,promptsAllocated:e.number,refillDate:e.string})})),Ce=Pe((function(e){return e.struct({inlineQuickReplyEnabled:e.boolean,inlineRewriteEnabled:e.boolean})})),we=Pe((function(e){return e.intersect(e.partial({historyItems:e.number}))(e.struct({settings:Ce(e),usage:ke(e)}))})),_e=Pe((function(e){return e.intersect(e.partial({styles:e.readonly(e.array(ye(e)))}))(e.intersect(e.partial({selectedRole:e.string}))(e.intersect(e.partial({roles:e.readonly(e.array(e.string))}))(e.struct({selectedStyle:e.string,selectedTones:e.readonly(e.array(e.string)),needSetup:e.boolean}))))})),Ie=Pe((function(e){return e.struct({state:e.boolean,label:e.string})})),Ee=Pe((function(e){return e.struct({userName:e.string,myVoiceIsEnabledByDefault:Ie(e),title:e.string,subTitle:e.string,profiles:O(e)})})),Ae=Pe((function(e){var t;return e.sum("action")(((t={})["cheetah:getContext"]=z(e),t["cheetah:action"]=j(e),t["cheetah:setVoice"]=V(e),t["cheetah:setVoiceProfile"]=M(e),t["cheetah:interrupt"]=D(e),t["cheetah:getUserState"]=H(e),t["cheetah:searchReferences"]=L(e),t["cheetah:getHistory"]=K(e),t))})),Oe=Pe((function(e){var t;return e.sum("action")(((t={})["cheetah:invalidateContext"]=F(e),t["cheetah:error"]=$(e),t["cheetah:setContext"]=Z(e),t["cheetah:searchReferencesResult"]=W(e),t["cheetah:chunk"]=q(e),t["cheetah:result"]=Q(e),t["cheetah:setUserState"]=X(e),t["cheetah:setHistory"]=ne(e),t))}));function Re(e){var t=Object.keys(e).map((function(t){return e[t]})),i=t[0],r=t.slice(1);return Pe((function(e){return e.literal.apply(e,(0,n.__spreadArray)([i],r,!1))}))}function Te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Pe((function(t){return e.reduce((function(e,i){return t.intersect(i)(e)}))}))}function Pe(e){return o.H(e)}var Ue=(0,l.MZ)(a.n);function Be(e){return function(t){return(0,n.__assign)((0,n.__assign)({},e),t)}}var Ne={URI:s.ov,literal:function(){return s.id()},string:s.id(),number:s.id(),boolean:s.id(),nullable:s.AG,type:s.dt,struct:s.n_,partial:s.r$,record:s.IM,array:s.IX,tuple:s.bc,intersect:s.wf,sum:s.Sm,lazy:function(e,t){return s.Vo(t)},readonly:s.OT}},50687:(e,t,i)=>{var n,r,s,o;i.d(t,{ES:()=>r,cX:()=>n,oS:()=>s,s2:()=>o}),function(e){e.Insertable="insertable",e.NonInsertable="non_insertable"}(n||(n={})),function(e){e.Active="active",e.Snoozed="snoozed"}(r||(r={})),function(e){e.Generic="generic",e.Overflow="overflow",e.PromptsLimitExceeded="promptsLimitExceeded",e.SensitiveContent="sensitiveContent",e.ServerOverloaded="serverOverloaded",e.UnsupportedLanguage="unsupportedLanguage"}(s||(s={})),function(e){e.Ideation="ideation",e.PushRewrite="pushRewrite",e.QuickReply="quickReply",e.QuickRewrite="quickRewrite",e.Rewrite="rewrite"}(o||(o={}))},56377:(e,t,i)=>{i.d(t,{L:()=>l});var n,r=i(59312),s=i(27378),o=i(12187),a=i(89894),l=function(e){var t=e.double,i=e.triple,n=e.small;return s.createElement("div",(0,r.__assign)({},(0,o.Sh)(d,!0===t&&p,!0===i&&g,!0===n&&f)))},c=.875,u="spacer",d=a.ux.joinClasses([u,a.ux.style({margin:0,minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),width:a.ux.percent(100),height:a.ux.rem(1)})]),m="spacerDouble",p=a.ux.joinClasses([m,a.ux.style({minHeight:a.ux.rem(1.75),maxHeight:a.ux.rem(2),height:a.ux.rem(2)})]),h="spacerTriple",g=a.ux.joinClasses([h,a.ux.style({minHeight:a.ux.rem(2.625),maxHeight:a.ux.rem(3),height:a.ux.rem(3)})]),f=a.ux.style({$nest:(n={},n["&.".concat(u)]={minHeight:a.ux.rem(.4375),maxHeight:a.ux.rem(.5),height:a.ux.rem(.5)},n["&.".concat(m)]={minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),height:a.ux.rem(1)},n["&.".concat(h)]={minHeight:a.ux.rem(1.3125),maxHeight:a.ux.rem(1.5),height:a.ux.rem(1.5)},n)})},24782:(e,t)=>{t.byteLength=function(e){var t=l(e),i=t[0],n=t[1];return 3*(i+n)/4-n},t.toByteArray=function(e){var t,i,s=l(e),o=s[0],a=s[1],c=new r(function(e,t,i){return 3*(t+i)/4-i}(0,o,a)),u=0,d=a>0?o-4:o;for(i=0;i<d;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,c[u++]=255&t);1===a&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,s=[],o=16383,a=0,l=n-r;a<l;a+=o)s.push(c(e,a,a+o>l?l:a+o));1===r?(t=e[n-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function c(e,t,n){for(var r,s,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},30816:(e,t,i)=>{var n=i(24782),r=i(78898),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,i)}function c(e,t,i){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|g(e,t),n=a(i),r=n.write(e,t);r!==i&&(n=n.slice(0,r));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(M(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return p(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(M(e,SharedArrayBuffer)||e&&M(e.buffer,SharedArrayBuffer)))return p(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,i);var r=function(e){if(l.isBuffer(e)){var t=0|h(e.length),i=a(t);return 0===i.length||e.copy(i,0,0,t),i}if(void 0!==e.length)return"number"!=typeof e.length||D(e.length)?a(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|h(e))}function m(e){for(var t=e.length<0?0:0|h(e.length),i=a(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function p(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(n,l.prototype),n}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return j(e).length;default:if(r)return n?-1:F(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,i);case"utf8":case"utf-8":return I(this,t,i);case"ascii":return A(this,t,i);case"latin1":case"binary":return O(this,t,i);case"base64":return _(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function v(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),D(i=+i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:x(e,t,i,n,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):x(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function x(e,t,i,n,r){var s,o=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,i/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var u=-1;for(s=i;s<a;s++)if(c(e,s)===c(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===l)return u*o}else-1!==u&&(s-=s-u),u=-1}else for(i+l>a&&(i=a-l),s=i;s>=0;s--){for(var d=!0,m=0;m<l;m++)if(c(e,s+m)!==c(t,m)){d=!1;break}if(d)return s}return-1}function b(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n))>r&&(n=r):n=r;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(D(a))return o;e[i+o]=a}return o}function S(e,t,i,n){return V(F(t,e.length-i),e,i,n)}function k(e,t,i,n){return V(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function C(e,t,i,n){return V(j(t),e,i,n)}function w(e,t,i,n){return V(function(e,t){for(var i,n,r,s=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(i=e.charCodeAt(o))>>8,r=i%256,s.push(r),s.push(n);return s}(t,e.length-i),e,i,n)}function _(e,t,i){return 0===t&&i===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,i))}function I(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var s,o,a,l,c=e[r],u=null,d=c>239?4:c>223?3:c>191?2:1;if(r+d<=i)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[r+1]))&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[r+1],o=e[r+2],128==(192&s)&&128==(192&o)&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[r+1],o=e[r+2],a=e[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),r+=d}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var i="",n=0;for(;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=E));return i}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,i){return c(e,t,i)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,i){return function(e,t,i){return u(e),e<=0?a(e):void 0!==t?"string"==typeof i?a(e).fill(t,i):a(e).fill(t):a(e)}(e,t,i)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(M(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,n=t.length,r=0,s=Math.min(i,n);r<s;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=l.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var s=e[i];if(M(s,Uint8Array))r+s.length>n.length?l.from(s).copy(n,r):Uint8Array.prototype.set.call(n,s,r);else{if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r)}r+=s.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):f.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,i,n,r){if(M(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var s=(r>>>=0)-(n>>>=0),o=(i>>>=0)-(t>>>=0),a=Math.min(s,o),c=this.slice(n,r),u=e.slice(t,i),d=0;d<a;++d)if(c[d]!==u[d]){s=c[d],o=u[d];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)},l.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return b(this,e,t,i);case"utf8":case"utf-8":return S(this,e,t,i);case"ascii":case"latin1":case"binary":return k(this,e,t,i);case"base64":return C(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function A(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function O(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function R(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",s=t;s<i;++s)r+=H[e[s]];return r}function T(e,t,i){for(var n=e.slice(t,i),r="",s=0;s<n.length-1;s+=2)r+=String.fromCharCode(n[s]+256*n[s+1]);return r}function P(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,i,n,r,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<s)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function B(e,t,i,n,r,s){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(e,t,i,n,s){return t=+t,i>>>=0,s||B(e,0,i,4),r.write(e,t,i,n,23,4),i+4}function G(e,t,i,n,s){return t=+t,i>>>=0,s||B(e,0,i,8),r.write(e,t,i,n,52,8),i+8}l.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);for(var n=t,r=1,s=this[e+--n];n>0&&(r*=256);)s+=this[e+--n]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,i,n){(e=+e,t>>>=0,i>>>=0,n)||U(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,s=0;for(this[t]=255&e;++s<i&&(r*=256);)this[t+s]=e/r&255;return t+i},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,i,n){(e=+e,t>>>=0,i>>>=0,n)||U(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,s=1;for(this[t+r]=255&e;--r>=0&&(s*=256);)this[t+r]=e/s&255;return t+i},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);U(this,e,t,i,r-1,-r)}var s=0,o=1,a=0;for(this[t]=255&e;++s<i&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},l.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var r=Math.pow(2,8*i-1);U(this,e,t,i,r-1,-r)}var s=i-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,i){return N(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return N(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return G(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return G(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r=n-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),r},l.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var r=e.charCodeAt(0);("utf8"===n&&r<128||"latin1"===n)&&(e=r)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var s;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(s=t;s<i;++s)this[s]=e;else{var o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-t;++s)this[s+t]=o[s%a]}return this};var z=/[^+/0-9A-Za-z-_]/g;function F(e,t){var i;t=t||1/0;for(var n=e.length,r=null,s=[],o=0;o<n;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&s.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function j(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}var H=function(){for(var e="0123456789abcdef",t=new Array(256),i=0;i<16;++i)for(var n=16*i,r=0;r<16;++r)t[n+r]=e[i]+e[r];return t}()},13853:(e,t,i)=>{i.d(t,{$T:()=>_,AO:()=>a,DZ:()=>R,Eh:()=>l,G:()=>c,G0:()=>f,KX:()=>p,Lf:()=>b,Lx:()=>C,Od:()=>I,UI:()=>u,ZN:()=>s,e5:()=>x,jV:()=>y,nI:()=>E,oA:()=>A,oP:()=>S,ri:()=>w,t9:()=>g,tS:()=>m,tV:()=>v,u4:()=>k,xu:()=>O,yW:()=>d});var n=i(73975),r=i(57050);function s(e){return{show:function(t){var i="";return t.forEach((function(t){i+=e.show(t)+", "})),""!==i&&(i=i.substring(0,i.length-2)),"new Set(["+i+"])"}}}var o=new Set;function a(e){return function(t){var i=[];return t.forEach((function(e){return i.push(e)})),i.sort(e.compare)}}function l(e){var t=p(e);return(0,n.f7)((function(e,i){return t(e,i)&&t(i,e)}))}function c(e){return function(t){for(var i,n=t.values(),r=!1;!r&&!(i=n.next()).done;)r=e(i.value);return r}}function u(e){var t=g(e);return function(e){return function(i){var n=new Set;return i.forEach((function(i){var r=e(i);t(r,n)||n.add(r)})),n}}}function d(e){return(0,r.ff)(c((0,r.ff)(e)))}function m(e){var t=g(e);return function(e){return function(i){var n=new Set;return i.forEach((function(i){e(i).forEach((function(e){t(e,n)||n.add(e)}))})),n}}}function p(e){var t=g(e);return function(i,n){if(void 0===n){var r=p(e);return function(e){return r(e,i)}}return d((function(e){return t(e,n)}))(i)}}function h(e){return function(t){for(var i,n=t.values(),r=new Set;!(i=n.next()).done;){var s=i.value;e(s)&&r.add(s)}return r}}function g(e){return function(t,i){if(void 0===i){var n=g(e);return function(e){return n(t,e)}}for(var r,s=i.values(),o=!1;!o&&!(r=s.next()).done;)o=e.equals(t,r.value);return o}}function f(e){var t=g(e);return function(i,n){if(void 0===n){var r=f(e);return function(e){return r(i,e)}}if(i===o)return n;if(n===o)return i;var s=new Set(i);return n.forEach((function(e){t(e,s)||s.add(e)})),s}}function y(e){var t=g(e);return function(i,n){if(void 0===n){var r=y(e);return function(e){return r(e,i)}}if(i===o||n===o)return o;var s=new Set;return i.forEach((function(e){t(e,n)&&s.add(e)})),s}}function v(e,t){return function(i){return function(n){for(var r,s=n.values(),o=new Set,a=new Set,l=g(e),c=g(t);!(r=s.next()).done;){var u=i(r.value);switch(u._tag){case"Left":l(u.left,o)||o.add(u.left);break;case"Right":c(u.right,a)||a.add(u.right)}}return{left:o,right:a}}}}function x(e){var t=g(e);return function(i,n){if(void 0===n){var r=x(e);return function(e){return r(e,i)}}return h((function(e){return!t(e,n)}))(i)}}function b(e){return{concat:f(e),empty:o}}function S(e){return{concat:y(e)}}function k(e){var t=a(e);return function(e,i){return function(n){return t(n).reduce(i,e)}}}function C(e,t){var i=a(e);return function(e){return function(n){return i(n).reduce((function(i,n){return t.concat(i,e(n))}),t.empty)}}}function w(e){return new Set([e])}function _(e){var t=g(e);return function(e){return function(i){if(t(e)(i))return i;var n=new Set(i);return n.add(e),n}}}function I(e){return function(t){return function(i){return h((function(i){return!e.equals(t,i)}))(i)}}}function E(e){return function(t){for(var i=t.length,n=new Set,r=g(e),s=0;s<i;s++){var o=t[s];r(o,n)||n.add(o)}return n}}function A(e){return R(e)(r.yR)}function O(e,t){return function(i){var n=g(e),r=g(t),s=new Set,o=new Set;return i.forEach((function(e){switch(e._tag){case"Left":n(e.left,s)||s.add(e.left);break;case"Right":r(e.right,o)||o.add(e.right)}})),{left:s,right:o}}}function R(e){var t=g(e);return function(e){return function(i){var n=new Set;return i.forEach((function(i){var r=e(i);"Some"!==r._tag||t(r.value,n)||n.add(r.value)})),n}}}},78898:(e,t)=>{t.read=function(e,t,i,n,r){var s,o,a=8*r-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=i?r-1:0,m=i?-1:1,p=e[t+d];for(d+=m,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=m,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=m,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=c}return(p?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,i,n,r,s){var o,a,l,c=8*s-r-1,u=(1<<c)-1,d=u>>1,m=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?m/l:m*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*l-1)*Math.pow(2,r),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[i+p]=255&a,p+=h,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[i+p]=255&o,p+=h,o/=256,c-=8);e[i+p-h]|=128*g}}}]);