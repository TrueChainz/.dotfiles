/*! For license information please see 1359.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[1359],{17579:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(27378);const i=({title:e,titleId:t,desc:n,descId:i,...a})=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6a2 2 0 0 0-2 2v2h4V8a2 2 0 0 0-2-2Zm3 4V8a3 3 0 1 0-6 0v2H6.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5H15Zm-8 1v7h10v-7H7Z",fill:"#646B81"}))},72889:(e,t,n)=>{n.d(t,{O:()=>i});var r=n(27378);const i=({title:e,titleId:t,desc:n,descId:i,...a})=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},n?r.createElement("desc",{id:i},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.391 5.198A.5.5 0 0 1 6.789 5H17.21a.5.5 0 0 1 .399.198l3.79 5a.5.5 0 0 1-.036.646l-9 9.5a.5.5 0 0 1-.726 0l-9-9.5a.5.5 0 0 1-.035-.646l3.789-5ZM7.038 6l-3.032 4h3.888L9.79 6H7.038Zm3.857 0-1.894 4h5.59l-1.515-4h-2.18Zm3.25 0 1.516 4h4.333l-3.032-4h-2.817Zm5.693 5H15.67l-2.43 6.964L19.837 11Zm-7.87 7.572L14.613 11H8.948l3.02 7.572ZM7.873 11l2.697 6.763L4.162 11h3.71Z",fill:"#646B81"}))},72481:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(27378),a=n(40327),s=n(38983),o=n(98403),l=n(19751),c=n(2834),u=n(9223),d=n(5114),p=n(83078),m=n(90845);!function(e){e.Manager=function(t){var n=t.children,r=t.cardWidth,a=o.Dx(r).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return m.P.useSingleton("CardWidth.Manager"),m.P.useSubscriptionTo(a),i.createElement(e.Context.Provider,{value:a},n)},e.DefaultManager=function(t){var n=t.children;return m.P.useSingleton("CardWidth.DefaultManager"),i.createElement(e.Manager,{cardWidth:e.withCardWidthEffect(e.defaultSizeObserver)},n)},e.withCardWidthEffect=function(t,n){return void 0===n&&(n=e.defaultCardWidthSetter),t.pipe(c.b((function(e){return n(d.some(e))})),u.x(n.bind(null,d.none)),l.shareReplay({refCount:!0,bufferSize:1}))},e.defaultCardWidthSetter=function(t){e.setRootCssVar(document.documentElement,t)},e.defaultSizeObserver=s.h.create(400),e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--cardWidth",(0,a.pipe)(t,d.map(String),p.orNull))}}(r||(r={}))},3929:(e,t,n)=>{n.d(t,{B:()=>C,N:()=>I});var r=n(59312),i=n(27378),a=n(5739),s=n(12187),o=n(38983),l=n(76974),c=n(98403),u=n(77176),d=n(2844),p=n(93508),m=n(66310),h=n(19751),g=n(8125),f=n(44060),y=n(89894),x=n(40456),v=n(32096),b=n(49435);function C(e){var t=e.value,n=e.initValue,o=void 0===n?b.g.MIN:n,d=e.wrapperClass,p=e.progressClass,m=e.borderClass,h=e.isLoading,g=void 0===h?l.of(!1):h,f=I(t,o);return i.createElement(a.F.div,(0,r.__assign)({role:"progressbar","aria-label":"Progress","aria-valuenow":c.Dx(t).pipe(u.U(b.g.iso.unwrap))},(0,s.Sh)(O.wrapper,d)),i.createElement(S,{width:f,progressClass:p,borderClass:m,isLoading:g}))}function I(e,t){void 0===t&&(t=b.g.MIN);var n=o.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),d.aj(c.Dx(e),n,(function(e,n){return n?e:t}))}function S(e){var t=e.width,n=e.progressClass,o=e.isLoading,l=e.borderClass,c=t.pipe(u.U((function(e){return"".concat(e,"%")}))),d=t.pipe(u.U(b.g.prism.reverseGet),u.U((function(e){return e>0?"".concat(e+.75,"%"):0})),p.O(0)),f=o.pipe(m.w((function(e){return e?c:"0"}))),y=t.pipe(u.U(b.g.isMin),h.shareReplay({bufferSize:1,refCount:!0}));return i.createElement(i.Fragment,null,i.createElement(a.F.div,(0,r.__assign)({},(0,s.Sh)(O.borderContainer,y.pipe(u.U((0,g.RN)(O.borderContainerZeroWidth,O.borderContainerWithMinWidth))),l),{style:{width:d}})),i.createElement(a.F.div,(0,r.__assign)({},(0,s.Sh)(Boolean(n)?n:O.defaultProgress,O.progressBar,y.pipe(u.U((0,g.RN)(O.progressBarZeroWidth,O.progressBarWithMinWidth)))),{style:{width:c}})),i.createElement(a.F.div,{className:O.loading,style:{width:f}}))}var w=y.ux.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),E={position:"relative",width:y.ux.percent(100),height:y.ux.rem(.25),borderRadius:y.ux.rem(v.Jr),backgroundColor:x.xO},A={position:"relative",top:0,height:y.ux.percent(100),borderRadius:y.ux.rem(v.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},k={minWidth:y.ux.px(4)},T={position:"absolute",backgroundColor:f.Il.CoreNeutral0},M={minWidth:y.ux.px(6)},N={position:"absolute",minWidth:0,backgroundImage:x.b6,backgroundSize:"20px 20px",transition:"none",animation:"".concat(w," 1s linear infinite")},L={backgroundImage:x.Xd},O=y.ux.stylesheet({wrapper:[E,E],progressBar:[A],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[k],borderContainer:[A,T],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[M],loading:[A,N],defaultProgress:[L]})},62295:(e,t,n)=>{n.d(t,{x:()=>m});var r,i,a,s,o,l,c,u,d,p,m,h=n(59312),g=n(27378),f=n(5739),y=n(12187),x=n(77176),v=n(98403),b=n(57091),C=n(93508),I=n(19962),S=n(44060),w=n(33678),E=n(31278),A=n(8965),k=n(89894),T=n(40456),M=n(61722),N=n(49435);!function(e){function t(e){return 0===e?"":e>=1e3?"".concat(Math.min(Math.trunc(e/1e3),9),"k+"):String(e)}var n=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,a=void 0===i||i,s=M.f.fadeOutState(n),o=s.state,l=s.complete,c="checking-complete";return g.createElement(f.F.div,(0,h.__assign)({},(0,y.Sh)(ne.loader,t)),a?o.pipe(x.U((function(e){return"end"===e?g.createElement("div",{key:"checking-complete",className:c}):g.createElement(A.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?ne.fadeOut:void 0,onTransitionEnd:l})}))):n.pipe(x.U((function(e){return e?g.createElement(A.$,{variation:r,size:"100%"}):g.createElement("div",{className:c})}))))},r=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,s=e.type,o=void 0===s?"white":s,l=e.suffix,c=void 0===l?"":l,u=g.useContext(w.a.Context);return g.createElement(f.F.div,(0,h.__assign)({},(0,y.Sh)(ne.roundCounter,v.ab(o,A.$.getClassName(ne)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:ne.circular},g.createElement("g",null,g.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),g.createElement("text",(0,h.__assign)({x:"16",y:"17"},I.svgVerticalAlignment(u.has(w.a.Flag.supportsSVGDominantBaseline)),{fontSize:a>=100?14:18,"data-name":n},(0,y.Sh)(U,i.counterContent)),t(a),c))))},i=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,s=e.type,o=void 0===s?"white":s,l=e.suffix,c=void 0===l?"":l,u=g.useContext(w.a.Context);return g.createElement(f.F.div,(0,h.__assign)({},(0,y.Sh)(ne.ovalCounter,v.ab(o,A.$.getClassName(ne)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 20",className:ne.circular},g.createElement("rect",{width:"32",height:"20",rx:"10"}),g.createElement("text",(0,h.__assign)({x:"16",y:"10.5"},I.svgVerticalAlignment(u.has(w.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":n},(0,y.Sh)(U,i.counterContent)),t(a),c)))};e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,a=e.count,s=e.type,o=void 0===s?"white":s,l=a>=100?i:r;return g.createElement(l,{theme:(0,h.__assign)((0,h.__assign)({},n),{counterWrapper:(0,y.Sh)(n.counterWrapper,ne.flexCounter).className}),count:a,type:o})},e.OutcomeCounter=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,s=e.type,o=void 0===s?"white":s,l=e.suffix,c=e.fontSize,u=void 0===c?12:c,d=g.useContext(w.a.Context);return g.createElement(f.F.div,(0,h.__assign)({},(0,y.Sh)(ne.outcomeCounter,v.ab(o,A.$.getClassName(ne)),i.counterWrapper),{"data-role":"counter"}),g.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 18",className:ne.circular},g.createElement("rect",(0,h.__assign)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(a,Boolean(l)),{height:18,rx:9})),g.createElement("text",(0,h.__assign)({x:"50%",y:"10px"},I.svgVerticalAlignment(d.has(w.a.Flag.supportsSVGDominantBaseline)),{fontSize:u,"data-name":n},(0,y.Sh)(U,i.counterContent)),t(a),l)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,a=e.className,s=0===t;return g.createElement("div",(0,h.__assign)({},(0,y.Sh)(ne.meter,a)),g.createElement(n,{isChecking:i,type:s?"green":"red"}),0===t?g.createElement(E.JO.Grammarly,null):g.createElement(r,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return g.createElement("div",{className:ne.lensNavMeter},g.createElement(n,{isChecking:i,type:"red"}),g.createElement(r,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,a=e.className;return g.createElement("div",(0,h.__assign)({},(0,y.Sh)(ne.plagiarismMeter,a)),g.createElement(n,{isChecking:r,type:"violet",animateFade:!1}),g.createElement(f.F.div,{className:ne.wrapper},t.pipe(b.a(r),x.U((function(e){var t=e[0],n=e[1];return 0===t?g.createElement(E.JO.NotificationInfo,{className:ne.plagiarismIcon,key:"icon",width:20}):!n&&g.createElement(i,{count:t,type:"violet",key:"value",suffix:g.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),C.O(null))))},e.PlagiarismOutcomesMeter=function(t){var r=t.count,i=t.isChecking,a=t.className;return g.createElement("div",(0,h.__assign)({},(0,y.Sh)(ne.plagiarismMeter,a)),g.createElement(n,{isChecking:i,type:"cyan",animateFade:!1}),g.createElement(f.F.div,{className:ne.wrapper},r.pipe(b.a(i),x.U((function(t){var n=t[0],r=t[1];return N.g.isMin(n)?g.createElement(E.JO.CheckmarkOutcomes,{className:ne.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&g.createElement(e.OutcomeCounter,{count:N.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:g.createElement("tspan",{fontSize:11},"%")})})),C.O(null))))}}(m||(m={}));var L=1.25,O={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:k.ux.percent(100),height:k.ux.percent(100)},_={position:"absolute",width:k.ux.percent(150),height:k.ux.percent(150),transform:"translate(-17%, -17%)"},D={position:"relative",display:"inline-flex"},F={width:k.ux.percent(100),height:k.ux.percent(100)},P={minWidth:k.ux.rem(2),width:k.ux.percent(100),height:k.ux.rem(L)},R={maxWidth:k.ux.rem(2),height:k.ux.rem(L)},j="counterText",U=k.ux.joinClasses([j,k.ux.style({fontWeight:"bold",textAnchor:"middle",fill:S.Il.CoreNeutral0})]),$={fill:T.zh,$nest:(r={},r["& .".concat(j)]={fill:T.FW},r)},B={fill:S.Il.CoreRed50,$nest:(i={},i["& .".concat(j)]={fill:S.Il.CoreNeutral0},i)},z={fill:S.Il.CoreGreen50,$nest:(a={},a["& .".concat(j)]={fill:S.Il.CoreNeutral0},a)},G={fill:S.Il.CoreBlue50,$nest:(s={},s["& .".concat(j)]={fill:S.Il.CoreNeutral0},s)},W={fill:"transparent",$nest:(o={},o["& .".concat(j)]={fill:T.FW},o)},H={fill:T.lh,$nest:(l={},l["& .".concat(j)]={fill:S.Il.CoreNeutral0},l)},V={fill:T.AX,$nest:(c={},c["& .".concat(j)]={fill:S.Il.CoreNeutral0},c)},Y={fill:S.Il.CoreYellow20,$nest:(u={},u["& .".concat(j)]={fill:S.Il.CoreYellow80},u)},Z={fill:S.Il.CoreYellow60,$nest:(d={},d["& .".concat(j)]={fill:S.Il.CoreNeutral0},d)},Q={fill:S.Il.CoreCyan50,$nest:(p={},p["& .".concat(j)]={fill:S.Il.CoreNeutral0},p)},q={width:k.ux.rem(1.5),height:k.ux.rem(1.5)},J={margin:"0 ".concat(k.ux.rem(.25))},X={width:k.ux.rem(2),height:k.ux.rem(L)},K={margin:"".concat(k.ux.rem(-1)," 0")},ee={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:S.Il.CoreCyan50}}},te={width:k.ux.rem(2),height:k.ux.rem(1.125),position:"relative"},ne=k.ux.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[O],loader:[_],wrapper:[D],roundCounter:[D,F],ovalCounter:[D,P],flexCounter:[D,R],gray:[$],red:[B],green:[z],blue:[G],white:[W],violet:[H],yellow:[V],yellowPremium:[Y],orange:[Z],cyan:[Q],meter:[D,q],lensNavMeter:[D,q,J],plagiarismMeter:[D,X],plagiarismIcon:[K],plagiarismOutcomeIcon:[K,ee],outcomeCounter:[D,{position:"absolute",left:0},te]})},48911:(e,t,n)=>{n.d(t,{In:()=>d,Vg:()=>l,dy:()=>u});var r=n(59312),i=n(27378),a=n(12187),s=n(34685),o=n(89894),l=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function c(e,t){return void 0===t&&(t=p.emoji),'<img alt="'.concat(e,'" class="').concat(t,'" src="').concat(function(e){return s.gK+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}(e),'" onerror="this.replaceWith(this.alt)" draggable="false" />')}var u=function(e){var t=e.children,n=e.emojiClassName,r=e.className,a=i.useRef(null);return i.useEffect((function(){a.current&&(a.current.innerHTML=a.current.innerHTML.replace(l,(function(e){return c(e,n)})))}),[a,n]),i.createElement("span",{ref:a,className:r},t)},d=function(e){var t=e.id,n=e.className,o=i.useState(!1),l=o[0],c=o[1],u=i.useState(""),d=u[0],m=u[1],h=i.useState(""),g=h[0],f=h[1];return i.useEffect((function(){c(!1),f(function(e){return s.gK+e+".svg"}(t)),m(function(e){try{return String.fromCodePoint.apply(String,e.map((function(e){return parseInt(e,16)})))}catch(e){return""}}(t.split("-")))}),[t]),l?i.createElement("span",(0,r.__assign)({},(0,a.Sh)(n,p.emojiFromIDAlt)),d):i.createElement("img",{className:n,src:g,alt:d,onError:function(){return c(!0)},"aria-hidden":!0})},p=o.ux.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}],emojiFromIDAlt:[{display:"flex",alignItems:"center"}]})},76457:(e,t,n)=>{n.d(t,{P:()=>I});var r=n(59312),i=n(27378),a=n(12187),s=n(22232),o=n(19962),l=n(44060),c=n(33678),u=n(31278),d=n(89894),p=n(40456),m=2*Math.PI*32,h=36,g="#f1f2fa",f="#fff",y=function(e,t,n){return e<t?t:e>n?n:e},x=function(e){switch(e){case I.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:g,outline:f};case I.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:g,outline:f};case I.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:g,outline:f};case I.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:g,outline:f};case I.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:g,outline:f};case I.ColorType.logan:return{type:"plain",value:"#a6adc9",background:g,outline:f};case I.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case I.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case I.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case I.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case I.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case I.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case I.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case I.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,s.vE)(e)}},v=function(e){switch(e){case I.FontSize.normal:return 32;case I.FontSize.small:return 24;default:return(0,s.vE)(e)}},b=function(e){switch(e){case I.IconSize.pdf:case I.IconSize.normal:case I.IconSize.outcome:return 5;case I.IconSize.small:return 3;case I.IconSize.extraSmall:return 10;default:return(0,s.vE)(e)}},C=function(e){switch(e){case I.IconSize.pdf:return 110;case I.IconSize.normal:return 52;case I.IconSize.outcome:return 32;case I.IconSize.small:return 24;case I.IconSize.extraSmall:return 16;default:return(0,s.vE)(e)}},I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e,n,s,l,d,p=this.props,g=p.percentage,f=p.aimValue,I=void 0===f?100:f,S=p.colorType,w=void 0===S?t.ColorType.logan:S,E=p.fontSize,k=void 0===E?t.FontSize.normal:E,T=p.iconSize,M=void 0===T?t.IconSize.normal:T,N=p.description,L=p.theme,O=void 0===L?A:L,_=[i.createElement("circle",{key:"circle",id:"circle",cx:h,cy:h,r:32,fill:"none"})],D=v(k),F=b(M),P=y(g,0,100),R=y(I,P,100),j=P*m/100,U=R*m/100,$=360*F/m,B=P?m-j-2*F:m,z=x(w);if("plain"===z.type)e=z.value,n=e,s=z.outline,l=z.background,d=void 0===z.backgroundOpacity?1:z.backgroundOpacity;else{var G=z.value;this._gradientId=Boolean(this._gradientId)?this._gradientId:"pb-gradient-".concat(t._nextGradientId++),_.push(i.createElement("linearGradient",(0,r.__assign)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},G.coordinates),i.createElement("stop",{stopColor:G.start,offset:"0%"}),i.createElement("stop",{stopColor:G.end,offset:"100%"}))),e="url(#".concat(this._gradientId,")"),n="#2b2d38",s=z.outline,l=z.background,d=void 0===z.backgroundOpacity?1:z.backgroundOpacity}return i.createElement(c.a.Context.Consumer,null,(function(t){return i.createElement(u.a1,(0,r.__assign)({},(0,a.Sh)(A.iconWrapper,O.radialProgressBar),{width:C(M),viewBox:"0 0 ".concat(72," ").concat(72)}),i.createElement("defs",null,_),i.createElement("g",null,i.createElement("use",{className:A.valueCircle,stroke:P>=94&&Boolean(s)?s:l,strokeOpacity:d,strokeWidth:F,strokeDasharray:m,strokeDashoffset:m-U,transform:"rotate(-90 ".concat(h," ").concat(h,")"),strokeLinecap:"round",xlinkHref:"#circle"}),Boolean(s)?i.createElement("use",{className:A.valueCircle,stroke:s,strokeWidth:F,strokeDasharray:m,strokeDashoffset:B,transform:"rotate(".concat(-90-$," ").concat(h," ").concat(h,")"),strokeLinecap:"round",xlinkHref:"#circle"}):null,i.createElement("use",{className:A.valueCircle,stroke:e,strokeDasharray:m,strokeDashoffset:m-j,strokeLinecap:"round",transform:"rotate(-90 ".concat(h," ").concat(h,")"),strokeWidth:F,xlinkHref:"#circle"}),i.createElement("text",(0,r.__assign)({className:O.radialProgressText,y:"38",x:"36",fill:n,fontSize:D,fontStyle:"normal",textAnchor:"middle"},o.svgVerticalAlignment(t.has(c.a.Flag.supportsSVGDominantBaseline))),P),Boolean(N)?i.createElement("text",{className:O.radialProgressDescription,fill:n,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},N):null))}))},t._nextGradientId=0,t}(i.Component);!function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(I||(I={}));var S={width:d.ux.percent(100),height:d.ux.percent(100),fontWeight:"bold",fill:l.Il.CoreNeutral90},w={fontSize:d.ux.rem(2),fill:l.Il.CoreNeutral90},E={fontWeight:"normal",fontSize:d.ux.px(11),fill:p.UE},A=d.ux.stylesheet({radialProgressBar:[S],radialProgressText:[w],radialProgressDescription:[E],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},56377:(e,t,n)=>{n.d(t,{L:()=>l});var r,i=n(59312),a=n(27378),s=n(12187),o=n(89894),l=function(e){var t=e.double,n=e.triple,r=e.small;return a.createElement("div",(0,i.__assign)({},(0,s.Sh)(d,!0===t&&m,!0===n&&g,!0===r&&f)))},c=.875,u="spacer",d=o.ux.joinClasses([u,o.ux.style({margin:0,minHeight:o.ux.rem(c),maxHeight:o.ux.rem(1),width:o.ux.percent(100),height:o.ux.rem(1)})]),p="spacerDouble",m=o.ux.joinClasses([p,o.ux.style({minHeight:o.ux.rem(1.75),maxHeight:o.ux.rem(2),height:o.ux.rem(2)})]),h="spacerTriple",g=o.ux.joinClasses([h,o.ux.style({minHeight:o.ux.rem(2.625),maxHeight:o.ux.rem(3),height:o.ux.rem(3)})]),f=o.ux.style({$nest:(r={},r["&.".concat(u)]={minHeight:o.ux.rem(.4375),maxHeight:o.ux.rem(.5),height:o.ux.rem(.5)},r["&.".concat(p)]={minHeight:o.ux.rem(c),maxHeight:o.ux.rem(1),height:o.ux.rem(1)},r["&.".concat(h)]={minHeight:o.ux.rem(1.3125),maxHeight:o.ux.rem(1.5),height:o.ux.rem(1.5)},r)})},8965:(e,t,n)=>{n.d(t,{$:()=>m});var r,i=n(59312),a=n(27378),s=n(5739),o=n(12187),l=n(98403),c=n(22232),u=n(44060),d=n(89894),p=n(40456);function m(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,o=(e.ref,e.label),c=(0,i.__rest)(e,["wrapperClassName","variation","isIdle","ref","label"]);return a.createElement(s.F.span,{"data-role":"spinner",role:"status","aria-busy":!Boolean(r),"aria-live":Boolean(r)?"off":"polite","aria-label":null!=o?o:"Content is loading.",className:t},l.ab(n,(function(e){return a.createElement(m.Svg,(0,i.__assign)({},c,{type:e,isIdle:r}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"yellowPremium":return e.yellowPremium;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,c.vE)(t)}}},e.Svg=function(t){var n=t.className,r=t.size,s=void 0===r?64:r,l=t.strokeWidth,u=void 0===l?2:l,d=t.type,p=t.name,m=t.isIdle,h=(0,i.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),g=a.useRef(null),y=a.useRef(null);return a.useEffect((function(){return(0,c.kG)(null!==g.current,"groupEl should be already created"),y.current=g.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return y.current.cancel()}}),[]),a.useEffect((function(){(0,c.kG)(null!==y.current,"groupAnimation should be already created");var e=y.current;Boolean(e.play)&&(!0===m?e.pause():"running"!==e.playState&&e.play())})),a.createElement("svg",(0,i.__assign)({"data-role":p},(0,o.Sh)(n),{viewBox:"25 25 50 50",width:s,height:s,"aria-hidden":!0},h),a.createElement("g",{transform:"translate(50 50)"},a.createElement("g",{ref:g},a.createElement("circle",(0,i.__assign)({},(0,o.Sh)(k.path,!0===m&&f,e.getClassName(k)(d)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:u,strokeMiterlimit:"10"})))))}}(m||(m={}));var h=200,g=d.ux.keyframes({"0%":{strokeDasharray:"1px, ".concat(d.ux.px(h)),strokeDashoffset:d.ux.px(1)},"50%":{strokeDasharray:"89px, ".concat(d.ux.px(h)),strokeDashoffset:d.ux.px(-35)},"100%":{strokeDasharray:"89px, ".concat(d.ux.px(h)),strokeDashoffset:d.ux.px(-124)}}),f="spinnerIdle",y={animation:"".concat(g," 2s ease-in-out infinite"),strokeDasharray:"1px, ".concat(d.ux.px(h)),strokeDashoffset:d.ux.px(1),strokeLinecap:"round",$nest:(r={},r["&.".concat(f)]={animationIterationCount:0},r)},x={stroke:u.Il.CoreRed50},v={stroke:u.Il.CoreGreen50},b={stroke:u.Il.CoreBlue50},C={stroke:u.Il.CoreNeutral0},I={stroke:p.lh},S={stroke:p.AX},w={stroke:u.Il.CoreYellow60},E={stroke:p.FW},A={stroke:u.Il.CoreCyan50},k=d.ux.stylesheet({path:[y],red:[x],green:[v],blue:[b],white:[C],violet:[I],yellow:[S],orange:[w],gray:[E],cyan:[A]})},59443:(e,t,n)=>{n.d(t,{Y1:()=>r,uq:()=>l});var r,i,a,s,o,l,c,u,d=n(73975),p=n(55415),m=n(22232),h=n(8125),g=n(87969);!function(e){var t;!function(t){var n;!function(e){e.user="user",e.api="api",e.doubleClick="doubleClick"}(n=t.Source||(t.Source={})),t.eq=(0,d.f7)((function(t,r){return t.source===r.source&&(t.source===n.doubleClick&&r.source===n.doubleClick?t.selectedWord===r.selectedWord:e.eqFormatting.equals(t.formatting,r.formatting))}))}(t=e.Meta||(e.Meta={})),e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return g.SV.create(e.index,e.index+e.length)},e.isUserSelection=function(e){return e.meta.source===t.Source.user},e.isApiSelection=function(e){return e.meta.source===t.Source.api},e.isDoubleClickSelection=function(e){return e.meta.source===t.Source.doubleClick},e.eqRange=(0,d.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),e.eqFormatting=(0,d.f7)(p.deepEqual),e.eq=(0,d.f7)((function(t,n){return e.eqRange.equals(t,n)&&e.Meta.eq.equals(t.meta,n.meta)})),e.empty={index:0,length:0,meta:{source:e.Meta.Source.user,formatting:{}}}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,m.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,m.vE)(n)}}}}(e.Y||(e.Y={}))}(s||(s={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(o||(o={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(l||(l={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,h.CI)(t,e)},e.asList=Object.values(e.Type),function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(u||(u={}))},2639:(e,t,n)=>{n.d(t,{W:()=>_});var r=n(27378),i=n(56377),a=n(1509),s=n(12187),o=n(45986),l=n(89894),c=n(44060);const u={position:"relative",$nest:{"&:not(:last-child)":{marginBottom:l.ux.rem(.5)}}},d={fontWeight:700,color:c.Il.CoreNeutral60},p={width:l.ux.percent(100),display:"flex",justifyContent:"space-between",alignItems:"center",$nest:{"&:hover":{cursor:"pointer"}}},m={transition:"transform .25s"},h={display:"flex",flexDirection:"column",marginLeft:l.ux.rem(1.875),maxWidth:l.ux.rem(15)},g=l.ux.prefixedStylesheet("accordion",{accordion:[{padding:0}],accordionItem:[u],title:[d],button:[p],arrow:[m],arrowRotated:[m,{transform:"rotate(180deg)"}],content:[h],hiddenContent:[{display:"none"}]}),f=e=>r.createElement("svg",{"aria-hidden":!0,className:e.className,width:"13",height:"8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m2.115.295-1.41 1.41 6 6 6-6-1.41-1.41-4.59 4.58-4.59-4.58z",fill:"#6D758D"})),y=({children:e,className:t})=>r.createElement("dl",Object.assign({},(0,s.Sh)(g.accordion,t)),e),x=e=>{const{title:t,id:n,children:i,isExpanded:a,onClick:s}=e;return r.createElement("div",{className:g.accordionItem},r.createElement("dt",null,r.createElement(o.zx,{className:g.button,name:`accordion-button-${n}`,onClick:s},t,r.createElement("span",null,r.createElement(f,{className:a?g.arrowRotated:g.arrow})))),r.createElement("dd",{className:a?g.content:g.hiddenContent,"data-name":`accordion-content-${n}`},i))},v={marginTop:l.ux.rem(1.5)},b={color:c.Il.CoreNeutral60,marginLeft:l.ux.rem(.6)},C={fontSize:l.ux.rem(.9),lineHeight:l.ux.rem(1.25),color:c.Il.CoreNeutral60,maxWidth:l.ux.rem(15),margin:0},I=l.ux.prefixedStylesheet("checklist",{listItemTitleContainer:[{display:"flex",alignItems:"center"}],list:[v],listItemTitle:[b],listItemDescription:[C]}),S={display:"flex",justifyContent:"center",alignItems:"center",height:l.ux.px(20),width:l.ux.px(20),borderRadius:l.ux.percent(100),border:"1px solid",transition:"border-color .25s ease, background-color .25s ease"},w={borderColor:c.Il.CoreGreen50,backgroundColor:c.Il.CoreGreen50},E={borderColor:c.Il.CoreGreen50,backgroundColor:c.Il.CoreGreen1,$nest:{"> svg":{display:"none"}}},A={borderColor:c.Il.CoreNeutral30,backgroundColor:c.Il.CoreNeutral30},k=l.ux.prefixedStylesheet("completion_icon",{completed:[S,w],active:[S,E],notCompleted:[S,A]}),T=()=>r.createElement("div",{className:k.completed},r.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),M=e=>r.createElement("div",{className:e.isExpanded?k.active:k.notCompleted},r.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),N=e=>e.completionState.isCompleted?r.createElement(T,null):r.createElement(M,{isExpanded:e.completionState.isExpanded}),{Button:L}=a.Z,O=({title:e,completionState:t})=>r.createElement("div",{className:I.listItemTitleContainer},r.createElement(N,{completionState:t}),r.createElement(L,{className:I.listItemTitle},e)),_=e=>{const{allChecklistItems:t,completedItems:n,expandedItems:a,onExpandItem:s,getCTA:o}=e;return r.createElement(y,{className:I.list},t.map((({description:e,id:t,title:l})=>{const c={isCompleted:n.items.has(t),isExpanded:a.has(t)};return r.createElement(x,{key:t,id:t,title:r.createElement(O,{title:l,completionState:c}),isExpanded:c.isExpanded,onClick:()=>s(t)},r.createElement("p",{className:I.listItemDescription},e),r.createElement(i.L,{small:!0}),o(t))})))}},81301:(e,t,n)=>{n.d(t,{EQ:()=>g,Iy:()=>i,dC:()=>r});var r,i,a,s=n(38983),o=n(5114),l=n(8125),c=n(66310),u=n(18625),d=n(95300),p=n(76974),m=n(2834),h=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(r||(r={})),function(e){e.setGoals=e=>({type:r.SetGoals,source:e}),e.performance={type:r.Performance}}(i||(i={}));class g{constructor(e){this._modalViews=e,this.state=s.h.create(o.none),this._modalFactoryCache=new Map}show(e){return this.preload(e).pipe(c.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new d.X("opened");return this.state.set(o.some(e({onClose:()=>{this.state.set(o.none),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(m.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(o.none)}}!function(e){e.Mock=class{constructor(){this.state=s.h.create(o.none),this.hideAll=l.Q1}show(e){return h.E}showPreloaded(e){return h.E}preload(e){return h.E}}}(a||(a={}))},50790:(e,t,n)=>{n.d(t,{DI:()=>A,SJ:()=>k});var r=n(27378),i=n(12187),a=n(22232),s=n(44060),o=n(50474),l=n(64757),c=n(31278),u=n(3656),d=n(89894),p=n(24588),m=n(40219),h=n(5802);const g={position:"relative",width:d.ux.percent(100)},f={position:"relative",margin:`0 0 ${d.ux.rem(.5)}`},y={display:"flex",boxSizing:"border-box",padding:`${d.ux.rem(1)} ${d.ux.rem(2)} ${d.ux.rem(1)} ${d.ux.rem(.75)}`,width:d.ux.percent(100),borderRadius:d.ux.rem(m.fx),background:s.Il.BackgroundNotification,color:s.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},x={width:d.ux.percent(100)},v={display:"inline-block",width:d.ux.percent(100)},b={margin:`${d.ux.rem(-.5)} ${d.ux.rem(.75)} ${d.ux.rem(-.5)} 0`},C={position:"absolute",top:0,right:0,marginTop:d.ux.rem(.5),marginRight:d.ux.rem(.4),marginLeft:d.ux.rem(.5)},I={stroke:p.FW},S={margin:`0 0 ${d.ux.rem(.5)}`,color:s.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:d.ux.rem(s.xv.BodySize),lineHeight:d.ux.rem(1.25)},w={marginTop:d.ux.rem(-.1),marginBottom:d.ux.rem(-.25),color:s.Il.CoreNeutral0,fontSize:d.ux.rem(s.xv.BodySize),lineHeight:d.ux.rem(1.25)},E=d.ux.prefixedStylesheet("notifications",{wrapper:[g],notification:[f],flexibleNotification:[f,{display:"flex",width:"auto"}],contentWrapper:[y],miniContentWrapper:[y,{position:"relative",width:"auto"}],fullWidthNotification:[f,y,x],content:[v],miniContent:[{flex:1}],alertIcon:[b],closeIconWrapper:[C],closeIcon:[I],header:[S],description:[w]});var A,k;!function(e){e.Wrapper=({notification:t,onClose:i,children:a,theme:s={}})=>{r.useEffect((()=>t.actions.next("shown")),[t.actions]);const o={wrapper:Boolean(s.wrapper)?s.wrapper:n.wrapper,content:void 0!==s.content?Object.assign({},n.content,s.content):n.content};return r.createElement("div",Object.assign({},h.P.getAriaLiveProps(t),{className:o.wrapper}),r.createElement(e.Base,{metadata:t.metadata,onClose:i,theme:o.content},a))},e.Base=({metadata:n,onClose:i,theme:a,children:s})=>r.createElement("div",{className:a.wrapper},t(n,a.icon),r.createElement("div",{className:a.content},s),!function(e){return e.priority===h.P.Priority.high||e.priority===h.P.Priority.highest}(n)&&r.createElement(e.CloseButton,{onClick:i,className:a.close}));const t=(t,n)=>{switch(t.icon){case h.P.Icon.sparkles:return r.createElement(c.JO.Sparkles,{className:n});case void 0:case h.P.Icon.priority:return r.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,a.vE)(t.icon)}};e.AdHoc=({title:t,children:a,className:s,onClose:o})=>r.createElement("div",Object.assign({},(0,i.Sh)(n.content.wrapper,s)),r.createElement("div",{className:n.content.content},r.createElement(e.TitledContent,{title:t},a)),r.createElement(e.CloseButton,{onClick:o,className:n.content.close})),e.PriorityIcon=({priority:e,className:t})=>{switch(e){case h.P.Priority.lowest:case h.P.Priority.low:return r.createElement(c.JO.NotificationInfo,{className:t});case h.P.Priority.average:return r.createElement(c.JO.NotificationWarning,{className:t});case h.P.Priority.high:case h.P.Priority.highest:return r.createElement(c.JO.NotificationError,{className:t});default:return(0,a.vE)(e)}},e.CloseButton=({onClick:e,className:t})=>{const n=r.useContext(o.m.Context);return r.createElement(l.zx,{name:"closeNotification","aria-label":n.actions.close,className:t,onClick:e},r.createElement(c.JO.Close,{className:E.closeIcon,width:12}))},e.TitledContent=({title:t,children:n})=>Boolean(n)?r.createElement(r.Fragment,null,r.createElement(u.P1,{className:E.header},t),r.createElement(e.Content,null,n)):r.createElement(u.P1,{className:E.description},t),e.Content=({children:e})=>r.createElement(u.XY,{className:E.description},e);const n={wrapper:E.wrapper,content:{wrapper:E.fullWidthNotification,icon:E.alertIcon,content:E.content,close:E.closeIconWrapper}}}(A||(A={})),function(e){e.Wrapper=({notification:e,onClose:t,children:n})=>(r.useEffect((()=>e.actions.next("shown")),[e.actions]),r.createElement("div",{className:E.flexibleNotification},r.createElement(A.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:E.miniContentWrapper,icon:E.alertIcon,content:E.miniContent,close:E.closeIconWrapper}},n)))}(k||(k={}))},3656:(e,t,n)=>{n.d(t,{CL:()=>u,H4:()=>a,H5:()=>s,P1:()=>m,XY:()=>l,Xk:()=>o,ck:()=>d,oB:()=>i,x4:()=>c,zx:()=>p});var r=n(1509);const i=r.Z.style,a=(r.Z.H1,r.Z.H2,r.Z.H3,r.Z.H3Legacy,r.Z.H4),s=r.Z.H5,o=r.Z.Paper,l=r.Z.Base,c=r.Z.Small,u=r.Z.SmallLight,d=r.Z.Lawyer,p=(r.Z.Title,r.Z.Button),m=(r.Z.Score,r.Z.P1)},6782:(e,t,n)=>{n.d(t,{Q:()=>r});var r,i=n(40327),a=n(5114);!function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:i})=>(void 0===e[n]&&(e[n]={group:t,category:n,categoryHuman:r,count:0,lensName:"",bundleInfo:a.none}),e[n].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByGroup=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:i,lensName:s="",bundleInfo:o=a.none})=>(void 0===e[s]&&(e[s]={group:t,category:n,categoryHuman:r,count:0,lensName:s,bundleInfo:o}),e[s].count+=i,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByBundleInfo=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:s,lensName:o="",bundleInfo:l=a.none})=>{const c=(0,i.pipe)(l,a.getOrElse((()=>r)));return void 0===e[c]&&(e[c]={group:t,category:n,categoryHuman:r,count:0,lensName:o,bundleInfo:l}),e[c].count+=s,e}),{})).sort(((e,t)=>t.count-e.count))}}(r||(r={}))},6488:(e,t,n)=>{n.d(t,{e:()=>r});var r,i=n(57050),a=n(40327),s=n(5114),o=n(8125),l=n(4390),c=n(74660);!function(e){e.create=function(e){const t=t=>(0,a.pipe)(e.get(),l.p.get(t),s.map(c.bZ.fromAlertModel)),n=e=>(0,a.pipe)(t(e),s.filter(c.bZ.isInteractable)),r=e=>(0,a.pipe)(t(e),s.filter(c.bZ.isRegistered)),u=(0,i.ls)(r,s.filter((0,o.W9)(c.bZ.isNotDisposed,(0,i.ff)(c.bZ.isInPremiumLens),(0,i.ff)(c.bZ.isHidden)))),d=(0,i.ls)(u,s.isSome);return{getById:t,getRegistered:r,getInteractable:n,getValidForFeedback:u,isValidForFeedback:d,isRegistered:e=>(0,a.pipe)(r(e),s.isSome),isInteractable:e=>(0,a.pipe)(n(e),s.isSome)}}}(r||(r={}))},79227:(e,t,n)=>{n.d(t,{J:()=>r,k:()=>x});var r,i=n(71249),a=n(95195),s=n(23330),o=n(35214),l=n(64015),c=n(57050),u=n(40327),d=n(84966),p=n(5114),m=n(95574),h=n(81670),g=n(81531),f=n(74660),y=n(66896);!function(e){e.getSubTypeFromLens=e=>y.R.isPriority(e)||y.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}(r||(r={}));class x{constructor(e,t){this._alertsReader=e,this._ops=t,this._log=g.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,u.pipe)(e,this._alertsReader.getById,a.fromOption((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,c.ls)(l.DZ((0,c.ls)(this._alertsReader.getById,p.filter(f.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,f.bZ.State.Applied.Method.Bulk)()),a.getOrElse((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.ls)(this._findAlert,a.map((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,c.ls)(this._findAlert,a.map((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,c.ls)(this._findAlert,a.map((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,c.ls)(this._alertsReader.getById,a.fromOption((()=>new Error("alert not found in the repo"))),a.filterOrElse(f.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),a.map((e=>e.getAppliedRanges())))}apply(e,t){const{alternativeIndex:n,source:r}=t;return this._log.trace("apply",e),(0,u.pipe)(this._findAlert(e),a.chain(a.fromPredicate(f.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),a.chain((e=>(0,u.pipe)(m.tryCatchError((()=>e.apply(t))),a.mapLeft((t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:n,source:r}),t)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);const n=(0,u.pipe)(e,h.T.fromArray((e=>(0,u.pipe)(this._findAlert(e),a.mapLeft((t=>(0,c.bc)(t,{id:e}))),a.chain(a.fromPredicate(f.bZ.isRegisteredApplicableAlert,(e=>(0,c.bc)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),a.chain(a.fromPredicate((e=>d.wQ.withTransformJson(e._raw)),(e=>(0,c.bc)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),a.mapLeft((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,u.pipe)(n,h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:f.bZ.getApplicableAlternative(e,0)}))),source:f.l$.api,method:f.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),s.g_((t=>()=>(this._log.error("applyBulk error",t),h.T.of([],e.map((e=>e.id))))),(()=>()=>h.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,u.pipe)(e,h.T.fromArray((0,c.ls)(this._findAlert,a.map(f.Ev.castApplied))),a.mapLeft((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),a.chain((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,u.pipe)(e.map((0,c.ls)(this._findAlert,a.map((e=>[e])))),(0,o.fold)(b),a.chain((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,n){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._alertFeedback(e,t,n)())))}sendBatchFeedback(e,t,n){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,u.pipe)(e,h.T.fromArray(this._findAlert),h.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),h.T.foldSuccess((e=>a.right(this._ops._alertBatchFeedback(e,t,n)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,u.pipe)(this._findAlert(e.id),a.chain((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,u.pipe)(e,h.T.fromArray((e=>this._findAlert(e.id))),h.T.flatMap(i.uZ(),(e=>(0,u.pipe)(this._ops._changeMuteState(e,t)(),a.mapLeft((e=>(this._log.error("Can not change mute state",e),e))),m.unsafeGet))))}changeGapValue(e,t){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeGapValue(e,t)())))}changeTakeawayFeedback(e,t){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeTakeawayFeedback(e,t)())))}shortenItSummaryNotFound(e){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._shortenItSummaryNotFound(e)())))}sendShortenItSummaryRequest(e){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._commitShortenItSummaryRequest(e)())))}dismissShortenItTransformGroup(e,t){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._dismissShortenItTransformGroup(e,t)())))}changeToneAIToneAlternative(e,t){return(0,u.pipe)(this._findAlert(e),a.chain((e=>this._ops._changeToneAIToneAlternative(e,t)())))}}const v=i.uZ(),b=(0,a.getApplyMonoid)(v)},43320:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(51072),i=n(32952);class a{static init(e,t,n,r,s,o){const l=new i.xQ;return new a(e,t,n,r,s,o,l),l}constructor(e,t,n,r,i,s,o){const l=a.NamedChangesSink.factory(o),c={pm:l(a.Receiver.PM,r),dm:l(a.Receiver.PM,i),capi:l(a.Receiver.CAPI,n),userTextEcho:l(a.Receiver.UserText,e)};a.Producer.create(a.Producer.UserText,{changes:e.changes})(c.dm,c.pm,c.capi),a.Producer.create(a.Producer.ALERT_APPLY,s)(c.userTextEcho),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}}!function(e){let t,n,i,a;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...n)=>t.changes.subscribe((t=>{n.forEach((n=>n.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(n=e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:(i,a)=>{try{let s=t.pushChanges(a);"function"==typeof s&&(s=r.toPromise(s)),void 0!==s&&s.catch((t=>n.next({exception:t,details:{from:i,to:e}})))}catch(t){n.next({exception:t,details:{from:i,to:e}})}}}}e.factory=function(e){return(n,r)=>t(n,r,e)},e.create=t}(i=e.NamedChangesSink||(e.NamedChangesSink={})),function(e){e.create=e=>({changes:e.changes,pushChanges(t){e.pushChanges(t,"user")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(a=e.UserTextChangesSync||(e.UserTextChangesSync={}))}(a||(a={}))},5008:(e,t,n)=>{n.d(t,{A:()=>i,n:()=>r});var r,i,a=n(57050),s=n(25938),o=n(36991),l=n(8125),c=n(62965),u=n(24209);!function(e){e.noopSync={pushChanges:l.Q1},e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.ls)(e.pushChanges,c.UI(l.Q1))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(s.RI.isDelta(t)?s.RI.fromArrayOfDeltas(o.s.splitToDeleteThenInsert(t.delta).filter(o.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:u.T(...e.map((e=>e.changes)))}}}(i||(i={}))},91247:(e,t,n)=>{n.d(t,{w:()=>p});var r,i=n(57050),a=n(40327),s=n(50147),o=n(92843),l=n(68983),c=n(5114),u=n(51653),d=n(70996);!function(e){e.modelToCounters=function(e){return d.h.isRegistered(e)?e.counters:u.R.empty}}(r||(r={}));var p,m=n(66896);!function(e){e.monoid=s.uZ(m.R.Id.ord,m.R.Meta.group),e.eq=s.Eh(m.R.Id.ord,m.R.Meta.eq),e.isEmpty=s.xb,e.lookup=s.P5(m.R.Id.ord),e.applyDiff=t=>r=>c=>(0,a.pipe)(r,o.v.foldMap(e.monoid)(u(t),d(t),n(t)),(0,l.W)(e.monoid.concat)(c),s.hX((0,i.ff)(m.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let n=t;return e.forEach(((e,t)=>{n=(0,a.pipe)(n,s.cq(m.R.Id.ord)(t,m.R.Meta.ratioToPercentile(e)),c.fold((()=>(0,a.pipe)(n,s.ZQ(m.R.Id.ord)(t,m.R.Meta.fromPercentile(e)))),i.yR))})),n};const t=(0,i.ls)(r.modelToCounters,m.R.Meta.fromAlertCounters),n=e=>n=>p(e)(n,t),u=e=>n=>p(e)(n,(0,i.ls)(t,m.R.Meta.group.inverse)),d=t=>(r,i)=>e.monoid.concat(n(t)(i),u(t)(r)),p=e=>(t,n)=>(0,a.pipe)(e,s.hX((e=>e(t.alert))),s.UI((()=>n(t))))}(p||(p={}))},13313:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(38983),a=n(93508),s=n(57091),o=n(67434),l=n(98403),c=n(54216),u=n(4390),d=n(91247);!function(e){e.defaultState={alerts:u.p.empty,lenses:d.w.monoid.empty},e.get=(r,i,l)=>i.pipe(a.O(new Map),s.a(r.pipe(a.O(u.p.empty),o.R(((e,n)=>t(n,l.lensFilters)(e)),e.defaultState)),n)),e.getMock=(t,n)=>{const r=i.h.create(e.defaultState);return e.get(t,n,c.t.create(c.t.defaultLensFilters,c.t.defaultTextFilters)).subscribe(l.wW(r)),r};const t=(e,t)=>n=>{const r=u.p.Diff.toRegistered(u.p.diff(n.alerts,e));return{alerts:e,lenses:d.w.applyDiff(t)(r)(n.lenses)}},n=(e,t)=>Object.assign(Object.assign({},t),{lenses:d.w.updatePercentiles(e)(t.lenses)})}(r||(r={}))},35301:(e,t,n)=>{n.d(t,{J:()=>r});var r,i=n(71249),a=n(22690),s=n(57050),o=n(40327),l=n(38983),c=n(84966),u=n(80358),d=n(45701),p=n(50147),m=n(5114),h=n(43675),g=n(62965),f=n(8125),y=n(95195),x=n(81531),v=n(32952),b=n(9922),C=n(66310),I=n(85985),S=n(77176),w=n(2834),E=n(98403),A=n(16118),k=n(40151),T=n(74660),M=n(85654);!function(e){let t,n,r;!function(e){let t;!function(e){e.ord=d.ordString,e.show=a._3,e.create=e=>e}(t=e.Id||(e.Id={})),e.isSpecial=e=>Object.values(c.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>p.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>n=>{const r=Array.from(n.keys()),i=M.k.getAlerts(t,r).byCategory;return(0,o.pipe)(n,p.DZ((t=>e(t.id)?m.some(Object.assign(Object.assign({},t),{alertsCount:i.get(t.id).filter(T.bZ.isRegistered).length})):m.none)))}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let r,a;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(r=e.Events||(e.Events={})),e.create=function(e,a,d,p,k){const N=x.C8.Logging.getLogger("MutedAlertsModel"),L=l.h.create(new Map),O=new v.xQ,_=new b.w.Keeper,D=l.h.create(!1);return _.push(D.pipe(C.w((t=>e.pipe(I.h((()=>!t)),I.h(u.h.is("session_started")),S.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),w.b(E.wW(L)),w.b((()=>O.next({type:r.Type.CategoriesChanged}))))))).subscribe(),L.pipe(A.G(),S.U((([e,n])=>function(e,n){return{muted:h.diffKeys(t.Id.ord)(e,n),unmuted:h.diffKeys(t.Id.ord)(n,e)}}(e,n))),S.U(function(e){return({muted:t,unmuted:n})=>({toMute:M.k.getAlerts(e,t).all.filter((e=>e.mute!==T.bZ.MuteStateType.Muted)),toUnmute:M.k.getAlerts(e,n).all.filter((e=>e.mute!==T.bZ.MuteStateType.Unmuted))})}(d)),w.b((({toMute:e,toUnmute:t})=>{e.length>0&&p.changeMuteState(e,T.bZ.MuteStateType.Muted),t.length>0&&p.changeMuteState(t,T.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:O,mutedCategories:L,muteCategories:e=>{D.set(!0),(0,o.pipe)(a.sendFeedback({kind:c.Mw.MUTE,userMuteScope:k,userMuteCategories:e}),g.tS((()=>(D.set(!1),g.F2(f.Q1)))),g.Vn((e=>{N.warn("Alerts could not be muted on CAPI",e)})))();const n=M.k.getAlerts(d,e);0===n.all.filter((e=>e.mute!==T.bZ.MuteStateType.Muted)).length&&N.warn("No alerts were muted on category mute",{categoryIds:e});const s=function(e,n,r){return a=>{const s=new Map(a);return e.forEach(((e,a)=>{t.isSpecial(a)?s.set(a,{id:a,scope:n,description:t.specialCategoryDescription}):(0,o.pipe)(i.P5(0,e),m.chain((e=>e.muteCategory)),m.fold((()=>r.error("No alerts to mute",a)),(e=>s.set(a,{id:e.id,description:e.description,scope:n}))))})),s}}(n.byCategory,k,N)(L.get());return L.set(s),O.next({type:r.Type.CategoriesChanged}),y.right(void 0)},unmuteCategories:e=>{D.set(!0),(0,o.pipe)(a.sendFeedback({kind:c.Mw.UNMUTE,userMuteScope:k,userMuteCategories:e}),g.tS((()=>(D.set(!1),g.F2(f.Q1)))),g.Vn((e=>{N.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===M.k.getAlerts(d,e).all.filter((e=>e.mute!==T.bZ.MuteStateType.Unmuted)).length&&N.warn("No alerts were unmuted on category unmute",{categoryIds:e}),L.modify(function(e,t){return n=>{const r=new Map(n);return e.forEach((e=>{n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,N)),O.next({type:r.Type.CategoriesChanged}),y.right(void 0)},getMutedCategories:()=>(0,o.pipe)(L.get(),n.filterWithCount((0,s.ff)(t.isSpecial),d)),getMutedSpecialCategories:()=>(0,o.pipe)(L.get(),n.filter(t.isSpecial)),loadCachedMutedCategories:e=>{L.set(e)},dispose:()=>_.dispose()}},function(e){e.create=function(){return{events:k.E,mutedCategories:l.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>y.right(void 0),unmuteCategories:e=>y.right(void 0),loadCachedMutedCategories:f.Q1,dispose:f.Q1}}}(a=e.Mock||(e.Mock={}))}(r=e.CategoriesModel||(e.CategoriesModel={}))}(r||(r={}))},85654:(e,t,n)=>{n.d(t,{k:()=>r});var r,i=n(40327),a=n(5114),s=n(74660),o=n(4390);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,i.pipe)(e.getById(t),a.chain((e=>e.muteCategory)))}),e.getAlerts=function(e,t){const n={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,i.pipe)(e.get(),o.p.reduce(n,((e,{alert:n})=>(0,i.pipe)(n.muteCategory,a.filter((e=>t.includes(e.id))),a.map((e=>e.id)),a.alt((()=>a.fromNullable(t.find(s.bZ.belongsToSpecialCategory(n))))),a.fold((()=>e),(t=>(e.byCategory.get(t).push(n),e.all.push(n),e)))))))}}(r||(r={}))},51006:(e,t,n)=>{n.d(t,{X:()=>r});var r,i=n(22232);!function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony",e.GrammarlyGOIdeationAssistant="grammarlyGOIdeationAssistant",e.GrammarlyGORewrite="grammarlyGORewrite"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){switch(e){case t.Step2:case t.Step3:case t.Step5:case t.Step6:case t.Step7:case t.Step12:case t.Step13:case t.Step16:return!1;case t.Step1:case t.Step4:case t.Step8:case t.Step9:case t.Step10:case t.Step11:case t.Step14:case t.Step15:case t.DocumentTitle:case t.Synfony:case t.GrammarlyGOIdeationAssistant:case t.GrammarlyGORewrite:return!0;default:return(0,i.vE)(e)}}}(r||(r={}))},94048:(e,t,n)=>{n.d(t,{E:()=>r});const r=(0,n(83171).createTypeStyle)()},40219:(e,t,n)=>{n.d(t,{DY:()=>d,FY:()=>c,I3:()=>u,Ig:()=>b,Jr:()=>a,LB:()=>i,Q9:()=>f,VN:()=>l,fx:()=>s,g_:()=>h,mA:()=>o,mJ:()=>v,nt:()=>m,pZ:()=>y,rX:()=>x,v4:()=>C,w$:()=>p,xL:()=>g});var r=n(32096);const i=r.LB,a=r.Jr,s=r.fx,o=r.mA,l=(r.Ax,r.VN),c=r.FY,u=r.I3,d=(r.$n,r.DY),p=r.w$,m=r.nt,h=(r.cr,r.g_),g=r.xL,f=r.Q9,y=(r.WW,r.Ih,r.aS,r.pZ),x=(r.Jg,r.MZ,r.h,r.Ee,r.OB,r.Gu,r.Gk,r.Kp,r.rX),v=r.mJ,b=r.Ig,C=(r.FB,r.v4)},7910:(e,t,n)=>{n.d(t,{sJ:()=>f});var r=n(57050),i=n(40327),a=n(5114),s=n(91175),o=n(2844),l=n(77176),c=n(93508),u=n(28043),d=n(26027),p=n(48521),m=n(35416),h=n(6100),g=n(34442);function f(e){return(t,n,r,i,a,o)=>s.Z.composeKnot({content:s.Z.fromSideEffect((n=>{y(t)(n);const r=n.action.action;"item"===r.key&&e(r.action)}),v(n,a,o)),root:x(n,r,i)})}function y(e){return t=>{switch(t.action.action.action.kind){case g.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case g.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const x=(e,t,n)=>s.Z.fromSideEffect((e=>{t.next(e.element)}),o.aj([n,e.view("cardsHeight")]).pipe(l.U((([e,t])=>({disableUserActions:e,height:t}))),c.O({disableUserActions:!1,height:0}))),v=(e,t,n)=>{const s=e.view(h.v.Prism.items),c=e.pipe(l.U((e=>e.itemsOrd))),f=e.pipe(l.U((0,r.ls)(m.In.getActiveItem,a.map(d.X.getId)),u.x())),y=e.view(t.getActiveAlertsCount).view((e=>0===e));return o.aj([s,f,y,c]).pipe(l.U((([e,r,s,o])=>{const l=(0,i.pipe)(e.find((e=>e.positionState.watched)),a.map((e=>e.value))),c=e.getAt(e.size-1);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.pipe)(t,a.exists((t=>t.id===e.id)))||(0,i.pipe)(t,a.exists((e=>e.positionState.isHeightValid))))(e,l))).map((e=>function(e){return(t,n,r,s)=>o=>{const l=(0,i.pipe)(t,a.exists((e=>e===o.id)));return{cell:{item:e.viewState(n,r)(o),root:{height:{value:o.positionState.height,watched:o.positionState.watched&&!e.isScheduledToDispose(o),isValid:o.positionState.isHeightValid},position:{top:o.positionState.absTop,animationInProgress:o.positionState.animationInProgress},layer:l||p.o.isAnimatable(o)&&o.visualState.incomplete&&!(0,i.pipe)(o.visualState.from,a.exists((e=>"focused"===e)))?g.H.Layer.front:g.H.Layer.back}},root:o.id,hashCode:o.hashCode.bind(o),equals:e=>o.equals(e.cell.item.view),compare:e=>s.compare(o,e.cell.item.view)}}}(t)(r,s,(0,i.pipe)(c,a.exists((t=>t.id===e.id))),o)(e)),n(o))})))}},68579:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),a=n(5739),s=n(12187),o=n(8125),l=n(5114),c=n(91175),u=n(89894),d=n(34442),p=n(95983),m=n(77176);!function(e){let t;function n(e){return c.UI.List.make(p.aW.getFoldableWithIndex(),r(e))}function r(t){return c.UI.Knot.make(e.IdProvider,{cell:c.UI.Knot.make(d.H.Cell,{item:c.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return c.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=c.UI.Grid.make((({notify:e,view:n,slots:r})=>i.createElement(a.F.div,Object.assign({},(0,s.Sh)(n("disableUserActions").pipe(m.U((0,o.RN)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:n("height")},mount:n=>e({kind:t.onMount,element:l.fromNullable(n)})()}),r.content))),e.cell=r,e.CardStyleProvider=c.UI.Grid.make((({slots:e})=>i.createElement("div",{className:g.cardWrapper},e.children))),e.IdProvider=c.UI.Grid.make((({slots:e,state:t})=>i.createElement(a.F.div,{"data-id":t},e.cell)))}(r||(r={}));const h={margin:`${u.ux.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:u.ux.rem(-.5),width:u.ux.rem(.5),height:u.ux.percent(100),background:"none",content:"''"}}},g=u.ux.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},27195:(e,t,n)=>{n.d(t,{Q:()=>ce});var r,i=n(27378),a=n(5739),s=n(91175),o=n(28043),l=n(77176),c=n(88529),u=n(54290),d=n(22391),p=n(35108),m=n(57050),h=n(40327),g=n(59312),f=n(5114),y=n(83078),x=n(95300),v=n(78146),b=n(98036),C=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new I(e,this._keySelector))},e}(),I=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=f.none,r}return(0,g.__extends)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,h.pipe)(this._currentGroup,f.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,a=r.group;i!==n?(a.complete(),t._currentGroup=f.none,t._createGroup(n,e)):a.closed||a.next(e)})))},t.prototype._createGroup=function(e,t){var n=new x.X(t);this._currentGroup=f.some({key:e,group:n}),this.destination.next(new v.T(e,n,this))},t.prototype._error=function(e){(0,h.pipe)(this._currentGroup,y.tap((function(t){return t.group.error(e)}))),this._currentGroup=f.none,this.destination.error(e)},t.prototype._complete=function(){(0,h.pipe)(this._currentGroup,y.tap((function(e){return e.group.complete()}))),this._currentGroup=f.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(b.L),S=n(66310),w=n(19751),E=n(76974),A=n(8125),k=n(44060),T=n(81531),M=n(48643),N=n(89894),L=n(40219),O=n(26027),_=n(77610),D=n(50224),F=n(91324),P=n(87684),R=n(76578),j=n(93462),U=n(28748);!function(e){e.Mini=({card:e,actions:t})=>i.createElement(a.F.Fragment,null,e.pipe(l.U((e=>_.i.isToneAIItem(e)?i.createElement(U.Y.BundleMini,{card:e,actions:t}):_.i.isEthicalAIItem(e)?i.createElement(j.T.Mini,{card:e,actions:t,useBundleContainer:!0}):i.createElement(R.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:n,renderCard:c})=>{const{isChecking:u,isCheckingGlobal:d,transform:p}=O.X.useCardStates(e),g=e=>(s("CardBundle").error("card type not supported:",e),null),f=e.pipe((e=>e.lift(new C((e=>e.activeAlert.id)))),S.w((e=>e.pipe(o.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),l.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,h.pipe)(e,o.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),w.shareReplay({bufferSize:1,refCount:!0}))}))))))),y=(e,t)=>{const r=t.alerts.length,s=1===r?le.bundleInnerContainer:2===r?le.bundleInnerContainer2Cards:le.bundleInnerContainerNCards;return i.createElement(a.F.div,{className:s},c?c({card:t,actions:n,isChecking:u,isCheckingGlobal:d,transform:e}):i.createElement(P.J,{card:t,actions:n,isChecking:u,transform:e,isCheckingGlobal:d}))};return i.createElement(a.F.Fragment,null,e.pipe(l.U((s=>_.i.isIndependentBundleItem(s)?y(p,s):i.createElement(r,{card:e,actions:n},i.createElement(t,{state:f,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,M.EJ)(""),next:(0,M.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,M.EJ)(le.inBundleToUpdatedCardOld),next:(0,M.EJ)(le.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,M.EJ)(le.inBundleToUpdatedCardOld),next:(0,M.EJ)(le.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,M.EJ)(le.inBundleToNextCardOld),next:(0,M.EJ)(le.inBundleToNextCardNew)}:{prev:(0,M.EJ)(le.inBundleToPrevCardOld),next:(0,M.EJ)(le.inBundleToPrevCardNew)}}},(e=>i.createElement(a.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:m.Q1},(0,h.pipe)(e.state.card,l.U((0,m.ls)(_.i.match({super:g,ethicalAI:g,takeaway:t=>y("prev"===e.type?E.of(t.transform):p,t),synfony:t=>y("prev"===e.type?E.of(t.transform):p,t),shortenIt:t=>y("prev"===e.type?E.of(t.transform):p,t),toneAI:t=>y("prev"===e.type?E.of(t.transform):p,t),suggestedSnippet:t=>y("prev"===e.type?E.of(t.transform):p,t),knowledgeHubSuggestedTerm:t=>y("prev"===e.type?E.of(t.transform):p,t),default:t=>y("prev"===e.type?E.of(t.transform):p,t)}),O.X.foldCard)))))))))))};class t extends M.l5{}const n=({alertCount:e})=>1===e?i.createElement(i.Fragment,null):2===e?i.createElement("div",{className:le.bundleFakeCard1}):i.createElement(i.Fragment,null,i.createElement("div",{className:le.bundleFakeCard1}),i.createElement("div",{className:le.bundleFakeCard2})),r=({children:e,card:t,actions:r})=>i.createElement(a.F.div,{className:le.bundleCardWrapper},i.createElement(F.PS,{card:t,actions:r}),i.createElement(a.F.div,{className:le.cardBundleContainer},e,(0,h.pipe)((e=>(0,h.pipe)(e,l.U((e=>f.some(e.alerts.length)))))(t),l.U(f.map((e=>i.createElement(n,{key:e,alertCount:e})))),l.U(f.toNullable)))),s=(0,A.HP)(T.C8.Logging.getLogger)}(r||(r={}));const $=.25,B="0 1px 8px rgba(109, 117, 141, .18)",z=N.ux.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),G=N.ux.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),W=N.ux.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),H=N.ux.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),V=N.ux.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),Y={position:"relative",borderRadius:N.ux.rem(L.Jr),background:k.Il.CoreNeutral0,boxShadow:B,zIndex:2},Z={marginTop:N.ux.rem(.75)},Q={marginTop:N.ux.rem(1.25)},q={position:"absolute",top:N.ux.px(-5),right:N.ux.rem(.5),left:N.ux.rem(.5),zIndex:-1,display:"block",height:N.ux.percent(100),borderRadius:N.ux.rem(L.Jr),backgroundColor:k.Il.CoreNeutral1,boxShadow:B,content:"' '"},J={position:"absolute",top:N.ux.px(-10),right:N.ux.rem(1),left:N.ux.rem(1),zIndex:-2,display:"block",height:N.ux.rem(2),borderRadius:N.ux.rem(L.Jr),backgroundColor:k.Il.CoreNeutral10,boxShadow:B,content:"' '"},X={borderRadius:N.ux.rem(.75),background:k.Il.CoreNeutral20,margin:`${N.ux.rem(-.25)} ${N.ux.rem(-.25)}`,padding:`${N.ux.rem(.25)} ${N.ux.rem(.25)}`,$nest:{[`& .${D.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${D.g.fullCardSelector}`]:{padding:`${N.ux.rem(.75)} ${N.ux.rem(.5)} ${N.ux.rem(.5)} ${N.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${N.ux.rem(-.5)})`}}},K={position:"absolute",top:N.ux.rem(.8),right:N.ux.rem(1),margin:0},ee={borderRadius:N.ux.rem(L.Jr),background:k.Il.CoreNeutral0,boxShadow:B},te={display:"block",position:"absolute",top:0,$nest:{[`& .${D.g.bundleInnerContainerSelector}`]:{margin:0}}},ne={animation:`${V} ${N.ux.seconds($)} ease-out`},re={animation:`${W} ${N.ux.seconds($)} ease-out`},ie={animation:`${G} ${N.ux.seconds($)} ease-in`},ae={animation:`${H} ${N.ux.seconds($)} ease-in`},se={display:"none",animation:`${z} ${N.ux.seconds($)} ease-in`},oe={animation:`${z} ${N.ux.seconds($)} ease-in`},le=Object.assign(Object.assign({},N.ux.stylesheet({bundleInnerContainer:[Y],bundleCardWrapper:[X],minimalBetaLabel:[K],compactCardContainer:[ee],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[te],inBundleToPrevCardOld:[te,ne],inBundleToPrevCardNew:[re],inBundleToNextCardOld:[te,ie],inBundleToNextCardNew:[ae],inBundleToUpdatedCardOld:[se],inBundleToUpdatedCardNew:[oe]})),{bundleInnerContainer:N.ux.joinClasses([D.g.bundleInnerContainerSelector,N.ux.style(Y)]),bundleInnerContainer2Cards:N.ux.joinClasses([D.g.bundleInnerContainerSelector,N.ux.style(Y,Z)]),bundleInnerContainerNCards:N.ux.joinClasses([D.g.bundleInnerContainerSelector,N.ux.style(Y,Q)]),bundleFakeCard1:N.ux.joinClasses([D.g.bundleFakeCard1Selector,N.ux.style(q)]),bundleFakeCard2:N.ux.joinClasses([D.g.bundleFakeCard2Selector,N.ux.style(J)])});var ce;!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(a.F.Fragment,null,n.pipe(o.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),l.U((a=>i.createElement(d.p.Provider,{card:n,cardVisibleViewportHeight:t("visibleViewportHeight")},(s=>i.createElement(u.b.Card,{mount:s,miniCard:i.createElement(r.Mini,{card:n,actions:e}),fullCard:i.createElement(r.Full,{card:n,actions:e}),successCard:i.createElement(c.A.Success,{cardData:a,isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(c.A.FeedbackForm,{cardData:a,actions:e}),mutedCard:i.createElement(c.A.MutedAlert,{cardData:a,actions:e}),actions:e,card:a,transitionClassMapper:p.a})))))))}))}(ce||(ce={}))},22373:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(27378),a=n(57050),s=n(5739),o=n(91175),l=n(28043),c=n(77176),u=n(88529),d=n(54290),p=n(22391),m=n(19025);!function(e){e.Card=e=>o.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(s.F.Fragment,null,n.pipe(l.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),c.U((r=>i.createElement(p.p.Provider,{card:n,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>i.createElement(d.b.Card,{mount:a,miniCard:i.createElement(u.A.Mini,{card:n,actions:e}),fullCard:i.createElement(u.A.Full,{card:n,actions:e}),successCard:i.createElement(u.A.Success,{cardData:r,isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(u.A.FeedbackForm,{cardData:r,actions:e}),actions:e,card:r,mutedCard:i.createElement(u.A.MutedAlert,{cardData:r,actions:e})})))))))})),e.DenaliCardWrapper=o.UI.Grid.make((({slots:e,view:t})=>i.createElement(s.F.div,{className:(0,a.zG)(t("layoutDensity"),c.U((e=>(0,m.f8)(e).container)))},e.children)))}(r||(r={}))},92569:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(27378),a=n(5739),s=n(8125),o=n(91175),l=n(44060),c=n(62295),u=n(31278),d=n(66896),p=n(89894),m=n(77176),h=n(57091),g=n(85985);!function(e){e.DefaultCounter=o.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t,lensId:n})=>i.createElement(c.x.OutcomeCounter,{count:e,theme:{counterWrapper:E.get(n),counterContent:w.counterContent},type:"gray",fontSize:t}))))))),e.ZeroCounter=o.UI.Node.make((()=>i.createElement(u.JO.CheckmarkOutcomes,{className:w.zeroCounter}))),e.PlagiarismCounter=o.UI.Node.make((({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(m.U((({count:e,fontSize:t})=>i.createElement(c.x.OutcomeCounter,{count:e,theme:{counterWrapper:w.plagiarismCounterWrapper,counterContent:w.plagiarismCounterContent},suffix:"%",type:"gray",fontSize:t}))))))),e.Component=o.UI.Union.make("kind",{plagiarism:e.PlagiarismCounter,default:e.DefaultCounter,zero:e.ZeroCounter});const t=e=>!d.R.isPlagiarismId(e);e.createLensCounterFlow=(e,n,r)=>o.Z.composeUnion({plagiarism:o.Z.fromSideEffect(s.Q1,n.pipe(m.U((e=>({count:e,fontSize:r}))))),default:o.Z.fromSideEffect(s.Q1,n.pipe(h.a(e.pipe(g.h(t))),m.U((([e,t])=>({count:e,lensId:t,fontSize:r}))))),zero:o.Z.fromSideEffect(s.Q1,null)},(()=>e.pipe(h.a(n),m.U((([e,t])=>({kind:0===t?"zero":e===d.R.SpecialId.Plagiarism?"plagiarism":"default"}))))));const n={fill:p.ux.important(l.Il.CoreNeutral0)},r={fill:p.ux.important(l.Il.CoreNeutral50)},f={fill:p.ux.important(l.Il.CoreRed50)},y={fill:p.ux.important(l.Il.CoreBlue50)},x={fill:p.ux.important(l.Il.CoreGreen50)},v={fill:p.ux.important(l.Il.CorePurple50)},b={fill:p.ux.important(l.Il.CoreNeutral50)},C={fill:p.ux.important(l.Il.CoreNeutral50)},I={fill:p.ux.important(l.Il.CoreCyan50)},S={fill:l.Il.CoreGreen50,minHeight:0,minWidth:p.ux.rem(1)},w=p.ux.stylesheet({counterWrapper:[],counterContent:[n],zeroCounter:[S],allAlertsCounter:[r],priorityAlertsCounter:[r],correctnessCounter:[f],clarityCounter:[y],engagementCounter:[x],deliveryCounter:[v],voxCounter:[b],knowledgeHubCounter:[C],plagiarismCounterWrapper:[I],plagiarismCounterContent:[n,{}]}),E=new Map([[d.R.SpecialId.AllAlerts,w.allAlertsCounter],[d.R.SpecialId.Priority,w.priorityAlertsCounter],[d.R.SpecialId.Correctness,w.correctnessCounter],[d.R.SpecialId.Clarity,w.clarityCounter],[d.R.SpecialId.Engagement,w.engagementCounter],[d.R.SpecialId.Delivery,w.deliveryCounter],[d.R.SpecialId.Vox,w.voxCounter],[d.R.SpecialId.KnowledgeHub,w.knowledgeHubCounter],[d.R.SpecialId.CorrectnessPriority,w.correctnessCounter],[d.R.SpecialId.ClarityPriority,w.clarityCounter],[d.R.SpecialId.EngagementPriority,w.engagementCounter],[d.R.SpecialId.DeliveryPriority,w.deliveryCounter],[d.R.SpecialId.VoxPriority,w.voxCounter],[d.R.SpecialId.KnowledgeHubPriority,w.knowledgeHubCounter]])}(r||(r={}))},40743:(e,t,n)=>{n.d(t,{C:()=>f});var r=n(27378),i=n(40327),a=n(5739),s=n(5114),o=n(91175),l=n(44060),c=n(64757),u=n(3929),d=n(3656),p=n(66896),m=n(89894),h=n(40219),g=n(77176);const f=o.UI.Node.make((({state:e,notify:t})=>r.createElement(a.F.Fragment,null,e.pipe(g.U((({previews:e,disabled:n,activeLensId:o})=>r.createElement(a.F.div,{className:k.lensNavigation},e.map((e=>r.createElement(c.zx.Flat,{name:e.id,key:e.id,className:k.lensButton,active:(0,i.pipe)(o,s.exists((t=>t===e.id))),disabled:n,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},r.createElement(u.B,{value:e.progress,wrapperClass:k.progressBarWrapper,progressClass:y(e.id)}),r.createElement(d.XY,{className:k.lensButtonText},e.title)))))))))));function y(e){switch(e){case p.R.SpecialId.Correctness:return k.correctnessProgressBar;case p.R.SpecialId.Clarity:return k.clarityProgressBar;case p.R.SpecialId.Engagement:return k.engagementProgressBar;case p.R.SpecialId.Delivery:return k.deliveryProgressBar;case p.R.SpecialId.Vox:return k.voxProgressBar;default:return}}const x={display:"flex",height:m.ux.percent(100),justifyContent:"space-between",alignItems:"center"},v={display:"flex",flexDirection:"column",marginRight:m.ux.rem(.3125),padding:`${m.ux.rem(.375)} ${m.ux.rem(.25)} 0`,borderRadius:m.ux.rem(h.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},b={textTransform:"uppercase",fontSize:m.ux.px(8)},C={width:m.ux.rem(2),backgroundColor:l.Il.CoreNeutral20},I={backgroundColor:l.Il.CoreRed50},S={backgroundColor:l.Il.CoreBlue50},w={backgroundColor:l.Il.CoreGreen50},E={backgroundColor:l.Il.CorePurple50},A={backgroundColor:l.Il.CoreNeutral50},k=m.ux.stylesheet({lensNavigation:[x],lensButton:[v],lensButtonText:[b],progressBarWrapper:[C],correctnessProgressBar:[I],clarityProgressBar:[S],engagementProgressBar:[w],deliveryProgressBar:[E],voxProgressBar:[A]})},34442:(e,t,n)=>{n.d(t,{H:()=>k});var r=n(27378),i=n(5739),a=n(12187),s=n(19962),o=n(91175),l=n(89894),c=n(40219),u=n(16782),d=n(41398),p=n(66310),m=n(24209),h=n(49708),g=n(85985),f=n(17343),y=n(76974),x=n(13444),v=n(50628),b=n(40151),C=n(2834),I=n(85089),S=n(28043),w=n(90845),E=n(77176),A=n(93508);var k;!function(e){let t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=o.UI.Grid.make((({slots:e,state:o,notify:l})=>{const c=new u.t,k=o.pipe(d.M(c),p.w((([e,t])=>e.position.animationInProgress?m.T(h.R(t,"transitionend").pipe(g.h((e=>e.target===t&&"transform"===e.propertyName)),f.h(void 0)),y.of(void 0).pipe(x.g(200))).pipe(v.P()):b.E)),C.b(l({kind:n.completePositionAnimation}))),T=o.pipe(d.M(c),p.w((([e,t])=>e.height.watched?I.YC(t).pipe(g.h((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):b.E)),S.x(),C.b((({height:e})=>l({kind:n.changePosition,height:e})())));w.P.useSubscriptionTo(m.T(k,T));const M=o.pipe(E.U((e=>e.position.top)),E.U((e=>s.CSS.translateY(e))),S.x()),L=o.pipe(E.U((e=>e.layer===t.front?1:0)),S.x()),O=o.pipe(E.U((({position:e})=>e)),S.x(((e,t)=>e.top===t.top)),E.U((({animationInProgress:e})=>e?N.animate:void 0)),A.O(void 0));return r.createElement(i.F.div,Object.assign({},(0,a.Sh)(N.item,O),{style:{transform:M,zIndex:L},mount:e=>{null!==e&&c.next(e)}}),e.item)}))}(k||(k={}));const T={position:"absolute",boxSizing:"border-box",width:l.ux.percent(100),contain:"layout"},M={transition:`transform ${l.ux.seconds(c.v4/1e3)} linear`},N=l.ux.stylesheet({item:[T],animate:[M]})},52249:(e,t,n)=>{if(n.d(t,{A:()=>d}),3075==n.j)var r=n(22232);var i=n(91175);if(3075==n.j)var a=n(66896);if(3075==n.j)var s=n(74660);if(3075==n.j)var o=n(85985);if(3075==n.j)var l=n(77176);if(3075==n.j)var c=n(28043);if(3075==n.j)var u=n(39474);function d(e,t,n,d){const p=t.pipe(o.h((e=>e!==a.R.SpecialId.Premium)),l.U((e=>e===a.R.SpecialId.Priority?u.H.LensMode.priority:u.H.LensMode.all)),c.x());return i.Z.fromSideEffect((t=>{if(t.kind===u.H.Action.Kind.select)e.events.next({type:"switchToLens",id:t.selected===u.H.LensMode.priority?a.R.SpecialId.Priority:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});else(0,r.vE)(t.kind)}),p.pipe(l.U((e=>({ord:"priority"===n?u.H.Order.priorityFirst:u.H.Order.allFirst,layoutMode:d,lensMode:e})))))}},39474:(e,t,n)=>{n.d(t,{H:()=>k});var r=n(27378),i=n(5739),a=n(12187),s=n(45701),o=n(22232),l=n(91175),c=n(50474),u=n(64757),d=n(31278),p=n(65223),m=n(77176),h=n(44060),g=n(3656),f=n(89894),y=n(40219);const x=f.ux.style({display:"inline-flex",overflow:"visible",border:`2px solid ${h.Il.CoreNeutral10}`,borderRadius:f.ux.rem(y.fx),backgroundColor:h.Il.CoreNeutral10}),v=f.ux.joinClasses([f.ux.style({padding:`0 ${f.ux.rem(.5)} 0 ${f.ux.rem(.5)}`,display:"inline-flex",justifyContent:"space-around",textAlign:"center",$nest:{"&:first-child":{marginRight:f.ux.px(2)}}}),g.oB.base]),b=f.ux.style({fontSize:f.ux.rem(h.xv.SmallSize)}),C=f.ux.style({width:f.ux.rem(2.5)}),I=f.ux.style({width:f.ux.rem(9.5)}),S=f.ux.joinClasses([f.ux.style({width:f.ux.rem(2.25)}),b]),w=f.ux.joinClasses([f.ux.style({width:f.ux.rem(8.75)}),b]),E=f.ux.joinClasses([f.ux.style({borderRadius:f.ux.rem(y.fx),backgroundColor:h.Il.CoreNeutral0,boxShadow:h.uc.Z100,fontWeight:600,$nest:{"&[data-disabled='true']":{backgroundColor:h.Il.CoreNeutral0}}}),v]),A=f.ux.style({display:"inline-flex",width:f.ux.rem(1.25),minWidth:0,minHeight:0,fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50,$nest:{"&[data-disabled='true']":{fill:h.Il.CoreNeutral50,stroke:h.Il.CoreNeutral50}}});var k;!function(e){let t,n,h;!function(e){e.priority="priority",e.all="all"}(t=e.LensMode||(e.LensMode={})),function(e){let t;!function(e){e.select="select"}(t=e.Kind||(e.Kind={}))}(n=e.Action||(e.Action={})),function(t){t.priorityFirst=s.fromCompare((t=>t===e.LensMode.priority?-1:1)),t.allFirst=s.fromCompare((t=>t===e.LensMode.all?-1:1))}(h=e.Order||(e.Order={})),e.Component=l.UI.Node.make((({state:e,notify:s})=>r.createElement(i.F.div,{key:"feedModeSelector",className:x},e.pipe(m.U((({lensMode:e,layoutMode:i,ord:o})=>[t.all,t.priority].sort(o.compare).map((t=>r.createElement(u.zx,Object.assign({name:`${t}-lens`,key:`${t}-lens`,disabled:e===t,onClick:()=>s({kind:n.Kind.select,selected:t})()},(0,a.Sh)(e===t?E:v,f(t,i))),r.createElement(g,{selected:t}))))))))));const g=({selected:e})=>{const n=r.useContext(c.m.Context).feedModeSelector;switch(e){case t.all:return r.createElement(r.Fragment,null,n.all);case t.priority:return r.createElement(r.Fragment,null,n.priority,r.createElement(p.u,{align:"bottomCenter",title:n.priorityDescription},r.createElement(d.JO.Info,{width:10,className:A})));default:(0,o.vE)(e)}},f=(e,n)=>{switch(e){case t.all:return"compact"===n?S:C;case t.priority:return"compact"===n?w:I;default:(0,o.vE)(e)}}}(k||(k={}))},84317:(e,t,n)=>{n.d(t,{HP:()=>o});var r=n(91175);if(3075==n.j)var i=n(66310);if(3075==n.j)var a=n(92569);if(3075==n.j)var s=n(52249);function o(e,t,n,o,l,c){return r.Z.composeKnot({info:a.A.createLensCounterFlow(t,t.pipe(i.w((e=>l.getLens(e).view("count")))),c),switcher:(0,s.A)(e,t,n,o)})}},43623:(e,t,n)=>{n.d(t,{B:()=>v});var r=n(27378),i=n(5739),a=n(91175),s=n(64757),o=n(31278),l=n(92569),c=n(77176),u=n(39474),d=n(3656),p=n(89894);const m=p.ux.style({display:"inline-flex",verticalAlign:"middle",marginRight:p.ux.rem(.75),alignItems:"center"}),h=p.ux.joinClasses([p.ux.style({fontWeight:"bold"}),d.oB.base]),g=p.ux.style({minHeight:p.ux.rem(1.5)}),f=p.ux.style({$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:"transparent"}}}),y=p.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center"}),x=p.ux.style({marginTop:p.ux.rem(.35)});var v;!function(e){let t,n;e.Grid=a.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:m},e.info),e.switcher))),e.GridWithBulkAccept=a.UI.Grid.make((({slots:e})=>r.createElement("div",{className:y},r.createElement("span",{className:x},e.headerContent),e.bulkAccept))),function(e){let t;!function(e){let t;!function(e){e.switchBack="switchBack"}(t=e.Kind||(e.Kind={}))}(t=e.Action||(e.Action={})),e.Component=a.UI.Node.make((({state:e,notify:n})=>r.createElement(i.F.Fragment,null,e.pipe(c.U((({lensTitle:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:h},e),r.createElement(s.zx.Flat,{name:"switch-back",title:"Back to all suggestions",className:f,onClick:()=>n({kind:t.Kind.switchBack})()},r.createElement(o.JO.Close,{className:g})))))))))}(t=e.LensFilter||(e.LensFilter={})),function(e){e.Component=a.UI.Grid.make((({slots:e})=>r.createElement(r.Fragment,null,r.createElement("span",{className:m},e.counter),e.filter)))}(n||(n={})),e.DefaultHeader=a.UI.Knot.make(e.Grid,{info:l.A.Component,switcher:u.H.Component}),e.LensInfoComponent=a.UI.Knot.make(n.Component,{counter:l.A.Component,filter:t.Component}),e.WithFilterHeader=a.UI.Knot.make(e.Grid,{info:e.LensInfoComponent,switcher:u.H.Component}),e.Component=a.UI.Union.make("kind",{withFilter:e.WithFilterHeader,withoutFilter:e.DefaultHeader})}(v||(v={}))},92644:(e,t,n)=>{if(n.d(t,{i:()=>m}),3075==n.j)var r=n(22232);var i=n(91175);if(3075==n.j)var a=n(66896);if(3075==n.j)var s=n(74660);if(3075==n.j)var o=n(24713);if(3075==n.j)var l=n(28043);if(3075==n.j)var c=n(85985);if(3075==n.j)var u=n(77176);if(3075==n.j)var d=n(57091);if(3075==n.j)var p=n(87667);function m(e,t,n){const m=e.getLens(a.R.SpecialId.AllAlerts).pipe(o.j("count"),l.x()),h=e.getLens(a.R.SpecialId.Priority).pipe(o.j("count"),l.x()),g=n.pipe(c.h((e=>e!==a.R.SpecialId.Premium)),u.U((e=>e===a.R.SpecialId.Priority?"priority":"all")),l.x());return i.Z.fromSideEffect((e=>{switch(e){case p.n.Actions.switchToAll:t.events.next({type:"switchToLens",id:a.R.SpecialId.AllAlerts,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.switchToPriority:t.events.next({type:"switchToLens",id:a.R.SpecialId.Priority,focusFirst:!1,actionSource:s.l$.sidebar});break;case p.n.Actions.openSetGoals:t.events.next({type:"setGoals"});break;default:(0,r.vE)(e)}}),g.pipe(d.a(m,h,((e,t,n)=>({allAlertsCount:t,priorityAlertsCount:n,selectedLens:e})))))}},87667:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(27378),a=n(38983),s=n(5739),o=n(91175),l=n(44060),c=n(50474),u=n(64757),d=n(18813),p=n(31278),m=n(89894),h=n(40219),g=n(77176),f=n(2844);!function(e){let t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=o.UI.Node.make((({state:e,notify:n})=>{const r=i.useContext(c.m.Context).priorityLens,o=a.h.create(!1);return i.createElement(d.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:M.dropdownContainer,dropdownList:M.dropdownContent},onVisibilityChange:e=>o.set(e),activeDescendantId:e.pipe(g.U((e=>e.selectedLens))),label:i.createElement(s.F.Fragment,null,f.aj([e,o]).pipe(g.U((([{selectedLens:e,priorityAlertsCount:t,allAlertsCount:n},a])=>{const s="priority"===e,o=s?t:n;return i.createElement("div",{className:a?M.labelOpened:M.labelClosed},s?r.prioritySuggestion:r.allSuggestion,o>0&&i.createElement("span",{className:M.alertCount}," "," ",o," "),i.createElement(p.JO.Arrow,{direction:a?p.n4.up:p.n4.down,className:M.labelArrow}))}))))},i.createElement(s.F.Fragment,null,e.pipe(g.U((({selectedLens:e,priorityAlertsCount:a,allAlertsCount:s})=>{const o="priority"===e;return i.createElement(i.Fragment,null,i.createElement(u.zx.Flat,{id:"priority",name:"priorityAlerts",className:o?M.boldLensButton:M.lensButton,onClick:n(t.switchToPriority)},i.createElement(p.JO.Star,{width:12}),r.prioritySuggestion,o?i.createElement(p.JO.Yes,{className:M.checkMarkIcon}):null),o&&a===s?i.createElement("div",{className:M.disabledLensButton},i.createElement(p.JO.Formatting.BulletList,{width:21}),r.disabledAllSuggestion):i.createElement(u.zx.Flat,{id:"all",name:"allAlerts",className:o?M.lensButton:M.boldLensButton,onClick:n(t.switchToAll)},i.createElement(p.JO.Formatting.BulletList,{width:21}),r.allSuggestion,o?null:i.createElement(p.JO.Yes,{className:M.checkMarkIcon})),i.createElement("div",{className:M.separator}),i.createElement("div",{className:M.description},i.createElement(p.JO.Info,{className:M.descriptionIcon}),i.createElement("div",null,r.description)))})))))}))}(r||(r={}));const y={display:"flex",width:m.ux.rem(16)},x={zIndex:h.FY,marginTop:0,fontSize:m.ux.rem(.875),lineHeight:m.ux.rem(1.3125)},v={display:"flex",boxSizing:"border-box",padding:`${m.ux.rem(.1875)} ${m.ux.rem(.25)} ${m.ux.rem(.1875)} ${m.ux.rem(.25)}`,height:m.ux.rem(1.5),borderRadius:m.ux.rem(h.fx),color:l.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:m.ux.rem(.025),fontSize:m.ux.rem(.625),lineHeight:m.ux.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:l.Il.CoreNeutral20}}},b={backgroundColor:l.Il.CoreNeutral10},C={color:l.Il.CoreNeutral50,whiteSpace:"pre"},I={minWidth:m.ux.rem(1),minHeight:m.ux.rem(1),marginLeft:m.ux.rem(.5625)},S={padding:`0 ${m.ux.rem(.5)}`,color:l.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},w={display:"flex",padding:`0 ${m.ux.rem(.5)}`,height:m.ux.rem(2),color:l.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},E={margin:`${m.ux.rem(.5)} ${m.ux.rem(1)}`,width:`calc(100% - ${m.ux.rem(2)})`,height:m.ux.px(1),backgroundColor:l.Il.CoreNeutral20},A={display:"flex",padding:`0 ${m.ux.rem(.5)} ${m.ux.rem(.5)} ${m.ux.rem(.5)}`,fontSize:m.ux.rem(.75),lineHeight:m.ux.rem(1.125),alignItems:"center"},k={marginBottom:"auto",minHeight:m.ux.rem(1.25)},T={color:l.Il.CoreBlue60,cursor:"pointer"},M=m.ux.stylesheet({dropdownContainer:[y],dropdownContent:[x],labelClosed:[v],labelOpened:[v,b],alertCount:[C],labelArrow:[I],lensButton:[S],disabledLensButton:[w],boldLensButton:[S,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[E],description:[A],descriptionIcon:[k],descriptionLink:[T]})},56305:(e,t,n)=>{n.d(t,{k:()=>y});var r,i=n(57050),a=n(40327),s=n(38983),o=n(73353),l=n(5114),c=n(83078),u=n(22232),d=n(91175),p=n(81531),m=n(20817);!function(e){e.unwrap=function(e){return m.Ri.create(l.getOrElse((()=>e)),l.some)}}(r||(r={}));var h,g=n(98403);!function(e){e.create=function(e,t,n,i){const a=r.unwrap(t.style),c=r.unwrap(t.audience),u=r.unwrap(o.R$.OutcomeContext.defaultAcademic),d=r.unwrap(t.domain),p=s.h.create(e),m=p.lens("style").lens(a),h=p.lens("domain").lens(d),f=p.lens("outcomeContext").lens(u).lens("type"),y=p.lens("outcomeContext").lens(u).lens("citation"),x=n.isStudentsOFE?h.view((e=>"academic"!==e)):s.h.create(!0),v=g.U_(x),b={audience:{items:o.R$.audiences,current:p.lens("audience").lens(c),default:l.some(t.audience),isVisible:x},formality:{items:o.R$.formalityLevels,current:m,default:l.some(t.style),isVisible:x,shouldDisable:e=>h.view((t=>!o.R$.isStyleValidWithDomain(t,e)))},domain:{items:o.R$.domains,current:h,default:l.some(t.domain),isVisible:s.h.create(!0),shouldDisable:e=>m.view((t=>n.isFree?"general"!==e:!o.R$.isStyleValidWithDomain(e,t)))},intent:{items:o.R$.goals.filter((e=>"sell"!==e)),isVisible:x,current:p.lens("goals")},type:{items:o.R$.academicTypes,default:l.some("essay"),isVisible:v,current:f},format:{items:o.R$.citation,default:l.some("apa"),isVisible:v,current:y}};return{localContext:p,blocks:b,showSetGoalsLoader:s.h.create(!n.demoMode&&i)}}}(h||(h={}));var f=n(13863);function y(e,t,n,r,m,g,y,x){const v=(0,a.pipe)(e.defaultContext.get(),l.fold((()=>(p.C8.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",m),m)),i.yR)),b=h.create(e.context.get(),v,g,x),C=s.h.combine(b.showSetGoalsLoader,b.localContext,((e,t)=>({blocks:b.blocks,context:t,showOnLoad:e,features:g,source:r})));return d.Z.fromSideEffect((r=>{switch(r.kind){case f.R.ActionsKind.open:t.goalsPopupShow(r.source);break;case f.R.ActionsKind.upgrade:t.getPremiumButtonClick(),y();break;case f.R.ActionsKind.close:n.onClose();const i=(()=>c.contains("academic")(r.context.domain)&&g.isStudentsOFE)()&&l.isNone(r.context.outcomeContext)?Object.assign(Object.assign({},r.context),{outcomeContext:l.some(o.R$.OutcomeContext.defaultAcademic)}):r.context;e.updateContext(i)&&t.goalsFormSuccess(i,v);break;case f.R.ActionsKind.reset:b.localContext.set(o.R$.unset);break;case f.R.ActionsKind.showOnLoadChanged:b.showSetGoalsLoader.set(r.value);break;default:(0,u.vE)(r)}}),C)}},13863:(e,t,n)=>{n.d(t,{R:()=>me});var r=n(27378),i=n(91175),a=n(13351),s=n(40327),o=n(5739),l=n(38983),c=n(12187),u=n(5114),d=n(8125),p=n(33678),m=n(50474),h=n(64757),g=n(14330),f=n(1509),y=n(44060),x=n(31278),v=n(89894),b=n(24588),C=n(40219);const I=({upgradeAction:e,size:t,title:n,className:i})=>{const a=r.useContext(m.m.Context).goPremium,s=Boolean(n)?n:a;return r.createElement(h.zx,Object.assign({name:"upgrade"},(0,c.Sh)(i,"big"===t?F.baseBig:"link"===t?F.link:F.baseSmall),{onClick:e}),"link"===t?r.createElement(x.JO.PaidLink,{width:14,className:F.linkIcon}):r.createElement(x.JO.Paid,{className:"big"===t?F.bigIcon:F.icon}),s)},S={display:"inline-flex",alignItems:"center",background:y.Il.CoreGreen60,borderRadius:v.ux.rem(C.fx),boxShadow:`0 2px 5px ${v.ux.color(b.UE).fade(.35).toRGBA().toString()}`,color:y.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:v.ux.rem(C.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.ux.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.ux.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},w={padding:`0 ${v.ux.rem(3)} 0 ${v.ux.rem(2)}`,fontSize:v.ux.rem(.8125),lineHeight:v.ux.rem(3)},E={padding:`0 ${v.ux.rem(1)} 0 ${v.ux.rem(.5)}`,fontSize:v.ux.rem(.6875),lineHeight:v.ux.rem(2)},A={background:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:v.ux.color(y.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:v.ux.color(y.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},k={padding:`0 ${v.ux.rem(3)} 0 ${v.ux.rem(2)}`,fontSize:v.ux.rem(.8125),lineHeight:v.ux.rem(3)},T={padding:`0 ${v.ux.rem(2)} 0 ${v.ux.rem(.5)}`,fontSize:v.ux.rem(.6875),lineHeight:v.ux.rem(2)},M={fill:y.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:y.Il.CoreNeutral0}}},N={marginRight:v.ux.rem(.2)},L={display:"inline-flex",alignItems:"center",color:y.Il.CoreGreen60,fontSize:v.ux.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},O={color:y.Il.CoreGreen60},_={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},D={fill:y.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreGreen60}}},F=v.ux.stylesheet({base:[S],baseBig:[S,w],baseSmall:[S,E],baseUpHookRedesign:[S,A],baseBigUpHookRedesign:[w,A,k],baseSmallUpHookRedesign:[E,A,T],icon:[M],bigIcon:[M,N],link:[L],linkUpHookRedesign:[L,O],linkIconUpHookRedesign:[_],linkIcon:[D]});var P=n(98403),R=n(90845),j=n(77176),U=n(2844),$=n(2834),B=n(59312),z=n(57050),G=n(19962);const W=.8125,H={display:"flex",flexDirection:"column",maxHeight:"90vh",width:v.ux.rem(41.5),backgroundColor:y.Il.CoreNeutral0,textAlign:"left"},V={padding:`${v.ux.rem(1.125)} ${v.ux.rem(2)} ${v.ux.rem(1)}`,paddingBottom:v.ux.rem(1)},Y={paddingBottom:0,backgroundColor:y.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${v.ux.rem(4)})`,height:v.ux.px(1),background:y.Il.CoreNeutral20,content:"''"}}},Z={display:"block",margin:`${v.ux.rem(W)} 0`,color:y.Il.CoreNeutral90,fontWeight:y.xv.SmallLightWeight,lineHeight:v.ux.rem(1.5)},Q={minHeight:v.ux.rem(4)},q={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:v.ux.rem(1.25),borderBottom:`1px solid ${y.Il.CoreNeutral20}`}}},J={marginBottom:v.ux.rem(-.5),maxWidth:v.ux.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${v.ux.rem(.5)}`,marginLeft:v.ux.important(0),$nest:{"&:not(:last-child)":{marginRight:v.ux.rem(.5)}}}}},X={width:v.ux.rem(7),textTransform:"capitalize",lineHeight:v.ux.rem(2)},K={marginTop:v.ux.rem(W)},ee={margin:`0 0 ${v.ux.rem(1.5)} ${v.ux.rem(7)}`},te={margin:`0 0 ${v.ux.rem(1.5)} ${v.ux.rem(7)}`},ne={position:"absolute",top:v.ux.rem(2.5)},re={display:"flex",width:v.ux.percent(100),justifyContent:"space-between"},ie={color:y.Il.CoreNeutral90,fontWeight:300,fontSize:v.ux.rem(.8125)},ae=v.ux.stylesheet({wrapper:[H],modalBody:[V],modalHeader:[Y],itemDescription:[Z],modalFooter:[Q],row:[q],toneButtons:[J],rowHeader:[X],extraContent:[K],title:[ee],description:[te],image:[ne],footerWrapper:[re],checkboxText:[ie]}),se=({name:e,items:t,sticky:n,theme:i={},extraContent:a,children:s,isVisible:l})=>r.createElement(o.F.Fragment,null,l.view((o=>o?r.createElement("div",{className:ae.row},r.createElement("div",null,r.createElement(f.Z,{nodeType:"h3",styleType:f.Z.Type.H4,className:ae.rowHeader},e),a),r.createElement("div",null,r.createElement(h.zx.Group,{sticky:n,className:i.buttonsGroup},t.map((t=>{var{description:n}=t,a=(0,B.__rest)(t,["description"]);const s=G.createUniqueId(a.key);return r.createElement(r.Fragment,{key:a.key},r.createElement(h.zx.White,Object.assign({className:i.button,name:`context-${e}-${a.key}`,"aria-describedby":s},a)),r.createElement("span",{hidden:!0,id:s},e,": ",n))}))),r.createElement(f.Z.Small,{className:ae.itemDescription},s))):null))),oe=({items:e,current:t,isVisible:n,shouldDisable:r,itemDescription:i,itemTitle:a=z.yR})=>({sticky:!0,isVisible:n,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>t.set(e),disabled:r&&r(e),children:a(e),description:i(e)})))}),le=({blocks:e,features:t,showOnLoad:n,close:i,upgrade:s,reset:o,showOnLoadChanged:l})=>{const c=r.useContext(p.a.Context),u=P.Dx(t),d=P.Dx(e),m=P.Dx(n),h=P.Dx(i);return r.createElement(a.u_,{className:ae.wrapper,focusTrapMode:"dynamic",initialFocus:R.P.FocusTrap.InitialFocus.none},r.createElement(a.u_.Header,{className:ae.modalHeader},r.createElement(ue,null)),r.createElement(a.u_.Body,{name:"goalsBody",className:ae.modalBody},r.createElement(ce,{features:u,upgradeAction:s,blocks:d})),r.createElement(a.u_.Footer,{className:ae.modalFooter},r.createElement(de,{supportsSetGoalsLoader:u.pipe(j.U((e=>!e.demoMode&&c.has(p.a.Flag.supportsSetGoalsLoader)))),onDone:h,reset:o,showOnLoad:m,showOnLoadChanged:l})))},ce=({blocks:e,features:t,upgradeAction:n})=>{const i=r.useContext(m.m.Context).goals;return r.createElement(o.F.Fragment,null,U.aj(e,t).pipe(j.U((([{audience:e,formality:t,domain:a,intent:l,type:c,format:d},p])=>{const m=r.createElement(se,Object.assign({name:"domain"},oe(Object.assign(Object.assign({},a),{itemTitle:e=>"mail"===e?"email":e,itemDescription:e=>i.sections.domain[e]})),{extraContent:r.createElement(o.F.div,{className:ae.extraContent},p.isFree?r.createElement(I,{size:"link",upgradeAction:n}):null)}),a.current.view((e=>p.isFree?i.sections.domain.free:Boolean(e)?i.sections.domain[e]:""))),h=r.createElement(se,Object.assign({name:"intent"},(({items:e,isVisible:t,current:n},r,i)=>({isVisible:t,items:e.map((e=>({key:e,active:n.view((t=>(0,s.pipe)(t,u.exists((t=>t.has(e)))))),description:i(e),onClick:()=>n.modify((t=>{const n=(0,s.pipe)(t,u.fold((()=>new Set),(e=>new Set(e))));return n.has(e)?n.delete(e):n.add(e),u.some(n)})),children:r(e)})))}))(l,(e=>i.sections.intent.options[e]),(e=>i.sections.intent.options[e]))),i.sections.intent.experimental),g=r.createElement(se,Object.assign({name:"audience"},oe(Object.assign(Object.assign({},e),{itemDescription:t=>i.sections.audience[t]((0,s.pipe)(e.default,u.exists((e=>e===t))))}))),e.current.view((t=>Boolean(t)&&i.sections.audience[t]((0,s.pipe)(e.default,u.exists((e=>e===t))))))),f=r.createElement(se,Object.assign({name:"formality"},oe(Object.assign(Object.assign({},t),{itemDescription:e=>i.sections.formality[e]}))),t.current.view((e=>Boolean(e)?i.sections.formality[e]:""))),y=r.createElement(se,Object.assign({name:"type"},oe(Object.assign(Object.assign({},c),{itemDescription:e=>i.sections.type.options[e]}))),c.current.view((e=>Boolean(e)?i.sections.type.options[e]:""))),x=r.createElement(se,Object.assign({name:"format"},oe(Object.assign(Object.assign({},d),{itemTitle:i.sections.format.formatTitle,itemDescription:e=>i.sections.format.options[e]}))),d.current.view((e=>Boolean(e)?i.sections.format.options[e]:"")));return p.isStudentsOFE?r.createElement(r.Fragment,null,m,h,g,f,y,x):r.createElement(r.Fragment,null,g,f,m,h)}))))},ue=()=>{const e=r.useContext(m.m.Context).goals,t=r.useContext(a.u_.TitleIdContext);return r.createElement(r.Fragment,null,r.createElement(f.Z,{nodeType:"h2",styleType:f.Z.Type.H1,id:t,className:ae.title},e.title),r.createElement(pe,null),r.createElement(a.u_.SpokenDescription,null,r.createElement(f.Z.Base,{className:ae.description},e.header)))},de=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:n,reset:i,onDone:a})=>{const s=r.useContext(m.m.Context),u=l.h.create(!1);return R.P.useSubscriptionTo(t.pipe($.b(P.wW(u)))),R.P.useSubscriptionTo(u.pipe($.b(n))),r.createElement(o.F.div,Object.assign({},(0,c.Sh)(e.pipe(j.U((0,d.RN)(ae.footerWrapper,null))))),e.pipe(j.U((0,d.RN)(r.createElement(g.Ys,{checked:u,name:"set-goals"},r.createElement(f.Z.Small,{className:ae.checkboxText},s.goals.footer.showModalOnStart)),null))),r.createElement(h.zx.Group,null,r.createElement(h.zx.Ghost,{name:"reset",onClick:i},s.goals.footer.reset),a.pipe(j.U((e=>r.createElement(h.zx.Primary,{name:"closeSetContext",onClick:e},s.done))))))},pe=()=>r.createElement("svg",{"aria-hidden":!0,className:ae.image,width:"69",height:"80",viewBox:"0 0 69 80"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),r.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),r.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),r.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),r.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),r.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})));var me,he=n(50628);!function(e){let t;e.Modal=i.UI.Node.make((({state:e,view:n,notify:i})=>{R.P.useSubscriptionTo(n("source").pipe(he.P(),$.b((e=>i({kind:t.open,source:e})()))));const s=e.pipe(j.U((e=>i({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad}))));return r.createElement(a.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:s},r.createElement(le,{blocks:n("blocks"),features:n("features"),close:s,upgrade:i({kind:t.upgrade}),reset:i({kind:t.reset}),showOnLoad:n("showOnLoad"),showOnLoadChanged:e=>i({kind:t.showOnLoadChanged,value:e})()}))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(me||(me={}))},87195:(e,t,n)=>{n.d(t,{q:()=>Le});var r,i=n(27378),a=n(5739),s=n(22232),o=n(91175),l=n(50474),c=n(64757),u=n(13351),d=function(){return i.createElement("svg",{"aria-hidden":!0,width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},p=n(8965),m=n(1509),h=n(90845),g=n(77176),f=n(12768),y=n(12187),x=n(76024);!function(e){function t(e,t){var n=t/60,r=x.secondsToTime(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(r||(r={}));var v=n(5114),b=n(18208),C=n(44060),I=n(31278),S=n(40327),w=n(38983),E=n(2844),A=n(66310),k=n(93508),T=n(16118),M=n(76974),N=n(13444);const L=e=>{const{score:t,documentIsEmpty:n,sidebarOpen:r=w.h.create(!0),successIcon:s,progressIcon:o,zeroIcon:l=null}=e,c=t.pipe(g.U(v.map((e=>e.rank)))),u=E.aj(t,n,((e,t)=>(0,S.pipe)(e,v.fold((()=>!1),(({rank:e})=>100===e&&!t))))),d=r.pipe(A.w((e=>e?c.pipe(k.O(v.none),T.G(),A.w((([e,t])=>(0,S.pipe)(t,v.fold((()=>M.of(l)),(t=>u.pipe(k.O(!1),T.G(),A.w((([n,r])=>r?M.of(s):(0,S.pipe)(e,v.filter((()=>!n)),v.fold((()=>M.of(o(t)).pipe(N.g(1),k.O(o(0)))),(()=>M.of(o(t)))))))))))))):M.of(null))),k.O(null));return i.createElement(a.F.Fragment,null,d)};var O=n(3656),_=n(89894),D=n(24588),F=n(40219),P=n(98403);function R({value:e,className:t,leftCustomClass:n,rightCustomClass:r}){const s=w.h.create(!1);requestAnimationFrame((()=>requestAnimationFrame((()=>s.set(!0)))));const o=E.aj(P.Dx(e),s,((e,t)=>t?`${Math.max(5,Math.abs(e-50))}%`:0)),l=(e,t,n)=>P.Dx(e).pipe(g.U((e=>e<50?t:n)));return i.createElement(a.F.div,Object.assign({},(0,y.Sh)((e=>P.Dx(e).pipe(g.U((e=>e<50?z.leftSideWrapper:z.rightSideWrapper))))(e),t)),i.createElement(a.F.div,Object.assign({},(0,y.Sh)(l(e,z.leftSideProgress,z.rightSideProgress),Boolean(n)&&Boolean(r)&&l(e,n,r)),{style:{width:o}})))}!function(e){e.Label=({value:e,className:t})=>{const n=i.useContext(l.m.Context).performance,r=e>66?n.aboveAverage:e>50?n.average:n.belowAverage;return i.createElement(O.x4,{className:t},r)}}(R||(R={}));const j={position:"relative",zIndex:1,display:"flex",width:_.ux.percent(100),height:_.ux.rem(.25),borderRadius:_.ux.rem(F.fx)},U={height:_.ux.percent(100),backgroundColor:D.FW,transition:"width .8s ease-in-out 0s"},$={marginRight:_.ux.percent(50),borderTopLeftRadius:_.ux.rem(.25),borderBottomLeftRadius:_.ux.rem(.25)},B={marginLeft:_.ux.percent(50),borderTopRightRadius:_.ux.rem(.25),borderBottomRightRadius:_.ux.rem(.25)},z=_.ux.stylesheet({wrapper:[j],leftSideWrapper:[j,{justifyContent:"flex-end"}],rightSideWrapper:[j,{justifyContent:"flex-start"}],progress:[U],leftSideProgress:[U,$],rightSideProgress:[U,B]});var G=n(76457);const W={display:"flex",flexDirection:"column",maxHeight:"90vh",width:_.ux.rem(32),height:_.ux.rem(41),background:C.Il.CoreNeutral0},H={padding:`${_.ux.rem(2.75)} ${_.ux.rem(1)} 0 ${_.ux.rem(2)}`,minHeight:_.ux.rem(5.1),height:_.ux.rem(5.1),backgroundColor:C.Il.CoreNeutral0},V={marginRight:_.ux.rem(1),paddingBottom:_.ux.rem(.3),borderBottom:`1px solid ${D.xO}`},Y={padding:`0 ${_.ux.rem(1)} ${_.ux.rem(1)} ${_.ux.rem(2)}`},Z={padding:`0 ${_.ux.rem(1.9)}`,minHeight:_.ux.rem(4),height:_.ux.rem(4)},Q={position:"absolute",top:_.ux.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},q={display:"flex",flexDirection:"column",marginTop:_.ux.rem(7.15),marginBottom:_.ux.rem(2),paddingRight:_.ux.rem(1),alignItems:"center"},J={wordSpacing:_.ux.rem(.05),fontSize:_.ux.rem(.875),lineHeight:_.ux.rem(1.5)},X={padding:`${_.ux.rem(1.3)} ${_.ux.rem(2.6)}`,textAlign:"center"},K=_.ux.prefixedStylesheet("statistics",{wrapper:[W],modalHeader:[H],modalHeaderUnderline:[V],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[Y],modalFooter:[Z],loader:[Q],zeroStateContainer:[q],performanceText:[J],zeroStateText:[J,X]});var ee;!function(e){e.number="number",e.time="time",e.percentage="percentage"}(ee||(ee={}));const te=e=>{switch(e){case ee.number:case ee.percentage:return Me.numberRowData;case ee.time:return Me.timeRowData;default:return(0,s.vE)(e)}},ne=({type:e,value:t,info:n,children:r,dataName:a})=>i.createElement("div",{className:Me.row,"data-name":a},i.createElement("div",{className:te(e)},i.createElement("div",{className:Me.metricTitle},r),i.createElement("div",{className:Me.metric},((e,t)=>{switch(e){case ee.number:return(Math.round(10*t)/10).toLocaleString();case ee.time:return x.convertTimeToShortString(t);case ee.percentage:return Math.round(t)+"%";default:return(0,s.vE)(e)}})(e,t))),Boolean(n)?i.createElement(c.RZ,{title:n}):null),re=({state:e})=>{const t=i.useContext(l.m.Context).performance,{stats:n,score:a,documentIsEmpty:s}=e;return i.createElement(i.Fragment,null,i.createElement("section",{className:Me.titleSection},i.createElement("div",{className:Me.titleColumns},i.createElement(u.u_.SpokenDescription,Object.assign({},(0,y.Sh)(K.performanceText,Me.headerDescription)),100===a.rank?t.score100:t.scoreUnder100(a.rank)),i.createElement(L,{score:M.of(v.some(a)),documentIsEmpty:M.of(s),successIcon:i.createElement(I.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:Me.checkmark}),progressIcon:e=>i.createElement(G.P,{key:"modal-performance-progress",colorType:G.P.ColorType.royalBlue,fontSize:G.P.FontSize.small,percentage:e,theme:Ne})}))),i.createElement("section",{className:Me.wordCountSection},i.createElement(m.Z.H3,{className:Me.sectionHeaderUnderline},t.wordCount),i.createElement("div",{className:Me.wordCountColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.number,value:Math.max(n.chars-1,0)},t.characters),i.createElement(ne,{type:ee.number,value:n.words},t.words),i.createElement(ne,{type:ee.number,value:n.sentences},b.pluralize(n.sentences,t.sentence,t.sentences))),i.createElement("div",{className:Me.secondColumn},i.createElement(ne,{type:ee.time,value:r.calculateReadingTime(n.words)},t.readingTime),i.createElement(ne,{type:ee.time,value:r.calculateSpeakingTime(n.words)},t.speakingTime)))),i.createElement("section",{className:Me.readabilitySection},i.createElement("div",{className:Me.sectionHeaderWrapper},i.createElement(m.Z.H3,null,t.readability),i.createElement(m.Z.SmallLight,null,t.sectionTitleDescription)),i.createElement("div",{className:Me.readabilityColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.number,value:n.wordLength},t.wordLengthTitle)),i.createElement("div",{className:Me.secondColumn},i.createElement("div",{className:Me.row},i.createElement(R,{value:n.wordLengthIndex,className:Me.progressBar,leftCustomClass:Me.leftProgress,rightCustomClass:Me.rightProgress}),i.createElement(R.Label,{value:n.wordLengthIndex,className:Me.progressLabel})),i.createElement("div",{className:Me.verticalPillar}))),i.createElement("div",{className:Me.readabilityColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.number,value:n.sentenceLength},t.sentenceLengthTitle)),i.createElement("div",{className:Me.secondColumn},i.createElement("div",{className:Me.row},i.createElement(R,{value:n.sentenceLengthIndex,className:Me.progressBar,leftCustomClass:Me.leftProgress,rightCustomClass:Me.rightProgress}),i.createElement(R.Label,{value:n.sentenceLengthIndex,className:Me.progressLabel})),i.createElement("div",{className:Me.verticalPillarShort}))),i.createElement("div",{className:Me.readabilityColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.number,value:n.readabilityScore,info:t.readabilityDescription,dataName:"readability"},t.readabilityScore))),i.createElement(m.Z.SmallLight,{className:Me.readabilityDescr},n.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:Me.sectionHeaderWrapper},i.createElement(m.Z.H3,null,t.vocabulary),i.createElement(m.Z.SmallLight,null,t.sectionTitleDescription)),i.createElement("div",{className:Me.vocabularyColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.percentage,value:n.uniqueWords,info:t.uniqueWords},t.uniqueWordsTitle)),i.createElement("div",{className:Me.secondColumn},i.createElement("div",{className:Me.row},i.createElement(R,{value:n.uniqueWords,className:Me.progressBar,leftCustomClass:Me.leftProgress,rightCustomClass:Me.rightProgress}),i.createElement(R.Label,{value:n.uniqueWords,className:Me.progressLabel})),i.createElement("div",{className:Me.verticalPillar}))),i.createElement("div",{className:Me.vocabularyColumns},i.createElement("div",{className:Me.firstColumn},i.createElement(ne,{type:ee.percentage,value:n.rareWords,info:t.rareWords},t.rareWordsTitle)),i.createElement("div",{className:Me.secondColumn},i.createElement("div",{className:Me.row},i.createElement(R,{value:n.rareWords,className:Me.progressBar,leftCustomClass:Me.leftProgress,rightCustomClass:Me.rightProgress}),i.createElement(R.Label,{value:n.rareWords,className:Me.progressLabel})),i.createElement("div",{className:Me.verticalPillarShort})))))},ie={marginBottom:_.ux.rem(2.4)},ae={display:"flex",marginTop:_.ux.rem(.9),marginRight:_.ux.rem(1),justifyContent:"space-between"},se={marginBottom:_.ux.rem(1.5)},oe={display:"flex",marginTop:_.ux.rem(.8)},le={marginBottom:_.ux.rem(2.4)},ce={display:"flex",$nest:{"&:first":{marginTop:_.ux.rem(.8)}}},ue={display:"flex",$nest:{"&:first":{marginTop:_.ux.rem(.8)}}},de={flexBasis:_.ux.percent(50)},pe={position:"relative",paddingLeft:_.ux.rem(.5),flexBasis:_.ux.percent(50)},me={display:"flex",height:_.ux.rem(2),alignItems:"center"},he={display:"flex",justifyContent:"space-between"},ge={width:_.ux.rem(10),fontFeatureSettings:`${F.Q9}, ${F.g_}`},fe={width:_.ux.rem(13)},ye={marginRight:_.ux.rem(1),paddingBottom:_.ux.rem(.5),borderBottom:`1px solid ${D.xO}`},xe={width:_.ux.percent(80),whiteSpace:"pre-line"},ve={display:"inline-block",color:C.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:_.ux.rem(.875),lineHeight:_.ux.rem(2)},be={display:"inline-block",color:C.Il.CoreNeutral90,fontSize:_.ux.rem(.875),lineHeight:_.ux.rem(2)},Ce={width:_.ux.rem(3.2),height:_.ux.rem(3.2),fontWeight:"bold"},Ie={width:_.ux.rem(6),backgroundColor:D.xO},Se={marginLeft:_.ux.rem(1.125)},we={backgroundImage:D.BZ},Ee={backgroundImage:D.Xd},Ae={display:"block",paddingTop:_.ux.rem(.5)},ke={position:"absolute",top:_.ux.rem(.5),left:_.ux.rem(3.5),width:_.ux.rem(.0625),height:_.ux.rem(3),backgroundColor:D.jj},Te={height:_.ux.rem(1)},Me=_.ux.stylesheet({titleSection:[ie],titleColumns:[ae],wordCountSection:[se],wordCountColumns:[oe],readabilitySection:[le],readabilityColumns:[ce],vocabularyColumns:[ue],firstColumn:[de],secondColumn:[pe],row:[me],rowData:[he],numberRowData:[he,ge],timeRowData:[he,fe],sectionHeaderUnderline:[ye],sectionHeaderWrapper:[ye,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[xe],metric:[ve],metricTitle:[be],checkmark:[{alignItems:"center"}],circleProgressBar:[Ce],progressBar:[Ie],progressLabel:[Se],leftProgress:[we],rightProgress:[Ee],readabilityDescr:[Ae],verticalPillar:[ke],verticalPillarShort:[ke,Te]}),Ne={radialProgressBar:Me.circleProgressBar};var Le;!function(e){let t;e.ModalView=o.UI.Grid.make((({slots:n,state:r,notify:a})=>{const s=a({kind:t.close});return i.createElement(u.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:s},i.createElement(e.ModalContent,{state:r,downloadButton:n.downloadButton,onClose:s}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=({state:t,downloadButton:n,onClose:r})=>i.createElement(u.u_,{className:K.wrapper,focusTrapMode:"dynamic",initialFocus:h.P.FocusTrap.InitialFocus.none},i.createElement(u.u_.Header,{className:K.modalHeader},i.createElement(e.Header,{state:t})),i.createElement(u.u_.Body,{name:"performanceBody",className:K.modalBody,wrapperClassName:t.pipe(g.U((e=>e.type===f.g.State.Type.EMPTY?K.modalEmpty:K.modalReady)))},i.createElement(e.Body,{state:t})),i.createElement(u.u_.Footer,{className:K.modalFooter},i.createElement(y,{downloadButton:n,onClose:r})));const n=()=>{const e=i.useContext(l.m.Context);return i.createElement("div",{className:K.zeroStateContainer},i.createElement(d,null),i.createElement(u.u_.SpokenDescription,{className:K.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=({state:e})=>{const t=i.useContext(l.m.Context),n=i.useContext(u.u_.TitleIdContext);return i.createElement(a.F.Fragment,null,e.pipe(g.U((e=>i.createElement(m.Z.H2,{key:"statisticsHeader",id:n,className:e.type===f.g.State.Type.READY?K.modalHeaderUnderline:""},t.performance.title)))))};const r=()=>i.createElement(p.$,{size:64,className:K.loader,variation:"blue"});e.Body=({state:e})=>i.createElement(a.F.Fragment,null,e.pipe(g.U((e=>{switch(e.type){case f.g.State.Type.EMPTY:return null;case f.g.State.Type.LOADING:case f.g.State.Type.ERROR:return i.createElement(r,{key:"statisticsLoading"});case f.g.State.Type.SHORT_CONTENT:return i.createElement(n,{key:"statisticsEmpty"});case f.g.State.Type.READY:return i.createElement(re,{key:"statisticsContent",state:e});default:return(0,s.vE)(e)}}))));const y=({downloadButton:e,onClose:t})=>i.createElement(i.Fragment,null,e,i.createElement(c.zx.Primary,{name:"close-stats",onClick:t},"Close"))}(Le||(Le={}))},89379:(e,t,n)=>{n.d(t,{JT:()=>g,hM:()=>f,wK:()=>h});var r=n(40327),i=n(5114),a=n(8125),s=n(22232),o=n(93756),l=n(91175),c=n(77176),u=n(27125);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}const p=(e,t)=>{const n=t.successLens;switch(e){case u.g.SuccessType.zero:return n.emptyText;case u.g.SuccessType.small:return n.smallText;case u.g.SuccessType.large:return n.largeText;case u.g.SuccessType.applied:return{title:n.fixedText.titles[(0,a.TN)(9)]};case u.g.SuccessType.premiumOnboardingStart:return n.premiumOnboardingStartText;case u.g.SuccessType.premiumOnboardingComplete:return n.premiumOnboardingCompleteText;default:return(0,s.vE)(e)}};function m(e){switch(e){case u.g.SuccessType.applied:case u.g.SuccessType.large:return"growComplete";case u.g.SuccessType.premiumOnboardingStart:return"premiumOnboardingStart";case u.g.SuccessType.premiumOnboardingComplete:return"premiumOnboardingComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(c.U((e=>{const n=p(e,t);return{kind:m(e),caption:i.some(d(n))}})))}function g(e,t){return()=>e.pipe(c.U((e=>{const n=p(e,t);return{kind:m(e),caption:i.some(d(n))}})))}function f(e){return l.Z.animatingFlow(e,(e=>(0,r.pipe)(e,i.fold((()=>i.some(o.F2("fadein"))),(()=>i.some(o.Hk("fadeout","fadein")))))))}},43805:(e,t,n)=>{n.d(t,{q:()=>P});var r=n(27378),i=n(40327),a=n(5739),s=n(83078),o=n(91175),l=n(44060),c=n(3656),u=n(89894),d=n(77176),p=n(34685);const m=o.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=o.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),g=o.UI.Node.make((()=>r.createElement("video",{className:y.premiumOnboardingStartVideo,autoPlay:!0,loop:!0,muted:!0,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI2NCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTIuODA5IDgxLjcwNDVDMTEyLjgwOSA4OS4xMDY3IDEyOS40NDEgOTcuOTcxMiAxMjkuNDQxIDk3Ljk3MTJMMTI0LjE0MSAxMDkuMzk0IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTEzLjA4MyA4Mi44OTI1QzExMy45OTcgODIuNjE4MyAxMTQuNDU0IDgyLjA3IDExNC42MzYgODEuNjEzMUMxMTQuOTExIDgxLjA2NDggMTE0LjgxOSA4MC40MjUxIDExNC40NTQgNzkuOTY4MUwxMTAuOTgxIDc1Ljk0NzFMMTEwLjM0MSA4MS4yNDc1QzExMC4yNSA4MS43OTU4IDExMC41MjQgODIuNDM1NSAxMTEuMDcyIDgyLjcwOTdDMTExLjUyOSA4Mi45ODM5IDExMi4xNjkgODMuMTY2NiAxMTMuMDgzIDgyLjg5MjVaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMTguNjU4IDcyLjIwMDRDMTE3LjEwNCA3NS43NjQ1IDExNC44MTkgNzguNTk3NCAxMTIuMDc4IDc5LjQxOTlDMTA1LjU4OSA4MS40MzA0IDk0Ljg5NzMgNzIuNjU3MyA5Mi42MTI2IDY0Ljk4MDlDOTAuNDE5NCA1Ny42NzAxIDk0LjI1NzYgNTAuMDg1IDEwMS4yMDMgNDcuMzQzNUMxMDEuNTY4IDQ3LjE2MDcgMTAxLjkzNCA0Ny4wNjkzIDEwMi4zIDQ2Ljk3NzlDMTA5Ljg4NSA0NC42OTMzIDExOC4wMTggNDguOTg4NCAxMjAuMzAzIDU2LjU3MzRDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMjY1NiAxMTguNjU4IDcyLjIwMDRaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIG9wYWNpdHk9IjAuNSIgZD0iTTEwMS41NjggNzEuMDEyM0MxMDMuODUzIDY5LjgyNDMgMTAwLjE5OCA2MS40MTY4IDk2Ljk5OSA2My4wNjE3QzkzLjE2MDggNjUuMDcyMiA5OC4wOTU2IDcyLjg0IDEwMS41NjggNzEuMDEyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIG9wYWNpdHk9IjAuMjUiIGQ9Ik0xMjAuMjExIDU2LjY2NDdDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMzU2OSAxMTguNjU3IDcyLjIwMDNDMTEwLjYxNSA2My45NzU2IDEwMS4xMTEgNTIuMjc4MiAxMDEuMTExIDQ3Ljg5MTdDMTAxLjExMSA0Ny43MDg5IDEwMS4xMTEgNDcuNTI2MiAxMDEuMjAzIDQ3LjM0MzRDMTAxLjU2OCA0Ny4xNjA2IDEwMS45MzQgNDcuMDY5MiAxMDIuMjk5IDQ2Ljk3NzhDMTA5Ljg4NCA0NC42OTMyIDExNy45MjYgNDguOTg4MyAxMjAuMjExIDU2LjY2NDdaIiBmaWxsPSIjMUYyNDNDIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUxLjAwOCA3Mi42NTczQzE0NS43MDggODQuNTM3NSAxMjkuNDQxIDk3Ljk3MTIgMTI5LjQ0MSA5Ny45NzEyTDEzNC41NTkgMTA3LjExIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUwLjkxNyA3My45MzY3QzE1MC4wMDMgNzMuNjYyNSAxNDkuNTQ2IDczLjExNDIgMTQ5LjM2MyA3Mi42NTczQzE0OS4wODkgNzIuMTA4OSAxNDkuMTggNzEuNDY5MiAxNDkuNTQ2IDcxLjAxMjNMMTUzLjAxOSA2Ni45OTEzTDE1My42NTggNzIuMjkxN0MxNTMuNzUgNzIuODQgMTUzLjQ3NiA3My40Nzk3IDE1Mi45MjcgNzMuNzUzOUMxNTIuNDcgNzQuMDI4IDE1MS44MzEgNzQuMTE5NCAxNTAuOTE3IDczLjkzNjdaIiBmaWxsPSIjODc4MEU0IiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNzEuMzg3IDU2LjAyNTFDMTY5LjEwMyA2My42MTAxIDE1OC41MDIgNzIuNDc0NiAxNTEuOTIyIDcwLjQ2NDFDMTQ1LjQzNCA2OC40NTM2IDE0MS40MTMgNTUuMjk0IDE0My42OTcgNDcuNzA5QzE0NS45ODIgNDAuMTI0IDE1NC4wMjQgMzUuNzM3NCAxNjEuNyAzOC4xMTM1QzE2OS4zNzcgNDAuMzA2NyAxNzMuNjcyIDQ4LjM0ODcgMTcxLjM4NyA1Ni4wMjUxWiIgZmlsbD0iIzg3ODBFNCIgc3Ryb2tlPSIjMUMyNTNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBvcGFjaXR5PSIwLjQiIGQ9Ik0xNjcuOTE1IDUyLjkxOEMxNjMuODk0IDU0LjE5NzQgMTYxLjA2MSA0NC42MDE5IDE2NS4zNTYgNDQuMjM2M0MxNjkuMjg1IDQzLjg3MDggMTcwLjU2NSA1Mi4wOTU1IDE2Ny45MTUgNTIuOTE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4yNSIgZD0iTTE2Mi43OTcgMzguOTM1OUMxNjIuNzk3IDQzLjMyMjUgMTUzLjM4NCA1NC45Mjg1IDE0NS4zNDIgNjMuMTUzMkMxNDMuMjQgNTguMzA5NyAxNDIuNTA5IDUyLjA5NTUgMTQzLjc4OSA0Ny43MDlDMTQ2LjA3MyA0MC4xMjQgMTU0LjExNSAzNS43Mzc0IDE2MS43OTIgMzguMTEzNUMxNjIuMDY2IDM4LjIwNDkgMTYyLjQzMSAzOC4yOTYyIDE2Mi43MDUgMzguMzg3NkMxNjIuNzA1IDM4LjU3MDQgMTYyLjc5NyAzOC43NTMyIDE2Mi43OTcgMzguOTM1OVoiIGZpbGw9IiMxRjI0M0MiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik0xMjkuNDQxIDY2LjgwODdWMTEyLjEzNiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEyOS40NDEgNzQuNTc2NUMxMjguNDM2IDc0LjU3NjUgMTI3Ljc5NiA3NC4yMTEgMTI3LjQzMSA3My43NTQxQzEyNi45NzQgNzMuMjk3MSAxMjYuODgyIDcyLjU2NjEgMTI3LjE1NiA3Mi4wMTc3TDEyOS41MzIgNjYuNjI2TDEzMS45MDggNzIuMDE3N0MxMzIuMTgzIDcyLjU2NjEgMTMyLjA5MSA3My4yOTcxIDEzMS42MzQgNzMuNzU0MUMxMzEuMDg2IDc0LjIxMSAxMzAuNDQ2IDc0LjU3NjUgMTI5LjQ0MSA3NC41NzY1WiIgZmlsbD0iI0ZGQzk0MCIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTE0My41MTQgMjQuNDA1N0MxNDEuNDEzIDIzLjU4MzIgMTE3LjU2MSAyMy41ODMyIDExNS40NTkgMjQuNDA1N0MxMTMuMzU3IDI1LjIyODEgMTAyLjU3NCAzNS4zNzIgMTAyLjU3NCAzOS4zMDE2QzEwMi41NzQgNDUuOTcyNyAxMjUuNzg2IDcwLjY0NjkgMTI5LjUzMiA3MC42NDY5QzEzMy4yNzkgNzAuNjQ2OSAxNTYuNDkxIDQ1Ljk3MjcgMTU2LjQ5MSAzOS4zMDE2QzE1Ni40IDM1LjQ2MzQgMTQ1LjYxNiAyNS4yMjgxIDE0My41MTQgMjQuNDA1N1oiIGZpbGw9IiNGRkM5NDAiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTE0MS41MDQgMjYuMzI0OEMxMzkuMjE5IDI2LjIzMzQgMTM5LjIxOSAyOC44ODM2IDE0MC41OSAzMS4wNzY5QzE0Mi45NjYgMzUuMDA2NSAxNDYuMjU2IDM2LjY1MTQgMTQ3LjYyNyAzNi4xMDMxQzE1MS42NDggMzQuNjQwOSAxNDYuMzQ3IDI2LjQxNjIgMTQxLjUwNCAyNi4zMjQ4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0xNTYuNCAzOS4yMTAyTDE0MC44NjQgNDEuNjc3NkgxMTguMDE4TDEwMi40ODIgMzkuMjEwMiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEzNS4wMTUgMjQuMDQwMkMxMzcuNTc0IDI4Ljc5MjIgMTQwLjg2NCAzOS45NDEzIDE0MC44NjQgNDEuNjc3NkMxNDAuODY0IDQzLjQxNCAxMzUuODM4IDU5LjA0MDkgMTI5LjQ0MSA3MC42NDY5IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTIzLjg2NiAyNC4wNDAyQzEyMS4zMDggMjguNzkyMiAxMTguMDE4IDM5Ljk0MTMgMTE4LjAxOCA0MS42Nzc2QzExOC4wMTggNDMuNDE0IDEyMy4wNDQgNTkuMDQwOSAxMjkuNDQxIDcwLjY0NjkiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTExNy41NjEgNTUuNzUxMUMxMTYuMTkgNTYuMDI1MyAxMTAuNjE1IDUwLjM1OTQgMTA4LjMzMSA0Ni4zMzg0QzEwNy4yMzQgNDQuNDE5MyAxMDguMjM5IDQzLjMyMjcgMTA5LjMzNiA0My4wNDg1QzExMi41MzQgNDIuMjI2IDExMy45MDUgNDQuMzI3OSAxMTYuMDA3IDQ3Ljg5MkMxMTcuOTI2IDUxLjA5MDUgMTE5LjIwNiA1NS4zODU2IDExNy41NjEgNTUuNzUxMVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuOCIvPgo8cGF0aCBkPSJNMTQxLjg2OSA5OS44OTA0QzE0My44OCA5MC4zODYzIDEyOS40NDEgOTcuNzg4NSAxMjkuNDQxIDk3Ljc4ODVDMTI5LjQ0MSA5Ny43ODg1IDE0MC4wNDIgMTA5LjAyOSAxNDEuODY5IDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTE3LjAxMyA5OS44OTA0QzExNS4wMDIgOTAuMzg2MyAxMjkuNDQxIDk3Ljc4ODUgMTI5LjQ0MSA5Ny43ODg1QzEyOS40NDEgOTcuNzg4NSAxMTguODQgMTA5LjAyOSAxMTcuMDEzIDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8L3N2Zz4K"},r.createElement("source",{src:`${p.yr}premiumOnboardingStart.mp4`})))),f=o.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"130",height:"82",viewBox:"0 0 130 82",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{opacity:"0.25",d:"M82.084 40.757L72.7367 30.3437C72.1869 29.6495 71.4996 29.3718 70.6748 29.3718H46.8943C46.0695 29.3718 45.3822 29.6495 44.8324 30.3437L35.4851 40.757C34.5229 41.8677 34.5229 43.5338 35.4851 44.6446L57.3412 68.9421C57.7536 69.3586 58.3034 69.6363 58.8533 69.6363C59.4031 69.6363 59.953 69.3586 60.3653 68.9421L82.084 44.6446C83.1837 43.5338 83.1837 41.8677 82.084 40.757Z",fill:"#494393"}),r.createElement("path",{d:"M66.1044 65.0148L87.9605 40.7173C88.6478 39.8843 88.6478 38.6347 87.9605 37.8016L78.4758 27.3884C78.0634 26.9719 77.5136 26.6942 76.8263 26.6942H53.1832C52.6333 26.6942 51.946 26.9719 51.5336 27.3884L42.1864 37.8016C41.4991 38.6347 41.4991 39.8843 42.1864 40.7173L64.0425 65.0148C64.5923 65.7091 65.5546 65.7091 66.1044 65.0148Z",fill:"#FFDF80",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M88.5103 39.3289H41.6365",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M60.4684 26.6942L55.7947 38.4958C55.6573 39.0512 55.6573 39.6066 55.7947 40.0231L65.142 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M69.6783 26.6942L74.3519 38.4958C74.4894 39.0512 74.4894 39.6066 74.3519 40.0231L65.0046 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("rect",{x:"77.5491",y:"1",width:"8",height:"8",rx:"2",transform:"rotate(14.9627 77.5491 1)",fill:"#F8C6DA",stroke:"#0E101A"}),r.createElement("rect",{x:"13",y:"53.5762",width:"8",height:"8",rx:"2",transform:"rotate(-36.5938 13 53.5762)",fill:"#B8B4EF",stroke:"#0E101A"}),r.createElement("circle",{cx:"96",cy:"73",r:"4",fill:"#87E8D1",stroke:"#0E101A"}),r.createElement("path",{d:"M37 66V72",stroke:"#0E101A"}),r.createElement("path",{d:"M37 76V82",stroke:"#0E101A"}),r.createElement("path",{d:"M45 74L39 74",stroke:"#0E101A"}),r.createElement("path",{d:"M35 74L29 74",stroke:"#0E101A"}),r.createElement("path",{d:"M37.5 10V14.125",stroke:"#0E101A"}),r.createElement("path",{d:"M37.5 16.875V21",stroke:"#0E101A"}),r.createElement("path",{d:"M43 15.5L38.875 15.5",stroke:"#0E101A"}),r.createElement("path",{d:"M36.125 15.5L32 15.5",stroke:"#0E101A"}),r.createElement("path",{d:"M103 21V27",stroke:"#0E101A"}),r.createElement("path",{d:"M103 31V37",stroke:"#0E101A"}),r.createElement("path",{d:"M111 29L105 29",stroke:"#0E101A"}),r.createElement("path",{d:"M101 29L95 29",stroke:"#0E101A"})))),y=u.ux.stylesheet({premiumOnboardingStartVideo:[{width:264,height:120}]}),x=o.UI.Node.make((({view:e})=>r.createElement("div",{"data-name":"success-lens-text",className:D.newSuccessText},r.createElement(c.H4,{key:"title"},e("title")),r.createElement("div",{className:D.newSuccessDescription},r.createElement(a.F.div,{className:D.newSuccessDescriptionText},(0,i.pipe)(e("firstLine"),d.U(s.orNull))))))),v=o.UI.Union.asOption(x),b=o.UI.Grid.make((({slots:e})=>r.createElement(a.F.div,{className:D.newSuccessContainer},e.image,e.caption))),C=o.UI.Knot.make(b,{image:m,caption:v}),I=o.UI.Knot.make(b,{image:h,caption:v}),S=o.UI.Knot.make(o.UI.Grid.make((({slots:e})=>r.createElement(a.F.div,{className:D.premiumOnboardingStartSuccessContainer},e.animation,e.caption))),{animation:g,caption:v}),w=o.UI.Knot.make(b,{image:f,caption:v}),E=o.UI.Union.make("kind",{growStart:C,growComplete:I,premiumOnboardingStart:S,premiumOnboardingComplete:w}),A=u.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),k=u.ux.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),T={animation:`${A} 300ms linear forwards`},M={position:"absolute",top:0,width:u.ux.percent(100),animation:`${k} 200ms linear forwards`},N={textAlign:"center",background:l.Il.CoreNeutral0,padding:u.ux.rem(.5)},L={width:u.ux.percent(100),marginTop:u.ux.rem(.5)},O={marginTop:u.ux.rem(.25)},_={fontSize:u.ux.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:u.ux.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},D=u.ux.stylesheet({success_fadein:[T],success_fadeout:[M],premiumOnboardingStartSuccessContainer:[N],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[L],newSuccessDescription:[O],newSuccessDescriptionText:[_]}),F=o.UI.Transition.make({fadein:D.success_fadein},{fadeout:D.success_fadeout}),P=o.UI.Animated.make(F,E)},38819:(e,t,n)=>{n.d(t,{r:()=>f});var r=n(27378),i=n(40327),a=n(5114),s=n(91175),o=n(50474),l=n(31278),c=n(3656),u=n(89894),d=n(94785);const p=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:b.grid},r.createElement("div",{className:b.iconWrapper},e.icon),r.createElement("div",{className:b.titleWrapper},e.title),r.createElement("div",{className:b.bottomWrapper},e.bottom)))),m=s.UI.Node.make((()=>{const e=r.useContext(o.m.Context).successLens.paidView;return r.createElement(c.H4,null,e.title)})),h=s.UI.Node.make((()=>r.createElement(l.JO.GreenOk,{width:32}))),g=s.UI.Knot.make(p,{icon:h,title:m,bottom:s.UI.Union.make("kind",{[d.n.State.hidden]:s.UI.Node.empty,[d.n.State.expanded]:d.n.TogglableExpandedPanel})}),f=(0,i.pipe)(s.UI.squash(g),s.UI.contramapState((e=>(0,i.pipe)(e,a.fold((()=>({bottom:{kind:d.n.State.hidden}})),(e=>({bottom:{kind:d.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),y={marginTop:u.ux.rem(3.5)},x={marginTop:u.ux.rem(1.375)},v={marginTop:u.ux.rem(2.675)},b=u.ux.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[x],bottomWrapper:[v]})},70023:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(57050),i=n(5114),a=n(22232),s=n(77176),o=n(60797),l=n(93508),c=n(66310),u=n(94785);function d(e){return(0,r.ls)(s.U((e=>{switch(e.key){case u.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(u.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case u.n.State.minimized:return"onClick"===e.action.action?i.some(u.n.State.expanded):(0,a.vE)(e.action.action);default:return(0,a.vE)(e)}})),o.oA,l.O(u.n.State.minimized),c.w((t=>e.pipe(s.U(i.fold((()=>({kind:u.n.State.hidden})),(e=>{switch(t){case u.n.State.minimized:return{kind:u.n.State.minimized,alertsCount:e.count};case u.n.State.expanded:return{kind:u.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case u.n.State.hidden:return{kind:u.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},94785:(e,t,n)=>{n.d(t,{n:()=>V});var r=n(91175),i=n(27378),a=n(40327),s=n(5739),o=n(5114),l=n(22232),c=n(50474),u=n(64757),d=n(62295),p=n(31278),m=n(3656),h=n(77176),g=n(9546),f=n(44060),y=n(89894),x=n(40219);const v={position:"relative",borderRadius:y.ux.rem(x.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:f.Il.CoreNeutral0},b={padding:`${y.ux.rem(1)} ${y.ux.rem(2)}`},C={position:"absolute",top:y.ux.rem(.75),left:y.ux.rem(.5)},I={display:"flex",boxSizing:"border-box",padding:y.ux.rem(.5),height:y.ux.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},S={marginLeft:y.ux.rem(.8),fontSize:y.ux.rem(.85),lineHeight:y.ux.rem(1)},w={display:"flex",width:y.ux.percent(100),alignItems:"center",justifyContent:"space-between"},E={position:"absolute",top:y.ux.rem(.2),right:y.ux.rem(.3),cursor:"pointer"},A={paddingRight:y.ux.rem(1),textAlign:"left",fontSize:y.ux.rem(.75),lineHeight:y.ux.rem(1.15)},k={marginTop:y.ux.rem(.6),fontSize:y.ux.rem(.875),flexShrink:0},T={display:"flex",marginBottom:y.ux.rem(.6),justifyContent:"flex-end",flexShrink:0},M={marginRight:"auto",lineHeight:y.ux.rem(1.3125)},N={marginTop:y.ux.rem(.21),minWidth:y.ux.rem(1.5),flexShrink:0},L={marginTop:y.ux.rem(1)},O={display:"flex",justifyContent:"center",alignItems:"center",height:y.ux.rem(2),backgroundColor:f.Il.CoreGreen60,borderRadius:y.ux.rem(.25),fontSize:y.ux.rem(.875),fontWeight:700,color:f.Il.CoreNeutral0,lineHeight:y.ux.rem(2),padding:y.ux.rem(g.mh),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:y.ux.color(f.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:y.ux.color(f.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},_=y.ux.stylesheet({wrapper:[v],maximizedWrapper:[b],minimizedWrapper:[I],maximizedWrapperIcon:[C],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[S],minimizedContent:[w],maximizedCloseButtonContainer:[E],maximizedHeader:[A],alertCategoryContainer:[k],alertCategory:[T],categoryHumanContainer:[M],alertCounterContainer:[N],premiumButtonContainer:[L],premiumButton:[O]});var D=n(12187);const F=(e,t)=>r.UI.Grid.make((({slots:n})=>i.createElement(s.F.div,Object.assign({},(0,D.Sh)(_.wrapper,e)),i.createElement(p.JO.UpgradeHookPanel.TitleDiamond,{className:t}),n.body))),P=r.UI.Node.make((({notify:e})=>i.createElement(s.F.div,{className:_.maximizedCloseButtonContainer},i.createElement(m.zx,{name:"close",onClick:e("onClick")},i.createElement(p.JO.Arrow,{width:11,direction:p.n4.up})))));var R;!function(e){let t,n;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={})),function(e){e.isOnUpgrade=function(e){return"onUpgrade"===e.kind},e.isOnUpgradeButtonMount=function(e){return"onUpgradeButtonMount"===e.kind}}(n=e.Actions||(e.Actions={}))}(R||(R={}));const j=r.UI.Node.make((({state:e,notify:t})=>{const n=i.useContext(c.m.Context);return i.createElement(i.Fragment,null,i.createElement("div",{className:_.maximizedHeader},i.createElement(s.F.Fragment,null,e.pipe(h.U((({count:e})=>e>0?e>1?i.createElement(i.Fragment,{key:"plural"},n.sidebar.content.premiumIssues.foundTitlePlural.description1,"",e,"",n.sidebar.content.premiumIssues.foundTitlePlural.description2):i.createElement(i.Fragment,{key:"singular"},n.sidebar.content.premiumIssues.foundTitleSingular.description1,"",e,"",n.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),i.createElement(s.F.div,{className:_.alertCategoryContainer},e.pipe(h.U((({alerts:e})=>e.map((e=>i.createElement("div",{key:e.category,className:_.alertCategory},i.createElement("div",{className:_.categoryHumanContainer},e.categoryHuman),i.createElement("div",{className:_.alertCounterContainer},i.createElement(d.x.Counter,{count:e.count,type:"yellowPremium"}))))))))),i.createElement("div",{className:_.premiumButtonContainer},i.createElement("div",{ref:e=>{t({type:"upgradeHookAction",kind:R.ActionsKind.onUpgradeButtonMount,element:o.fromNullable(e)})()}},i.createElement(u.zx,{name:"upgrade",className:_.premiumButton,onClick:t({type:"upgradeHookAction",kind:R.ActionsKind.onUpgrade})},i.createElement(p.JO.UpgradeHookPanel.ButtonDiamond,null),n.goPremium))))})),U=r.UI.Composite.make(F(_.maximizedWrapper,_.maximizedWrapperIcon),r.UI.Group.make({closeButton:r.UI.Union.make("kind",{hidden:r.UI.Node.empty,visible:P}),content:j})),$=(0,a.pipe)(r.UI.squash(U),r.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case R.ActionsKind.onUpgrade:return{kind:"upgrade"};case R.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,l.vE)(e.action)}case"closeButton":return"onClick"===e.action.action?{kind:"collapse"}:(0,l.vE)(e.action.action);default:return(0,l.vE)(e)}})),r.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}))));var B=n(28706);const z=r.UI.Node.make((({state:e})=>{const t=i.useContext(c.m.Context);return i.createElement(s.F.div,{className:_.minimizedContent},i.createElement("div",{className:_.minimizedText},t.premiumSuggestions),e.pipe(h.U((({alertsCount:e})=>e>0&&i.createElement(d.x.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),G=r.UI.Grid.make((({slots:e,notify:t})=>i.createElement("div",Object.assign({role:"button",className:_.shadowWrapper},B.rl(t("onClick"))),e.body))),W=r.UI.Knot.make(G,{body:r.UI.Composite.make(F(_.minimizedWrapper),z)}),H=(0,a.pipe)(r.UI.squash(W),r.UI.contramapState((e=>({body:e}))));var V;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={})),e.TogglableExpandedPanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.expanded]:$}),e.TogglablePanel=r.UI.Union.make("kind",{[t.hidden]:r.UI.Node.empty,[t.minimized]:H,[t.expanded]:$})}(V||(V={}))},5920:(e,t,n)=>{n.d(t,{l:()=>r});var r,i=n(40327),a=n(5114);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),a.filter((e=>n(e.value))))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},21619:(e,t,n)=>{n.d(t,{mN:()=>w});var r,i,a=n(71249),s=n(57050),o=n(40327),l=n(38983),c=n(5114),u=n(45701),d=n(89943),p=n(8125),m=n(55415),h=n(83078),g=n(66896),f=n(77176),y=n(32952),x=n(67434),v=n(28043),b=n(41398),C=n(19751),I=n(17594),S=n(35416);!function(e){const t=e=>t=>(0,o.pipe)(t,c.map((0,s.ls)(a.DZ((t=>e.getAlertByMark(t))),a.DY(u.contramap((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(g.R.ord)))));e.fromMarksEvents=(e,n)=>({activeHighlights:(0,o.pipe)(n.activeMarks,f.U(t(e))),hoveredHighlights:(0,o.pipe)(n.hoveredMarks,f.U(t(e)))})}(r||(r={})),function(e){e.Mock=class{constructor(){this.alertHovered=new y.xQ,this.alertClicked=new y.xQ,this.highlightedAlert=l.h.create(c.none)}}}(i||(i={}));class w{constructor(e,t,n,i,a,s){this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=i,this._getActiveItemWithAlert=a,this._resolveClickedAlert=s,this._impl=new E(r.fromMarksEvents(this._markAlertMapper,this._ded),this._state,this._alertsReader,this._getActiveItemWithAlert,this._resolveClickedAlert),this.alertHovered=this._impl.alertHovered,this.alertClicked=this._impl.alertClicked}}class E{constructor(e,t,n,r,i){this._highlightEvents=e,this._state=t,this._alertsReader=n,this._getActiveItemWithAlert=r,this._resolveClickedAlert=i,this._focusedItem=this._state.view(S.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this.alertHovered=this._highlightEvents.hoveredHighlights.pipe(f.U(c.map(a.UI((({alert:e})=>e)))),x.R(((e,t)=>(0,o.pipe)(t,c.chain((t=>(0,o.pipe)(e,c.filter((e=>-1!==t.indexOf(e))),c.fold((()=>c.fromNullable(t[0])),c.some)))))),c.none),f.U(c.filter((e=>this._alertsReader.isInteractable(e.id)&&!I.$.isPlagiarism(e)))),v.x()),this.alertClicked=this._highlightEvents.activeHighlights.pipe(b.M(this._focusedItem,this._focusedLens),x.R(((e,[t,n,r])=>{const i=t=>(0,o.pipe)(e,c.exists((e=>e.alert.id===t.alert.id))),a=e=>(0,o.pipe)(n,c.exists((t=>t.activeAlert.id===e.alert.id))),s=e=>r.meta.filter(e.alert);return(0,o.pipe)(t,c.chain((e=>{var t;return(0,o.pipe)(e,null!==(t=this._resolveClickedAlert)&&void 0!==t?t:d.findByPredicateList([(0,p.W9)(i,a),a,(0,p.W9)(i,s),s,i]),c.fold((()=>c.fromNullable(e[0])),c.some),c.map((e=>m.update(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex}))))})))}),h.empty()),C.shareReplay({refCount:!0,bufferSize:1}))}}},54216:(e,t,n)=>{n.d(t,{t:()=>g});var r=n(57050),i=n(40327),a=n(28043),s=n(77176),o=n(8125),l=n(83078),c=n(74660),u=n(66896),d=n(35416),p=n(6100);const m=(0,o.W9)(c.bZ.isRegistered,(0,r.ff)(c.bZ.isMuted)),h=e=>t=>(0,o.W9)(m,e(t));var g;!function(e){e.create=function(e,t){const n=h((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:(e,n)=>(0,o.W9)(h((e=>t[e]))(e),(e=>t=>e||c.bZ.isPriority(t))(n)),alertVisibleInSidebar:n,getLensesFilter:t=>e[t],alertCanBeDisplayed:m,alertIsBulkAcceptable:e=>(0,o.W9)(n(e),c.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,n=()=>e=>(0,i.pipe)(e.freePremium,l.contains("unlocked")),g=e=>(0,o.W9)(t(u.R.OutcomeId.fromPriorityOutcomeId(e)),c.bZ.isPriority);e.getAlertVisibleInTextFilter=function(e,t){return t.pipe(a.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||d.nL.isWithPriorityList(e)&&d.nL.isWithPriorityList(t)&&p.v.WithPriority.isNonPriorityListOpened(e.currentLens)!==p.v.WithPriority.isNonPriorityListOpened(t.currentLens)))),s.U((t=>({filter:(0,o.Kg)(e.alertVisibleInText(t.currentLens.id,p.v.WithPriority.nonPriorityAlertsVisible(t)),c.bZ.isBulkApplied),lensId:t.currentLens.id}))))},e.defaultLensFilters={[u.R.SpecialId.Clarity]:t(u.R.SpecialId.Clarity),[u.R.SpecialId.Correctness]:t(u.R.SpecialId.Correctness),[u.R.SpecialId.Delivery]:t(u.R.SpecialId.Delivery),[u.R.SpecialId.Engagement]:t(u.R.SpecialId.Engagement),[u.R.SpecialId.Vox]:t(u.R.SpecialId.Vox),[u.R.SpecialId.KnowledgeHub]:t(u.R.SpecialId.KnowledgeHub),[u.R.SpecialId.FreePremiumAlerts]:(0,o.Kg)(n(),t(u.R.SpecialId.Premium)),[u.R.SpecialId.ClarityPriority]:g(u.R.SpecialId.ClarityPriority),[u.R.SpecialId.CorrectnessPriority]:g(u.R.SpecialId.CorrectnessPriority),[u.R.SpecialId.DeliveryPriority]:g(u.R.SpecialId.DeliveryPriority),[u.R.SpecialId.EngagementPriority]:g(u.R.SpecialId.EngagementPriority),[u.R.SpecialId.VoxPriority]:g(u.R.SpecialId.VoxPriority),[u.R.SpecialId.KnowledgeHubPriority]:g(u.R.SpecialId.KnowledgeHubPriority),[u.R.SpecialId.Plagiarism]:t(u.R.SpecialId.Plagiarism),[u.R.SpecialId.DraftAI]:r.jv,[u.R.SpecialId.Cheetah]:r.jv,[u.R.SpecialId.Premium]:t(u.R.SpecialId.Premium),[u.R.SpecialId.AllAlerts]:c.bZ.belongsToAllAlerts,[u.R.SpecialId.Closed]:r.jv,[u.R.SpecialId.Priority]:c.bZ.belongsToPriorityLens,[u.R.SpecialId.PredictionTakeaways]:c.bZ.belongsToPredictionTakeaways,[u.R.SpecialId.PredictionEmogenie]:c.bZ.belongsToPredictionEmogenie,[u.R.SpecialId.RealTimeProofit]:t(u.R.SpecialId.RealTimeProofit)},e.defaultTextFilters=Object.assign(Object.assign({},e.defaultLensFilters),{[u.R.SpecialId.Closed]:c.bZ.isInline,[u.R.SpecialId.FreePremiumAlerts]:(0,o.Kg)(n(),t(u.R.SpecialId.Premium)),[u.R.SpecialId.Premium]:e.defaultLensFilters[u.R.SpecialId.Premium]}),e.priorityTextFilters=e=>({[u.R.SpecialId.Premium]:(0,o.W9)(e[u.R.SpecialId.Premium],c.bZ.isPriority)})}(g||(g={}))},59368:(e,t,n)=>{n.d(t,{Bd:()=>a,Oe:()=>r,rG:()=>i});var r,i,a,s=n(73975),o=n(74660);!function(e){e.eq=(0,s.Uz)((e=>e.alert))(o.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState)),e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState)),e.canBeChanged=t=>n=>Boolean(t)&&a.applied===n.state.current.visualState?t===a.disposed:o.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(a.applied,a.disposed)(n),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(r||(r={})),function(e){e.updateRanges=function(e,t){return Object.assign(Object.assign({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return Object.assign(Object.assign({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return Object.assign(Object.assign({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},16746:(e,t,n)=>{n.d(t,{v:()=>I});var r=n(71249),i=n(57050),a=n(40327),s=n(49524),o=n(25656),l=n(24645),c=n(87969),u=n(95195),d=n(5114),p=n(22232),m=n(83078),h=n(89943),g=n(68983),f=n(8125),y=n(81531),x=n(74660),v=n(36156),b=n(17594),C=n(59368);class I{constructor(e,t,n,r,o,l,c,p){this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=o,this._update=l,this._remove=c,this._onTransitionEnd=p,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,a.pipe)(this._alertRangeService.hasNewRangesForUpdate(this.id),u.fold(i.jv,s.y)))return d.none;const t=(0,a.pipe)(this._alertRangeService.applyPendingRangesUpdate(this.id),u.mapLeft((e=>S("markAlert").error("cannot apply pending ranges",e))),d.fromEither,d.chain(s.y),d.filter((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,a.pipe)(t,d.map((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),u.either.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},u.either.mapLeft(this._alertRef,(e=>S("markAlert").warn("can not take alertRef",e)))}get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,p.kG)(e!==C.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!C.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,a.pipe)(this.change(),d.filter((e=>e.rawMark.length>0)),d.map((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return d.none}}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:n})=>{e.rawMark.forEach((e=>{"create"===e.action?n._setMarkAndCheckFinaleState(e.id,(0,a.pipe)(t.created.get(e.id)||u.left(new Error("Cannot get unknown mark")),d.fromEither)):"remove"===e.action&&n._removeMark(e.id)})),e.commit(),n._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const n=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,a.pipe)(t,d.filter((t=>0!==t.rawMark.length||(S("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:Object.assign(Object.assign({},e.toJSON()),{alert:void 0})}),!1))),d.isSome))).map((([e,t])=>({ma:e,change:m.unsafeGet(t)})));if(0===n.length)return;const r=h.flatMap(n.map((e=>e.change.rawMark))),i=this._changeMarksInDEd(r);this._iterateOverMarkAlerts(n,i)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:d.none}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?d.some(this._getRawActionForApply(e)):d.none}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===l.v.Change.ActionType.remove)this._removeMark(e.id);else{const n=(0,a.pipe)(d.fromNullable(this._marksMap.get(e.id)),d.chain(s.y),d.alt((()=>(0,a.pipe)((e.action===l.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||u.left(new Error("Cannot get unknown mark")),d.fromEither))));this._setMark(e.id,n)}})),this._disposeIfEmpty()}_getTransition(){return(0,p.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=Object.assign(Object.assign({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){if(e.from.visualState===C.Bd.initial)return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((e=>e.commit()))),{action:"create",commit:o.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};switch(e.to.visualState){case C.Bd.disposed:const t=C.Bd.isApplied(e.from.visualState)||x.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(i.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e}))),n=(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1)));return{action:"remove",commit:n,rawMark:t.map((e=>this._remove(e.range)(e.id)))};case C.Bd.applied:const r=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:e})=>e)),d.getOrElse((()=>i.Q1))),rawMark:[...r,...this._getAppliedRanges(((t,n)=>this._create(n,e)(n().meta.id)))]};default:const l=()=>x.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(s.y);return(0,a.pipe)(this._tryToUpdateRangesInAlert(e),d.map((({commit:t,ranges:n})=>this._getReplaceAction(e,l(),n.removed,t))),d.getOrElse((()=>({action:"update",commit:o.Z,rawMark:l().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}_getReplaceAction(e,t,n,r){return{action:"replace",commit:r,rawMark:[...n.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,a.pipe)(this._alertRangeService.getAppliedRanges(this.id),u.fold((e=>(S("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),r.Su(e)))}_getHighlightRanges(e){return(0,a.pipe)(this._alertRangeService.getHighlightRanges(this.id),u.fold((t=>(S("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,a.pipe)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),r.UI(e)))),r.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,p.kG)(!!b.$.isApplicableAlert(t)||(!Boolean(e)||x.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,p.kG)(Boolean(e)&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||x.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${Boolean(e)?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,a.pipe)(this._mark,d.map((e=>e.id)),d.toUndefined),range:(0,a.pipe)(this._mark,d.map((e=>e.range)),d.toUndefined)},alert:this._alert("toJSON")}}equals(e){return C.Oe.eq.equals(this,e)}hashCode(){return(0,v.AC)(this.id)}}!function(e){e.compareTo=e=>{const t=(0,g.W)(c.SV.distanceFrom)(e);return(e,n)=>(0,f.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...n.alert.getHighlightRanges().map(t)))}}(I||(I={}));const S=(0,f.HP)(y.C8.Logging.getLogger)},25980:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(57050),a=n(59443),s=n(5114),o=n(95195),l=n(22232),c=n(81531),u=n(60797),d=n(77176),p=n(66310),m=n(28043),h=n(17343),g=n(98403),f=n(91224),y=n(40151),x=n(38194),v=n(76974),b=n(24209),C=n(74238),I=n(4890);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={}));const n=c.C8.Logging.root.getLogger("AlignmentViewModel");function r(e,t){return(0,i.zG)(e,o.fold((({kind:e,reason:t})=>{switch(e){case"error":n.error("Cannot align card to mark",{reason:t});break;case"notFound":n.info("Item does not exist, alignment is canceled",{reason:t});break;default:(0,l.vE)(e)}return y.E}),(e=>v.of({mark:t,card:e}))))}e.alignMarkToItem=function(e,o){return({animation:l,suggestedPosition:c})=>({id:v,renderOptions:{features:b},activeHighlightIndex:S,activeAlert:w})=>(0,i.zG)(e.getMarkAlertPosition({alert:w,highlightIndex:S}),u.oA,d.U((e=>({mark:e,cardPosition:o.getCardSuggestedPositionInViewport(v,b.has(I.j.Features.showLabel),s.none,"cardContentTop")}))),p.w((({cardPosition:e,mark:t})=>r(e,t))),p.w((({card:e,mark:t})=>o.setCardPosition(v,b.has(I.j.Features.showLabel),!1,C.r.FromWindowTop.ISO.modify(C.L.concatC(-e.contentOffset))(t)).pipe(m.x(),h.h((0,i.zG)(c,s.filter((t=>o.willFitViewport(v,C.r.FromWindowTop.ISO.modify(C.L.concatC(-e.contentOffset))(t)))),s.getOrElse((()=>C.r.FromWindowTop.ISO.modify(C.L.concatC(e.contentOffset))(e.top)))))))),p.w((n=>e.moveAlertHighlightInViewport({alert:w,highlightIndex:S},n,l===t.ANIMATE_ALL?a.uq.fake:a.uq.none))),h.h(g.PU),f.K((e=>(n.error("Cannot align mark to card",e),y.E))),x.B())},e.alignItemToMark=function(t,o){return({animation:l,fitCardIntoViewport:c})=>({id:u,renderOptions:{features:m},activeAlert:S,activeHighlightIndex:w})=>(0,i.zG)(t.getMarkAlertPosition({alert:S,highlightIndex:w}),p.w(s.fold((()=>y.E),(e=>v.of(e)))),d.U((e=>({mark:e,cardPosition:o.getCardSuggestedPositionInViewport(u,m.has(I.j.Features.showLabel),s.some(e),"cardContentTop")}))),p.w((({cardPosition:e,mark:t})=>r(e,t))),p.w((({card:n,mark:r})=>b.T(o.setCardPosition(u,m.has(I.j.Features.showLabel),l===e.Animation.ANIMATE_ALL,C.r.FromWindowTop.ISO.modify(C.L.concatC(-n.contentOffset))(r)),g.Ft(t.moveAlertHighlightInViewport({alert:S,highlightIndex:w},C.r.FromWindowTop.ISO.modify(C.L.concatC(n.contentOffset))(n.top),l===e.Animation.ANIMATE_ALL?a.uq.initial:a.uq.none))(c)))),h.h(g.PU),f.K((e=>(n.error("Cannot align card to mark",e),y.E))),x.B())}}(r||(r={}))},52658:(e,t,n)=>{n.d(t,{eZ:()=>W,UC:()=>H});var r=n(57050),i=n(40327),a=n(49524),s=n(12447),o=n(22232),l=n(5114),c=n(95195),u=n(95574),d=n(83078),p=n(8125),m=n(55415),h=n(74660),g=n(66896),f=n(76974),y=n(77176),x=n(17343),v=n(93508),b=n(28043),C=n(40151),I=n(60797),S=n(66310),w=n(98403),E=n(598),A=n(83401),k=n(41398),T=n(85089),M=n(55721),N=n(95093),L=n(24209),O=n(16118),_=n(85985),D=n(25980),F=n(66268),P=n(74238),R=n(91402),j=n(35416),U=n(14990),$=n(99116);var B,z,G;!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=(t=e.CARD_CONTENT_OFFSET_REM,n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM)=>(e,r)=>Math.round((e?n:t)*r)}(B||(B={})),function(e){e.cardPositionGetter=(e,t)=>(n,a)=>{const s=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(j.nL.getLens).get(),c.fromOption((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),c.chain((({items:e,id:t})=>(0,i.pipe)(e.get(n),c.fromOption((()=>({kind:"notFound",reason:`The item with id: ${n} does not exist in lens ${t}`}))),c.map((({value:e})=>(0,i.pipe)(a,l.fold((()=>(0,r.ls)(P.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop,s.converters.viewportToWindow)(e.positionState.absTop)),r.yR))))))))},e.cardPositionInViewportGetter=(e,t)=>(n,a)=>{const s=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(j.nL.getLens).get(),c.fromOption((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),c.chain((({items:e,id:t})=>(0,i.pipe)(e.get(n),c.fromOption((()=>({kind:"notFound",reason:`The item with id: ${n} does not exist in lens ${t}`}))),c.chain((({value:t})=>{return(0,i.pipe)(a,l.map(s.converters.windowToViewport),l.alt((()=>l.some((0,r.ls)(P.L.AbsTop.ISO.wrap,s.converters.absTopToViewportTop)(t.positionState.absTop)))),l.map((o=t,u=((e,t)=>(0,i.pipe)(t.get(e),l.map((({index:e})=>({before:(0,i.pipe)(t.getAt(e-1),l.map((e=>e.positionState.height)),l.getOrElse((()=>0))),after:(0,i.pipe)(t.getAt(e+1),l.map((e=>e.positionState.height)),l.getOrElse((()=>0)))}))),l.getOrElse((()=>({before:0,after:0})))))(n,e),d=s.viewport,e=>{const t=(0,$.v_)({cardTop:e,cardHeight:o.positionState.height,viewportHeight:d.height,padding:u});return P.L.FromViewportTop.ISO.modify(P.L.concatC(-t))(e)})),l.map(s.converters.viewportToWindow),c.fromOption((()=>({kind:"error",reason:"Cannot get card position in viewport"}))));var o,u,d}))))))}}(z||(z={})),function(e){const t=(e,t,n,r)=>{const a=r.viewport.get(),s=r.scrollTop.get(),c=P.L.converters(s,P.r.FromWindowTop.ISO.unwrap(a.top),r.paddingTop.get());return u.tryCatchError((()=>(0,i.pipe)(j.nL.getLens(n),l.chain((t=>t.items.get(e))),l.map((e=>P.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),l.map((e=>c.absTopToViewportTop(e))),l.fold((()=>{throw new o.ej("Cannot get offset for unknown card")}),(e=>{const n=c.windowToViewport(t);return P.L.FromViewportTop.ISO.unwrap(e)-P.L.FromViewportTop.ISO.unwrap(n)})))))};e.moveCardToPositionSyncGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),c.chain((e=>n.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,n)=>r=>(0,i.pipe)(t(r.id,r.position,e.get(),n),c.fold((e=>R._(e)),(e=>n.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(G||(G={}));var W,H,V,Y,Z=n(71841);class Q extends o.sH{}!function(e){e.cardSuggestedPositionGetter=(e,t)=>(n,r,a,s)=>{const o="cardTop"===s?0:t(r);return(0,i.pipe)(e(n,(0,i.pipe)(a,l.map(P.r.FromWindowTop.ISO.modify(P.L.concatC(-o))))),c.map((e=>({top:e,contentOffset:o}))))},e.getSuperScrollMapper=(t,n,r)=>{const a=G.moveCardToPositionAnimatedGetter(t,n),s=G.moveCardToPositionSyncGetter(t,n),o=B.contentOffsetGetter();return{setCardPosition:(e,t,n,i)=>{const l={top:i,contentOffset:o(t,r.get())};return(n?a({id:e,position:i}):f.of(s({id:e,position:i})).pipe(y.U(u.unsafeGet))).pipe(x.h(l),v.O(l),b.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(z.cardPositionGetter(t,n),(e=>o(e,r.get()))),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(z.cardPositionInViewportGetter(t,n),(e=>o(e,r.get()))),willFitViewport:(e,r)=>(0,i.pipe)(t.get(),(t=>!!j.nL.hasItems(t)&&((e,t)=>(n,r)=>{const a=new U.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.currentLens.items,(e=>(0,i.pipe)(e.get(n),l.map((({value:e})=>0===(0,$.v_)({cardTop:a.converters.windowToViewport(r),cardHeight:e.positionState.height,viewportHeight:a.viewport.height,padding:{before:0,after:0}}))))),d.unsafeGet)})(t,n)(e,r))),isAboveViewportTop:(c=n,e=>P.r.FromWindowTop.ISO.modify(P.L.concatC(c.scrollTop.get()+c.paddingTop.get()))(e)<c.viewport.get().top)};var c}}(W||(W={})),function(e){e.getMapper=(e,t,n)=>({moveAlertHighlightInViewport:(t,n,r)=>e.ensureAlertHighlightInViewport(t,P.r.FromWindowTop.ISO.unwrap(n),r),getMarkAlertPosition:r=>(0,i.pipe)(e.getMarkByAlert(r),c.fromOption((()=>new Q("getMarkByAlert returned O.none"))),c.chain((a=>(0,i.pipe)(a.getRect(),c.map(s.n.relativeToViewport),c.map((e=>e.top)),c.orElse((()=>(n.debug("Cached alert is missing, falling back to flush"),(n=>(t.flushChanges(),(0,i.pipe)(e.getMarkByAlert(n),c.fromOption((()=>new Error("getMarkByAlert returned O.none"))),c.chain((e=>(0,i.pipe)(e.getRect(),c.map(s.n.relativeToViewport),c.map((e=>e.top))))))))(r)))),c.map(P.r.FromWindowTop.ISO.wrap)))),c.mapLeft((e=>(e instanceof Q||n.warn("Cannot getMarkAlertPosition",e),e))),l.fromEither,(e=>f.of(e)))})}(H||(H={}));!function(e){e.Mock=class{constructor(){this.alignCardToMark=()=>C.E,this.alignCardTo=()=>C.E,this.alignMarkTo=()=>C.E,this.alignMarkToCard=()=>C.E}}}(V||(V={})),function(e){let t,n;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=(e,n,r)=>n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}(t||(t={})),e.createAlignmentOnTypingEffect=(e,t,n,r,a)=>{const s=e.view(j.nL.mapper((({currentLens:e})=>(0,i.pipe)(l.some(e),l.filter((0,$.Bk)(a)))))).pipe(y.U(l.chain(r),l.filter(a.isValidToAlign)),I.cp((e=>n.pipe(S.w(w.b2.rafScheduler),S.w((()=>t.alignCardToMark(e,D.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:g.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(s.pipe(E.c(A.C)))}},e.createAlignOnDisjointedAreasEffect=(e,n,s,c)=>{const u=e.view((0,r.ls)(j.nL.getLens,l.filter((e=>l.isNone(j.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),p=u.pipe(y.U(l.isSome),b.x(),S.w(w.Ft(s.changes.pipe(v.O(w.PU),S.w(w.b2.rafScheduler),y.U((()=>l.some((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(s)))),y.U(l.filter((e=>e.top-e.bottom!=0)))))),k.M(u.pipe(y.U(l.map((({items:e})=>e)))),d.map2(((r,a)=>(0,i.pipe)(Z.YA(e,c),l.map((e=>({top:P.r.FromWindowTop.ISO.unwrap(e.top),bottom:P.r.FromWindowTop.ISO.unwrap(e.bottom)}))),l.chain((e=>(0,i.pipe)(((e,n,r)=>{const a=(0,i.pipe)(e.getAt(0),l.map((e=>e.positionState.height)),l.getOrElse((()=>0))),s=t.getRelativePosition(n,r,a);switch(s){case t.RelativePosition.above:return(0,i.pipe)(e.getAt(0),l.map((e=>({card:e,top:n.top}))));case t.RelativePosition.below:return(0,i.pipe)(e.getAt(0),l.map((e=>({card:e,top:n.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return l.none;default:return(0,o.vE)(s)}})(a,r,e),l.map((({card:e,top:t})=>n.alignCardTo(e,P.r.FromWindowTop.ISO.wrap(t),D.v.Animation.NO_ANIMATION)))))),l.getOrElse((()=>C.E)))))),S.w(l.fold((()=>C.E),a.y)));return{id:"alignOnDisjointedAreas",when:g.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(p.pipe(E.c(A.C)))}},e.createAlignOnResizeSideEffect=(e,t,n,r,a,s=w.b2.rafScheduler)=>{const o=e.view(j.nL.mapper((({currentLens:e,alertSource:t})=>l.some({currentLens:e,alertSource:t})))).view(l.filter((({currentLens:e})=>(0,$.Bk)(a)(e)))).view(l.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(r(e),l.filter(a.isValidToAlign),l.map((n=>({item:n,source:t,lensId:e.id}))))))),c=T.Qr.pipe(M.p(100),N.T(n),k.M(o,((e,t)=>t)),S.w(s),S.w(l.fold((()=>C.E),(({item:e})=>t.alignCardToMark(e,D.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:g.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(c.pipe(E.c(A.C)))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=(t,n,r=((e,t)=>t),i,a,s,o,l=w.b2.rafScheduler)=>{const c=e._createAlignmentSource(t,n,r,i,a,s,o,l);return{id:"alignmentSideEffect",when:g.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(c.pipe(E.c(C.E)))}},e._createAlignmentSource=(e,t,s=((e,t)=>t),o,c,u,g,f=w.b2.rafScheduler)=>{const I=(0,p.Kg)(F.lY.isAlertMinicardButtonClick,F.lY.isSwitchToClosestByViewport,F.lY.isAlertCardShow,F.eI.isCardExpand,F.lY.isBulkAcceptItemShow,F.lY.isBulkHighlight),E=L.T(e.pipe(y.U(j.nL.mapper((({currentLens:e,alertSource:t})=>l.some({currentLens:e,alertSource:t})))),v.O(l.none),y.U(l.map((e=>e.currentLens.id))),O.G(),_.h((([e,t])=>(0,i.pipe)(d.map2(((e,t)=>e!==t))(e,t),l.exists(a.y)))),x.h(l.none)),e.pipe(y.U(j.nL.mapper((({currentLens:e,alertSource:t})=>l.some({currentLens:e,alertSource:t})))),_.h(l.exists((({currentLens:e})=>(0,$.Bk)(c)(e)))),y.U(l.chain((({currentLens:e,alertSource:t})=>(0,i.pipe)(o(e),l.filter(c.isValidToAlign),l.map((n=>({item:n,source:t,lensId:e.id}))))))))).pipe(b.x((0,r.ls)(d.map2(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),l.exists(a.y)))),T=t.pipe(_.h(I),y.U(l.some),v.O(l.none),O.G(),_.h((0,r.ls)((0,r.og)(d.map2(((e,t)=>!F.lY.isAlertCardShow(t)||!F.lY.isAlertMinicardButtonClick(e)))),l.getOrElse(r.jv))),y.U((([,e])=>(0,i.pipe)(e,l.filter(F.lY.hasClickPoint)))),v.O(l.none)).pipe(S.w((e=>E.pipe(_.h(l.exists((e=>e.source===h.l$.sidebar))),y.U(l.chain((t=>l.some(Object.assign(Object.assign({},t),{clickPoint:(0,i.pipe)(e,l.map(m.pick("clickPoint")))}))))))))),M=E.pipe(_.h(l.exists((e=>e.source!==h.l$.sidebar))),y.U((e=>(0,i.pipe)(e,l.chain((e=>l.some(Object.assign(Object.assign({},e),{clickPoint:l.none}))))))));return L.T(T,M).pipe(v.O(l.none),O.G(),y.U((([e,t])=>(0,i.pipe)(t,l.map((n=>({lensId:n.lensId,card:n.item,source:n.source,animate:(0,i.pipe)(e,d.forAll((({lensId:e})=>e===n.lensId))),clickPoint:(0,i.pipe)(t,l.chain(m.pick("clickPoint")),l.map((0,r.ls)(m.pick("y"),P.r.FromWindowTop.ISO.wrap)))})))))),S.w(l.fold((()=>C.E),f)),k.M(e),S.w((([{card:e,source:t,animate:r,clickPoint:a,lensId:o},l])=>(0,i.pipe)(s(e,t),(t=>j.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&o===l.currentLens.id&&t!==n.skip?((e,t,n,r)=>{if(n===h.l$.text)return(0,i.pipe)(e,g({animation:t?D.v.Animation.ANIMATE_ALL:D.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(n===j.h8.forceText)return(0,i.pipe)(e,g({animation:D.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const a=n===h.l$.sidebar?t?D.v.Animation.ANIMATE_ALL:D.v.Animation.ANIMATE_MARK:D.v.Animation.NO_ANIMATION;return(0,i.pipe)(e,u({animation:a,suggestedPosition:r}))}})(e,r,t,a):A.C)))))}}(Y||(Y={}))},54466:(e,t,n)=>{n.d(t,{sU:()=>ve,dv:()=>xe,Xx:()=>ke});var r={};n.r(r),n.d(r,{handleGbPrompt:()=>te,sendToIdeasGallery:()=>ee,sendToSignIn:()=>K});var i,a=n(11064),s=n(57050),o=n(40327),l=n(32952),c=n(38983),u=n(84966),d=n(5114),p=n(22232),m=n(83078),h=n(73975),g=n(55415),f=n(95195),y=n(8125),x=n(31668),v=n(71249),b=n(59312);function C(e,t){return{map:function(n,r){return e.map(n,(function(e){return t.map(e,r)}))}}}function I(e){var t,n,r=(t=e,n=d.Applicative,{map:C(t,n).map,of:function(e){return t.of(n.of(e))},ap:function(e,r){return t.ap(t.map(e,(function(e){return function(t){return n.ap(e,t)}})),r)}}),i=e.of(d.none);return{map:r.map,ap:r.ap,of:r.of,chain:function(t,n){return e.chain(t,(0,d.fold)((function(){return i}),n))},alt:function(t,n){return e.chain(t,(0,d.fold)(n,(function(t){return e.of((0,d.some)(t))})))},fold:function(t,n,r){return e.chain(t,(0,d.fold)(n,r))},getOrElse:function(t,n){return e.chain(t,(0,d.fold)(n,e.of))},fromM:function(t){return e.map(t,d.some)},none:function(){return i}}}!function(e){var t;e.URI="IOOption",e.ioOption=(0,b.__assign)({URI:e.URI},I(a.io)),t=(0,o.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(i||(i={}));var S=n(81531),w=n(46680),E=n(33678),A=n(74660),k=n(79227),T=n(66896),M=n(598),N=n(40151),L=n(76974),O=n(66310),_=n(91402),D=n(77176),F=n(28043),P=n(60797),R=n(44586),j=n(83401),U=n(9922),$=n(77843),B=n(93508),z=n(95093),G=n(85985),W=n(36919),H=n(95983),V=n(2834),Y=n(67434),Z=n(38194),Q=n(5920),q=n(66268),J=n(25980),X=n(24209);const K=(e,t)=>(0,s.ls)(G.h((e=>e.type===q.lY.Type.toSignIn)),D.U((()=>n=>(e.actions.openUrl(new x.Z(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n)))),ee=(e,t)=>(0,s.ls)(G.h(q.lY.isOpenIdeasGallery),V.b((()=>e.actions.openPopup(new x.Z(t.ideas.galleryURL)))),M.c(N.E)),te=(e,t,n)=>r=>X.T((0,o.pipe)(r,G.h(q.lY.isGbPromptShow),V.b((e=>ne(e,n))),M.c(N.E)),(0,o.pipe)(r,G.h(q.lY.isGbPromptApply),V.b((r=>re(e,t,r,n))),M.c(N.E)),(0,o.pipe)(r,G.h(q.lY.isGbPromptCreateRule),V.b((e=>ie(e,n))),M.c(N.E)),(0,o.pipe)(r,G.h(q.lY.isGbPromptDismiss),V.b((e=>ae(e,n))),M.c(N.E))),ne=({patternName:e},t)=>t.onShow(e),re=(e,t,n,r)=>A.BY.isVox(n.gbPrompt)?se(e,t,n,r):ce(e,t,n,r),ie=(e,t)=>A.BY.isVox(e.gbPrompt)?pe(e,t):ge(),ae=(e,t)=>A.BY.isVox(e.gbPrompt)?fe(e,t):ye(e,t),se=(e,t,n,r)=>"redirect"===n.gbPrompt.promptType?oe(e,t,n,r):le(),oe=(e,t,{gbPrompt:{styleGuideId:n},source:r,target:i,patternName:a},s)=>{e.actions.openPopup(new x.Z(t.account.styleGuide).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",action:"createRule",source:r,target:i,styleGuideId:n})),s.onAccept(a)},le=()=>{},ce=(e,t,n,r)=>"redirect"===n.gbPrompt.promptType?ue(e,t,n,r):de(n,r),ue=(e,t,{gbPrompt:n,patternName:r},i)=>{e.actions.openPopup(new x.Z(t.account.writingStyle).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",categoryTitle:n.categoryTitle})),i.onAccept(r)},de=({patternName:e},t)=>t.onAccept(e),pe=(e,t)=>"redirect"===e.gbPrompt.promptType?me():he(e,t),me=()=>{},he=({patternName:e},t)=>t.onAccept(e),ge=()=>{},fe=({patternName:e,step:t},n)=>"initial"===t&&n.onDismiss(e),ye=({patternName:e,step:t},n)=>"initial"===t&&n.onDismiss(e);var xe,ve,be=n(17594),Ce=n(26027),Ie=n(20594),Se=n(16892),we=n(48521),Ee=n(35416),Ae=n(6100);!function(e){const t=(e,t,n,r)=>(0,o.pipe)(r((t=>(t.lensId===e.id||T.R.isMainLens(e.id))&&!A.bZ.isPremium(t)),"middleOfTheViewport"),d.fold((()=>N.E),(r=>(0,o.pipe)(n(e),d.filter((e=>e.activeAlert.id===r.alert.id)),d.fold((()=>L.of(r)),(e=>((e,n)=>(0,o.pipe)(t,d.map((t=>t.alignMarkToCard(e,J.v.Animation.ANIMATE_ALL,d.none).pipe(M.c(N.E)))),d.getOrElse((()=>L.of(n)))))((0,s.MZ)(e),r)))))));e.changeAlertEffect=(e,n,r,i,a,s,l,c)=>({id:"changeAlertEffect",when:T.R.isWithAlertsId,what:Ee.nL.Effect.SwitchAlert.create(n.actionEvents.pipe(O.w((n=>{const u=e.get();if(!Ee.nL.hasCards(u))return _._(new p.ej("Cannot update state without cards"));switch(n.type){case q.lY.Type.alertMinicardButtonClick:return(0,o.pipe)(a.getRegistered(n.alertHighlight.alert.id),d.fold((()=>(c.error("somehow we got click on non registered alert",{alert:be.$.snapshot(n.alertHighlight.alert),alertInRepo:(0,o.pipe)(a.getById(n.alertHighlight.alert.id),d.map(be.$.fromModel),d.map(be.$.snapshot)),state:Ee.nL.snapshot(Ie.Mq.snapshot,i)(u)}),N.E)),(()=>L.of(n.alertHighlight))));case q.lY.Type.cardMatchesNavigationButtonClick:const e=n.transitionTo;switch(e.kind){case"anotherAlert":return(0,o.pipe)("right"===n.direction?r.nextAlert(e.card):(0,o.pipe)(r.prevAlert(e.card),m.orElse(r.anyRegisteredAlert(e.card))),d.fold((()=>N.E),(e=>L.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.pipe)(a.getRegistered(e.card.activeAlert.id),d.fold((()=>N.E),(()=>L.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,p.vE)(e)}case q.lY.Type.switchToClosestByViewport:return t(u.currentLens,s,i,l);default:return N.E}})),D.U((e=>({alertHighlight:e,alertSource:A.l$.sidebar,options:{order:"lensOrder"}})))))}),e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r,i){const a=e.pipe(D.U(Ee.nL.getActiveAlert(t)),F.x(d.getEq(h.f7(((e,t)=>be.$.eq.equals(e,t)&&e.patternName===t.patternName))).equals),D.U((0,s.ls)(d.map(g.pick("id")),d.chain(r.getValidForFeedback))),P.cp((t=>R.y.create((()=>((0,o.pipe)(r.getValidForFeedback(t.id),m.tap((()=>(0,o.pipe)(n.applyFeedback(t.id,{kind:u.PZ.LOOKED,subtype:k.J.getSubTypeFromLens(e.get().currentLens.id)},A.l$.sidebar),f.fold((e=>i.error("Failed to send LOOKED feedback",e)),y.Q1))))),()=>(0,o.pipe)(r.getValidForFeedback(t.id),m.tap((()=>(0,o.pipe)(n.applyFeedback(t.id,{kind:u.PZ.CLOSED,subtype:k.J.getSubTypeFromLens(e.get().currentLens.id)},A.l$.sidebar),f.fold((e=>i.error("Failed to send CLOSED feedback: ",e)),y.Q1)))))))))));return{id:"sendActiveAlertFeedbacksEffect",when:s.W8,what:Ee.nL.Effect.Applicator.create(a.pipe(M.c(j.C)))}}}(xe||(xe={}));class ke{constructor(e,t,n,r,i,a,c,h,g,x,v,b,C,I=new E.A,T={bufferTransitions:!0,showGbPrompt:!1},M=y.Q1){this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._alertsReader=i,this._markOnboardingAsSeen=a,this._markMuteQuotedAdviceAsDismissed=c,this._sendToUrlExperiment=g,this._getActiveItemWithAlert=v,this._checksFeedCapabilities=b,this._lensState=C,this._platformEnvironment=I,this._settings=T,this._setDocumentCitationStyle=M,this._log=S.C8.Logging.getLogger("CardsViewModelImpl",w.i.DEBUG),this._subs=new U.w.Keeper,this._flushCompleteTransition=new l.xQ,this._flushPositionAnimation=new l.xQ,this.actionEvents=new l.xQ,this.completePositionAnimation=new l.xQ,this.changePosition=new l.xQ,this._transitionBuffer=$.F(100).pipe(B.O(0),z.T(this._flushCompleteTransition)),this._positionAnimationBuffer=$.F(100).pipe(B.O(0),z.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(G.h(q.eI.isStartTransitionTo),D.U((e=>t=>ve.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(G.h(q.eI.isCompleteTransitionTo),this._settings.bufferTransitions?W.f(this._transitionBuffer):D.U((e=>[e])),G.h(y.Dw),D.U((e=>t=>{const n=t.currentLens,r=this._applyCompleteVSChange(n,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(w.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:H.aW.diff(n.items,r.items)}),Ee.nL.Prism.getLens().set(r,t)}))),this._changePositionEffect=this.changePosition.pipe(D.U((({id:e,height:t})=>n=>{const r=(0,o.pipe)(Q.l.update(n.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(Se.s.PositionState.changeHeight(e.positionState,t))(e))),f.fold((()=>n.currentLens.items),s.yR));return ve.itemsLens.set(r,n)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(W.f(this._positionAnimationBuffer),G.h(y.Dw),D.U((e=>t=>{const n=t.currentLens.items,r=e.map((e=>[e,!1])).reduce(((e,[t,n])=>(0,o.pipe)(Q.l.update(e,t,(e=>this._checksFeedCapabilities.changePosition(Se.s.PositionState.changeAnimationInProgress(e.positionState,n))(e))),f.fold((()=>e),s.yR))),n);return ve.itemsLens.set(r,t)}))),this._switchToNextChanges=this.actionEvents.pipe(G.h((e=>e.type===q.lY.Type.switchToNext)),D.U((()=>e=>e.patch({currentLens:(0,o.pipe)(Ee.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):d.none,d.fold((()=>(0,o.pipe)(Ee.nL.getActiveAlert(this._getActiveItemWithAlert)(e),d.fold((()=>{throw new p.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>Ee.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:A.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(G.h(q.lY.isDismissMuteQuotedAdvice),V.b(this._markMuteQuotedAdviceAsDismissed),D.U((()=>e=>{const t=e.currentLens.items.filter((0,s.ls)(this._checksFeedCapabilities.hasActiveAlert,d.map((e=>e.alert)),d.exists(be.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,o.pipe)(Q.l.update(e,t,this._cardFactory.hideMuteQuotedAdvice),f.fold((()=>e),s.yR))),e.currentLens.items);return ve.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(G.h(q.lY.isChangeUserInput),V.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),D.U((({cardId:e,userInput:t})=>n=>{const r=(0,o.pipe)(n.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(Boolean(t)?d.some(t):d.none)),f.fold((()=>n.currentLens.items),s.yR));return ve.itemsLens.set(r,n)}))),this._shortenItDismissEdit=this.actionEvents.pipe(G.h(q.ut.isDismissEdit),D.U((({alertId:e,group:t,itemId:n})=>r=>(0,o.pipe)(this._alertsService.dismissShortenItTransformGroup(e,t),f.map((e=>({newAlert:e,itemId:n}))),f.chainW((({newAlert:e,itemId:t})=>Q.l.update(r.currentLens.items,t,this._checksFeedCapabilities.updateWithAlerts([e])))),f.fold((e=>(this._log.error("Error updating card/alert with dismissed transform groups.",e),r)),(e=>ve.itemsLens.set(e,r))))))),this._focusChecksFeedItem=this.actionEvents.pipe(G.h(q.lY.isMiniItemClick),D.U((e=>t=>t.patch({currentLens:(0,o.pipe)(t.currentLens.items.find((t=>t.id===e.id)),d.fold((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,s.MZ)((0,o.pipe)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:A.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(G.h(q.lY.isChecklistItemCollapseButtonClick),D.U((()=>e=>e.patch({currentLens:Ee.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:A.l$.sidebar})))),this._toneAIChangeToneAlternative=this.actionEvents.pipe(G.h(q.lY.isToneAIChangeToneAlternativeAction),D.U((({itemId:e,alertId:t,selectedToneAlternativeIdx:n})=>(0,o.pipe)(this._alertsService.changeToneAIToneAlternative(t,n),f.map((t=>({newAlert:t,itemId:e})))))),D.U((e=>this._updateToneAICard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(G.h(q.GM.isDrilldown),D.U((({cardId:e,wordIndex:t})=>n=>(0,o.pipe)(Q.l.update(n.currentLens.items,e,(e=>{const n=e;return Ce.X.changeSynfonySelection((0,o.pipe)(n.synfonySelection,d.getOrElse((()=>[])),(e=>d.some(e.concat([t])))))(n)})),f.fold((()=>n),(e=>Ee.nL.Prism.getLens().compose(Ae.v.Prism.items).set(e,n))))))),this._synfonyBack=this.actionEvents.pipe(G.h(q.GM.isBack),D.U((({cardId:e})=>t=>(0,o.pipe)(Q.l.update(t.currentLens.items,e,(e=>{const t=e;return Ce.X.changeSynfonySelection((0,o.pipe)(t.synfonySelection,d.map((e=>e.slice(0,-1)))))(t)})),f.fold((()=>t),(e=>Ee.nL.Prism.getLens().compose(Ae.v.Prism.items).set(e,t))))))),this._sendToUrl=(0,o.pipe)(this._sendToUrlExperiment,d.map((e=>Object.entries(e).filter((([e])=>"handleGbPrompt"!==e||this._settings.showGbPrompt)).map((([e,t])=>[t(this.actionEvents),e]))))),this._sendFeedback=(e,t)=>(0,o.pipe)(e,d.fromPredicate(this._alertsReader.isValidForFeedback),m.tap((()=>(0,o.pipe)(this._alertsService.applyFeedback(e,Object.assign(Object.assign({},t),{subtype:k.J.getSubTypeFromLens(this._lensState.get().currentLens.id)}),A.l$.sidebar),f.fold((e=>this._log.error("error calling alert service to send a feedback",e)),y.Q1))))),this._showSurveyForm=new l.xQ,this._showSurveyFormEffect=(0,o.pipe)(this._showSurveyForm,D.U((e=>t=>ve.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,"survey"===e.formType?Object.assign({type:"feedback_form",formType:"survey",clockwise:!0,survey:e.survey},e.submitActionType===q.lY.Type.alertApplyFormSubmit?{submitActionType:q.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e.alertApplyActionProps}:{submitActionType:q.lY.Type.alertIgnoreFormSubmit}):{type:"feedback_form",formType:"gbPrompt",clockwise:!0,gbPrompt:e.gbPrompt,alertApplyActionProps:e.alertApplyActionProps}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(G.h(q.lY.isMuteCategoryAction),D.U((e=>t=>ve.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(G.h(q.lY.isUndoMuteCategoryAction),D.U((e=>t=>ve.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,s.ls)(Te((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:u.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(G.h(q.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this._handleApplyAlerts=(0,s.ls)(Te((e=>()=>this._applyAlert(e)),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(G.h(q.lY.isAlertApplyAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(G.h(q.lY.isHoverAction),V.b((()=>this._ops.flush())),Y.R(((e,t)=>"hover"===t.kind?d.some(t.id):(0,o.pipe)(e,d.filter((e=>e!==t.id)))),d.none),Z.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleApplyFormSubmit(),this._handleGbPromptDismiss(),this._handleGbPromptApply(),this._handleAlertIgnore(x),this._handleAlertResolve(),this._handleApplyAlerts(x),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleDrilldown(),this._handleSnippetsOpenExternalLink(),this._handleEssayDetectionSetAcademicDomainAndCitationStyle()),(0,o.pipe)(h,m.tap((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}_applyStartVSChange(e,t){return t.reduce(((e,[t,n])=>(0,o.pipe)(Q.l.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(n)(e))),f.fold((()=>e),s.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,n])=>(0,o.pipe)(e.items.get(t),d.map((({value:e})=>e)),d.fold((()=>e),(r=>we.o.isAnimatable(r)&&"removed"===r.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,o.pipe)(Q.l.update(e.items,t,(e=>we.o.isAnimatable(e)&&e.visualState.transitionId===n?this._checksFeedCapabilities.completeTransition(n)(e):e)),f.fold((()=>e),(t=>Ae.v.Prism.items.set(t,e)))))))),e)}_handleSnippetsOpenExternalLink(){return this.actionEvents.pipe(G.h(q.lY.isSnippetsOpenExternalLink)).subscribe((({externalLink:e})=>this._platformEnvironment.actions.openPopup(new x.Z(e))))}_updateToneAICard(e){return t=>(0,o.pipe)(e,f.chainW((({newAlert:e,itemId:n})=>Q.l.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),f.fold((e=>(this._log.error("Error updating card with ToneAI alert.",e),t)),(e=>Ee.nL.Prism.getLens().compose(Ae.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(G.h(q.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(G.h(q.lY.isTakeawayDetectionFeedbackAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===q.lY.Type.takeawayCorrectlyDetected?A.TO.correctlyDetected:t===q.lY.Type.takeawayIncorrectlyDetected?A.TO.incorrectlyDetected:(0,p.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(G.h(q.lY.isTakeawayAction)).subscribe((e=>{switch(e.type){case q.lY.Type.takeawayCorrectlyDetected:return e.isLikelyToBeRead?this._sendFeedback(e.alertId,{kind:u.PZ.ACKNOWLEDGED,text:e.takeawayText}):this._sendFeedback(e.alertId,{kind:u.PZ.ACCEPTED,replacementText:e.takeawayText});case q.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:u.PZ.IGNORE});case q.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:u.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});case q.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:u.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?u.N_.likelyToBeReadTakeaway:u.N_.unlikelyToBeReadTakeaway});default:(0,p.vE)(e)}}))}_handleEssayDetectionSetAcademicDomainAndCitationStyle(){return this.actionEvents.pipe(G.h(q.Wh.isSetAcademicDomainAndCitationStyleAction)).subscribe((({citationStyle:e})=>{this._setDocumentCitationStyle(e)}))}_handleAlertResolve(){return this.actionEvents.pipe(G.h(q.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:u.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(G.h(q.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>{this._sendFeedback(e,{kind:u.PZ.IGNORE,reason:t})}))}_handleApplyFormSubmit(){return this.actionEvents.pipe(G.h(q.lY.isAlertApplyFeedbackFormSubmit)).subscribe((e=>{this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{reason:e.reason})),e.alertApplyActionProps.actionsToDispatchAfterSurvey&&e.alertApplyActionProps.actionsToDispatchAfterSurvey.forEach((e=>this.actionEvents.next(e)))}))}_handleGbPromptDismiss(){return this.actionEvents.pipe(G.h(q.lY.isGbPromptDismiss)).subscribe((e=>this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{gbPrompt:{feedback:u.Kd.DISMISSED,source:e.source,target:e.target,description:e.description}}))))}_handleGbPromptApply(){return this.actionEvents.pipe(G.h(q.lY.isGbPromptApply)).subscribe((e=>this._applyAlert(Object.assign(Object.assign({},e.alertApplyActionProps),{gbPrompt:{feedback:u.Kd.ACCEPTED,source:e.source,target:e.target,description:e.description}}))))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(G.h(q.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,o.pipe)(e.muteCategories([t.categoryId]),f.fold((e=>this._log.error("error calling categories model to commit muted category",e)),y.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(G.h(q.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlert(e){return(0,o.pipe)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:A.l$.sidebar,feedbackSubtype:k.J.getSubTypeFromLens(this._lensState.get().currentLens.id),drilldownSuggestionIds:e.drilldownSuggestionIds,reason:e.reason,gbPrompt:e.gbPrompt}),f.fold((e=>this._log.error("error calling alert service to apply an alert",e)),y.Q1))}_handleDrilldown(){return this.actionEvents.pipe(G.h(q.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:u.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(G.h(q.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,o.pipe)(this._alertsService.dismissBatch(e.alerts,k.J.getSubTypeFromLens(this._lensState.get().currentLens.id)),f.fold((e=>this._log.error("error calling alert service to dismiss alerts batch",e)),y.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(G.h(q.lY.isOnboardingClose)).subscribe((e=>(0,o.pipe)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,o.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._toneAIChangeToneAlternative,"toneAIChangeToneAlternative"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this._shortenItDismissEdit,"shortenItDismissEdit"],[this.actionEvents.pipe(G.h(q.lY.isNavigation),V.b(this._navigationEvents),M.c(N.E)),"navigationEvents"],...(0,o.pipe)(this._sendToUrl,d.getOrElse((0,s.a9)([]))),[this._showSurveyFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],v.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:T.R.isWithAlertsId,what:Ee.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}}!function(e){e.itemsLens=Ee.nL.Prism.getLens().compose(Ae.v.Prism.items);e.Mock=class{constructor(){this.animate=c.h.create(!0),this.clockwise=c.h.create(!0),this.toggleAnimations=()=>this.animate.modify((e=>!e)),this.completePositionAnimation=new l.xQ,this.actionEvents=new l.xQ,this.flushTransitionTo=y.Q1,this.sideEffect={id:"cardsViewModelMock",when:T.R.isWithAlertsId,what:Ee.nL.Effect.Applicator.create(N.E)},this.changePosition=new l.xQ,this.dispose=y.Q1}},e.Experiments=r}(ve||(ve={}));const Te=(e,t,n)=>r=>s=>(0,o.pipe)(Me(s,n),a.of,i.chain((e=>(0,o.pipe)(r,a.UI((t=>t?d.none:d.some(e)))))),i.fold((()=>e(s)),(e=>t(e)))),Me=(e,t)=>q.lY.isAlertApplyAction(e)?Ne(e,t):Le(e),Ne=(e,t)=>(0,o.pipe)(e.eligibleForGbPrompt,d.filter((0,s.a9)(t)),d.map((t=>({id:e.id,formType:"gbPrompt",alertApplyActionProps:e,gbPrompt:t}))),m.orElse((0,o.pipe)(e.eligibleForSurvey,d.map((t=>({id:e.id,formType:"survey",submitActionType:q.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e,survey:t})))))),Le=e=>(0,o.pipe)(e.eligibleForSurvey,d.map((t=>({id:e.id,formType:"survey",submitActionType:q.lY.Type.alertIgnoreFormSubmit,survey:t}))))},92485:(e,t,n)=>{n.d(t,{$y:()=>Q});var r,i=n(71249),a=n(57050),s=n(40327),o=n(36991),l=n(67394),c=n(95195),u=n(5114),d=n(26328),p=n(74660),m=n(22232),h=n(84966),g=n(95574),f=n(98637);function y(e,{text:t,ops:n}){n.reduce(((t,n,r)=>l.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):l.JU.isInsertGap(n)?(e.insertGap("",n,r),t):l.JU.isInsert(n)?t:l.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):l.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,m.vE)(n)),t)}function x(e){return 0===e.replace(/ /g,"").length}function v(e,t){(0,s.pipe)(e,i.Z$,u.fold((()=>{x(t.text)||e.push(t)}),(n=>{n.type===t.type?n.text+=t.text:e.push(t)})))}function b(e){return!0===e.italic?!0===e.bold?"boldItalic":"italic":!0===e.bold?"bold":void 0}function C(e,t){return(0,s.pipe)(g.tryCatchError((()=>(0,s.pipe)(e,d.UI((n=>{const r=[];return y({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new P("Remove transform contains main insert",e)},insertGap(){throw new P("Remove transform contains gap insert",e)},retain(e,{type:t,attributes:n}){l.JU.isOptionalType(t)||v(r,{type:f.GP.Text,text:e,style:b(n)})},remove(e,{type:n}){v(r,{type:n!==l.JU.Type.Main||x(e)&&t?f.GP.Text:f.GP.Delete,text:e})}},n),r})),i.xH))),c.chain((0,a.ls)(c.fromPredicate((e=>e.length>0),(()=>new P("Remove transform contains no data",e))),c.map((e=>({type:r.Type.Remove,remove:e}))))))}function I(e,t){return(0,s.pipe)(g.tryCatchError((()=>(0,s.pipe)(e,d.UI((n=>{const r=[];return y({insertString(t,{type:n}){if(n===l.JU.Type.Main)throw new P("Multi-remove transform contains main insert",e)},insertGap(){throw new P("Multi-remove transform contains gap insert",e)},retain(e,{type:t,attributes:n}){l.JU.isOptionalType(t)||v(r,{type:f.GP.Text,text:e,style:b(n)})},remove(e,{type:n}){v(r,{type:n!==l.JU.Type.Main||x(e)&&t?f.GP.Text:f.GP.Delete,text:e})}},n),r}))))),c.chain((0,a.ls)(c.fromPredicate((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new P("Incomplete multi-remove",e))),c.map((e=>({type:r.Type.RemoveOr,removes:e}))))))}function S(e){return(0,s.pipe)(g.tryCatchError((()=>(0,s.pipe)(e,d.UI((t=>{const n=[];return y({insertString(e,{type:t}){v(n,{type:l.JU.isOptionalType(t)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){throw new P("Insert transform contains gap insert",e)},retain(e,{type:t,attributes:r}){(!l.JU.isOptionalType(t)||n.length>0)&&v(n,{type:f.GP.Text,text:e,style:b(r)})},remove(t,{type:n}){if(n===l.JU.Type.Main)throw new P("Insert transform contains main delete",e)}},t),n}))))),c.chain((0,a.ls)(d.nI,c.fromOption((()=>new P("Incomplete insert",e))),c.map((e=>({type:r.Type.Insert,inserts:e}))))))}function w(e){const{substitutions:t,longestSubstitution:n,inserts:a}=e.reduce(((e,[t,n])=>{const r=t.map((e=>e.text)).join("");return e.substitutions.push(r),e.inserts.push(n),r.length>e.longestSubstitution.length&&(e.longestSubstitution=r),e}),{substitutions:[],inserts:[],longestSubstitution:""}),o=(0,s.pipe)(t,d.UI((e=>n.split(e).join(""))));return(0,s.pipe)(i.yL(a,o,((e,t)=>(t&&e.push({type:f.GP.Text,text:t}),e))),d.nI,c.fromOption((()=>new Error("Substitution processing error"))),c.map((e=>({type:r.Type.Substitution,remove:[{type:f.GP.Delete,text:n}],inserts:e}))))}function E(e,t){return(0,s.pipe)(A(e),c.chain((n=>(0,s.pipe)(g.tryCatchError((()=>{(0,m.kG)(t.length>0,"Drilldown transform - empty drilldown tree");const e=(0,s.pipe)(t,d.UI((function e([t,r]){return(0,m.kG)(void 0!==n.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:n.inserts[t],subLabels:r.map(e)}})));return{inserts:e,remove:n.remove,type:r.Type.Drilldown}})),c.mapLeft(P.fromError(e))))))}function A(e){return(0,s.pipe)(g.tryCatchError((()=>(0,s.pipe)(e,d.UI((t=>{const n=[[],[]];return y({insertString(e){v(n[1],{type:f.GP.Insert,text:"\n"===e?" ":e})},insertGap(){throw new P("Substitution transform contains gap insert",e)},remove(e){v(n[0],{type:f.GP.Delete,text:e})},retain(e,{type:t,attributes:r}){if(!l.JU.isOptionalType(t)||0!==n[0].length){const t={type:f.GP.Text,text:e,style:b(r)};n[0].push(t),n[1].push(t)}}},t),(0,m.kG)(n[0].length>0,"Substituted part is empty"),(0,m.kG)(n[1].length>0,"Inserts are empty"),n}))))),c.chain(w),c.mapLeft(P.fromError(e)))}function k(e){if(!("list"in e))return u.none;switch(e.list){case"bullet":case"dashed":case"ordered":return u.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return u.none}}function T(e){return(0,s.pipe)(e,c.fromPredicate((e=>1===e.length),(()=>new P("Expected citation transform to have 1 alternative",e))),c.map(d.YM),c.chain(c.fromPredicate((e=>e.isCitation),(()=>new P("Expected citation to have isCitation set to true",e)))),c.chain(F),c.map((e=>({ops:e,type:r.Type.Citation}))))}function M(e){return(0,s.pipe)(e,c.fromPredicate((e=>1===e.length),(()=>new P("Expected full-sentence transform to have 1 alternative",e))),c.map((0,a.ls)(d.YM,(t=>{let n={blockStart:0,ops:[],kind:f._k.PlainText};return y({insertString(e,t){const r=e.split("\n");if(1===r.length)n.ops.push({type:f.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,s.pipe)(t.attributes,k,u.fold((()=>a.Q1),(({kind:e,indent:t})=>()=>{n.ops.splice(n.blockStart,1,{type:f.GP.List,kind:e,indent:t}),n={kind:f._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}})));for(let t=0,i=r.length-1;t<=i;t++){const a=r[t];a&&n.ops.push({type:f.GP.Insert,text:a}),t<i&&(e(),n.blockStart=n.ops.length,n.ops.push({type:f.GP.Insert,text:"\n"}))}}},insertGap(){throw new P("Full sentence transform contains gap insert",e)},retain(e,t){n.ops.push({type:f.GP.Text,text:e,shouldBeCollapsed:N(t.type,e)})},remove(e,t){n.ops.push({type:f.GP.Delete,text:e,shouldBeCollapsed:N(t.type,e)})}},t),n}))),c.chain((0,a.ls)(u.fromPredicate((e=>e.ops.length>0)),c.fromOption((()=>new P("Got empty full sentence transform",e))),c.map((({ops:e,kind:t})=>({type:r.Type.FullSentence,ops:e,kind:t}))))))}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.ShortenIt=7]="ShortenIt",e[e.ToneAI=8]="ToneAI",e[e.Citation=9]="Citation"}(t=e.Type||(e.Type={})),function(e){e.parse=function(t,n){const r=t[0];if(r.isFullSentence)return e.FullSentence;if(u.isSome(n.drilldown))return e.Drilldown;if(r.isCitation)return e.Citation;if(r.isShortenIt)return e.ShortenIt;if(r.isToneAI)return e.ToneAI;switch(r.type){case l.r3.Type.Insert:return e.Insert;case l.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case l.r3.Type.Substitution:return r.ops.find(l.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,m.vE)(r.type)}}}(t=e.Type||(e.Type={})),e.create=function(t){return n=>{const r=e.Type.parse(n,t);switch(r){case e.Type.Remove:return C(n,t.ignoreWhitespaceRemoves);case e.Type.RemoveOr:return I(n,t.ignoreWhitespaceRemoves);case e.Type.Insert:return S(n);case e.Type.Substitution:return A(n);case e.Type.Drilldown:return E(n,(0,s.pipe)(t.drilldown,u.getOrElse((()=>h.H5.empty))));case e.Type.FullSentence:return M(n);case e.Type.OneGap:return L(n);case e.Type.ShortenIt:return O(n);case e.Type.ToneAI:return _(n);case e.Type.Citation:return T(n);default:return(0,m.vE)(r)}}}}(r||(r={}));const N=(e,t)=>e===l.JU.Type.Optional&&t.length>3;function L(e){return(0,s.pipe)(g.tryCatchError((()=>((0,m.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,s.pipe)(e,d.YM,(e=>{const t=[],n=[];let r=!1;return y({insertString(e,{type:i}){v(r?n:t,{type:l.JU.isOptionalType(i)?f.GP.Text:f.GP.Insert,text:e})},insertGap(){(0,m.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain(e,{type:i}){const a=r?n:t;(!l.JU.isOptionalType(i)||a.length>0)&&v(a,{type:f.GP.Text,text:e})},remove:a.Q1},e),(0,m.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,m.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))))),c.bimap(P.fromError(e),(({left:e,right:t})=>({type:r.Type.OneGap,left:e,right:t}))))}function O(e){return(0,s.pipe)(e,c.fromPredicate((e=>1===e.length),(()=>new P("Expected shorten-it transform to have 1 alternative",e))),c.chain(d.fw(c.either)(D)),c.map(d.YM),c.map((e=>({type:r.Type.ShortenIt,ops:e}))))}function _(e){return(0,s.pipe)(g.tryCatchError((()=>(0,s.pipe)(e,d.UI((t=>{const n=[];return y({insertString(e){v(n,{type:f.GP.Insert,text:e})},insertGap(){throw new P("ToneAI transform should not include gap insert",e)},retain(e){v(n,{type:f.GP.Text,text:e})},remove(e){v(n,{type:f.GP.Delete,text:e})}},t),n}))))),c.chain((0,a.ls)(d.nI,c.fromOption((()=>new P("Incomplete ToneAI transform",e))),c.map((e=>({type:r.Type.ToneAI,transformParts:e}))))))}function D(e){const t=[];return y({insertString(e,{group:n}){t.push({type:f.GP.Insert,text:e,group:n})},insertGap(){throw new P("ShortenIt transform contains gap insert",[e])},retain(e,{group:n}){t.push({type:f.GP.Text,text:e,group:n})},remove(e,{group:n}){t.push({type:f.GP.Delete,text:e,shouldBeCollapsed:!0,group:n})}},e),(0,s.pipe)(t,c.fromPredicate((e=>e.length>0),(()=>new P("Got empty ShortenIt transform",[e]))))}function F(e){const t=[];return y({insertString(e){t.push({type:f.GP.Insert,text:e})},insertGap(){throw new P("Citation transform contains gap insert",[e])},retain(e,{attributes:n}){t.push({type:f.GP.Text,text:e,style:b(n)})},remove(e){t.push({type:f.GP.Delete,text:e})}},e),(0,s.pipe)(t,c.fromPredicate((e=>e.length>0),(()=>new P("Got empty Citation transform",[e]))))}class P extends m.sH{constructor(e,t){super(e),this.alternatives=t}static fromError(e){return t=>{const n=new P(t.message,e);return n.stack=t.stack,n}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(l.JU.anonymize)))}`}}var R=n(8125),j=n(81531);const U=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,m.kG)((0,R.Dw)(e),"transforms should have at least one element");const[n]=e;return $(n)>-1?f.nV.create(B(n),e.map(z),t,!0):f.zE.create(e,t)}(e.content.map((e=>[{type:f.GP.Insert,text:e}])),t);case"transform":return function(e,t){(0,m.kG)((0,R.Dw)(e),"transforms should have at least one element");const[n]=e;return $(n)>-1?f.nV.create(B(n),e.map(z),t):function(e){return 2===e.length&&W(e)}(e)?f.fi.create(e[0],e[1],t):W(e)?f.zE.create(e,t):f.n6.create(e,t)}(e.content.map(Y),t);default:return(0,m.vE)(e.kind)}};function $(e){return e.findIndex((e=>"arrow"===e.type))}function B(e){return e.slice(0,$(e))}function z(e){return e.slice($(e)+1)}function G(e){return e.every((e=>"delete"!==e.type))}function W(e){return e.every(G)}function H(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const V=[H("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Delete,text:e[2]}))),H("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:f.GP.Insert,text:e[2]}))),H("()",(e=>({type:f.GP.Arrow}))),H("([^<>]+)",(e=>({type:f.GP.Text,text:e[1]})))];function Y(e){function t(e){for(const t of V){const n=e.match(t.re);if(null!==n)return[t.createResult(n),n[n.length-1]]}}function n(t){let n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>",""].map((e=>t.indexOf(e)));if(n.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(n=n.filter((e=>e>0)),(0,R.Dw)(n)){const e=Math.min(...n);return[{type:f.GP.Text,text:t.substring(0,e)},t.substring(e)]}return[{type:f.GP.Text,text:t},""]}const r=[];let i,a=e,s=!1,o=0;for(;(0,R.Dw)(a);){const e=t(a);void 0===e&&(s=!0);const[l,c]=e||n(a);i&&i.type===f.GP.Text&&l.type===f.GP.Text?i.text+=l.text:(i&&i.type===f.GP.Delete&&l.type===f.GP.Insert&&(r.push({type:f.GP.Arrow}),o++),r.push(l)),l.type===f.GP.Arrow&&o++,i=r[r.length-1],a=c}return(s||!(0,R.Dw)(r)||o>1)&&j.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:o}),r}const Z={ignoreWhitespaceRemoves:!0},Q=(0,a.ls)((function(e,t=Z){return n=>(0,s.pipe)(n.alternatives,q(e,{isFullSentence:p.eT.isFullSentence(n.cardType),isShortenIt:p.eT.isShortenIt(n.cardType),isToneAI:p.eT.isToneAI(n.cardType),isCitation:p.eT.isCitation(n.cardType)}),c.chain(r.create(Object.assign(Object.assign({},t),{drilldown:n.drilldown}))))}),(e=>t=>(0,s.pipe)(t.content,c.fold((e=>c.right(U(e,t.todo))),(0,a.ls)(e,c.bimap((e=>({kind:"default",error:e})),(e=>function(e,t){switch(e.type){case r.Type.Drilldown:return f.ey.create(e.remove,e.inserts,t);case r.Type.Substitution:return f.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?f.fi.create(e.inserts[0],e.inserts[1],t):f.zE.create(e.inserts,t);case r.Type.Remove:return f.n6.create([e.remove],t);case r.Type.RemoveOr:return f.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case f._k.WithFormatting:return f.i3.createWithFormatting(e.ops,t);case f._k.PlainText:return f.i3.createPlainText(e.ops,t);default:return(0,m.vE)(e)}}(e,t);case r.Type.Citation:return function(e,t){return{type:f.b$.Type.Citation,tooltipText:t,labels:e.ops}}(e,t);case r.Type.OneGap:return f.G7.create(e,t);case r.Type.ShortenIt:return function(e,t){return{type:f.b$.Type.ShortenIt,tooltipText:t,labels:e.ops}}(e,t);case r.Type.ToneAI:return function(e,t){return{type:f.b$.Type.ToneAI,tooltipText:t,labels:e.transformParts}}(e,t);default:return(0,m.vE)(e)}}(e,t.todo))))))));function q(e,t){const n=(0,a.ls)(e,(e=>e.delta.reduce(((e,t)=>o.s.isInsertString(t)?e+t.insert:e),"")));return(0,a.ls)(function(e,{isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:a}){return o=>(0,s.pipe)(o,i.DZ((i=>(0,s.pipe)(i.type,u.map((s=>{if(l.r3.hasOptionalContext(i.ops)){const[o,...c]=i.ops,u=l.JU.length(o);return{text:e(u,i.lengthAffected-u),ops:c,type:s,isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:a}}return{text:e(0,i.lengthAffected),ops:i.ops,type:s,isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:a}}))))),d.nI)}(n,t),c.fromOption((()=>new Error("Alternative array is empty"))))}},98637:(e,t,n)=>{n.d(t,{G7:()=>m,GP:()=>r,_k:()=>d,b$:()=>i,ey:()=>c,fi:()=>l,fz:()=>o,i3:()=>p,n6:()=>s,nV:()=>u,zE:()=>a});var r,i,a,s,o,l,c,u,d,p,m,h=n(57050),g=n(73975),f=n(8125);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(r||(r={})),function(e){let t,n;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt",e[e.ToneAI=9]="ToneAI",e[e.Citation=10]="Citation"}(t=e.Type||(e.Type={})),e.eq=g.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels))),function(e){e.eq=g.Uz((e=>JSON.stringify(e.labels)))(g.yv)}(n=e.ShortenIt||(e.ShortenIt={})),e.isFullSentence=t=>t.type===e.Type.FullSentence,e.isOneGap=t=>t.type===e.Type.OneGap,e.isShortenIt=t=>t.type===e.Type.ShortenIt,e.isToneAI=t=>t.type===e.Type.ToneAI,e.isRegular=t=>(0,h.ff)((0,f.Kg)(e.isFullSentence,e.isOneGap,e.isShortenIt,e.isToneAI))(t)}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(s||(s={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(o||(o={})),function(e){e.create=(e,t,n)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:n})}(l||(l={})),function(e){e.create=function(e,t,n){return{type:i.Type.Drilldown,original:e,labels:t,tooltipText:n}},e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const n=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:n.subLabels,original:n.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(f.Sm,0)>30}e.create=function(e,n,r,a){return{type:i.Type.Arrow,original:e,labels:n,tooltipText:r,onlyReplacements:!0===a||t(e,n[0])}}}(u||(u={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(d||(d={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:d.WithFormatting}}}(p||(p={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>Object.assign(Object.assign({},e),{type:r.Text}))),right:e.right.map((e=>Object.assign(Object.assign({},e),{type:r.Text})))},tooltipText:t}}}(m||(m={}))},26027:(e,t,n)=>{n.d(t,{X:()=>w});var r=n(35214),i=n(57050),a=n(40327),s=n(5114),o=n(22232),l=n(95195),c=n(45701),u=n(73975),d=n(8125),p=n(81531),m=n(74660),h=n(77176),g=n(28043),f=n(19751),y=n(85985),x=n(36156),v=n(98637),b=n(17594),C=n(55567),I=n(77610),S=n(4890);class w{constructor(e,t,n,r,i,o,l,c,u,d,p,m,h,g,f,y){this.id=e,this.alerts=t,this.activeAlertIndex=n,this.activeHighlightIndex=r,this.positionState=i,this.visualState=o,this.meta=l,this.lensId=c,this.renderOptions=u,this.muteCategory=d,this.order=p,this.initialAlertId=m,this.removedAlertsIds=h,this.cachedTransform=g,this.userInput=f,this.synfonySelection=y,this.kind=w.Kind,this.activeAlert=I.i.getActiveAlert(this),this.transform=(0,a.pipe)(this.cachedTransform,s.map((e=>e.labels)))}get activeAlertRemoved(){return I.i.activeAlertRemoved(this)}get scheduledToDispose(){return I.i.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return w.hashCode(this)}equals(e){return w.eq.equals(this,e)}toJSON(){return Object.assign(Object.assign({},this),{renderOptions:S.j.toJSON(this.renderOptions)})}}!function(e){let t,n;function S(e){return e.activeAlert.alertType===m.bZ.Type.Synfony}function w(e){return e.activeAlert.type===b.$.Type.default}e.Kind="AlertCard",e.isPriority=e=>b.$.isPriority(e.activeAlert),e.updateAlerts=(t,n,r,i)=>a=>new e(a.id,t,r,i,a.positionState,a.visualState,a.meta,a.lensId,a.renderOptions,a.muteCategory,a.order,a.initialAlertId,n,a.cachedTransform,a.userInput,a.synfonySelection),e.updateUserInput=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,t,n.synfonySelection),e.changeVisualState=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,t,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changePosition=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,t,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeMeta=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,t,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,n.synfonySelection),e.changeTransform=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,t,n.userInput,n.synfonySelection),e.changeSynfonySelection=t=>n=>new e(n.id,n.alerts,n.activeAlertIndex,n.activeHighlightIndex,n.positionState,n.visualState,n.meta,n.lensId,n.renderOptions,n.muteCategory,n.order,n.initialAlertId,n.removedAlertsIds,n.cachedTransform,n.userInput,t),e.canHydrate=e=>!(e.meta.checking!==C.n.CheckingState.Idle||I.i.activeAlertRemoved(e)),e.getId=function(e){return e.id},function(t){t.getRemoveAlerts=(e,t)=>(n,r)=>o=>{const l=new Set(n.map((e=>e.id)));return I.i.hasAnyOfAlerts(l)(o)?e.remove(o,[o.activeAlert],(0,a.pipe)(r,s.map((e=>t.compare(o,e)>0)),s.getOrElse(i.W8))):o},t.getChangePosition=function(e){return{changePosition:t=>n=>e.changePosition(n,t)}},t.getAnimatable=function(e){return{completeTransition:t=>n=>e.completeTransition(n,t),transitionTo:t=>n=>e.transitionTo(n,t),changeVisualState:t=>n=>e.changeVisualState(n,t)}},t.getRemove=function(e){return{remove:(t,n)=>r=>t(r)?e.remove(r,[r.activeAlert],n(r)):r}},t.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>n=>e.updateWith(n,t)}},t.getSelect=function(e){return{select:(t,n)=>r=>e.selectFirstAlert(r,t,n),selectByAlert:(t,n,r)=>i=>e.select(i,n,t,r),unselect:(t,n)=>r=>e.unselect(r,t,n)}},t.getCloneable=function(){return{clone:t=>new e(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(n=e.Type||(e.Type={})),(0,o.L0)(null),e.isSynfonyView=S,e.isDefaultView=w,e.match=function(e){return t=>{if(function(e){return e.activeAlert.type===b.$.Type.super}(t))return l.right(e.super(t));if(function(e){return e.activeAlert.type===b.$.Type.takeaway}(t))return l.right(e.takeaway(t));if(S(t))return l.right(e.synfony(t));if(function(e){return e.activeAlert.type===b.$.Type.shortenIt}(t))return l.right(e.shortenIt(t));if(function(e){return e.activeAlert.type===b.$.Type.toneAI}(t))return l.right(e.toneAI(t));if(function(e){return e.activeAlert.type===b.$.Type.ethicalAI}(t))return l.right(e.ethicalAI(t));if(function(e){return e.activeAlert.type===b.$.Type.suggestedSnippet}(t))return l.right(e.suggestedSnippet(t));if(function(e){return e.activeAlert.type===b.$.Type.knowledgeHubSuggestedTerm}(t))return l.right(e.knowledgeHubSuggestedTerm(t));if(w(t))return l.right(e.default(t));const n={lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType};return l.left(new Error(`Cannot render unknown card type with alert: [${JSON.stringify(n,null,2)}]`))}},e.eq=I.i.eq,e.hashCode=e=>(0,x.NO)({itemHashCode:I.i.hashCode(e),synfonySelection:(0,a.pipe)(e.synfonySelection,s.getOrElse((()=>[])),(e=>e.join(",")))});const E=c.getMonoid();let A;function k(e){return e.activeAlert.gbPrompt}e.ord=(0,r.fold)(E)([(0,a.pipe)(c.ordNumber,c.contramap((e=>e.order))),(0,a.pipe)(c.ordString,c.contramap((e=>e.initialAlertId)))]),e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,a.pipe)(e.from,s.exists((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=u.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(A=e.Transition||(e.Transition={})),e.hasTransform=function(e){return s.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return m.eT.isFullSentence(e.activeAlert.extraProperties.cardType)&&(0,a.pipe)(e.transform,s.exists(v.b$.isFullSentence))},e.hasOneGapTransform=function(e){return(0,a.pipe)(e.transform,s.exists(v.b$.isOneGap))},e.hasSynfonyTransform=function(e){return m.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.hasCitationTransform=function(e){return m.eT.isCitation(e.activeAlert.extraProperties.cardType)},e.isCitationDetectionCard=function(e){return m.eT.isCitationDetection(e.activeAlert.extraProperties.cardType)},e.isTakeaway=function(e){return b.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return m.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.isEligibleForAcceptSurvey=function(e){return e.activeAlert.acceptSurvey},e.isEligibleForGbPrompt=k,e.hasGbPrompt=function(e){return(0,a.pipe)(k(e),s.exists(Boolean))},e.hasBackgroundGbPrompt=function(e){return(0,a.pipe)(k(e),s.exists((({promptType:e})=>"background"===e)))},e.hasRedirectGbPrompt=function(e){return(0,a.pipe)(k(e),s.exists((({promptType:e})=>"redirect"===e)))},e.miniTitle=function(e,t){return b.$.isTakeaway(e.activeAlert)&&s.isNone(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle},e.useCardStates=e=>({isChecking:e.pipe(h.U((e=>e.meta.checking===C.n.CheckingState.Checking)),g.x(),f.shareReplay({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(h.U((e=>e.meta.checking===C.n.CheckingState.Full)),g.x(),f.shareReplay({bufferSize:1,refCount:!0})),transform:e.pipe(h.U((({transform:e})=>e)),y.h(s.isSome),f.skipBy(s.getEq(v.b$.eq)))}),e.foldCard=l.getOrElse((e=>(T("CardComponent").error("Got an unexpected card type",e),null)));const T=(0,d.HP)(p.C8.Logging.getLogger)}(w||(w={}))},55567:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(49435),a=n(36156);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class n{constructor(e,t,n,r,i){this.percentile=e,this.explanation=t,this.checking=n,this.ranges=r,this.showMuteQuotedAdvice=i}equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,a.NO)({percentile:i.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}}e.Impl=n,e.empty=(e="",r=i.g.MIN,a=t.Idle,s=[])=>new n(r,e,a,s,!1),e.create=({explanation:e="",percentile:r=i.g.MIN,checking:a=t.Idle,ranges:s=[]})=>new n(r,e,a,s,!1)}(r||(r={}))},91549:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(57050),a=n(40327),s=n(45701),o=n(5114),l=n(22232),c=n(73975),u=n(74660),d=n(17594),p=n(26027),m=n(55567),h=n(20594),g=n(77610),f=n(48521);!function(e){let t;e.Kind="AlertsBundle",e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title},e.ord=(0,a.pipe)(s.ordNumber,s.contramap((0,i.ls)((e=>e.activeAlert.bundleInfo),o.fold((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank))))),e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,l.vE)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=e=>(0,a.pipe)(e.bundleInfo,o.fold((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>g.i.eq.equals(e,t)&&o.getEq(c.yv).equals(e.lensId,t.lensId)},function(t){const r=t=>(n,r)=>Object.assign({id:n,kind:e.Kind,bundleInfo:t,activeAlert:g.i.getAlertByIndex(r.activeAlertIndex,r.alerts),transform:(0,a.pipe)(r.cachedTransform,o.map((e=>e.labels))),equals(t){return e.eq.equals(this,t)},hashCode(){return g.i.hashCode(this)}},r);t.create=function(t,i,s,c){const p=x.getAnimatable(t).changeVisualState,m=e=>h.Mq.getCreate(r(e),i,p,c,s),y=n(s);return{create:e=>(t,n,r,i,a,l,c)=>m(a)(t,n,r,i,h.Mq.getApplicableCardMeta(n[r],l,s),e,o.some(l),c),createAdded:e=>(t,n,r,i)=>{const a=f.o.VisualState.initial({type:"added",clockwise:!0},!0);return m(n)(t,r,0,0,h.Mq.getApplicableCardMeta(r[0],a,s),e,o.some(a),i)},createFocused:e=>(t,n,r,i,a)=>{const l=f.o.VisualState.initial({type:"focused",clockwise:!0},!0);return m(n)(t,r,i,0,h.Mq.getApplicableCardMeta(r[i],l,s),e,o.some(l),a)},createRendered:e=>(t,n,r,i)=>{const a=f.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return m(n)(t,r,0,0,h.Mq.getApplicableCardMeta(r[0],a,s),e,o.some(a),i)},updateWith:(n,r)=>i=>{(0,l.kG)(n.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const s=new Set(n.map((e=>e.id))),o=new Set(i.removedAlertsIds);s.forEach((e=>{o.delete(e)}));const c=i.alerts.filter((e=>!s.has(e.id))).concat(n.map(d.$.fromModel)).sort(r.compare);return(0,a.pipe)(i,y(c,o,g.i.getIndexByAlert(i.activeAlert.id,c)),e.getCardHydrator(t))}}}}(t=e.ItemFactory||(e.ItemFactory={}));const n=e=>(t,n,r)=>i=>{const a=g.i.getAlertByIndex(r,t),s=d.$.isApplicableAlert(a)?h.Mq.getApplicableCardMeta(a,i.visualState,e):m.n.empty(void 0);return Object.assign(Object.assign({},i),{alerts:t,activeAlert:a,meta:s,removedAlertsIds:n,activeAlertIndex:r})};e.changePosition=e=>t=>Object.assign(Object.assign({},t),{positionState:e}),e.updateVisualState=e=>t=>Object.assign(Object.assign({},t),{visualState:e}),e.getCardHydrator=e=>h.Mq.getCardHydrator((e=>e.cachedTransform),p.X.canHydrate,r,e),e.changeUserInput=e=>t=>Object.assign(Object.assign({},t),{userInput:e});const r=e=>t=>Object.assign(Object.assign({},t),{cachedTransform:e,transform:(0,a.pipe)(e,o.map((e=>e.labels)))}),y=e=>t=>Object.assign(Object.assign({},t),{meta:e});let x;e.unselect=h.Mq.getUnselectItem(e.updateVisualState,e.changePosition),e.getSelectByAlert=(t,r,i)=>h.Mq.getSelectByAlert(n(r),e.changeUserInput,e.updateVisualState,e.changePosition,y,i,t,r),e.getSelect=(t,n,r)=>h.Mq.getSelectFirstAlert(e.getSelectByAlert(t,n,r)),function(t){function r(t){const n=h.Mq.getChangeVisualState(e.updateVisualState,e.getCardHydrator(t));return{completeTransition:e=>t=>n(f.o.VisualState.complete(t.visualState,e))(t),transitionTo:h.Mq.getTransitionTo(n,e.changePosition),changeVisualState:n}}t.getAnimatable=r,t.getRemove=(e,t)=>h.Mq.getRemove(n(e),r(t).transitionTo),t.getUpdatableWithAlertsCapability=(t,n)=>a=>(0,i.ls)(t.updateWith(a,u.h$.ord),(t=>e.isExtendableWithAlerts(t)?t:r(n).transitionTo({type:"added",clockwise:!0})(t))),t.getRemoveAlertsCapability=(n,r,s,l)=>(c,u)=>{const d=e.getSelectByAlert(n,r,e.getCardHydrator(s)),p=h.Mq.getSelectNextAlert(h.Mq.getCardSelections(n),d);return e=>{const n=new Set(c.map((e=>e.id)));if(!g.i.hasAnyOfAlerts(n)(e))return e;const d=t.getRemove(r,s)(c,(0,a.pipe)(u,o.map((t=>l.compare(e,t)>0)),o.getOrElse(i.W8)))(e);return(0,a.pipe)(u,o.exists((t=>t.id===e.id)))?p(l)(d):d}}}(x=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},83167:(e,t,n)=>{n.d(t,{Dv:()=>_,Py:()=>$,VC:()=>D,sR:()=>B,u0:()=>F,vM:()=>U});var r=n(35214),i=n(57050),a=n(40327),s=n(38983),o=n(5114),l=n(22232),c=n(8125),u=n(83078),d=n(95195),p=n(55415),m=n(89943),h=n(81531),g=n(46680),f=n(74660),y=n(66896),x=n(16118),v=n(50628),b=n(77176),C=n(93508),I=n(85985),S=n(66310),w=n(19751),E=n(9922),A=n(24209),k=n(2834),T=n(98403),M=n(41398),N=n(35416),L=n(6100),O=n(73841);const _=(e,t,n,r=(()=>o.none))=>i=>{if(!e(i))return t(i);const{currentLens:s}=i;return s.kind===N._L.abstract?o.none:(0,a.pipe)(o.fromPredicate(N.nL.hasItems)(i),o.chain((e=>n.findNextAlert(e.currentLens))),o.alt((()=>r(i))),o.map(O.l.toLensAlert))},D=(e,t,n,r,s=L.v.WithSuccess.State.isInGlobalSuccess(r),l=(()=>!0))=>c=>{const{currentLens:u}=c;return u.kind===N._L.abstract?o.none:u.kind===N._L.persistent?(0,a.pipe)(o.fromPredicate(N.nL.hasItems)(c),o.chain((e=>r.getActiveAlert(e.currentLens))),o.fold((()=>N.nL.hasItems(c)?r.findNextAlert(c.currentLens):o.none),(t=>e.findNextAlertInTextByLens(t,L.v.WithPriority.nonPriorityAlertsVisible(c),(0,i.MZ)(c.currentLens)))),o.alt((()=>l()&&(s(c)||y.R.isOutcomeId(c.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():o.none)),o.map(O.l.toLensAlert)):(0,a.pipe)((i=>{const s=o.fromPredicate(N.nL.hasItems)(i);return(0,a.pipe)(s,o.chain((e=>r.findNextAlert(e.currentLens))),o.map(O.l.toLensAlert),o.alt((()=>(0,a.pipe)(s,o.chain((e=>r.getActiveAlert(e.currentLens))),o.fold((()=>t(f.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,f.bZ.isApplicableAlert))),o.map((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:n.get()})))))))})(c),o.alt((()=>(0,a.pipe)(e.findPremiumAlert(),o.map(O.l.toLensAlert)))))};function F(e,t){return(n,r)=>t.findClosestAlertHighlight(e(r),n)}const P=e=>e.pipe(x.G(),v.P((([e,t])=>"idle"!==e&&"idle"===t)),b.U((()=>{}))),R=e=>e.pipe(C.O("idle"),x.G(),v.P((([e,t])=>"idle"===t)),I.h((([e])=>"full"===e)),b.U((()=>{}))),j=(e,t)=>{const n=P(e);return t.bigPaste.pipe(S.w((()=>n)),b.U((()=>{})),w.shareReplay({bufferSize:1,refCount:!0}))};class U{constructor(e,t){this._subs=new E.w.Keeper,this.firstOpeningOfDocumentWithAlerts=s.h.create(!1);const n=P(e),r=(e=>(0,a.pipe)(e,I.h((e=>N.nL.hasCards(e)&&o.isSome(N.In.getActiveItem(e.currentLens)))),b.U((()=>{}))))(t);this._subs.push((0,a.pipe)(t,v.P((e=>N.nL.hasCards(e))),S.w((()=>(0,a.pipe)(A.T(r,n),b.U(i.jv),C.O(!0)))),k.b(T.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}dispose(){this._subs.dispose()}}var $,B;!function(e){const t=(0,c.HP)(h.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,n,r,i,s)=>{const l=P(n),c=R(n),u=j(n,i);return(0,a.pipe)(A.T(l,c,u),M.M(e,s,r),I.h((([e,t,n,r])=>r&&!n&&N.nL.hasCards(t)&&o.isNone(N.In.getActiveItem(t.currentLens)))),b.U((()=>N.nL.Effect.FocusBehavior.focusFirst)),k.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const n=(0,a.pipe)(e,b.U((e=>t=>n=>{switch(t.kind){case N.nL.Effect.FocusBehaviorType.noFocus:return n;case N.nL.Effect.FocusBehaviorType.unFocus:return N.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case N.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(e.findFirstAlert(n.currentLens),o.fold((()=>n),(t=>N.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case N.nL.Effect.FocusBehaviorType.focusNext:return(0,a.pipe)(e.findNextAlert(n.currentLens),o.fold((()=>n),(t=>N.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case N.nL.Effect.FocusBehaviorType.focusAlert:return N.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,l.vE)(t)}})(t)));return{id:"autoFocusEffect",when:y.R.isWithAlertsId,what:N.nL.Effect.ItemsApplicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),e.whenShouldVerifyCurrentLens=(e,n)=>r=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!N.nL.hasItems(r)||!n.shouldVerify(r.currentLens))&&((0,a.pipe)(N.nL.getActiveAlert(e)(r),o.filter(f.bZ.isInDuplicatedState),o.fold((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},e.whenNoActiveCard=e=>e.currentLens.items.size>0&&o.isNone(N.In.getActiveItem(e.currentLens)),e.behaviorToEffect=e=>n=>r=>(0,a.pipe)(n(r)?e(r):o.none,u.tap((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`)))),e.getDefaultBehavior=(t,n)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(t,n),e.behaviorToEffect((()=>o.some(N.nL.Effect.FocusBehavior.focusNext))))],(0,r.fold)((0,r.getFunctionMonoid)(o.getFirstMonoid())())),e.getAlwaysFocusBehavior=(t,n)=>(0,a.pipe)([(0,a.pipe)((0,c.Kg)(e.whenNoActiveCard,e.whenShouldVerifyCurrentLens(t,n)),e.behaviorToEffect((()=>o.some(N.nL.Effect.FocusBehavior.focusNext))))],(0,r.fold)((0,r.getFunctionMonoid)(o.getFirstMonoid())())),e.getFocusFromCacheBehavior=(t,n,s,l,u,d)=>(0,a.pipe)([(0,a.pipe)(e.whenShouldVerifyCurrentLens(l,u),e.behaviorToEffect((()=>o.some(N.nL.Effect.FocusBehavior.focusNext)))),(0,a.pipe)((0,c.W9)((()=>n.get()),(0,c.W9)((0,c.W9)((0,c.W9)(e.whenFirstOpeningDocumentWithAlerts(s),(()=>t)),e.whenNoActiveCard),(0,a.pipe)(d,o.map((e=>(0,i.ff)(e.willShowBulkAccept))),o.getOrElse((()=>i.W8))))),e.behaviorToEffect((()=>o.some(N.nL.Effect.FocusBehavior.focusFirst))))],(0,r.fold)((0,r.getFunctionMonoid)(o.getFirstMonoid())())),e.getFirstApiAlignmentOverride=function(){const e=s.h.create(!0);return(t,n)=>{let r=n;return e.get()&&n===f.l$.api&&(r=f.l$.text),e.set(!1),r}},e.getShouldAutoFocus=(e,t,n)=>r=>e.get()&&(0,a.pipe)(r,N.nL.getActiveAlert(n),o.chain((({id:e})=>t.getById(e))),o.filter((0,c.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),f.bZ.isDuplicated,f.bZ.isCapiDone)),o.isSome),e.getStateTransformer=(e,n,r,i,s,c,u)=>({state:p,metadata:m})=>{const h=t("AutoFocus.stateTransformer");if(!N.nL.hasCards(p)||!N.nL.hasItems(p))return h.trace("state has no items, returning original state"),d.left({state:p,metadata:m});const g=e(p);if(h.trace("effect: ",{state:p,metadata:m,effect:g}),o.isNone(g))return h.trace("no effect selected, returning original state"),d.left({state:p,metadata:m});if(c(g.value),g.value.kind===N.nL.Effect.FocusBehaviorType.unFocus||g.value.kind===N.nL.Effect.FocusBehaviorType.noFocus)return d.left({state:N.nL.Prism.getLensWithItems().modify(i.unselectItem(),p),metadata:m});const f=s(p);return h.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:f}),(0,a.pipe)(g,o.chain((e=>{switch(e.kind){case N.nL.Effect.FocusBehaviorType.noFocus:case N.nL.Effect.FocusBehaviorType.unFocus:return o.none;case N.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(i.findFirstAlert(p.currentLens),o.map((e=>Object.assign(Object.assign({},e),{lensId:p.currentLens.id}))));case N.nL.Effect.FocusBehaviorType.focusNext:return n(p);case N.nL.Effect.FocusBehaviorType.focusAlert:return o.some(Object.assign(Object.assign({},e.alertHighlight),{lensId:p.currentLens.id}));default:(0,l.vE)(e)}})),o.map((e=>((0,l.kG)(o.isSome(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),o.fold((()=>(h.trace("no alert selected, returning original state"),p.currentLens.kind===N._L.active?d.right(d.right({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}})):d.left({state:p,metadata:m}))),(({alert:e,highlightIndex:t,lensId:n})=>{if(h.trace("selected alert to focus",e),p.currentLens.meta.filter(e)){if(f){const n={alert:e,highlightIndex:t};return(0,a.pipe)(p.currentLens.items.find(i.hasAlert(e.id)),o.fold((()=>(h.trace("shouldAutoFocus: true, no such item in a lens for given alert",e.id),d.left({state:p,metadata:m}))),(()=>(h.trace("shouldAutoFocus: true, selecting alert"),d.left({state:N.nL.Prism.getLensWithItems().modify(i.selectItemByAlert(n),p),metadata:{sourceId:"LSM.updateActiveState"}})))))}return h.trace("shouldAutoFocus: false"),d.left({state:p,metadata:m})}return h.trace("alert is not from current lens, recreating lens view"),d.right(f?d.left({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.alertSource,options:{lensId:n,order:p.switchOrder,toFocus:N.nL.Effect.FocusBehavior.focusFirst}}):d.right({lensId:n,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}}))})))}}($||($={})),function(e){const t=e=>t=>n=>{switch(t.kind){case N.nL.Effect.FocusBehaviorType.noFocus:return n;case N.nL.Effect.FocusBehaviorType.unFocus:return N.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case N.nL.Effect.FocusBehaviorType.focusFirst:return(0,a.pipe)(n.currentLens.items.find((0,i.ff)(e.isScheduledToDispose)),o.map(p.pick("value")),o.fold((0,i.a9)(n),(t=>N.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),n))));case N.nL.Effect.FocusBehaviorType.focusNext:return(0,a.pipe)(n.currentLens.cardIndex,o.chain((t=>(0,a.pipe)(m.lookAroundMap(n.currentLens.items.values(),t,o.fromPredicate((0,i.ff)(e.isScheduledToDispose))),o.map(p.pick("value"))))),o.fold((0,i.a9)(n),(t=>N.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),n))));case N.nL.Effect.FocusBehaviorType.focusAlert:return N.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,l.vE)(t)}},n=(0,c.HP)(h.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,t,r,i)=>{const s=P(t),l=R(t),c=j(t,i);return(0,a.pipe)(A.T(s,l,c),S.w(T.b2.rafScheduler),S.w(T.b2.rafScheduler),M.M(e,r),I.h((([e,t,n])=>n&&N.nL.hasCards(t)&&o.isNone(N.In.getActiveItem(t.currentLens)))),b.U((()=>N.nL.Effect.FocusBehavior.focusFirst)),k.b((e=>n("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,n)=>{const r=(0,a.pipe)(e,b.U(t(n)));return{id:"sduiAutoFocusEffect",when:y.R.isWithAlertsId,what:N.nL.Effect.ItemsApplicator.create(r)}},e.getShouldAutoFocus=(e,t)=>n=>e.get()&&(0,a.pipe)(n,N.nL.getLens,o.chain(o.fromPredicate((e=>e.items.filter((0,i.ff)(t.isScheduledToDispose)).size>0))),o.isSome),e.getStateTransformer=(e,r,i,s,l,c)=>({state:u,metadata:p})=>{const m=n("AutoFocus.stateTransformer",g.i.TRACE);if(!N.nL.hasCards(u)||!N.nL.hasItems(u))return m.trace("state has no items, returning original state"),d.left({state:u,metadata:p});const h=e(u);if(o.isNone(h))return m.trace("no effect selected, returning original state"),d.left({state:u,metadata:p});if(m.trace("effect: ",{state:u,metadata:p,effect:h}),l(h.value),h.value.kind===N.nL.Effect.FocusBehaviorType.unFocus||h.value.kind===N.nL.Effect.FocusBehaviorType.noFocus)return d.left({state:N.nL.Prism.getLensWithItems().modify(i.unselectItem(),u),metadata:p});const f=s(u);return m.trace("shouldAutoFocus",{alertSource:u.alertSource,shouldAutoFocus:f}),(0,a.pipe)(h,o.map((e=>({effect:e,applicator:t(i)}))),o.fold((()=>(m.trace("no effect selected, returning original state"),u.currentLens.kind===N._L.active?d.right(d.right({lensId:c.get(),alertSource:u.alertSource,options:{order:u.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}})):d.left({state:u,metadata:p}))),(({effect:e,applicator:t})=>{m.trace(`effect selected: ${e.kind}`);const n=t(e)(u);return f?(m.trace("shouldAutoFocus: true, selecting an item in the lens"),d.left({state:n,metadata:{sourceId:"LSM.updateActiveState"}})):(m.trace("current lens is empty"),e.kind===N.nL.Effect.FocusBehaviorType.focusNext?(m.trace("no items to select in the current lens, trying to switch"),(0,a.pipe)(u,r,o.fold((()=>(m.trace("next alert not found in other lenses, reset cardIndex"),d.left({state:u.patch({currentLens:Object.assign(Object.assign({},u.currentLens),{cardIndex:o.none})}),metadata:{sourceId:"LSM.updateActiveState"}}))),(({lensId:e})=>(m.trace(`found next alert in lens: ${e}. Switching the lens`),d.right(d.right({lensId:e,alertSource:u.alertSource,options:{order:u.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}}))))))):(m.trace("shouldAutoFocus: false"),d.left({state:u,metadata:p})))})))}}(B||(B={}))},20594:(e,t,n)=>{n.d(t,{IG:()=>r,Ls:()=>w,Mq:()=>k});var r,i=n(57050),a=n(40327),s=n(38983),o=n(87969),l=n(5114),c=n(22232),u=n(83078),d=n(95195),p=n(89943),m=n(81531),h=n(74660),g=n(66896),f=n(49435),y=n(17594),x=n(26027),v=n(55567),b=n(48521),C=n(77610),I=n(16892),S=n(4890);function w(e,t,n,r,i,a=x.X.canHydrate){const s=k.getCardSelections(t),o=k.getCardHydrator((e=>e.cachedTransform),a,x.X.changeTransform,e),u=k.getChangeVisualState(x.X.changeVisualState,o),d=k.getSelectByAlert(x.X.updateAlerts,x.X.updateUserInput,u,x.X.changePosition,x.X.changeMeta,o,t,n),p=k.getUnselectItem(u,x.X.changePosition),m=k.getTransitionTo(u,x.X.changePosition),g=k.getRemove(x.X.updateAlerts,m);const f=k.getCreate(A,i,u,r,n);const C=k.getSelectFirstAlert(d);return Object.assign(Object.assign({shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:f,createFromAlert:e=>t=>f(t.id,[t],0,0,v.n.empty(h.bZ.isApplicableAlert(t)?t.explanation:void 0),e,l.none),createFocused:function(e){const t=b.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(r,i,a)=>f(r,[i],0,a,k.getApplicableCardMeta(i,t,n),e,l.some(t))},createRendered:function(e){const t=b.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(r,i)=>f(r,[i],0,0,k.getApplicableCardMeta(i,t,n),e,l.some(t))},createAdded:function(e){const t=b.o.VisualState.initial({type:"added",clockwise:!0},!0);return(r,i)=>f(r,[i],0,0,k.getApplicableCardMeta(i,t,n),e,l.some(t))}},s),{select:(e,t,n,r)=>d(t,n,r)(e),selectFirstAlert:(e,t,n)=>C(t,n)(e),selectNextAlert:(e,t)=>k.getSelectNextAlert(s,d)(t)(e),unselect:(e,t,n)=>p(t,n)(e),remove:(e,t,n)=>g(t,n)(e),updateWith(e,t){(0,c.kG)(1===t.length,"AlertCard can only handle update with a single alert");const r=t[0];(0,c.kG)(void 0!==e.alerts.find((e=>e.id===r.id)),"can not receive updates for unknown alert",(()=>r.toString()));const i=function(e,t){const r=k.getApplicableCardMeta(t,e.visualState,n);return new x.X(e.id,e.alerts.map((e=>e.id===t.id?y.$.fromModel(t):e)),e.activeAlertIndex,k.getAHI(e,r),e.positionState,e.visualState,r,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,r);switch(r.state.type){case h.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?o(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?m({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case h.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>h.bZ.isCapiDone(e)&&e.allowUpdate&&h.bZ.isRated(i.activeAlert)))?g(t,!0)(i):m({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case h.bZ.State.Type.APPLIED:case h.bZ.State.Type.BEING_APPLIED:return g(t,!0)(i);default:return(0,c.vE)(r.state)}},changePosition:(e,t)=>x.X.changePosition(t)(e),changeVisualState:(e,t)=>u(t)(e),transitionTo:(e,t)=>m(t)(e),completeTransition:(e,t)=>u(b.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new x.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new v.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>x.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>x.X.changeSynfonySelection(t)(e)})}function E(e){return h.bZ.isOneGap(e)&&""!==e.gapValue?l.some(e.gapValue):l.none}!function(e){let t;e.toCardRenderOptions=function(e,n,r){const i=new Set;return(g.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==g.R.SpecialId.Plagiarism)&&i.add(S.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(S.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(S.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(S.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(S.j.Features.showPersistentPremiumCardLabels),e.features.has(t.showPremiumOnboarding)&&i.add(S.j.Features.showPremiumOnboarding),e.features.has(t.a11yContrast)&&i.add(S.j.Features.a11yContrast),e.features.has(t.showYellowFooterForTrialUsers)&&i.add(S.j.Features.showYellowFooterForTrialUsers),e.features.has(t.sduiContainerStyle)&&i.add(S.j.Features.sduiContainerStyle),e.features.has(t.demoDocOnboardingCopyV1)&&i.add(S.j.Features.demoDocOnboardingCopyV1),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:r,cardVisualMode:e.cardVisualMode,isPremiumOnboarding:e.isPremiumOnboarding}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.demoDocOnboardingCopyV1="demoDocOnboardingCopyV1"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:S.j.Density.cozy,shouldAnimateAlertApply:h.bZ.isAccepted,cardVisualMode:s.h.create(S.j.CardVisualMode.RegularLightMode)}}(r||(r={}));const A=(e,t)=>new x.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var k;!function(e){function t(e,t,n){let i;i=h.bZ.getCheckingState(e)===h.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?v.n.CheckingState.Checking:v.n.CheckingState.Full:v.n.CheckingState.Idle;const a=n.features.has(r.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new v.n.Impl(f.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t,e.getRemove=(e,t)=>(n,r=!0)=>i=>{const s=new Set(n.map((e=>e.id))),o=new Set(i.removedAlertsIds);s.has(i.activeAlert.id)&&o.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,n)=>!s.has(t.id)||b.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(n<i.activeAlertIndex||n===i.activeAlertIndex&&n===i.alerts.length-1&&n>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),u=(0,a.pipe)(i,C.i.willBeDisposed(i,s)?e(i.alerts,s,i.activeAlertIndex,i.activeHighlightIndex):e(l,o,c,0));return C.i.willBeDisposed(u,u.removedAlertsIds)?t({type:"removed",clockwise:r})(u):u},e.getTransitionTo=(e,t)=>n=>r=>{const i=b.o.VisualState.to(r.visualState,n);return(0,a.pipe)(r,e(i),(e=>n.type===r.visualState.transition.type||"expanded"!==n.type&&"focused"!==n.type?e:t(I.s.PositionState.invalidateHeight(r.positionState))(e)))};const n=e=>t=>{const n=t.alerts;return l.fromNullable(n.slice(t.activeAlertIndex+1).find(e))};e.getPrevAlert=e=>t=>{const n=t.alerts;return l.fromNullable(n.slice(0,t.activeAlertIndex).reverse().find(e))},e.getAnyRegisteredAlert=e=>t=>{const n=t.alerts;return(0,a.pipe)(n.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),l.fromNullable)},e.getCardSelections=t=>{const r=(e=>t=>e.isRegistered(t.id))(t);return{nextAlert:n(r),prevAlert:e.getPrevAlert(r),anyRegisteredAlert:e.getAnyRegisteredAlert(t)}},e.getSelectByAlert=(n,r,i,s,o,d,p,m)=>({alert:g,highlightIndex:f},y,x)=>b=>{(0,c.kG)(!b.removedAlertsIds.has(g.id),"Cannot select removed alert");const I=p.getById(g.id);(0,c.kG)(l.isSome(I),"Cannot select not registered alert");const S=u.unsafeGet(I),w=b.alerts.filter((e=>!b.removedAlertsIds.has(e.id))),A=E(S),k=C.i.getIndexByAlert(g.id,w),T=e.getSelectItem(i,s)(y,x);return(0,a.pipe)(b,T,n(w,b.removedAlertsIds,k,f),r(A),(e=>{return o((n=e.visualState,h.bZ.isApplicableAlert(S)?t(S,n,m):v.n.empty(void 0)))(e);var n}),d)},e.getSelectItem=(e,t)=>(n,r)=>s=>{const o=(0,a.pipe)(n,l.map((e=>r.compare(s,e)>0)),l.getOrElse(i.W8)),c=(0,a.pipe)(n,l.exists((e=>e.id===s.id))),u=c?s.positionState:I.s.PositionState.invalidateHeight(s.positionState),d=c&&x.X.isCardOpen(s.visualState)?"expanded":"focused",p=(0,a.pipe)(n,l.fold((()=>b.o.VisualState.initial({type:d,clockwise:o})),(e=>b.o.VisualState.to(s.visualState,{type:d,clockwise:o}))));return(0,a.pipe)(s,t(u),e(p))},e.getSelectNextAlert=(e,t)=>n=>r=>C.i.activeAlertRemoved(r)&&!C.i.willBeDisposed(r,r.removedAlertsIds)?(0,a.pipe)(e.nextAlert(r),u.orElse(e.prevAlert(r)),l.map((e=>t({alert:e,highlightIndex:0},l.none,n)(r))),l.getOrElse((()=>r))):r,e.getSelectFirstAlert=e=>(t,n)=>r=>{const i=r.alerts.filter((e=>!r.removedAlertsIds.has(e.id)));(0,c.kG)(i.length>0,"Selectable card must have at least one not removed alert");const a=i[0];return e({alert:a,highlightIndex:0},t,n)(r)},e.getUnselectItem=(e,t)=>(n,r)=>s=>{const o=(0,a.pipe)(n,l.map((e=>r.compare(s,e)>0)),l.getOrElse(i.W8)),c=(0,a.pipe)(n,l.exists((e=>e.id===s.id))),u=c?s.positionState:I.s.PositionState.invalidateHeight(s.positionState);return(0,a.pipe)(s,t(u),C.i.willBeDisposed(s,s.removedAlertsIds)||b.o.isHidden(s)?i.yR:e(b.o.VisualState.to(s.visualState,{type:"rendered",clockwise:o})))},e.getCardHydrator=(e,t,n,r)=>i=>{const s=i.activeAlert.type===y.$.Type.super||i.activeAlert.type===y.$.Type.plagiarism||i.activeAlert.type===y.$.Type.premium||i.activeAlert.type===y.$.Type.takeaway||h.eT.isSimple(i.activeAlert.extraProperties.cardType)?l.none:function(e,t,n){const i=m.C8.Logging.getLogger("CardFactory");return(0,a.pipe)(t,l.filter((t=>!n||(0,a.pipe)(e,l.exists((e=>t.id===e.id&&t.rev===e.revision))))),l.alt((()=>(0,a.pipe)(e,l.chain((e=>(0,a.pipe)(r(e),d.fold((n=>{switch(n.kind){case"default":i.error("Could not hydrate transform",n.error,{alertId:e.id});break;case"mpteError":i.warn("Could not hydrate transform",n.error,{alertId:e.id});break;default:(0,c.vE)(n)}return t}),(t=>l.some({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return n(s)(i)},e.getChangeVisualState=(e,t)=>n=>r=>{const i=e(n)(r);return"focused"===n.transition.type||"expanded"===n.transition.type?t(i):i},e.getCreate=(e,t,n,i,s)=>(o,u,d,p,m,g,f,x=h.h$.ord)=>{const S=C.i.getAlertByIndex(d,u),w=E(S),A=[...u].sort(x.compare),k=A.map(y.$.fromModel),T=k[0];(0,c.kG)(Boolean(T),"The card must contain at least 1 alert");const M=(0,a.pipe)(t,l.chain((e=>e.getAlertMuteCategory(u[0].id)))),N=e(o,{alerts:k,alertModels:A,activeAlertIndex:C.i.getIndexByAlert(S.id,k),activeHighlightIndex:p,positionState:I.s.PositionState.empty,visualState:b.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new v.n.Impl(m.percentile,m.explanation,m.checking,m.ranges,s.features.has(r.Features.enableMuteQuotedAdvice)&&y.$.isInQuotes(T)),lensId:l.some(g),renderOptions:r.toCardRenderOptions(s,g,i(T)),muteCategory:M,order:T.getHighlightRanges()[0].end,initialAlertId:T.id,removedAlertsIds:new Set,cachedTransform:l.none,userInput:w,synfonySelection:l.none});return(0,a.pipe)(f,l.fold((()=>N),(e=>n(e)(N))))},e.getAHI=function(e,t){if((0,c.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const n=e.meta.ranges[e.activeHighlightIndex];return(0,c.kG)(void 0!==n,"AHI not found in rangeIds"),(0,a.pipe)(l.some(t.ranges.findIndex((e=>e.meta.id===n.meta.id))),l.filter((e=>-1!==e)),l.alt((()=>p.findNotLower(t.ranges,n,o.SV.ordEnd))),l.getOrElse((()=>t.ranges.length-1)))}},e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,a.pipe)(Boolean(e.alerts)?e.alerts.map((e=>e.id)):e.alerts),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(k||(k={}))},20291:(e,t,n)=>{n.d(t,{R7:()=>v,XU:()=>b});var r=n(40327),i=n(5114),a=n(66896),s=n(98403),o=n(77176),l=n(66310),c=n(85985),u=n(2834),d=n(24209),p=n(598),m=n(83401),h=n(66268),g=n(48521),f=n(35416),y=n(99116);const x={cardsBeyondViewport:5,cardsAroundActive:100},v=(e,t,n,r,l=x,c=s.b2.rafScheduler)=>{const u=e=>!e.positionState.visible&&g.o.isAnimatable(e)&&e.visualState.incomplete?(r.next({type:h.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e,d=e.pipe(o.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t}))))),p=(0,y.nM)(n)(d,t.viewport,t.scrollTop,t.paddingTop,c).pipe(o.U((({viewport:e,scrollTop:t,paddingTop:n})=>({viewport:e,scrollTop:t,paddingTop:n,completeTransition:u}))),o.U((0,y.GC)({cardsBeyondViewport:l.cardsBeyondViewport,cardsAroundActive:l.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(p)}},b=(e,t,n)=>{const h=(0,r.pipe)(e,o.U(f.nL.mapper((({currentLens:e,alertSource:t})=>i.some({currentLens:e,alertSource:t})))),(0,y.SW)(n),l.w(s.b2.rafScheduler),c.h((e=>0!==e)),u.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(d.T(d.T(h).pipe(p.c(m.C))))}}},71841:(e,t,n)=>{n.d(t,{YA:()=>h,i$:()=>m});var r=n(57050),i=n(40327),a=n(5114),s=n(98403),o=n(55935),l=n(93508),c=n(19751),u=n(35416),d=n(74238),p=n(14990);const m=e=>s.Hl(e.scrollTop.pipe(o.T(1)),100,!0).pipe(l.O(!1),c.shareReplay({bufferSize:1,refCount:!0})),h=(e,t)=>{const n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(u.nL.getLens).get(),a.chain((({items:e,cardsHeight:t})=>(0,i.pipe)(e.getAt(0),a.map((e=>{const i=(0,r.ls)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},35607:(e,t,n)=>{n.d(t,{o:()=>f});var r=n(40327),i=n(38983),a=n(95195),s=n(8125),o=n(81531),l=n(32952),c=n(44586),u=n(61722),d=n(16118),p=n(77176),m=n(93508),h=n(2834),g=n(74238);class f{constructor(e){this._validateOffset=e,this._log=o.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.xQ,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),a.right(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,r.pipe)(this._validateOffset(e,this),a.fold((e=>(t.thrownError(e),s.Q1)),(()=>{const n=2*this.viewport.get().height,r=Math.abs(e)>n?(e>0?1:-1)*n:e,i=e-r,a=u.f.createAnimationObservable(0,r,200).pipe(d.G(),p.U((([e,t])=>t-e)),m.O(i),h.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},74238:(e,t,n)=>{n.d(t,{L:()=>i,r:()=>r});var r,i,a=n(73975),s=n(99930),o=n(64681);!function(e){let t;!function(e){e.ISO=(0,o.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){let t,n,r;!function(e){e.ISO=(0,o.k4)(),e.equals=(0,o.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,o.k4)()}(n=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,o.k4)()}(r=e.CardTop||(e.CardTop={})),e.concatC=e=>t=>e+t;const i=e=>new s.aD(e);e.converters=function(t,n,r){const a=i(e.concatC(r)).get,s=i(e.concatC(-t)).get;return{windowToViewport:i(e.concatC(-n)).get,viewportToWindow:i(e.concatC(n)).get,cardTopToViewport:s,viewportToCardTop:i(e.concatC(t)).get,absTopToViewportTop:e=>s(a(e)),absTopToCardTop:a}}}(i||(i={}))},14990:(e,t,n)=>{n.d(t,{Db:()=>i});var r,i,a,s=n(73975),o=n(74238);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){e.Impl=class{constructor(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=o.L.converters(e,o.r.FromWindowTop.ISO.unwrap(t.top),n)}}}(i||(i={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},99116:(e,t,n)=>{n.d(t,{Bk:()=>S,GC:()=>N,SW:()=>k,Sd:()=>T,nM:()=>M,v_:()=>E});var r=n(17771),i=n(29909),a=n(57050),s=n(40327),o=n(83078),l=n(5114),c=n(73975),u=n(89943),d=n(95983),p=n(77176),m=n(16118),h=n(85985),g=n(28043),f=n(66310),y=n(98403),x=n(2844),v=n(16892),b=n(35416),C=n(6100),I=n(74238);const S=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(b.In.getActiveItem(t),o.forAll((t=>!e.isScheduledToDispose(t)))),w=e=>t=>t.isCardsHeightValid&&(0,s.pipe)(b.In.getActiveItem(t),o.forAll((t=>!e.isScheduledToDispose(t))));function E({cardTop:e,cardHeight:t,viewportHeight:n,padding:r}){const i=I.L.FromViewportTop.ISO.unwrap(e),a=i+t;return t>n?i:i<0?t+r.before<n?i-r.before:i:a>n?t+r.after<n?a-n+r.after:a-n:i<r.before?t+r.after+r.before<n?i-r.before:t+r.after<n?i-r.after:r.before:n-a<r.after&&t+r.after<n?r.after-(n-a):0}const A=(e,t,n,r)=>({from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<n))-r),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<n+t.height))+r)}),k=e=>t=>t.pipe(T(e),p.U(l.map((e=>e.currentLens))),m.G(),h.h((([e,t])=>(0,s.pipe)((0,a.bc)(e,t),(0,a.og)(o.map2(((e,t)=>e.id===t.id&&(0,s.pipe)((0,a.bc)(b.In.getActiveItem(e),e.cardIndex,b.In.getActiveItem(t),t.cardIndex),(0,a.og)(r.g(l.option)),l.map((([e,t,n,r])=>e.id===n.id&&t!==r)))))),l.getOrElse((()=>!1))))),p.U((0,a.ls)(i.Pd(l.chain(b.In.getActiveItem),l.chain(b.In.getActiveItem)),(0,a.og)(o.map2(((e,t)=>t.positionState.absTop-e.positionState.absTop))),l.getOrElse((()=>0))))),T=e=>t=>t.pipe(p.U(l.filter((({currentLens:t})=>w(e)(t))))),M=e=>(t,n,r,i,a)=>{const o=(e=>l.getEq(c.f7(((t,n)=>{const r=b.In.getActiveItem(t),i=b.In.getActiveItem(n);return l.getEq(e.visualStateEq).equals(r,i)&&t.items.size===n.items.size&&u.compareInPairs(t.items.keys(),n.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(p.U(l.map((e=>e.currentLens.id))),g.x(c.w4.equals),p.U(l.isSome),f.w(y.Ft(x.aj(n,r,i,T(e)(t).pipe(p.U(l.map((e=>e.currentLens))),g.x(o.equals),f.w(a))))),h.h((([t,n,r,i])=>(0,s.pipe)(i,l.exists(w(e))))),p.U((([e,t,n])=>({viewport:e,scrollTop:t,paddingTop:n}))))},N=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:n})=>({viewport:r,scrollTop:i,paddingTop:c,completeTransition:u})=>d=>{const p=d.currentLens,m=((e,t,n,r)=>e.size<2||Math.floor(t.height/Math.min(o.unsafeGet(e.getAt(0)).positionState.height,o.unsafeGet(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:A(e,t,n,r))(p.items,r,i-c,e);let h=!1;const g=p.items.map(((e,r,i)=>{const o=(0,a.ls)((c=n,d=e.positionState.watched||(e=>m.from<=e&&m.to>e||(0,s.pipe)(p.cardIndex,l.exists((n=>e>=n-t&&e<=n+t))))(i),e=>e.positionState.visible!==d?c.changePosition(v.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(v.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(n),u)(e);var c,d;return o!==e?(h=!0,o):e}));return h?b.nL.Prism.getLens().compose(C.v.Prism.items).set(g,d):d}},48521:(e,t,n)=>{n.d(t,{o:()=>r});var r,i=n(16892),a=n(40966);!function(e){function t(e){return"visualState"in e}let n;e.Transition=a.u,e.VisualState=a.t,e.eq={equals:(n,r)=>!t(n)||t(r)&&e.VisualState.eq.equals(n.visualState,r.visualState)},e.isAnimatable=t,e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}},e.isRemoved=e=>"removed"===e.visualState.transition.type,e.isAnimatingRemoval=e=>"removed"===e.visualState.transition.type&&e.visualState.incomplete,e.isHidden=e=>"hidden"===e.visualState.transition.type,function(e){e.getPojoUpdates=()=>Object.assign(Object.assign({},i.s.Capabilities.getPojoUpdates()),{setVisualState:e=>t=>Object.assign(Object.assign({},t),{visualState:e})})}(n=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},16892:(e,t,n)=>{n.d(t,{s:()=>r});var r,i=n(73975),a=n(69345);!function(e){let t;e.PositionState=a.Z,e.eqById=i.f7(((e,t)=>e.id===t.id)),e.getEqById=()=>i.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(t,n)=>e.PositionState.eq.equals(t.positionState,n.positionState)},e.verticalPositionEq={equals:(t,n)=>e.PositionState.verticalEq.equals(t.positionState,n.positionState)},function(e){e.getPojoCloneable=()=>({clone:e=>Object.assign({},e)}),e.getPojoUpdates=()=>({setPosition:e=>t=>Object.assign(Object.assign({},t),{positionState:e})})}(t=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},4557:(e,t,n)=>{n.d(t,{B:()=>r});var r,i=n(5114),a=n(95195);!function(e){e.NAME_LENGTH_LIMIT=30,e.CONTENT_LENGTH_LIMIT=1e3;e.validate=(t,n,r)=>{const s=((t,n)=>0===t.trim().length?i.some(n.nameEmpty):t.length>e.NAME_LENGTH_LIMIT?i.some(n.nameTooLong):i.none)(t,r),o=((t,n)=>0===t.trim().length?i.some(n.textEmpty):t.length>e.CONTENT_LENGTH_LIMIT?i.some(n.textTooLong):i.none)(n,r);return i.isNone(s)&&i.isNone(o)?a.right(void 0):a.left({nameError:s,contentError:o})}}(r||(r={}))},60682:(e,t,n)=>{n.d(t,{B:()=>r});var r,i=n(57050),a=n(38983),s=n(76974),o=n(32952),l=n(2844),c=n(77176),u=n(28043),d=n(73975),p=n(5114),m=n(71249),h=n(8125),g=n(83078),f=n(26328),y=n(89943),x=n(81531),v=n(66896),b=n(74660),C=n(6782),I=n(4390),S=n(9922),w=n(5920),E=n(17594),A=n(55567),k=n(66268),T=n(20594),M=n(35416),N=n(6100),L=n(56549),O=n(48521),_=n(77610);!function(e){function t(t){return t.id===e.id}let n,r,D;e.id="UpgradeHookId",e.Kind="UpgradeHook",e.eq={equals:(e,t)=>d.yv.equals(e.id,t.id)&&_.i.eq.equals(e,t)},e.isUpgradeHookItem=t,function(e){e.create=(e,t="default")=>{const n=T.Mq.getCreate(((e,n)=>r.createItem(e,n,t)),p.none,r.changeVisualState,(()=>s.of(p.none)),e);return{createAdded:e=>(t,r)=>{const i=O.o.VisualState.initial({type:"added",clockwise:!0},!0);return n(t,r,0,0,A.n.empty(void 0),e,p.some(i))},createFocused:e=>(t,r)=>{const i=O.o.VisualState.initial({type:"focused",clockwise:!0},!1);return n(t,r,0,0,A.n.empty(void 0),e,p.some(i))}}}}(n=e.ItemFactory||(e.ItemFactory={})),function(t){t.createItem=(t,n,r)=>Object.assign({kind:e.Kind,id:t,activeAlert:n.alerts[0],equals(t){return e.eq.equals(this,t)},hashCode(){return _.i.hashCode(Object.assign(Object.assign({},this),{userInput:p.none}))},groupedAlerts:e.getGroupedLiteAlerts(n.alertModels),premiumAlerts:n.alertModels,documentType:r},n);const n=O.o.Capabilities.getPojoUpdates();t.changeVisualState=T.Mq.getChangeVisualState(n.setVisualState,i.yR),t.changePosition=n.setPosition,t.transitionTo=T.Mq.getTransitionTo(t.changeVisualState,t.changePosition),t.animatable={completeTransition:e=>n=>(0,i.zG)(n,t.changeVisualState(O.o.VisualState.complete(n.visualState,e))),transitionTo:t.transitionTo,changeVisualState:t.changeVisualState},t.updateAlertsByModels=t=>n=>{const r=(0,i.zG)(t,m.UI(E.$.fromModel));return Object.assign(Object.assign({},n),{alerts:r,premiumAlerts:t,groupedAlerts:e.getGroupedLiteAlerts(t)})},t.updateAlerts=(e,t,n,r)=>i=>Object.assign(Object.assign({},i),{alerts:e,premiumAlerts:i.premiumAlerts.filter((e=>!t.has(e.id))),activeAlertIndex:n,activeHighlightIndex:r,activeAlert:e[n]}),t.addAlerts=t=>n=>{const r=(0,i.zG)(t,m.UI(E.$.fromModel)),a=[...n.premiumAlerts,...t];return Object.assign(Object.assign({},n),{alerts:[...n.alerts,...r],premiumAlerts:a,groupedAlerts:e.getGroupedLiteAlerts(a)})},t.getSelect=(e,n)=>({selectByAlert:(r,a,s)=>o=>(0,i.zG)(o,T.Mq.getSelectByAlert(t.updateAlerts,(0,i.a9)(i.yR),t.changeVisualState,t.changePosition,(0,i.a9)(i.yR),i.yR,e,n)(a,r,s)),select:(e,n)=>r=>(0,i.zG)(r,T.Mq.getSelectItem(t.changeVisualState,t.changePosition)(e,n)),unselect:T.Mq.getUnselectItem(t.changeVisualState,t.changePosition)}),t.remove={remove:(e,n)=>r=>e(r)?t.transitionTo({type:"removed",clockwise:n(r)})(r):r}}(r=e.Capabilities||(e.Capabilities={})),function(e){let t;!function(e){e.empty={onShowUpgradeHook:i.Q1,onOpenUpgradeUrl:i.Q1,onDismissUpgradeHook:i.Q1}}(t=e.EventHandlers||(e.EventHandlers={}));e.UpgradeHookItemViewModelImpl=class{constructor(e,t,n,r,i){this._subs=new S.w.Keeper,this.events=new o.xQ,this.upgradeHookDismissed=a.h.create(!1),this._subs.push(this.events.subscribe((n=>{"showedUpgradeHook"===n.type?i.onShowUpgradeHook():(k.lY.isSDUICardAction(n)&&k.lY.ProxySduiCardAction.hasAction(n,"upgradeToPremium")&&(t.openUpgradeUrl(r),i.onOpenUpgradeUrl()),k.lY.isSDUICardAction(n)&&k.lY.ProxySduiCardAction.hasAction(n,"removeCard")&&(this.upgradeHookDismissed.set(!0),i.onDismissUpgradeHook()),e.actionEvents.next(n))}))),this._subs.push(n.subscribe((()=>{this.upgradeHookDismissed.set(!1)})))}dispose(){this._subs.dispose()}}}(D=e.ViewModel||(e.ViewModel={})),e.getPremiumAlerts=(e,t)=>l.aj([t.view("currentLens").view("id").view(v.R.isPriority).view((e=>e?e=>b.bZ.isRegistered(e)&&b.bZ.isPremium(e)&&b.bZ.isPriority(e):e=>b.bZ.isRegistered(e)&&b.bZ.isPremium(e))),e]).pipe(c.U((([e,t])=>I.p.reduce([],((t,{alert:n})=>(Boolean(e(n))&&t.push(n),t)))(t)))),e.getGroupedLiteAlerts=e=>C.Q.group(e.map((e=>e.toLiteAlert()))),e.formatLiteAlerts=(e,t=5)=>{const n=e.slice(0,t),r=e.slice(t).map((e=>e.count)).reduce(h.Sm,0);return r>0?[...n,{group:"",category:"",categoryHuman:"more...",count:r,lensName:"more...",bundleInfo:p.some("more...")}]:n},e.groupPremiumAlerts=e=>Object.values(e.reduce(((e,t)=>{const n=t.lensType;return null!=e[n]?e[n]=Object.assign(Object.assign({},e[n]),{lensNames:m.jj(d.w4)([...e[n].lensNames,t.lensName]),alertsCount:e[n].alertsCount+1}):e[n]={lensNames:[t.lensName],lensType:t.lensType,alertsCount:1},e}),{}));const F=(0,h.HP)(x.C8.Logging.getLogger);let P;e.getSideEffect=(a,s,o,d,m,h=n.create(m),f=v.R.isWithAlertsId)=>{const y=F("UpgradeHook.sideEffect"),x=M.nL.Prism.getLensWithItems().compose(N.v.Prism.getFeedItems()),b=s.pipe(c.U((e=>e.currentLens.id)),u.x());return{id:"upgradeHookEffect",when:f,what:M.nL.Effect.ItemsApplicator.create((0,i.zG)(l.aj([a,b]),c.U((([n])=>a=>{const s=w.l.find(a.currentLens.items,t);if(o.get())return a;if(0===n.length)return p.isSome(s)?(y.trace("no more premium alerts, removing UpgradeHook item from the current lens"),x.set(a.currentLens.items.remove(e.id),a)):a;let l,c=a;return p.isNone(s)?(y.trace("premium alerts found, adding upgrade hook item to lens state",n),l=h.createAdded(a.currentLens.id)(e.id,n),c=x.set(a.currentLens.items.add(l),a)):l=g.unsafeGet(s).value,c=(0,i.zG)(r.updateAlertsByModels(n)(l),(e=>a.currentLens.items.add(e)),(e=>x.set(e,c))),(1===c.currentLens.items.size||v.R.isPremiumId(c.currentLens.id))&&(y.trace("auto focusing upgrade hook item"),c=M.nL.Prism.getLensWithItems().modify(d.selectItemById(e.id),c)),c}))))}},function(t){function n(e,n){return(r,i)=>N.v.ApplyDiff.applyWithFilter(i,N.v.ApplyDiff.apply)(r,t.add(e,n),t.update(),t.remove())}t.withUphookAlertsHandlerFactory=function(e,t,r){return i=>i===v.R.SpecialId.Premium||i===v.R.SpecialId.FreePremiumAlerts?n(t,r):e(i)},t.getAlertsHandler=n,t.add=(t,n)=>r=>{const a=n=>v.R.isPremiumId(n)?t.createFocused(v.R.SpecialId.Premium)(e.id,r):t.createAdded(v.R.SpecialId.FreePremiumAlerts)(e.id,r);return t=>(0,i.zG)(r,p.fromPredicate(m.Od),p.chain((r=>(0,i.zG)(t.items.get(e.id),p.map((e=>e.value)),p.map(e.Capabilities.addAlerts(r)),p.alt((()=>p.some(a(t.id)))),p.map((e=>{const i=r.filter((0,h.W9)(b.bZ.isApplicableAlert,b.bZ.isFreePremium)).map((e=>n.createAdded(t.id)(L._.getCardId(t.meta,e),e))),a=t.items.add([...i,e]),s=M.In.getActiveItemIndex(a)(t);return Object.assign(Object.assign({},t),{cardIndex:s,items:a,animation:M.wj.proceed})}))))),p.getOrElse((()=>t)))},t.remove=()=>t=>n=>{if(!t.length)return n;const r=new Set(t.map((e=>e.id)));return(0,i.zG)(n.items.get(e.id),p.map((e=>e.value)),p.map((t=>(0,i.zG)(t.premiumAlerts.filter((e=>!r.has(e.id))),f.nI,p.map((r=>n.items.add(e.Capabilities.updateAlertsByModels(r)(t)))),p.getOrElse((()=>n.items.remove(e.id)))))),p.map((e=>{const t=M.In.getActiveItemIndex(e)(n);return Object.assign(Object.assign({},n),{cardIndex:t,items:e})})),p.getOrElse((()=>n)))},t.update=()=>e=>n=>{const[,r]=y.partition(e,b.bZ.isRegistered);return(0,i.zG)(n,t.remove()(r))}}(P=e.Handler||(e.Handler={}))}(r||(r={}))},93265:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(17771),a=n(35214),s=n(64015),o=n(57050),l=n(40327),c=n(20817),u=n(71249),d=n(5114),p=n(95195),m=n(83078),h=n(8125),g=n(55415),f=n(92843),y=n(73975),x=n(45701),v=n(22232),b=n(89943),C=n(74660),I=n(66896),S=n(4390),w=n(36156),E=n(48521),A=n(16892),k=n(35416);!function(e){let t,n,r,T;e.filterAlertInLens=(e,t)=>u.hX((n=>C.bZ.isNotRemoved(n)||d.isSome(e.items.find((e=>t.hasAlert(n.id)(e)))))),e.findItemWithAlertInLens=(e,t)=>(0,o.ls)(d.fromPredicate(C.bZ.isNotRemoved),d.chain((n=>e.items.find((e=>t.hasAlert(n.id)(e)&&!t.isScheduledToDispose(e))))),d.map((e=>e.value))),e.createWithInitialAlerts=(e,t,n,r,i)=>(a,s,c,u)=>{const p=(0,l.pipe)(u,d.fold((()=>o.yR),(e=>i.selectItemByAlert(e)))),m=e.create(a,s),h=c.filter(n.alertVisibleInSidebar(a)),g=t(a);if(k.vj.hasItems(m)){const e=S.p.empty,t=S.p.from(h),n=S.p.diff(e,t);return(0,l.pipe)(m,g(n,r),i.changeItemsVisualState(E.o.VisualState.initial({type:"rendered",clockwise:!0},!1)),p,(e=>Object.assign(Object.assign({},e),{animation:k.wj.skip})))}return m},e.createWithExternalItems=(e,t)=>(n,r,i,a,s)=>{const c=e.create(n,r);return(0,l.pipe)(s,d.filter((e=>k.vj.hasItems(e)&&k.vj.hasItems(c))),d.map((e=>t.changeItemsVisualState(E.o.VisualState.initial({type:"rendered",clockwise:!0},!1))(Object.assign(Object.assign({},c),{items:e.items.filter((0,o.ff)(t.isScheduledToDispose))})))),d.getOrElse((()=>c)))},function(e){e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(k.In.getActiveItem(t),d.chain((t=>(0,l.pipe)(e.get(t.id),d.map((e=>e.index)))))),items:e}),e.hideItem=function(e,t){return E.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e},e.calculateCardsHeight=e=>(0,l.pipe)(e.getAt(e.size-1),d.map((e=>e.positionState.absTop+e.positionState.height)),d.getOrElse((()=>0)));e.getItemsPositionsUpdateTransformer=t=>({state:n,metadata:r})=>{if(!k.nL.hasCards(n))return p.left({state:n,metadata:r});const i=k.nL.Prism.getLens();return p.left({state:i.modify(e.updateItemsPositions(t),n),metadata:r})},e.getSingleItemFeedPositionsUpdateTransformer=e=>({state:t,metadata:n})=>{if(!k.nL.hasCards(t))return p.left({state:t,metadata:n});const r=k.nL.Prism.getLens();return p.left({state:r.modify((t=>{const n=t.items.map(((n,r,i)=>{const a=m.contains(i)(t.cardIndex)?{absTop:n.positionState.absTop,height:n.positionState.height,animationInProgress:t.animation(n,i),visible:!0,isHeightValid:!0,watched:!0,inert:n.positionState.inert}:Object.assign(Object.assign({},n.positionState),{visible:!1,isHeightValid:!0});return A.s.PositionState.eq.equals(n.positionState,a)?n:e.changePosition(a)(n)}));return Object.assign(Object.assign({},t),{items:n,isCardsHeightValid:!0})}),t),metadata:n})},e.getRemoveDisposedItemsTransformer=e=>({state:t,metadata:n})=>{if(!k.nL.hasCards(t))return p.left({state:t,metadata:n});const r=k.nL.Prism.getLens();return p.left({state:r.modify((t=>{const n=k.In.getActiveItem(t),r=t.items.filter((t=>!e.isScheduledToDispose(t)||(0,h.Kg)((0,o.ff)(E.o.isAnimatable),E.o.isAnimatingRemoval)(t)||(0,l.pipe)(n,d.exists((e=>e.id===t.id))))),i=(0,l.pipe)(t,k.In.getActiveItemIndex(r));return Object.assign(Object.assign({},t),{items:r,cardIndex:i})}),t),metadata:n})};const t=e=>t=>(0,l.pipe)(t.items.find((e=>t=>n=>n.positionState.watched&&!e.isHidden(n)&&(0,l.pipe)(t,m.forAll((e=>e.id!==n.id))))(e)(k.In.getActiveItem(t))),d.map((({value:t,index:n})=>({index:n,value:(0,l.pipe)(t,d.fromPredicate((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));e.updateItemsPositions=n=>r=>{const i=k.In.getActiveItem(r),a=t(n)(r),s=(0,l.pipe)(a,d.chain(g.pick("value")),d.map((e=>e.positionState.height)));let o=0;const c=(0,l.pipe)(i,m.forAll((e=>e.positionState.isHeightValid))),u=(0,l.pipe)(a,d.map(g.pick("index")),d.getOrElse((()=>{return e=r.cardIndex,(0,l.pipe)(e,d.map((e=>0===e?1:0)),d.getOrElse((()=>0)));var e}))),p=r.items.map(((e,t,i)=>{const a=m.contains(i)(r.cardIndex),p=a||i===u,h=n.isScheduledToDispose(e)||(a?e.positionState.isHeightValid:d.isSome(s)),g=n.isScheduledToDispose(e)?n.useReferenceHeightOnRemove(e)?(0,l.pipe)(s,d.getOrElse((()=>e.positionState.height))):0:a?e.positionState.height:(0,l.pipe)(s,d.getOrElse((()=>e.positionState.height))),f={absTop:a||c?o:e.positionState.absTop,height:g,animationInProgress:r.animation(e,i),visible:e.positionState.visible,isHeightValid:h,watched:p,inert:e.positionState.inert};return o+=g,A.s.PositionState.eq.equals(e.positionState,f)?e:n.changePosition(f)(e)})),h=e.calculateCardsHeight(p),f=(0,l.pipe)(i,m.forAll((e=>e.positionState.isHeightValid)))&&(0,l.pipe)(p.getAt(u),m.forAll((e=>e.positionState.isHeightValid)));return Object.assign(Object.assign({},r),{items:p,cardsHeight:h,isCardsHeightValid:f})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,n,r)=>i=>(0,l.pipe)(e,f.v.reduce(i,((e,{alert:t})=>r([t])(e)),((e,t,{alert:r})=>n([r])(e)),((e,{alert:n})=>t([n])(e)))),e.applyWithFilter=(e,t)=>(n,r,i,a)=>{const s=(0,o.ls)(u.uK(e),(e=>(0,o.ls)(a(e.left),i(e.right))));return t(n,(t=>r(t.filter(e))),s,a)}}(n=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n))),e.getFeedItems=()=>c.Ri.create((e=>e.items),((e,n)=>t.setVisibleItems(e)(n)))}(r=e.Prism||(e.Prism={})),e.getEq=e=>y.f7(((t,n)=>{if(t.kind===k._L.abstract||n.kind===k._L.abstract)return t.id===n.id;{const r=t,i=n;return t.id===n.id&&d.getEq(e).equals(k.In.getActiveItem(r),k.In.getActiveItem(i))&&r.meta.equals(n.meta)&&r.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===k._L.abstract)return(0,w.AC)(e.id);{const n=e;let r=7;return r=31*r+(0,w.AC)(e.id),r=31*r+(t=k.In.getActiveItem(n),(0,l.pipe)(t,d.fold((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*r+e.meta.count}var t}},function(e){e.getAlertReleaser=e=>({release:t=>n=>{const r=n.items.map(e.removeAlertFromItem([t],n)),i=(0,l.pipe)(n.cardIndex,d.chain((t=>(0,l.pipe)(r.findRightFrom(e.isScheduledToDispose,t),d.map((e=>e.index))))),d.isSome)?k.wj.skip:k.wj.force;return Object.assign(Object.assign({},n),{animation:i,items:r})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>n=>{const r=(0,l.pipe)(n,e,d.filter((0,o.ff)(t.isScheduledToDispose)),d.map((e=>n.items.add((0,l.pipe)(e,t.unselect(d.none,n.itemsOrd))))),d.getOrElse((()=>n.items)));return Object.assign(Object.assign({},n),{items:r,animation:k.wj.force,cardIndex:d.none})}}),e.getHasChecksFeed=()=>({willShowChecksFeed:e=>e.type!==k.Nm.advanced});const t=e=>(0,l.pipe)(x.ordNumber,x.contramap((t=>(0,l.pipe)(e.items.get(t.id),d.map(g.pick("index")),d.getOrElse((()=>-1))))));function n(e,t,n){return r=>(0,l.pipe)(d.of(r),d.filter((e=>!n.isScheduledToDispose(e)&&t(e))),d.chain(n.hasActiveAlert),d.filter((t=>e.isRegistered(t.alert.id))))}e.getSelectableByAlert=(e,n)=>({selectItemByAlert:r=>i=>{if(!n.willShowChecksFeed(i))return i;const s=e(i),c=i.items.find(n.isSelectableByAlert(r));(0,v.kG)(d.isSome(c),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>r.alert.toString()));const{value:u,index:p}=m.unsafeGet(c),h=(0,a.fold)(x.getMonoid())([i.itemsOrd,t(i)]),g=(0,l.pipe)(s,d.filter((0,o.ff)(n.isScheduledToDispose)),d.map((e=>i.items.add((0,l.pipe)(e,n.unselect(d.some(u),i.itemsOrd))))),d.getOrElse((()=>i.items))).add((0,l.pipe)(u,n.selectByAlert(s,r,h)));return Object.assign(Object.assign({},i),{items:g,animation:k.wj.force,cardIndex:d.some(p)})}}),e.getSelectableById=(e,n)=>({selectItemById:r=>i=>{const s=e(i),c=i.items.get(r),{value:u,index:p}=m.unsafeGet(c),h=(0,a.fold)(x.getMonoid())([i.itemsOrd,t(i)]),g=(0,l.pipe)(s,d.filter((0,o.ff)(n.isScheduledToDispose)),d.map((e=>i.items.add((0,l.pipe)(e,n.unselect(d.some(u),h))))),d.getOrElse((()=>i.items))).add((0,l.pipe)(u,n.select(s,h)));return Object.assign(Object.assign({},i),{items:g,animation:k.wj.force,cardIndex:d.some(p)})}}),e.getItemReleaser=()=>({removeItemById:t=>n=>e.setVisibleItems(n.items.remove(t))(n)}),e.getMetaUpdatable=function(){return{updateMeta:e=>t=>Object.assign(Object.assign({},t),{meta:I.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{changeItemsVisualState:e=>n=>t.willShowChecksFeed(n)?Object.assign(Object.assign({},n),{items:n.items.map(t.changeVisualState(e))}):n,finishApplyAnimation:n=>r=>{(0,v.kG)(n.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const i=r.id,a=e=>{const r=e.items.map(t.removeAlertFromItem(n,e));return Object.assign(Object.assign({},e),{items:r})};if(I.R.isOutcomeId(i))return a(r);switch(i){case I.R.SpecialId.Priority:case I.R.SpecialId.AllAlerts:case I.R.SpecialId.PredictionTakeaways:case I.R.SpecialId.PredictionEmogenie:case I.R.SpecialId.RealTimeProofit:case I.R.SpecialId.FreePremiumAlerts:return a(r);case I.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case I.R.SpecialId.Plagiarism:return(0,v.kG)(n.every(C.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),a(r);default:return(0,v.vE)(i)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,l.pipe)(k.In.getActiveItem(t),d.exists((t=>e.isScheduledToDispose(t))))||d.isNone(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasSelectableAlert=n,e.getHasAlerts=function(e,t,r,a){const o=e=>n(t,r(e),a),c=e=>e.id===I.R.SpecialId.Premium||e.id===I.R.SpecialId.Plagiarism?e.meta.count:(0,l.pipe)(k.In.getActiveItem(e),d.chain(a.hasActiveAlert),d.map((e=>e.alert)),d.exists(C.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:c,getActiveAlertsCount:c,getActiveAlert:e=>(0,l.pipe)(k.In.getActiveItem(e),d.chain(a.hasActiveAlert)),findFirstAlert:e=>(0,l.pipe)(e.items.values(),s.f2(o(e))),findNextAlert:t=>((0,v.kG)(d.isSome(k.In.getActiveItem(t))===d.isSome(t.cardIndex),"Lens is in wrong state: cardIndex must reference existing card"),(0,l.pipe)((0,i.g)(d.option)(k.In.getActiveItem(t),t.cardIndex),d.chain((([n,r])=>(0,l.pipe)(e.nextAlert(n),d.alt((()=>e.prevAlert(n))),d.map((e=>({alert:e,highlightIndex:0}))),d.alt((()=>(0,l.pipe)(b.lookAroundMap(t.items.values(),r,o(t)),d.map((e=>e.value)))))))),m.orElse((0,l.pipe)(t.items.values(),s.f2(o(t))))))}},e.setVisibleItems=e=>t=>Object.assign(Object.assign({},t),{cardIndex:(0,l.pipe)(k.In.getActiveItem(t),d.chain((t=>(0,l.pipe)(e.get(t.id),d.map((e=>e.index)))))),items:e})}(T=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},6100:(e,t,n)=>{n.d(t,{v:()=>$});var r,i,a=n(93265),s=n(57050),o=n(66896),l=n(36156),c=n(35416);!function(e){e.create=()=>({id:o.R.SpecialId.Cheetah,type:c.Nm.cheetah,kind:c._L.abstract,meta:o.R.createStaticLens({id:o.R.SpecialId.Cheetah,title:"Grammarly Ideate"},o.R.Meta.group.empty,s.jv),hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}})}(r||(r={})),function(e){let t;e.create=function(e,n){return Boolean(t)||(t={id:o.R.SpecialId.Closed,kind:c._L.abstract,type:c.Nm.closed,meta:o.R.createStaticLens({id:o.R.SpecialId.Closed,title:"Closed"},o.R.Meta.group.empty,e),hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}),t}}(i||(i={}));var u,d=n(5114);!function(e){e.create=()=>({id:o.R.SpecialId.DraftAI,type:c.Nm.draftAI,kind:c._L.abstract,meta:o.R.createStaticLens({id:o.R.SpecialId.DraftAI,title:"Draft AI"},o.R.Meta.group.empty,s.jv),transitionSource:d.none,hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),e.createFromTransitionSource=t=>Object.assign(Object.assign({},e.create()),{transitionSource:d.some(t)})}(u||(u={}));var p,m,h=n(73975),g=n(40327),f=n(22232),y=n(95195),x=n(83078),v=n(89943),b=n(74660),C=n(95983),I=n(17594);!function(e){function t(e){return C.vM("cardId",e)}e.create=function(e,t,n){(0,f.kG)(e.id===o.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const r=C.aW.empty((e=>e.id),n.compare),i=d.none;return{id:o.R.SpecialId.Plagiarism,kind:c._L.persistent,type:c.Nm.plagiarism,meta:e,cardIndex:i,items:r,itemsOrd:n,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===o.R.SpecialId.Plagiarism?Object.assign(Object.assign({},t),{items:t.items.map((t=>I.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(I.$.isPlagiarism)):t))}):t},e.add=e=>n=>r=>{const i=t(n),a=Array.from(i.entries()).reduce(((t,[n,r])=>(0,g.pipe)(t.update(n,(t=>e.addPlagiarismAlerts(t,r))),y.fold((()=>t.add(e.createAdded(n,r))),s.yR))),r.items),o=(0,g.pipe)(c.In.getActiveItem(r),d.map((({id:e})=>x.unsafeGet(a.get(e)).index))),l=d.getEq(h.lr).equals(o,r.cardIndex)?c.wj.force:c.wj.skip;return Object.assign(Object.assign({},r),{cardIndex:o,items:a,animation:l})},e.remove=e=>n=>r=>{const i=t(n),a=c.In.getActiveItem(r),o=Array.from(i.entries()).reduce(((t,[n,i])=>(0,g.pipe)(t.update(n,(t=>{const n=(0,g.pipe)(e.remove(t,i,(0,g.pipe)(a,d.map((e=>r.itemsOrd.compare(t,e)>0)),d.getOrElse(s.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(I.$.isPlagiarism))));return(0,g.pipe)(a,d.exists((e=>e.id===n.id)))?e.selectNextAlert(n,r.itemsOrd):n})),y.fold((()=>t),s.yR))),r.items);return Object.assign(Object.assign({},r),{items:o,animation:c.wj.force})},e.update=t=>n=>r=>e.updateWithAlerts(t)(n.filter((0,s.ff)(t.shouldAnimateAlertApply)))(r),e.updateWithAlerts=n=>r=>i=>{const[a,o]=v.partition(r,b.bZ.isRegistered),l=t(a),u=Array.from(l.entries()).reduce(((e,[t,r])=>(0,g.pipe)(e.update(t,(e=>n.changePlagiarismMetaWithAlerts(e,e.alerts.filter(I.$.isPlagiarism)))),y.fold((()=>e.add(n.createAdded(t,r))),s.yR))),e.remove(n)(o)(i).items),p=(0,g.pipe)(c.In.getActiveItem(i),d.map((({id:e})=>(0,g.pipe)(u.get(e),d.map((({index:e})=>e)),d.getOrElse((()=>0))))));return Object.assign(Object.assign({},i),{cardIndex:p,items:u,animation:c.wj.proceed})},e.getAlertsHandler=function(t){return n=>a.v.ApplyDiff.apply(n,e.add(t),e.update(t),e.remove(t))}}(p||(p={})),function(e){e.create=function(e,t,n){const r=C.aW.empty((e=>e.id),n.compare);return{id:o.R.SpecialId.Premium,kind:c._L.active,type:c.Nm.advanced,meta:e,items:r,itemsOrd:n,cardIndex:d.none,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.getAlertsHandler=function(t,n){return r=>a.v.ApplyDiff.apply(r,e.add(t),e.update(t,n),e.remove(n))},e.add=e=>t=>n=>{const r=t.map(e.createFromAlert(n.id)),i=n.items.add(r),a=c.In.getActiveItemIndex(i)(n);return Object.assign(Object.assign({},n),{cardIndex:a,items:i,animation:c.wj.proceed})},e.remove=e=>t=>n=>{const r=new Set(t.map((e=>e.id))),i=n.items.filter((0,s.ls)(e.hasActiveAlert,d.map((e=>e.alert)),d.exists((e=>r.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),n.items),a=c.In.getActiveItemIndex(i)(n);return Object.assign(Object.assign({},n),{cardIndex:a,items:i})},e.update=(t,n)=>r=>i=>{const[a,o]=v.partition(r,b.bZ.isRegistered);return(0,s.zG)(i,e.remove(n)(o),e.add(t)(a))}}(m||(m={}));var S,w=n(17771),E=n(71249),A=n(8125),k=n(91549);!function(e){const t=b.h$.ord;function n(e){return e.id}function r(e){const t=e.map((e=>[k.R.getAlertOutcomeBundle(e),e]));return C.vM((([e,t])=>n(e)),t)}e.getCardId=n,e.initCardsHash=function(e,n,i,a,s){(0,f.kG)((0,g.pipe)(i,x.forAll((({alertIndex:e})=>void 0!==n[e]))),"Can not find alert for provided alertIndex");const o=r(n),l=(0,g.pipe)(i,d.map((({alertIndex:e})=>((0,f.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let c=d.none;const u=C.aW.empty(k.R.getId,s.compare),p=Array.from(o.entries()).reduce(((n,[r,i])=>{const s=i.map((([e,t])=>t)),o=i[0][0];return(0,g.pipe)(l,d.map((e=>s.indexOf(e))),d.filter((e=>e>-1)),d.fold((()=>n.add(a.createRendered(e)(r,o,s,t))),(i=>{const l=a.createFocused(e)(r,o,s,i,t);return c=d.some(r),n.add(l)})))}),u),m=(0,g.pipe)(c,d.chain((e=>(0,g.pipe)(p.get(e),d.map((e=>e.index))))));return{cardIndex:m,cards:p}},e.create=function(e,t,n,r){const i=C.aW.empty(k.R.getId,r.compare),s=d.none;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,withPriorityList:!1,cardIndex:s,items:i,itemsOrd:r,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}},e.add=(e,n)=>i=>a=>{if(0===i.length)return a;const o=r(i),l=Array.from(o.entries()).reduce(((r,[i,o])=>{const l=o.map((([e,t])=>t)),c=o[0][0];return(0,g.pipe)(r.update(i,(e=>n.updateWithAlerts(l)(e))),y.fold((()=>r.add(e.createAdded(a.id)(i,c,l,t))),s.yR))}),a.items),u=(0,g.pipe)(a,c.In.getActiveItemIndex(l)),p=d.getEq(h.lr).equals(u,a.cardIndex)?c.wj.force:c.wj.skip;return Object.assign(Object.assign({},a),{cardIndex:u,items:l,animation:p})},e.remove=e=>t=>n=>{const i=r(t),a=Array.from(i.entries()).reduce(((t,[r,i])=>(0,g.pipe)(t.update(r,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),n)(t))),y.fold((()=>t),s.yR))),n.items),o=(0,g.pipe)(n,c.In.getActiveItemIndex(a));return Object.assign(Object.assign({},n),{cardIndex:o,items:a,animation:c.wj.force})},e.update=(t,n,r)=>i=>a=>e.updateWithAlerts(t,r)(i.filter((0,A.ff)(n.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(n,i)=>o=>l=>{if(0===o.length)return l;const{left:u,right:d}=(0,g.pipe)(o,a.v.filterAlertInLens(l,i),E.uK(b.bZ.isRegistered)),p=r(d),m=Array.from(p.entries()).reduce(((e,[r,a])=>{const o=a.map((([e,t])=>t)),c=a[0][0];return(0,g.pipe)(e.update(r,(e=>i.updateWithAlerts(o)(e))),y.fold((()=>e.add(n.createAdded(l.id)(r,c,o,t))),s.yR))}),e.remove(i)(u)(l).items),h=(0,g.pipe)(l,c.In.getActiveItemIndex(m));return Object.assign(Object.assign({},l),{cardIndex:h,items:m,animation:c.wj.proceed})},e.getAlertsHandler=function(t,n,r){return(i,s)=>o=>{const l=a.v.ApplyDiff.applyWithFilter(s,a.v.ApplyDiff.apply);return(0,g.pipe)(o,l(i,e.add(t,r),e.update(t,n,r),e.remove(r)))}},e.getHasAlerts=function(e,t,n,r){const i=a.v.Capabilities.getHasAlerts(e,t,n,r),s=e=>a.v.Capabilities.getHasSelectableAlert(t,n(e),r);return Object.assign(Object.assign({},i),{findNextAlert:t=>(0,g.pipe)((0,w.g)(d.option)(c.In.getActiveItem(t),t.cardIndex),d.chain((([n,r])=>(0,g.pipe)(e.nextAlert(n),d.alt((()=>e.prevAlert(n))),d.alt((()=>(0,g.pipe)(v.findIndexFromMap(t.items.values(),r+1,s(t)),d.alt((()=>v.findIndexFromMap(t.items.values(),0,s(t)))),d.chain((e=>(0,g.pipe)(t.items.getAt(e.index),d.map((e=>e.alerts[0]))))))))))),d.map((e=>({alert:e,highlightIndex:0}))))})}}(S||(S={}));var T=n(35214),M=n(45701),N=n(26027),L=n(48521),O=n(16892),_=n(69345),D=n(4890);const F=h.f7(((e,t)=>e.id===t.id&&e.visibilityState===t.visibilityState&&_.Z.eq.equals(e.positionState,t.positionState))),P=e=>(0,l.NO)({itemId:e.id,visibilityState:e.visibilityState,positionState:(0,l.NO)(e.positionState)});var R,j;!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=(e,n)=>new t(e,n,D.j.defaultOptions),e.hidden="hidden",e.visible="visible",e.isVisible=t=>t.visibilityState===e.visible,e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.isPriorityToggleHint=t=>t.id===e.id,e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t,e.clone=t=>e.create(t.visibilityState,t.positionState);class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return F.equals(this,e)}hashCode(){return P(this)}}}(R||(R={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.isCollapsed=e=>"collapsed"===e.visibilityState,e.isExpanded=e=>"expanded"===e.visibilityState,e.isHidden=e=>"hidden"===e.visibilityState,e.create=(e,n)=>new t(e,n,D.j.defaultOptions),e.changePosition=(t,n)=>e.create(t.visibilityState,n),e.transitionTo=(t,n)=>t.visibilityState!==n?e.create(n,t.positionState):t,e.clone=t=>e.create(t.visibilityState,t.positionState),e.isPriorityToggle=t=>t.id===e.id,e.isPriorityItem=(0,A.Kg)(e.isPriorityToggle,R.isPriorityToggleHint);class t{constructor(t,n,r){this.visibilityState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}equals(e){return F.equals(this,e)}hashCode(){return P(this)}}}(j||(j={}));var U,$,B=n(56549);!function(e){function t(e,t){return(0,g.pipe)(c.In.getActiveItem(e),d.chain(t.hasActiveAlert),d.map((e=>!I.$.isPriority(e.alert))),d.getOrElse((()=>!1)))}function n(e){return(0,g.pipe)(e.items.get(j.id),d.map((({value:e})=>j.isPriorityToggle(e)&&j.isExpanded(e))),d.getOrElse((()=>!1)))}function r(e,t,n){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter((0,A.W9)(t,(e=>!n.isScheduledToDispose(e)))).size}let i;function s(e,t){return i=>c.nL.hasSuccess(i)&&B._.isInSuccess(t)(i.currentLens)||c.nL.isWithPriorityList(i)&&(B._.isInSuccess(t,(0,A.ff)(j.isPriorityItem))(i.currentLens)||r(i.currentLens,e,t)&&!n(i.currentLens))}e.ord=(0,T.fold)(M.getMonoid())([(0,g.pipe)(M.ordBoolean,M.contramap(R.isPriorityToggleHint)),(0,g.pipe)(M.ordBoolean,M.contramap(j.isPriorityToggle)),N.X.ord]),e.create=function(e,t,n,r){const i=C.aW.empty(N.X.getId,r.compare),s=d.none;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,itemsOrd:r,meta:t,cardIndex:s,items:i,animation:c.wj.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}},e.getHasPriorityToggle=function(e){return{toggleNonPriorityList:r=>i=>{const a=n(i);if("collapsed"===r&&!a||"expanded"===r&&a)return i;const s=t(i,e),o=u(i.items,!a,!a&&s,e);return Object.assign(Object.assign({},i),{items:o,cardIndex:s&&a?d.none:i.cardIndex,animation:c.wj.proceed})}}},e.focusedCardIsNonPriority=t,e.isNonPriorityListOpened=n,e.onlyNonPriorityAlertsLeft=r,e.nonPriorityAlertsVisible=function(e){return!c.nL.isWithPriorityList(e)||n(e.currentLens)},function(e){e.fromLensState=e=>t=>e.currentLens.id!==t||c.nL.isWithPriorityList(e)&&!n(e.currentLens)?c.FS.priorityAlertsOnly:c.FS.allAlerts}(i=e.LensViewMode||(e.LensViewMode={})),e.isInSuccess=s,e.isInGlobalSuccess=function(e,t){return n=>(c.nL.is(o.R.SpecialId.AllAlerts)(n)||c.nL.is(o.R.SpecialId.Priority)(n))&&s(e,t)(n)},e.getSyncVisibleCardsHandler=function(e){return r=>{if(!o.R.isWithSuccessId(r.id))return r;let i=l(r.items);const a=t(r,e);i=u(i,n(r)||a,a,e);const s=c.In.getActiveItemIndex(i)(r);return Object.assign(Object.assign({},r),{cardIndex:s,items:i,animation:c.wj.proceed})}};function l(e){return e.has(j.id)||0===e.size?e:e=(e=e.add(j.create("expanded",O.s.PositionState.empty))).add(R.create("visible",O.s.PositionState.empty))}function u(e,t,n,r){const i=(e=>Object.assign(Object.assign({},e),{transitionTo:t=>n=>L.o.isAnimatable(n)&&n.visualState.transition.type!==t.type?e.transitionTo(t)(n):n}))(r),s=0===e.filter((e=>!r.isScheduledToDispose(e)&&(0,g.pipe)(r.hasActiveAlert(e),d.map((e=>e.alert)),d.exists((0,A.ff)(I.$.isPriority))))).size;return e.map((e=>(0,g.pipe)(r.hasActiveAlert(e),d.fold((()=>j.isPriorityItem(e)?s?j.isPriorityToggle(e)?j.transitionTo(e,"hidden"):R.transitionTo(e,"hidden"):j.isPriorityToggle(e)?t||n?j.transitionTo(e,"expanded"):j.transitionTo(e,"collapsed"):t||n?R.transitionTo(e,"visible"):R.transitionTo(e,"hidden"):e),(n=>t||I.$.isPriority(n.alert)?L.o.isAnimatable(e)&&L.o.isHidden(e)?i.transitionTo({type:"rendered",clockwise:!0})(e):e:a.v.Items.hideItem(e,r))))))}e.isAlertVisible=function(e,t){return"priority"===t.view||n(e)},e.ensureExpandCardIsPresent=l,e.syncVisibleCards=u,e.getHasAlerts=function(e,t,i,s,o){const l=a.v.Capabilities.getHasAlerts(e,t,(e=>n(e)&&r(e,s,o)?i(e):t=>i(e)(t)&&(0,g.pipe)(o.hasActiveAlert(t),d.map((e=>e.alert)),d.exists(I.$.isPriority))),o);return Object.assign(Object.assign({},l),{getVisibleAlertsCount:e=>(0,g.pipe)(c.In.getActiveItem(e),d.chain(o.hasActiveAlert),d.map((e=>e.alert)),d.exists(b.bZ.isCapiDone))&&1===e.items.size?0:n(e)?e.meta.count:e.meta.priorityCount})}}(U||(U={})),function(e){e.Prism=a.v.Prism,e.Items=a.v.Items,e.Capabilities=a.v.Capabilities,e.ApplyDiff=a.v.ApplyDiff,e.filterAlertInLens=a.v.filterAlertInLens,e.findItemWithAlertInLens=a.v.findItemWithAlertInLens,e.lensHash=a.v.lensHash,e.getEq=a.v.getEq,e.Closed=i,e.DraftAI=u,e.Plagiarism=p,e.Premium=m,e.WithBundles=S,e.WithPriority=U,e.WithSuccess=B._,e.Cheetah=r}($||($={}))},56549:(e,t,n)=>{n.d(t,{_:()=>r});var r,i=n(71249),a=n(73975),s=n(57050),o=n(40327),l=n(5114),c=n(8125),u=n(95195),d=n(66896),p=n(95983),m=n(26027),h=n(35416),g=n(93265);!function(e){let t;function n(e,t){return`${e.id}_${t.id}`}e.isInSuccess=function(e,t=s.W8){return n=>0===n.meta.count&&(0===n.items.filter(t).size||l.isNone(n.items.filter(t).find((t=>!e.isScheduledToDispose(t)))))},function(t){function n(t){return n=>h.nL.hasSuccess(n)&&h.nL.hasItems(n)&&e.isInSuccess(t)(n.currentLens)}t.isInSuccess=n,t.isInGlobalSuccess=e=>t=>(h.nL.is(d.R.SpecialId.AllAlerts)(t)||h.nL.is(d.R.SpecialId.Priority)(t))&&n(e)(t)}(t=e.State||(e.State={})),e.getCardId=n,e.create=function(e,t,n,r){const i=p.aW.empty(m.X.getId,r.compare),a=l.none;return{id:e,type:h.Nm.lensview,kind:h._L.persistent,withPriorityList:!1,meta:t,cardIndex:a,items:i,itemsOrd:r,animation:h.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return g.v.lensHash.hashCode(this)},equals(e){return g.v.getEq(n).equals(this,e)}}},e.add=(e,t,r)=>i=>s=>{const o=i.map((i=>{const a=t.createAdded(s.id)(n(s.meta,i),i);return e(s,i)?a:g.v.Items.hideItem(a,r)})),c=s.items.add(o),u=h.In.getActiveItemIndex(c)(s),d=l.getEq(a.lr).equals(u,s.cardIndex)?h.wj.force:h.wj.skip;return Object.assign(Object.assign({},s),{cardIndex:u,items:c,animation:d})},e.remove=e=>t=>n=>{const r=new Set(t.map((e=>e.id))),i=n.items.map(e.remove((0,s.ls)(e.hasActiveAlert,l.map((e=>e.alert)),l.fold(s.jv,(e=>r.has(e.id)))),(e=>(0,o.pipe)(h.In.getActiveItem(n),l.map((t=>n.itemsOrd.compare(e,t)>0)),l.getOrElse(s.W8))))),a=(0,o.pipe)(n.cardIndex,l.chain((t=>(0,o.pipe)(i.findRightFrom((t=>e.isScheduledToDispose(t)),t),l.map((e=>e.index))))),l.isSome)?h.wj.skip:h.wj.force,c=(0,o.pipe)(n,h.In.getActiveItemIndex(i));return Object.assign(Object.assign({},n),{cardIndex:c,items:i,animation:a})},e.update=(t,n,r)=>i=>a=>e.updateWithAlerts(n,t,r)(i.filter((0,c.ff)(n.shouldAnimateAlertApply)))(a),e.updateWithAlerts=(e,t,r)=>a=>l=>{if(0===a.length)return l;const c=(0,o.pipe)(a,g.v.filterAlertInLens(l,r),i.UI((e=>[n(l.meta,e),e])),i.u4(l.items,((n,[i,a])=>(0,o.pipe)(n.update(i,r.updateWithAlerts([a])),u.fold((()=>{const s=e.createAdded(l.id)(i,a);return n.add(t(l,a)?s:g.v.Items.hideItem(s,r))}),s.yR))))),d=h.In.getActiveItemIndex(c)(l);return Object.assign(Object.assign({},l),{cardIndex:d,items:c,animation:h.wj.proceed})},e.getAlertHandler=function(t,n,r=s.W8){return(i,a)=>{const s=g.v.ApplyDiff.applyWithFilter(a,g.v.ApplyDiff.apply);return a=>(0,o.pipe)(a,s(i,e.add(r,t,n),e.update(r,t,n),e.remove(n)))}}}(r||(r={}))},73841:(e,t,n)=>{n.d(t,{l:()=>O});var r=n(31542),i=n(11064),a=n(40327),s=n(73975),o=n(5114),l=n(95195),c=n(8125),u=n(22232),d=n(81531),p=n(46680),m=n(66896),h=n(32952),g=n(77176),f=n(76974),y=n(95300),x=n(24209),v=n(66310),b=n(98403),C=n(69935),I=n(91224),S=n(41398),w=n(2834),E=n(28043),A=n(598),k=n(83401),T=n(17594),M=n(48521),N=n(35416),L=n(89770);class O{constructor(e,t,n,u,A,k,M){this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=u,this._stateSideEffects=A,this._getActiveAlert=k,this._stateTransformer=M,this.focusLens=(e,t,n={toFocus:N.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=(e,t,n)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=d.C8.TimeSeries.rootFemetrics.getMetric("lens_state.manager"),this._switchLensActions=new h.xQ,this._switchAlertActions=new h.xQ,this._addMetadata=e=>t=>t.pipe(g.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:n=N.Zz.defaultOptions.focusBehavior,order:r}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),m.R.isClosedId(e))return(0,a.pipe)(f.of(N.nL.Effect.Applicator.Source.override((0,L.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(m.R.isDraftAIId(e)||m.R.isCheetah(e)){const t=m.R.isCheetah(e)?(0,L.yC)():(0,L.zc)();return(0,a.pipe)(f.of(N.nL.Effect.Applicator.Source.override(t)),this._addMetadata({sourceId:"LSM.focusLensEffect"}))}const i=this._state.get(),s=i.patch({switchOrder:Boolean(r)?r:i.switchOrder,alertSource:t});return(0,a.pipe)(this._stateProvider.getLensEventsByLensId(s,e,{focusBehavior:n}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:n})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const r=this._state.get(),i=r.patch({switchOrder:Boolean(n.order)?n.order:r.switchOrder,alertSource:t});return(0,a.pipe)(this._stateProvider.getLensEventsByAlert(i,function(e,t,n){if(e===m.R.SpecialId.Priority||e===m.R.SpecialId.PredictionTakeaways||e===m.R.SpecialId.PredictionEmogenie||e===m.R.SpecialId.RealTimeProofit||e===m.R.SpecialId.FreePremiumAlerts)return e;if(void 0!==n)return n;if(e===m.R.SpecialId.Closed||e===m.R.SpecialId.AllAlerts)return m.R.SpecialId.AllAlerts;return t}(r.currentLens.id,e.alert.lensId,n.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const O=this._state.get(),_=this._stateTransformer,D=new y.X(O);this._effects=x.T(...this._stateSideEffects.map((({when:e,what:t,id:n})=>this._state.view("currentLens","id").view(e).pipe(v.w(b.Ft((0,a.pipe)(this._effectToApplicator(t),this._addMetadata({sourceId:n}))))))),x.T(this._switchAlertActions.pipe(g.U(this._focusAlertEffect)),this._switchLensActions.pipe(g.U(this._focusLensEffect))).pipe(C.B()));const F=this._ts.getTimer("batched.long_state_change"),P=s.MW({activeAlert:o.getEq(T.$.eq),lensId:s.yv});this._subs=[this._effects.pipe(I.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),S.M(D,(({source:e,metadata:t},n)=>({state:e(n),metadata:t}))),I.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),w.b((e=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace("lens state before state transformer: ",e)})),g.U(_),I.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,a.pipe)(e,l.fold((({state:e,metadata:t})=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,a.pipe)(this._checkState(e),l.fold((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>D.next(e))))}),l.fold((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,a.pipe)(D,g.U((e=>({activeAlert:N.nL.getActiveAlert(this._getActiveAlert)(e),lensId:e.currentLens.id}))),w.b((e=>this._log.trace("active alert: ",e.activeAlert))),E.x(P.equals),v.w((({activeAlert:e,lensId:t})=>(0,a.pipe)(e,b.aI((e=>(0,a.pipe)(this._alertsService.takeReference(e,`activeCard_${t}`),l.mapLeft((e=>this._log.error("can not take alertRef",e))),l.fold(i.of(c.Q1),(e=>e.dispose))))))))).subscribe(),D.subscribe((e=>{const t=performance.now();r.unstable_batchedUpdates((()=>{this._state.set(e)}));const n=performance.now()-t;n>16&&F.recordTime(n)}))],N.nL.hasCards(O)&&(0,a.pipe)(N.nL.getActiveAlertHighlight(this._getActiveAlert)(O),o.filter((e=>this._alertsReader.isRegistered(e.alert.id))),o.fold((()=>this._switchLensActions.next({lensId:O.currentLens.id,alertSource:O.alertSource,options:{order:O.switchOrder,toFocus:N.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:O.alertSource,options:{lensId:O.currentLens.id,order:O.switchOrder}}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case N.nL.Effect.Type.Applicator:case N.nL.Effect.Type.ItemsApplicator:return e.source;case N.nL.Effect.Type.SwitchLens:return e.source.pipe(w.b((e=>this._switchLensActions.next(e))),A.c(k.C));case N.nL.Effect.Type.SwitchAlert:return e.source.pipe(w.b((e=>this._switchAlertActions.next(e))),A.c(k.C));default:return(0,u.vE)(e)}}_checkState(e){try{if(N.nL.hasCards(e)){const t=e.currentLens.items.filter((0,c.W9)(M.o.isAnimatable,M.o.isFocused));(0,u.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return l.left(e)}return l.right(void 0)}}O.toLensAlert=({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})},89770:(e,t,n)=>{n.d(t,{T:()=>L,oq:()=>D,yC:()=>_,zc:()=>O});var r=n(57050),i=n(40327),a=n(73975),s=n(22232),o=n(92843),l=n(5114),c=n(8125),u=n(83078),d=n(81531),p=n(46680),m=n(51374),h=n(74660),g=n(66896),f=n(4390),y=n(91247),x=n(76974),v=n(85985),b=n(28043),C=n(77176),I=n(24209),S=n(16118),w=n(2834),E=n(66310),A=n(93508),k=n(17594),T=n(35416),M=n(6100);const N=(0,r.ff)(h.bZ.isMuted),L=()=>T.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:M.v.Closed.create(r.jv,a.f7(r.jv))}),O=()=>T.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:M.v.DraftAI.create()}),_=()=>T.nL.create({alertSource:h.l$.api,switchOrder:"lensOrder",currentLens:M.v.Cheetah.create()});class D{constructor(e,t,n,r,a,s,o,l,c,u=T.nL.FocusFirstFilter.defaultFilter){this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=r,this._lensPreviewVM=a,this._lensFactory=s,this._alertsHandlerFactory=o,this._capabilities=l,this._alertsFilterService=c,this._focusFirstFilter=u,this._transformAlertsDiffToApplicator=e=>t=>n=>T.nL.hasItems(n)?n.patch({currentLens:e(t,N)(n.currentLens)}):n,this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=e=>t=>n=>e===n.currentLens.id&&T.nL.hasItems(n)?T.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),n):n,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,i.pipe)(this._checkingState.get(),f.p.reduce([],((e,{alert:n})=>t(n)?[...e,n]:e)),(e=>e.sort(h.h$.ord.compare)))}}static _mapByActiveLensId(e,t,n,r){if(g.R.isOutcomeId(e))return r();switch(e){case g.R.SpecialId.Plagiarism:return t();case g.R.SpecialId.Premium:return n();case g.R.SpecialId.AllAlerts:case g.R.SpecialId.Priority:case g.R.SpecialId.PredictionTakeaways:case g.R.SpecialId.PredictionEmogenie:case g.R.SpecialId.RealTimeProofit:case g.R.SpecialId.FreePremiumAlerts:return r();default:return(0,s.vE)(e)}}_conditionedApplicator(e,t){return n=>r=>e(r,n)?t(n)(r):r}static _filterALEvents(e,t){return n=>x.of((0,i.pipe)(n,f.p.Diff.filter((t=>e(t.alert))),(e=>(t.isEnabled(p.i.TRACE)&&t.trace("diff after filter",e),e)))).pipe(v.h((0,r.ff)(o.v.isEmpty)))}emptyState(e=g.R.SpecialId.AllAlerts){return T.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:l.none,previousState:l.none,alertSource:h.l$.api}),alertSource:h.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,n={}){const r=this._getActiveLensMeta(t),a=this._lensAlerts(r),s=this._createState(e,l.none,r,t,a),o=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):l.none;e.currentLens.id===t&&T.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==a.length&&this._log.warn("Lens contains inconsistent number of alerts",r.id);const c=T.nL.hasItems(s)?(0,i.pipe)(o,l.fold((()=>s),(n=>this._createState(e,l.some(n),r,t,a)))):s;return this._generateEventsFromState(c,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,n){(0,s.kG)(l.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);const r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&T.nL.hasItems(e)?T.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(n),e):this._createState(e,l.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findClosestAlertHighlight(e,t){return(0,i.pipe)(this._positionManager.findClosestToPosition(e,(e=>m.P.is(e)&&m.x.isVisible(e)&&!m.x.isApplied(e)&&(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.exists((n=>this._alertsFilterService.alertCanBeDisplayed(n)&&t(n)&&n.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),l.chain((e=>(0,i.pipe)(this._alertsReader.getRegistered(e.meta.alertId),l.map((t=>{const n={alert:k.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return n.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:n.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>m.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),n.highlightIndex=0),n}))))))}findNextAlertInText({alert:e,highlightIndex:t},n){const r=e.getHighlightRanges();return(0,s.kG)(t<r.length,"AHI is out of highlightRanges length",`hr length: ${r.length}, ahi: ${t}`),this.findClosestAlertHighlight(r[t].end,n)}findNextAlertInTextByLens(e,t,n){return this.findNextAlertInText(e,(0,c.W9)(this._alertsFilterService.alertVisibleInText(n.id,t),(t=>t.id!==e.alert.id),(0,r.ls)(M.v.findItemWithAlertInLens(n,this._capabilities),l.isSome)))}findPremiumAlert(){return this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get().count>0?(0,i.pipe)(this._checkingState.get(),f.p.find((0,r.ls)(h.bZ.fromAlertModel,(0,c.W9)(h.bZ.isRegistered,h.bZ.isPremium))),l.map((e=>({alert:k.$.fromModel(e.alert),highlightIndex:0})))):l.none}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return T.nL.hasItems(e)&&e.currentLens.kind===T._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):T.nL.hasItems(e)&&e.currentLens.type===T.Nm.lensview?this._lenses.pipe(b.x(y.w.eq.equals),C.U((0,r.ls)(y.w.lookup(e.currentLens.id),l.map(this._updateMetaSource(e.currentLens.id)),l.getOrElse((()=>T.nL.Effect.Applicator.Source.identity))))):T.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return I.T(this._checkingState.pipe(S.G(),C.U((([e,t])=>f.p.diff(e,t))),w.b((e=>{this._log.isEnabled(p.i.TRACE)&&this._log.trace("new alerts diff",e)})),E.w(D._filterALEvents(e.currentLens.meta.filter,this._log)),C.U(this._conditionedApplicator(((e,t)=>{const n=this._alertsFilterService.getLensesFilter(e.currentLens.id),a=(0,i.pipe)(t,f.p.Diff.filter((0,r.ff)((({alert:e})=>n(e)))));return o.v.isEmpty(a)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(A.O(T.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=D._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(g.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,s.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState(e,t,n,r,a){(0,s.kG)(u.forAll((({alert:e})=>l.isSome(this._alertsReader.getInteractable(e.id))))(t),"we can create state only with alert in registered state",(()=>(0,i.pipe)(t,l.fold((()=>"null"),(e=>e.toString())))));const o=e.alertSource,c=e.switchOrder,d=this._createLens({lensId:r,initialLens:n,visibleAlerts:a,alertHighlight:t,alertSource:o,previousState:l.some(e.currentLens)});return T.nL.create({currentLens:d,alertSource:o,switchOrder:c})}_createLens(e){return this._lensFactory(e.lensId,e.initialLens,e.visibleAlerts,this._focusFirstFilter(e),e.previousState)}_getAlertToFocus(e,t){switch(e.kind){case T.nL.Effect.FocusBehaviorType.noFocus:case T.nL.Effect.FocusBehaviorType.unFocus:return l.none;case T.nL.Effect.FocusBehaviorType.focusFirst:return T.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):l.none;case T.nL.Effect.FocusBehaviorType.focusNext:return T.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):l.none;case T.nL.Effect.FocusBehaviorType.focusAlert:return l.some(e.alertHighlight);default:(0,s.vE)(e)}}}},39920:(e,t,n)=>{n.d(t,{ad:()=>u,gi:()=>d,is:()=>l,kn:()=>c});var r,i=n(22232),a=n(66896),s=n(35416),o=n(6100);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return n=>t(e(n))}}(r||(r={}));const l=(e,t)=>n=>{if(a.R.isOutcomeId(n))return o.v.WithSuccess.getAlertHandler(e,t);switch(n){case a.R.SpecialId.Premium:return o.v.Premium.getAlertsHandler(e,t);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:case a.R.SpecialId.FreePremiumAlerts:return o.v.WithSuccess.getAlertHandler(e,t);default:return(0,i.vE)(n)}},c=(e,t,n,r,i)=>a=>n(a)?o.v.WithBundles.getAlertsHandler(e,t,i):r(a);class u{constructor(e,t,n,r){this._lensPredicate=e,this._inner=t,this._itemEq=n,this._itemOrd=r}create(e,t){return this._lensPredicate(t)?o.v.WithBundles.create(e,t,this._itemEq,this._itemOrd):this._inner.create(e,t)}}class d{constructor(e,t){this._itemEq=e,this._itemOrd=t}create(e,t){const n=()=>o.v.WithSuccess.create(e,t,this._itemEq,this._itemOrd);if(a.R.isOutcomeId(e))return n();switch(e){case a.R.SpecialId.Premium:return o.v.Premium.create(t,this._itemEq,this._itemOrd);case a.R.SpecialId.AllAlerts:case a.R.SpecialId.Priority:case a.R.SpecialId.PredictionTakeaways:case a.R.SpecialId.PredictionEmogenie:case a.R.SpecialId.RealTimeProofit:case a.R.SpecialId.FreePremiumAlerts:return n();default:return(0,i.vE)(e)}}}},17372:(e,t,n)=>{var r,i;n.d(t,{K:()=>r,z:()=>i}),function(e){e.isPriorityMode=e=>e===i.priority}(r||(r={})),function(e){e.priority="priority",e.all="all"}(i||(i={}))},66866:(e,t,n)=>{n.d(t,{EQ:()=>R,ay:()=>F,$A:()=>P});var r,i=n(29909),a=n(57050),s=n(40327),o=n(95195),l=n(8125),c=n(95574),u=n(22232),d=n(5114),p=n(83078),m=n(74660),h=n(66896),g=n(32952),f=n(28043),y=n(66310),x=n(40151),v=n(44586),b=n(78674),C=n(77176),I=n(93508),S=n(598),w=n(83401),E=n(98403),A=n(19751),k=n(76974),T=n(2834),M=n(41398),N=n(55935),L=n(60797),O=n(85985),_=n(73975),D=n(71249);!function(e){e.eq=(0,_.MW)({alert:(0,_.Uz)((e=>e.id))(_.w4),highlightIndex:_.w4}),e.getEq=()=>e.eq,e.getHighlightRange=e=>D.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(r||(r={}));var F,P,R,j=n(35416),U=n(93265);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(F||(F={})),function(e){e.Mock=class{constructor(){this.events=new g.xQ,this.focusAlertHighlight=()=>o.left(new Error("Method not implemented.")),this.highlightAlertHighlight=()=>o.left(new Error("Method not implemented.")),this.moveCursorToHighlight=l.Q1}ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}},e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,o.mapLeft((()=>new Error("Mark is collapsed"))),o.chain((t=>c.tryCatchError((()=>{const n=e.getHighlightRanges(),r=n.length>1?n.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,u.kG)(-1!==r,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:n,targetRange:t}))),r})))))}}(P||(P={})),function(e){e.getHighlightSubscribtion=(e,t,n)=>e.pipe(f.x(d.getEq(m.h$.ord).equals),y.w((e=>(0,s.pipe)(e,d.fold((()=>x.E),(e=>v.y.create((()=>(n.debug(`highlight mark: ${e.id}`),(0,s.pipe)(t.highlightAlertHighlight(e),o.fold((t=>(n.error("Cannot highlight mark",t,{alertId:e.id}),l.Q1)),(t=>()=>{n.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),e.getHoverAlertHightlightSource=(e,t,n,r)=>(0,s.pipe)(r,b.b(100),C.U((0,a.ls)(d.chain((r=>{const i=e.get();return j.nL.hasCards(i)?i.currentLens.items.find((e=>(0,s.pipe)(t.hasActiveAlert(e),d.map((e=>e.alert)),d.exists((t=>e.id===r&&n.isRegistered(t.id)))))):d.none})),d.chain((({value:e})=>t.hasActiveAlert(e))),d.map((e=>e.alert)))),f.x(d.getEq(m.h$.ord).equals),C.U(d.map((t=>({alert:t,highlightIndex:0,source:e.get().alertSource})))),I.O(d.none)),e.highlightMarkByHighlightedCard=(t,n,r,i,o,l)=>{const c=e.getHighlightSubscribtion(t.hovered.pipe(b.b(100),C.U((0,a.ls)(d.chain((e=>{const t=n.get();return j.nL.hasCards(t)?t.currentLens.items.find((t=>(0,s.pipe)(o.hasActiveAlert(t),d.map((e=>e.alert)),d.exists((n=>t.id===e&&i.isRegistered(n.id)))))):d.none})),d.chain((({value:e})=>o.hasActiveAlert(e))),d.map((e=>e.alert))))),r,l);return{id:"highlightMarkByHighlightedAlert",when:h.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(c.pipe(S.c(w.C)))}},e.getAlertHighlightSource=e=>t=>(0,s.pipe)(t,f.x(d.getEq(m.h$.ord).equals),C.U(d.map((t=>({alert:t,source:e,highlightIndex:0})))),I.O(d.none)),e.getActiveHighlightSource=(e,t,n)=>e.view(j.nL.mapper((({currentLens:e,alertSource:t})=>(0,s.pipe)(n(e),d.map((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(y.w(E.b2.rafScheduler),A.skipBy(d.getEq(r.getEq())),C.U(d.filter((e=>d.isSome(t.getRegistered(e.alert.id)))))),e.focusMarkByActiveAlert=(t,n,r,i,a,c=k.of(!0))=>{const u=(0,s.pipe)(e.getActiveHighlightSource(t,r,i),T.b(p.tap((e=>a.trace("new alert highlight: ",e)))),M.M(c),y.w((([e,t])=>(0,s.pipe)(e,d.fold((()=>(a.debug("Nothing to focus"),x.E)),(e=>v.y.create((()=>(a.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}`),e.source===m.l$.sidebar&&t&&n.moveCursorToHighlight(e,"start"),(0,s.pipe)(n.focusAlertHighlight(e),o.fold((t=>(a.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),l.Q1)),(t=>()=>{a.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))))));return{id:"focusMarkByActiveAlert",when:h.R.isWithAlertsId,what:j.nL.Effect.Applicator.create(u.pipe(S.c(w.C)))}},e.focusAlertByClickedMark=(e,t,n)=>({id:"focusAlertByActiveMark",when:j.nL.Effect.When.isSidebarOpen,what:j.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(N.T(1),L.oA,M.M(t.pipe(O.h(j.nL.hasCards))),O.h((([e,t])=>m.bZ.State.isRegistered(e.alert.state)&&(0,s.pipe)(e.alert,U.v.findItemWithAlertInLens(t.currentLens,n),d.isSome))),C.U(i.li),C.U((({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:m.l$.text,options:{order:"textOrder"}})))))}),e.createOnAlertApplySideEffect=function(e,t){const n=e.pipe(C.U((e=>n=>e.type===F.Type.AppliedAlertAnimationFinished&&n.currentLens.meta.filter(e.alert)&&m.bZ.isApplicableAlert(e.alert)&&j.nL.hasItems(n)?n.patch({currentLens:t.finishApplyAnimation([e.alert])(n.currentLens),alertSource:e.alert.state.source}):n)));return{id:"onAlertApply",when:j.nL.Effect.When.isSidebarOpen,what:j.nL.Effect.Applicator.create(n)}}}(R||(R={}))},91605:(e,t,n)=>{n.d(t,{Bo:()=>o,Sh:()=>s,TV:()=>i,eh:()=>a});var r,i,a,s,o,l=n(38983),c=n(5114),u=n(8125),d=n(66896),p=n(32952),m=n(4890),h=n(87363),g=n(17372);!function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.ProofitHook=3]="ProofitHook",e[e.GbVoxHook=4]="GbVoxHook",e[e.GbEnableVoxHook=5]="GbEnableVoxHook"}(r||(r={})),function(e){e.NotAvailable="NotAvailable",e.DemoDoc="DemoDoc",e.EmptyDocument="EmptyDocument"}(i||(i={})),function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(a||(a={})),function(e){e.NotAvailable="NotAvailable"}(s||(s={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={})),e.documentActionAvailable={kind:"available"},e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e}),e.cheetahDisabled=e=>({kind:"disabled",reason:e});e.Mock=class{constructor(n={}){this.activeLensId=l.h.create(d.R.SpecialId.AllAlerts).view(),this.documentActions=l.h.create({proofit:e.documentActionAvailable,plagiarism:e.documentActionAvailable,cheetah:e.cheetahDisabled(s.NotAvailable)}),this.popover=l.h.create(c.none),this.showMuteControl=l.h.create(!1),this.isDocumentActionsDisabled=l.h.create(!1),this.lensMode=l.h.create(g.z.all),this.defaultLensMode=g.z.all,this.events=new p.xQ,this.lensModeEvents=new p.xQ,this.lensTitleType=t.default,this.dispose=u.Q1,this.a11yContrast=!1,this.cardVisualMode=l.h.create(m.j.CardVisualMode.RegularLightMode);const r=new h.c.Mock(n);this.lensPreviews=l.h.create(r.lensPreviews)}}}(o||(o={}))},64992:(e,t,n)=>{n.d(t,{O:()=>v,x:()=>x});var r=n(45701),i=n(18208),a=n(68983),s=n(66896),o=n(49435);function l(e){return`${e} ${i.pluralize(e,"alert","alerts")}`}const c=e=>(t,n,r,i,a)=>t?l(n.count):e(n,r,i,a),u=(e,t)=>(n,r,i,a)=>{const s=a?n.count:n.priorityCount;return s>0?l(s):i&x.IsDocumentEmpty?e:t},d={description:"Improves spelling, grammar, and punctuation.",stateMessage:c(u("No alerts","Looking good"))},p={description:"Helps make your writing easier to understand.",stateMessage:c(((e,t,n)=>{const i=(0,a.W)(r.lt(o.g.ord))(t);if(n&x.IsDocumentEmpty)return"So far so good";if(e.count>0){if(o.g.isMin(t))return l(e.count);if(i(o.g.fromNumber(20)))return"Unclear";if(i(o.g.fromNumber(70)))return"A bit unclear";if(i(o.g.fromNumber(85)))return"Mostly clear";if(i(o.g.fromNumber(95)))return"Clear"}return"Very clear"}))},m={description:"Helps make your writing more interesting and effective.",stateMessage:c(((e,t,n)=>{const i=n&x.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(r.lt(o.g.ord))(t);if(n&x.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Bland";if(c(o.g.fromNumber(80)))return"A bit bland";if(c(o.g.fromNumber(95)))return"Engaging"}return"Very engaging"}))},h={description:"Helps you make the right impression on your reader.",stateMessage:c(((e,t,n)=>{const i=n&x.IsFreeUser,s=o.g.isMin(t),c=(0,a.W)(r.lt(o.g.ord))(t);if(n&x.IsDocumentEmpty||i&&s)return"Nothing yet";if(i||e.count>0){if(s)return l(e.count);if(c(o.g.fromNumber(20)))return"Serious issues";if(c(o.g.fromNumber(40)))return"Very off";if(c(o.g.fromNumber(95)))return"Slightly off"}return"Just right"}))},g={description:"Your organizations writing guidelines.",stateMessage:c(u("Nothing yet","All good"))},f={description:"Details on terms",stateMessage:c(u("Nothing yet","All good"))},y={[s.R.SpecialId.Correctness]:d,[s.R.SpecialId.CorrectnessPriority]:d,[s.R.SpecialId.Clarity]:p,[s.R.SpecialId.ClarityPriority]:p,[s.R.SpecialId.Engagement]:m,[s.R.SpecialId.EngagementPriority]:m,[s.R.SpecialId.Delivery]:h,[s.R.SpecialId.DeliveryPriority]:h,[s.R.SpecialId.Vox]:g,[s.R.SpecialId.VoxPriority]:g,[s.R.SpecialId.KnowledgeHub]:f,[s.R.SpecialId.KnowledgeHubPriority]:f,[s.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:c(((e,t,n)=>n&x.IsLensVisited&&!(n&x.IsDocumentEmpty)?n&x.IsLensActive?o.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"))},[s.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,n)=>n&x.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i.pluralize(e.count,"alert","alerts")}`))},[s.R.SpecialId.FreePremiumAlerts]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,n)=>n&x.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i.pluralize(e.count,"alert","alerts")}`))}};var x;function v(e){return y[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(x||(x={}))},12768:(e,t,n)=>{n.d(t,{g:()=>i});var r,i,a=n(5114),s=n(8125),o=n(76974),l=n(38983);!function(e){let t,n;!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(t=e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){e.Mock=class{constructor(){this.downloadStarted=l.h.create(!1),this.beginDownload=s.Q1,this.tryToInterrupt=s.Q1,this.generateReport=()=>{throw new Error("Method not implemented.")},this.reportData=l.h.create(a.none),this.dedHTML="",this.dispose=s.Q1}}}(n=e.ViewModel||(e.ViewModel={}))}(r||(r={})),function(e){let t,n;!function(e){let t;!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(t=e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){e.Mock=class{constructor(e={type:t.Type.EMPTY},n=a.some(new r.ViewModel.Mock)){this.statisticsState=e,this.reportViewModel=n,this.state=o.of(this.statisticsState),this.onModalClose=s.Q1}}}(n=e.ViewModel||(e.ViewModel={}))}(i||(i={}))},27125:(e,t,n)=>{if(n.d(t,{L:()=>S,g:()=>i}),3075==n.j)var r=n(40327);var i,a=n(38983);if(3075==n.j)var s=n(84966);if(3075==n.j)var o=n(5114);if(3075==n.j)var l=n(66896);if(3075==n.j)var c=n(32952);if(3075==n.j)var u=n(85985);if(3075==n.j)var d=n(77176);if(3075==n.j)var p=n(66310);if(3075==n.j)var m=n(98403);if(3075==n.j)var h=n(93508);if(3075==n.j)var g=n(16118);if(3075==n.j)var f=n(76974);if(3075==n.j)var y=n(50628);if(3075==n.j)var x=n(17343);if(3075==n.j)var v=n(60797);if(3075==n.j)var b=n(2834);if(3075==n.j)var C=n(35416);if(3075==n.j)var I=n(6100);class S{constructor(e,t,n,f,y,x,v,b=I.v.WithSuccess.State.isInSuccess(f),S){this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this._capabilities=f,this.nonPriorityOptions=y,this.mutedAlertsOptions=x,this.hasNonPriorityAlerts=v,this.isInSuccess=b,this._withBirthday=S,this._getTextAmount=e=>0===e?i.TextAmount.zero:e<=s.hD?i.TextAmount.small:i.TextAmount.large,this._subs=[],this.textAmount=a.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new c.xQ,this.applicatorEffects={id:"successViewModel.effects",when:l.R.isWithAlertsId,what:C.nL.Effect.Applicator.create(this.actionEvents.pipe(u.h((({type:e})=>e===i.ActionType.More)),d.U((()=>e=>{const t=e.patch({currentLens:C.nL.hasItems(e)&&(0,C.yi)(e.currentLens)?this._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,r.pipe)(C.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):o.none,o.fold((()=>t),(e=>t.patch({currentLens:C.nL.hasItems(t)?this._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens}))))}))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:C.nL.isLensview(e)&&C.nL.hasItems(e)&&0!==this._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:l.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(p.w(m.Ft(this._documentModel.documentLength.view("trimmed"))),d.U(this._getTextAmount)).subscribe(m.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(h.O(this._currentLens.get()),g.G(),d.U((([e,t])=>t.isSuccess?o.some({prevLensType:e.type,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}):o.none))),this._textAmountToSuccessType=e=>e===i.TextAmount.zero?{type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===i.TextAmount.large?{type:i.SuccessType.large}:{type:i.SuccessType.small},this.successState=a.h.create({type:i.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,r.pipe)(y,o.map((e=>({hasNonPriorityAlerts:this._state.view(v),reviewNonPriorityAlerts:()=>{e.trackNonPriorityToggle(),this.actionEvents.next({type:i.ActionType.More})}})))),this.mutedAlerts=(0,r.pipe)(x,o.map((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===i.SuccessType.applied||e.type===i.SuccessType.zero?f.of(e):this._documentModel.checkingState.pipe(u.h((e=>"checking"!==e)),y.P(),x.h(e));return this._lensSwitch.pipe(v.cp((t=>this.textAmount.pipe(d.U(this._textAmountToSuccessType),h.O(t.prevLensType===C.Nm.lensview?{type:i.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),g.G(),d.U((([e,t])=>e.type===i.SuccessType.applied&&t.type!==i.SuccessType.zero?e:t)),p.w(((t,n)=>0===n?f.of(t):e(t))),b.b((e=>{this._trackSuccessStateChanged(e.type===i.SuccessType.applied?"applied":e.type===i.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(m.wW(this.successState))}}!function(e){let t,n,r;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(n=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(r=e.SuccessType||(e.SuccessType={}));e.Mock=class{constructor(){this.textAmount=a.h.create(n.zero),this.successState=a.h.create({type:r.zero,showBirthday:!1}),this.mutedSuggestionsCount=a.h.create(0),this.hasNonPriorityAlerts=a.h.create(!1)}reviewMutedSuggestions(){throw new Error("Method not implemented.")}reviewNonPriorityAlerts(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}}}(i||(i={}))},85287:(e,t,n)=>{n.d(t,{$4:()=>P,AP:()=>l,Dn:()=>s,IY:()=>A,bb:()=>R,rD:()=>I});var r=n(89894),i=n(40219),a=n(50224);const s="linear",o=r.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=r.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=r.ux.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),u=r.ux.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),d=r.ux.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=r.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=r.ux.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=r.ux.keyframes({"0%, 100%":{opacity:0}}),g=r.ux.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=r.ux.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=r.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),x=r.ux.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),v=r.ux.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),b=r.ux.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),C={position:"relative",margin:`${r.ux.rem(.5)} ${r.ux.rem(2)} ${r.ux.rem(.5)} 0`,userSelect:"none"},I={position:"absolute",width:r.ux.percent(100),pointerEvents:"none"},S={opacity:0,animation:`${o} ${r.ux.seconds(i.v4/4/1e3)} ${s} ${r.ux.seconds(i.v4/1e3)} forwards`},w={transformOrigin:"top",animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},E={transformOrigin:"bottom",animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},A={transformOrigin:"top",willChange:"contents"},k={animation:`${u} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},T={animation:`${d} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},M={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${s} reverse forwards`},N={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},L={animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},O={animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${s} reverse forwards`},_={transformOrigin:"top",animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${f} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`}}},D={position:"absolute",width:r.ux.percent(100),transformOrigin:"top",animation:`${y} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${x} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${s} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${r.ux.rem(-1)})`}}},F={transformOrigin:"top",animation:`${v} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${b} ${r.ux.seconds(i.v4/1e3)} ${s} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${s} none`}}},P=r.ux.stylesheet({wrapper:[C],animationWrapper:[{position:"relative"}],shade:[I],focused2renderedMain:[S],focused2renderedShade:[I,w],focused2renderedShadeClockwise:[I,E],rendered2focusedMainBase:[A],rendered2focusedMain:[A,k],rendered2focusedMainClockwise:[A,T],addedMain:[M],rendered2removedShade:[I,N],openedMain:[L],closedMain:[O],focused2successMain:[_],focused2successShade:[D],success2FocusedMain:[F]}),R=new Map([[l,P.focused2renderedShade],[c,P.focused2renderedShadeClockwise],[p,P.rendered2removedShade],[y,P.focused2successShade]])},22800:(e,t,n)=>{n.d(t,{S:()=>w,c:()=>E});var r=n(89894),i=n(40219),a=n(85287),s=n(50224);const o=r.ux.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=r.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=r.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),u=r.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),d=r.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=r.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=r.ux.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=r.ux.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=r.ux.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=r.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=r.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),x={opacity:0,animation:`${o} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},v={transformOrigin:"top",animation:`${a.AP} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},b={transformOrigin:"top",animation:`${d} ${r.ux.seconds(i.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${u} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},I={animation:`${f} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${s.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${s.g.bundleFakeCard2Selector}`]:{animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${y} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},w=r.ux.stylesheet({focused2renderedBundleMain:[x],focused2renderedBundleShade:[a.rD,v],focused2renderedBundleShadeClockwise:[a.rD,b],rendered2focusedBundleMain:[a.IY,C],rendered2focusedBundleMainClockwise:[a.IY,I],rendered2focusedBundleShade:[a.rD,S]}),E=new Map([[a.AP,w.focused2renderedBundleShade],[d,w.focused2renderedBundleShadeClockwise],[y,w.rendered2focusedBundleShade]])},22391:(e,t,n)=>{n.d(t,{N:()=>C,p:()=>r});var r,i=n(27378),a=n(57050),s=n(5114),o=n(73975),l=n(15073),c=n(40151),u=n(76974),d=n(90845),p=n(598),m=n(60797),h=n(77176),g=n(28043),f=n(19751),y=n(66310),x=n(23063),v=n(41398),b=n(93508);function C(e=12){const{ref:t,onMount:n}=d.P.useElWatcher(),{cardHeight:c,cardVisibleViewportHeight:p}=i.useContext(r.Context),m=i.useContext(l.u.Context);return{onMount:n,maxHeight:i.useRef(t.pipe(y.w(s.fold((0,a.a9)(u.of(s.none)),(e=>c.pipe(x.q(1),v.M(p),h.U((([t,n])=>(0,a.zG)(n,s.map((n=>e.offsetHeight+Math.max(0,n-t)))))))))),b.O(s.none),v.M(m.pipe(b.O(void 0),h.U(s.fromNullable))),h.U((([t,n])=>(0,a.zG)(t,s.alt((()=>(0,a.zG)(n,s.map((t=>e*t)))))))),g.x(s.getEq(o.lr).equals))).current,ref:t}}!function(e){e.Context=i.createContext({cardHeight:c.E,cardVisibleViewportHeight:u.of(s.none)}),e.Provider=t=>{const{ref:n,onMount:r}=d.P.useElWatcher(),a=i.useRef({cardHeight:t.card.pipe(p.c(n.pipe(m.oA,h.U((e=>e.offsetHeight)))),g.x(),f.shareReplay({bufferSize:1,refCount:!0})),cardVisibleViewportHeight:t.cardVisibleViewportHeight.pipe(g.x(s.getEq(o.lr).equals),f.shareReplay({bufferSize:1,refCount:!0}))});return i.createElement(e.Context.Provider,{value:a.current},t.children(r))}}(r||(r={}))},54290:(e,t,n)=>{n.d(t,{b:()=>fe});var r=n(27378),i=n(57050),a=n(40327),s=n(5739),o=n(38983),l=n(5114),c=n(99094),u=n(66268),d=n(85287),p=n(22800),m=n(35108);const h=({children:e,mount:t})=>r.createElement(s.F.div,{"data-role":"animation-wrapper",className:d.$4.animationWrapper,mount:t},e),g=e=>(0,a.pipe)(l.fromNullable(e.activeAlert),l.fold((()=>e.id),(e=>e.id)));class f extends r.Component{constructor(){super(...arguments),this._elementState=c.f.emptyWithName("card")}_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:u.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:n}=this.props;if(!t.visualState.incomplete)return r.createElement(h,{mount:this.props.mount},r.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const f=n||m.SA,{main:y,shade:x}=f(t.visualState),v=o.h.create(void 0===x?l.none:(0,a.pipe)(t.visualState.from,l.map((e=>({state:e,className:x})))));return!Boolean(y)&&l.isNone(v.get())&&requestAnimationFrame((()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),r.createElement(c.f.Context.Provider,{value:this._elementState},r.createElement(h,{mount:this.props.mount},v.view((0,i.ls)(l.map((({state:n,className:i})=>r.createElement(s.F.div,{className:i,key:"shade"+n+g(t),onAnimationEnd:n=>{p.c.get(n.animationName)!==i&&d.bb.get(n.animationName)!==i||(e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>v.set(l.none))))}},this._stateToElement(n)))),l.toUndefined)),r.createElement(s.F.div,{className:y,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:u.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:u.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}}var y=n(12187),x=n(44060),v=n(31278),b=n(3656),C=n(89894),I=n(24588),S=n(40219);class w extends r.Component{constructor(){super(...arguments),this._ref=r.createRef(),this._createCardToggler=e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})}componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:i,counter:a,className:o,hideActivateButton:l,hideDot:c}=this.props;return r.createElement(s.F.div,Object.assign({"data-aid":t,mount:e=>this._ref.current=e,onClick:t=>{const r=e();n.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,y.Sh)(o,R.wrapper,null!=c&&c?null:R.miniCard)),r.createElement(b.XY,Object.assign({},(0,y.Sh)(R.contentWrapper,null!=c&&c?R.contentWrapperWithoutDot:R.contentWrapperWithDot)),i),r.createElement("div",{className:R.iconContainer},a&&r.createElement("div",{className:A},a),null!=l&&l?null:r.createElement("div",{className:T},r.createElement(v.JO.Arrow,{className:R.activeTopIcon}),r.createElement(v.JO.Arrow,{className:R.activeBottomIcon}))))}}const E="baseMiniCounterContainer",A=C.ux.joinClasses([E,C.ux.style({position:"absolute",height:C.ux.percent(100),top:0,right:0,zIndex:S.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),k="baseMiniActivateBtnSelector",T=C.ux.joinClasses([k,C.ux.style({position:"absolute",top:0,right:0,height:C.ux.percent(100),zIndex:S.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:x.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),M={position:"relative",display:"flex",overflow:"hidden",borderRadius:C.ux.rem(S.fx),background:x.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:C.ux.seconds(.2)},[`&:hover .${k}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},N={overflow:"hidden",color:I.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:C.ux.rem(1.5)},L={margin:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`},O={paddingLeft:C.ux.rem(.5)},_={position:"absolute",top:0,right:C.ux.rem(.5),bottom:0,display:"flex"},D={display:"flex",margin:`${C.ux.rem(.1)} 0 ${C.ux.rem(-1.25)}`,transform:"rotate(180deg)"},F={$nest:{"&:before":{position:"absolute",width:C.ux.px(10),height:C.ux.px(10),borderRadius:C.ux.percent(50),content:"''",transform:"scale(.5)"}}},P={$nest:{"&:before":{margin:`auto 0 auto ${C.ux.rem(.75)}`}}},R=C.ux.stylesheet({wrapper:[M],contentWrapper:[N],contentWrapperWithDot:[L],contentWrapperWithoutDot:[O],iconContainer:[_],activeTopIcon:[D],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[F],miniCard:[F,P]});var j=n(32096),U=n(52187);class $ extends r.Component{constructor(){super(...arguments),this._ref=r.createRef(),this._createCardToggler=e=>()=>this.props.actions.next({type:u.lY.Type.hover,kind:e,id:this.props.cardId})}componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:i,counter:a,className:o,hideActivateButton:l,hideDot:c,sduiStyle:d}=this.props;return r.createElement(s.F.div,Object.assign({"data-aid":t,tabIndex:0,role:"button","aria-disabled":!1,mount:e=>this._ref.current=e,onClick:t=>{const r=e();n.next({type:u.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.target.click(),e.preventDefault())},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,y.Sh)(o,null!=d&&d?ee.sduiWrapper:ee.wrapper,null!=c&&c?null:ee.miniCard)),r.createElement(b.XY,Object.assign({},(0,y.Sh)(ee.contentWrapper,null!=c&&c?ee.contentWrapperWithoutDot:ee.contentWrapperWithDot)),i),r.createElement("div",{className:ee.iconContainer},a&&r.createElement("div",{className:z},a),null!=l&&l?null:r.createElement("div",{className:W},r.createElement(v.JO.Arrow,{className:ee.activeTopIcon}),r.createElement(v.JO.Arrow,{className:ee.activeBottomIcon}))))}}const B="baseMiniCounterContainer",z=C.ux.joinClasses([B,C.ux.style({position:"absolute",height:C.ux.percent(100),top:0,right:0,zIndex:S.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),G="baseMiniActivateBtnSelector",W=C.ux.joinClasses([G,C.ux.style({position:"absolute",top:0,right:0,height:C.ux.percent(100),zIndex:S.VN,display:"flex",flexDirection:"column",margin:"auto 0",opacity:0,justifyContent:"center"})]),H={position:"relative",display:"flex",overflow:"hidden",borderRadius:C.ux.rem(j.fx),background:x.Il.CoreNeutral0,boxShadow:U.S.z100,cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral10,transitionDuration:C.ux.seconds(.2)},"&:focus":{background:x.Il.CoreNeutral10,boxShadow:`${U.S.z100}, 0 0 0 2px rgb(99 142 235)`,outline:"none"},"&:hover .baseMiniActivateBtnSelector":{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},V={boxShadow:U.s.llamaShadowToken},Y={overflow:"hidden",color:I.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:C.ux.rem(1.5)},Z={margin:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`},Q={paddingLeft:C.ux.rem(.5)},q={position:"absolute",top:0,right:C.ux.rem(.5),bottom:0,display:"flex"},J={display:"flex",margin:`${C.ux.rem(.1)} 0 ${C.ux.rem(-1.25)}`,transform:"rotate(180deg)"},X={$nest:{"&:before":{position:"absolute",width:C.ux.px(10),height:C.ux.px(10),borderRadius:C.ux.percent(50),content:"''",transform:"scale(.5)"}}},K={$nest:{"&:before":{margin:`auto 0 auto ${C.ux.rem(.75)}`}}},ee=C.ux.stylesheet({wrapper:[H],sduiWrapper:[H,V],contentWrapper:[Y],contentWrapperWithDot:[Z],contentWrapperWithoutDot:[Q],iconContainer:[q],activeTopIcon:[J],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[X],miniCard:[X,K]});var te,ne=n(8125),re=n(50474),ie=n(64757),ae=n(57091),se=n(50224);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(te||(te={}));const oe=({actions:e,isLastCard:t})=>{const n=r.useContext(re.m.Context).successLens.fixedText.titles,i=o.h.create(te.stage0),a=()=>e.next({type:u.lY.Type.switchToNext});return r.createElement(s.F.div,{className:ge.successWrapper},r.createElement(b.P1,{className:ge.successText,onAnimationEnd:()=>{i.set(te.stage1)}},n[(0,ne.TN)(n.length)]),r.createElement(s.F.span,null,i.view((e=>e>=te.stage1&&r.createElement("span",{onAnimationEnd:()=>i.set(te.stage2)},r.createElement(v.JO.CheckmarkAnimated,{className:ge.successCheckMark}))))),r.createElement(s.F.span,{className:ge.successBtnHolder},t.pipe(ae.a(i,((e,t)=>t<te.stage2?null:e?r.createElement(ie.zx.Caps,{className:ge.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):r.createElement(ie.zx.Caps,{className:ge.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},le=C.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),ce={fontWeight:"bold",lineHeight:C.ux.rem(2),animation:`${le} ${C.ux.seconds(.2)} linear forwards`},ue={position:"relative",borderRadius:C.ux.rem(S.Jr),background:x.Il.CoreNeutral0,boxShadow:`0 ${C.ux.rem(.625)} ${C.ux.rem(S.mJ)} 0 rgba(198, 203, 222, .45)`},de={display:"flex",padding:`${C.ux.rem(1.5)} ${C.ux.rem(2)}`,alignItems:"center"},pe={marginLeft:C.ux.rem(1),minWidth:0,minHeight:0,width:C.ux.rem(1.325),height:C.ux.rem(1.325),animation:`${le} ${C.ux.seconds(.2)} linear forwards`},me={float:"right",width:C.ux.rem(4),textAlign:"center",animation:`${le} ${C.ux.seconds(.2)} linear forwards`},he={backgroundColor:x.Il.CoreGreen50,color:x.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:I.mb}}},ge=Object.assign(Object.assign({},C.ux.stylesheet({successText:[ce],successCheckMark:[pe],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[me],doneBtn:[me,he]})),{fullCard:C.ux.joinClasses([se.g.fullCardSelector,C.ux.style(ue)]),successWrapper:C.ux.joinClasses([se.g.successWrapperSelector,C.ux.style(ue,de)])});var fe;!function(e){e.Mini=w,e.MiniContrast=$,e.Card=f,e.Success=oe}(fe||(fe={}))},50224:(e,t,n)=>{n.d(t,{g:()=>y,m:()=>x});var r=n(44060),i=n(89894),a=n(24588),s=n(40219);const o={position:"relative",borderRadius:i.ux.rem(s.Jr),background:r.Il.CoreNeutral0,boxShadow:`0 ${i.ux.rem(.625)} ${i.ux.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},l={$nest:{"&:before":{position:"absolute",width:i.ux.px(10),height:i.ux.px(10),borderRadius:i.ux.percent(50),content:"''",transform:"scale(.5)"}}},c={$nest:{"&:before":{backgroundColor:a.kl}}},u={$nest:{"&:before":{backgroundColor:a.AX}}},d={$nest:{"&:before":{backgroundColor:r.Il.CoreRed50}}},p={$nest:{"&:before":{backgroundColor:r.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:r.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:r.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:r.Il.CoreNeutral50}}},f={$nest:{"&:before":{backgroundColor:r.Il.CoreNeutral50}}},y={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},x=Object.assign(Object.assign({},i.ux.stylesheet({dot:[l],dotAdvanced:[u],dotCritical:[c],dotCorrectness:[d],dotClarity:[p],dotEngagement:[m],dotDelivery:[h],dotVox:[g],knowledgeHub:[f]})),{fullCard:i.ux.joinClasses([y.fullCardSelector,i.ux.style(o)])})},35108:(e,t,n)=>{n.d(t,{CE:()=>r,SA:()=>u,a:()=>d});var r,i=n(40327),a=n(5114),s=n(8125),o=n(81531),l=n(85287),c=n(22800);function u({from:e,transition:t,incomplete:n}){if(!n)return{};const r=p("transitionClassMapper");return(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function d({from:e,transition:t,incomplete:n}){return n?(0,i.pipe)(e,a.map((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),a.getOrElse((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:n,shade:r}=e(t);return{main:a.fromNullable(n),shade:a.fromNullable(r)}}}}(r||(r={}));const p=(0,s.HP)(o.C8.Logging.getLogger)},28584:(e,t,n)=>{n.d(t,{$x:()=>C,Im:()=>I,a0:()=>r,oL:()=>O});var r,i=n(27378),a=n(40327),s=n(12187),o=n(5114),l=n(83078),c=n(50474),u=n(64757),d=n(48911),p=n(31278),m=n(65223),h=n(3656),g=n(66896),f=n(74660),y=n(17594),x=n(4890),v=n(50224),b=n(36642);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(r||(r={}));const C=({className:e,vox:t,isMinimalCard:n})=>{const{vox:{styleGuide:r}}=i.useContext(c.m.Context);return i.createElement("div",Object.assign({},(0,s.Sh)(e,b.h.voxTitle,n?b.h.minimalTitle:void 0)),i.createElement("span",null,t.companyName," ",r))},I=({logoUrl:e,className:t})=>i.createElement("img",Object.assign({alt:"company logo","aria-hidden":!0,src:e},(0,s.Sh)(t,b.h.voxLogo))),S=({title:e,layoutDensity:t})=>i.createElement(h.XY,{className:(0,a.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>b.h.minimalTitle),(()=>b.h.toneTitle)))},i.createElement(d.dy,{emojiClassName:b.h.toneLogo},e));function w(e){return g.R.outcomeTypeMatch({correctness:v.m.dotCorrectness,clarity:v.m.dotClarity,premium:v.m.dotAdvanced,engagement:v.m.dotEngagement,delivery:v.m.dotDelivery,vox:v.m.dotVox,knowledgeHub:v.m.knowledgeHub})(e.lensType)}function E(e){return g.R.outcomeTypeMatch({correctness:i.createElement(p.JO.Correctness,{className:b.h.cardLogo}),clarity:i.createElement(p.JO.ClarityOutcome,{className:b.h.cardLogo}),premium:i.createElement(p.JO.Star,{className:b.h.cardLogo}),engagement:i.createElement(p.JO.EngagementOutcome,{className:b.h.cardLogo}),delivery:i.createElement(p.JO.DeliveryOutcome,{className:b.h.cardLogo}),vox:null,knowledgeHub:null})(e.lensType)}function A(e,t,n,r,c,u){const{extraProperties:m}=e;return y.$.isTakeaway(e)?function(e,t,n){return{style:"",description:i.createElement("div",{className:(0,a.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>b.h.minimalTitle),(()=>{})))},l.contains(f.TO.correctlyDetected)(e.takeawayFeedback)&&e.takeawayIsLikelyToBeRead?i.createElement(p.JO.ValidationOk,Object.assign({width:16},(0,s.Sh)(b.h.cardLogo,b.h.takeawayIcon))):i.createElement(p.JO.Megaphone,Object.assign({width:16},(0,s.Sh)(b.h.cardLogo,b.h.takeawayIcon))),t===x.j.Density.minimal?n:e.lensName)}}(e,n,u):y.$.isShortenIt(e)?k(e,n,c,u):y.$.isToneAI(e)?function(e){return{style:w(e),description:i.createElement(h.XY,{className:b.h.minimalTitle},e.title)}}(e):y.$.isEthicalAI(e)?function(e){return{style:"",description:i.createElement("div",null,void 0!==e.emojiID?i.createElement(d.In,{id:e.emojiID,className:b.h.toneLogo}):i.createElement(p.JO.EthicalAI.Heart,Object.assign({},(0,s.Sh)(b.h.cardLogo))),i.createElement(h.x4,{className:b.h.ethicalAILabel},e.miniCardTitle))}}(e):y.$.isSuggestedSnippet(e)?function(e){return{style:w(e),description:i.createElement(h.XY,{className:b.h.minimalTitle},e.title)}}(e):y.$.isKnowledgeHubSuggestedTerm(e)?function(e){return{style:w(e),description:i.createElement(h.XY,{className:b.h.minimalTitle},e.miniCardTitle)}}(e):o.isSome(m.tone)?function(e,t){return{style:w(e),description:i.createElement(S,{title:e.title,layoutDensity:t})}}(e,n):t?o.isSome(m.vox)?function(e,t){return{style:v.m.dotVox,description:i.createElement(i.Fragment,null,(0,a.pipe)(e.logoUrl,o.fold((()=>null),(e=>i.createElement(I,{logoUrl:e,className:b.h.cardLogo})))),i.createElement(C,{vox:e,isMinimalCard:t===x.j.Density.minimal}))}}(m.vox.value,n):y.$.isFree(e)?k(e,n,c,u):function(e,t,n,r){return{style:(0,a.pipe)(r,x.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:i.createElement(i.Fragment,null,(0,a.pipe)(r,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>E(e)})),i.createElement("div",Object.assign({},(0,s.Sh)(b.h.dualItemLabel,(0,a.pipe)(n,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>b.h.minimalTitle),(()=>{}))))),i.createElement("span",{className:b.h.dualItemLabel},e.lensName,i.createElement(N,{highlightStyle:t}))))}}(e,r,n,c):null}function k(e,t,n,r){return(0,a.pipe)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>function(e,t,n){return{style:(0,a.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:Boolean(n)?n:i.createElement(i.Fragment,null,(0,a.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>E(e)})),i.createElement(h.XY,{className:b.h.minimalTitle},e.miniCardTitle))}}(e,n,r)),(()=>function(e,t){return{style:(0,a.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:i.createElement(i.Fragment,null,(0,a.pipe)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>E(e)})),e.lensName)}}(e,n))))}const T=({label:e})=>i.createElement("span",{className:b.h.fluencyLabel},e,i.createElement(u.RZ,{iconWidth:10,buttonClass:b.h.fluencyInfo,iconClass:b.h.fluencyInfo,title:i.useContext(c.m.Context).card.fluency.tooltip})),M=({style:e,description:t})=>i.createElement("span",Object.assign({},(0,s.Sh)(b.h.lens,b.h.dot,e)),t),N=({highlightStyle:e})=>{const t=i.useContext(c.m.Context);if(e===r.none)return null;const n=e===r.new?i.createElement("div",{className:b.h.newPremiumLabel},t.premiumAlertLabel.new,i.createElement(p.JO.Paid,{className:b.h.newPremiumLabelIcon,width:12})):i.createElement(p.JO.Paid,{className:b.h.premiumPersistentTooltipIcon,width:10});return i.createElement(m.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},n)},L=({style:e,description:t,extraStyle:n})=>i.createElement("span",Object.assign({},(0,s.Sh)(n,b.h.lensMinimal,b.h.lens,b.h.dot,e)),t),O=e=>(0,a.pipe)(A(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.cardVisualMode,e.children),o.fromNullable,o.map((t=>i.createElement("div",{className:e.className},(0,a.pipe)(e.activeAlert.extraProperties.fluencyMessage,o.fold((()=>(0,a.pipe)(e.layoutDensity,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>i.createElement(L,Object.assign({},t))),(()=>i.createElement(M,Object.assign({},t)))))),(n=>(0,a.pipe)(e.layoutDensity,x.j.Density.match(i.createElement(i.Fragment,null,i.createElement(M,Object.assign({},t)),i.createElement(T,{label:n})),i.createElement(M,Object.assign({},t)),i.createElement(L,{style:t.style,extraStyle:b.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),o.fold((()=>i.createElement("div",{"data-purpose":"label-placeholder"})),(t=>i.createElement(_,null,t,e.badge)))),_=({children:e})=>i.createElement("div",{role:"definition",className:b.h.labelContainer},e)},52187:(e,t,n)=>{n.d(t,{S:()=>r,s:()=>i});const r={z100:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 1px 8px rgba(0, 0, 0, .15)",z300:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 4px 20px rgba(0, 0, 0, .15)"},i={llamaShadowToken:"0px 2px 8px 0px #1A213433, 0px 0px 0.5px 0px #000000B2"}},66346:(e,t,n)=>{n.d(t,{G3:()=>m,Vh:()=>p});var r=n(27378),i=n(84966),a=n(50474),s=n(64757),o=n(31278),l=n(28706),c=n(26027),u=n(66268),d=n(36642);const p=({card:{activeAlert:e,id:t,visualState:n},actions:p,mode:m,className:g,disabled:f})=>{const y=r.useContext(a.m.Context),x="mini"===m?h(n,y):"";return r.createElement(s.zx.Tertiary,{key:"toggle-more",name:h(n,y),title:x,"aria-label":x,className:g,disabled:f,onClick:l.hz((()=>{const r=c.X.isCardOpen(n);p.next({type:u.eI.Kind.startTransitionTo,id:t,transition:{type:r?"focused":"expanded",clockwise:!0}}),r||p.next({type:u.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},c.X.isCardOpen(n)?r.createElement(o.JO.Arrow,{key:"more",className:d.h.lessIcon}):r.createElement(o.JO.QuestionMark,{key:"expand"}),"default"===m&&h(n,y))},m=({visualState:e,children:t,className:n})=>r.createElement("div",{className:(c.X.isCardOpen(e)?d.h.more:d.h.moreHidden)+" "+n},t);function h(e,t){const n=t.card;return c.X.isCardOpen(e)?n.less:n.more}},36642:(e,t,n)=>{n.d(t,{h:()=>I});var r=n(44060),i=n(89894),a=n(40219);const s={$nest:{"&:before":{position:"absolute",width:i.ux.px(10),height:i.ux.px(10),borderRadius:i.ux.percent(50),content:"''",transform:"scale(.5)"}}},o={opacity:1,transition:"opacity .3s"},l={color:r.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:r.xv.SubheadingLetterSpacing,fontSize:i.ux.rem(r.xv.SubheadingSize),lineHeight:i.ux.rem(r.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.ux.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.ux.px(2),left:i.ux.rem(-1.1),margin:"auto 0"}}},u={$nest:{"&:before":{top:0,bottom:0,left:i.ux.rem(-1.1),margin:`${i.ux.rem(.25)} 0 auto 0`}}},d={margin:`0 ${i.ux.rem(.4)} 0 ${i.ux.rem(.2)}`,width:i.ux.rem(.85),height:i.ux.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:i.ux.rem(-1),margin:"auto",transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${i.ux.rem(.3)} ${i.ux.rem(.25)}`,cursor:"pointer",borderRadius:i.ux.percent(100),marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:r.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),cursor:"pointer",background:r.Il.CoreYellow20,color:r.Il.CoreYellow80,marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:r.Il.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:r.Il.CoreYellow80,marginLeft:i.ux.rem(.3)},f={display:"flex",alignItems:"flex-start",top:i.ux.rem(.125),minWidth:"initial",minHeight:"initial",background:r.Il.CoreNeutral0},y={color:r.Il.CoreNeutral90,textTransform:"none",letterSpacing:r.xv.SmallLetterSpacing,fontWeight:r.xv.SmallWeight,fontSize:i.ux.rem(r.xv.SmallSize),lineHeight:i.ux.rem(r.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},x={color:r.Il.CoreNeutral50,textTransform:"none"},v={width:i.ux.rem(1),height:i.ux.rem(1)},b={display:"inline-flex",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},C={display:"inline-flex",marginLeft:i.ux.rem(.1),minWidth:0,minHeight:0},I=i.ux.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[o],moreHidden:[o,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[u],voxLogo:[d],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[x],toneLogo:[p,v],fluencyLabel:[l,b],fluencyInfo:[C],dot:[s],ethicalAILabel:[{textTransform:"none"}]})},1883:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(27378),i=n(5739),a=n(12187),s=n(90845),o=n(77176),l=n(98403),c=n(5114),u=n(50474),d=n(89894),p=n(35108),m=n(50224);const h=e=>{const{shade:t}=(0,p.SA)(e.visualState),n=r.useContext(u.m.Context),{rect:d,onMount:m}=s.P.useRectWatcher(),h=d.pipe(o.U(c.exists((e=>e.height>0))));r.useEffect((()=>{Boolean(t)||e.onFocus()}),[]);const g=e.theme||{};return r.createElement(i.F.div,{className:g.container},e.header,r.createElement(i.F.div,{className:g.innerContainer},r.createElement(i.F.div,Object.assign({},(0,a.Sh)(w.wrapper,g.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),r.createElement(i.F.div,Object.assign({},(0,a.Sh)(w.grid,g.content)),r.createElement(i.F.div,Object.assign({role:"region","aria-label":l.Dx(e.ariaLabel).pipe(o.U((e=>`${n.card.description}: ${e}`)))},(0,a.Sh)(w.mainContent,g.contentBody)),e.body),Boolean(e.footer)?r.createElement(i.F.div,{role:"complementary",mount:m,"aria-hidden":l.U_(h),"aria-label":l.Dx(e.ariaLabel).pipe(o.U((e=>`${n.card.more}: ${e}`))),className:w.footerContent},e.footer):null,Boolean(e.subActions)||Boolean(e.navigation)||Boolean(e.mainActions)?r.createElement(i.F.nav,{"aria-label":l.Dx(e.ariaLabel).pipe(o.U((e=>`${n.card.cardActions}: ${e}`))),className:w.actions},e.subActions,r.createElement("div",{className:w.spacerOne}),e.navigation,r.createElement("div",{className:w.spacerFloat}),e.mainActions):null)),e.extra))},g="& > * + *",f=.75,y={position:"relative"},x={padding:`${d.ux.rem(1)} ${d.ux.rem(.5)} ${d.ux.rem(f)} ${d.ux.rem(1)}`},v={padding:`0 ${d.ux.rem(.5)} 0 ${d.ux.rem(1)}`,$nest:{[g]:{marginTop:d.ux.rem(f)}}},b={padding:`0 ${d.ux.rem(.5)} 0 ${d.ux.rem(1)}`,$nest:{[g]:{marginTop:d.ux.rem(f)}}},C={display:"flex",marginLeft:d.ux.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},I={width:d.ux.rem(1),flexShrink:1},S={$nest:{[g]:{marginTop:d.ux.rem(f)}}},w=Object.assign(Object.assign({},d.ux.stylesheet({mainContent:[v],footerContent:[b],actions:[C],spacerOne:[I],spacerFloat:[{flex:1}],grid:[S]})),{fullCard:d.ux.joinClasses([m.g.fullCardSelector,d.ux.style(y)]),wrapper:d.ux.joinClasses([m.g.fullCardSelector,d.ux.style(y,x)])})},91324:(e,t,n)=>{n.d(t,{PS:()=>Ke,mQ:()=>Je,o:()=>Qe,jt:()=>qe,Kg:()=>Le,dk:()=>ke,lJ:()=>je,hl:()=>Ve,__:()=>He,M9:()=>et,ko:()=>Te,hT:()=>Be,q4:()=>Ue,Dx:()=>ze,jg:()=>Ge,Ot:()=>We,Nm:()=>Re,VM:()=>pt,eb:()=>mt,k_:()=>qt,m_:()=>Ye,Bn:()=>Jt,IH:()=>ft,ce:()=>dt});var r=n(27378),i=n(57050),a=n(40327),s=n(12187),o=n(5739),l=n(38983),c=n(84966),u=n(8125),d=n(5114),p=n(83078),m=n(18208),h=n(44060),g=n(81531),f=n(33678),y=n(50474),x=n(4021),v=n(64757),b=n(3929),C=n(18813),I=n(31278),S=n(50790),w=n(76457),E=n(8965),A=n(42103),k=n(65223),T=n(3656),M=n(74660),N=n(89894),L=n(40219),O=n(90845),_=n(60797),D=n(66310),F=n(49708),P=n(2834),R=n(95093),j=n(24209),U=n(40151),$=n(17343),B=n(49435),z=n(77176),G=n(28706),W=n(32952),H=n(2844),V=n(85985),Y=n(55935),Z=n(17594),Q=n(26027),q=n(91549),J=n(66268),X=n(77610),K=n(4890),ee=n(51006),te=n(91463),ne=n(50224),re=n(28584);const ie=["b","i","br","ul","li"];var ae;!function(e){e.renderToHtml=function(e,t){const n=t?{allowedTags:ie.concat(["a"]),linkRegExp:t}:{allowedTags:ie};return G.yG(e,n)}}(ae||(ae={}));var se=n(66346),oe=n(1883),le=n(78416),ce=n(1509),ue=n(14532);const de=({examples:e,layoutDensity:t})=>r.createElement(ce.Z,{nodeType:"table",styleType:ce.Z.Type.Base,className:Ie.wrapper},e.map(((e,n)=>r.createElement("tbody",{key:n,className:Ie.group},e.map((({text:e,title:n,color:i,hasItalic:s},o)=>r.createElement("tr",{key:o,className:(0,a.pipe)(t,K.j.Density.matchL((()=>Ie.item),(()=>Ie.itemCompact),(()=>Ie.itemMinimal)))},(0,a.pipe)(n,d.map((e=>r.createElement("td",{className:ue.J.colorMatch(i)(Ie)},(e=>e.split("/").reduce(((e,t,n)=>(0!==n&&e.push(r.createElement("br",{key:n})),e.push(t),e)),[]))(e)))),d.toNullable),r.createElement("td",Object.assign({colSpan:d.isNone(n)?2:void 0,className:s?Ie.content:Ie.contentItalic},G.yG(e)))))))))),pe={$nest:{"&:not(:last-child):after":{display:"block",height:N.ux.rem(1.75),content:"''"}}},me={$nest:{"&:not(:last-child)":{borderBottom:`${N.ux.rem(.5)} solid transparent`}}},he={display:"flex",flexDirection:"column",lineHeight:N.ux.rem(1.3125)},ge={padding:0,verticalAlign:"top",lineHeight:N.ux.rem(1.25)},fe={paddingRight:N.ux.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},ye={color:h.Il.CoreNeutral50,fontFeatureSettings:`${L.g_}, ${L.xL}`},xe={color:h.Il.CoreRed50},ve={color:h.Il.CoreGreen70},be={color:h.Il.CoreNeutral90},Ce={color:h.Il.CoreNeutral90},Ie=N.ux.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[pe],item:[me],itemCompact:[me,{display:"flex",flexDirection:"column"}],itemMinimal:[me,he],baseBlock:[ge],title:[ge,fe],content:[ge,ye],contentItalic:[ge,ye,{fontStyle:"italic"}],red:[ge,fe,xe],green:[ge,fe,ve],yellow:[ge,fe,be],fallback:[ge,fe,Ce]});var Se=n(11662),we=n(19025);const Ee=(0,u.HP)(g.C8.Logging.getLogger);var Ae;!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=t=>(0,a.pipe)(d.fromNullable(t.match(e.actionRegex)),d.chain((e=>{switch(e[1]){case"set-goals":return d.some(J.lY.Type.openSetGoals);case"ideas-gallery":return d.some(J.lY.Type.openIdeasGallery);default:return d.none}})))}(Ae||(Ae={}));const ke=({description:e,actions:t,layoutDensity:n,className:i})=>{const o=r.useContext(y.m.Context),l=r.useContext(A.G.Context),{ref:c,onMount:u}=O.P.useElWatcher();O.P.useSubscriptionTo(c.pipe(_.oA,D.w((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,n)=>{const r=F.R(n,"click").pipe(P.b((e=>e.preventDefault())));return(0,a.pipe)(d.fromNullable(n.getAttribute("href")),d.chain(Ae.parse),d.fold((()=>(Ee("Description").error("Invalid action",n),e.pipe(R.T(r)))),(i=>j.T(e,i in o.card.actionDescription&&i!==J.lY.Type.openIdeasGallery?l.getTooltipObservable(n,o.card.actionDescription[i],"auto",d.none):U.E,r.pipe($.h({type:i}),P.b(t))))))}),U.E)))));const p=(0,a.pipe)(n,K.j.Density.matchOrDefault(K.j.Density.minimal)((()=>Kt.minimalDescription),(()=>Kt.description)));return r.createElement(T.XY,Object.assign({mount:u},(0,s.Sh)(p,i),ae.renderToHtml(e,Ae.actionRegex)))},Te=({card:e,isChecking:t})=>M.bZ.isRated(e.activeAlert)?r.createElement(b.B,{value:Q.X.isCardPresuccess(e.visualState)?B.g.MAX:e.meta.percentile,initValue:Q.X.isCardPresuccess(e.visualState)?e.meta.percentile:B.g.MIN,isLoading:t}):null,Me=({card:e})=>{const t=(0,b.N)(Q.X.isCardPresuccess(e.visualState)?B.g.MAX:e.meta.percentile,Q.X.isCardPresuccess(e.visualState)?e.meta.percentile:B.g.MIN);return r.createElement(o.F.Fragment,null,t.pipe(z.U(B.g.prism.reverseGet),z.U((e=>r.createElement(w.P,{percentage:e,colorType:w.P.ColorType.neoBlue,iconSize:w.P.IconSize.extraSmall,theme:{radialProgressBar:Kt.circleProgress,radialProgressText:Kt.circleText}})))))},Ne=({card:e,feedbackActions:t,onClick:n,disabled:i})=>{const s=r.useContext(y.m.Context);return r.createElement(v.zx.Ghost,{name:"ignore",title:s.dismiss,"aria-label":s.dismiss,onClick:G.hz((()=>{t.next({type:J.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:Q.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:X.i.isSynfonyItem(e)?(0,a.pipe)(e.synfonySelection,d.getOrElse((()=>[]))):void 0}),n&&n()})),disabled:i},r.createElement(I.JO.Ignore,null))},Le=({card:e,feedbackActions:t,disabled:n,onClickDismissButton:i,alwaysShowWrongAndOffensiveButtons:s})=>r.createElement(r.Fragment,null,r.createElement(Ne,{card:e,feedbackActions:t,onClick:i,disabled:n}),r.createElement(Fe,{id:e.id,activeAlert:e.activeAlert,onMute:(0,a.pipe)(e.muteCategory,d.map((n=>G.hz((()=>t.next({type:J.lY.Type.muteAlertCategory,categoryId:n.id,id:e.id,viewType:e.activeAlert.type})))))),onWrong:G.hz(G.hz((()=>t.next({type:J.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.PZ.WRONG_SUGGESTION})))),onOffensive:G.hz(G.hz((()=>t.next({type:J.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:J.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"}),disabled:n,alwaysShowWrongAndOffensiveButtons:s})),Oe=({onClick:e})=>{const t=r.useContext(y.m.Context);return r.createElement(v.zx.Flat,{name:"mute",onClick:e},r.createElement(I.JO.Mute,null),t.card.mute)},_e=({onClick:e})=>{const t=r.useContext(y.m.Context);return r.createElement(v.zx.Flat,{name:"incorrect",onClick:e},r.createElement(I.JO.Report,null),t.card.wrong)},De=({activeAlert:e,onClick:t})=>{const n=r.useContext(y.m.Context);return(0,a.pipe)(e.extraProperties.vox,p.mapOrDefault((()=>null),r.createElement(v.zx.Flat,{name:"offensive",onClick:t},r.createElement(I.JO.Report,null),n.card.offensive)))},Fe=({id:e,activeAlert:t,onMute:n,onWrong:s,onOffensive:o,onVisibilityChange:l,disabled:c,alwaysShowWrongAndOffensiveButtons:u=!1})=>{const m=r.useContext(y.m.Context),h=d.isSome(t.getTransform()),g=d.isSome(n),f=r.createElement(r.Fragment,null,g&&r.createElement(C.L.Delimiter,null),r.createElement(_e,{onClick:s}),r.createElement(De,{activeAlert:t,onClick:o}));return g||h||u?r.createElement(C.L,{label:r.createElement(v.zx.Ghost,{name:"moreActions","aria-label":m.card.moreActions,disabled:c},r.createElement(I.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:Kt.dropdownContainer},id:e,name:"moreActions",onVisibilityChange:l},(0,a.pipe)(n,d.map((e=>r.createElement(Oe,{onClick:e}))),p.orNull),(0,a.pipe)(h,d.fromPredicate(i.yR),d.map((()=>f)),p.orElse((0,a.pipe)(u,d.fromPredicate(i.yR),d.map((()=>f)))),p.orNull)):null},Pe=({card:e,onClick:t,mode:n="default"})=>{const i=r.useContext(y.m.Context),a=r.useContext(f.a.Context),s=r.useCallback((e=>{a.has(f.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),o=e.renderOptions.features.has(K.j.Features.showAnonymousUserFooters)?{disabled:!0,title:i.card.disabledForAnonymous}:{title:"mini"===n?i.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?r.createElement(v.zx.Tertiary,Object.assign({},o,{name:"add-to-dict",onClick:s}),r.createElement(I.JO.Dict,null),i.card.addToDict):null},Re=({title:e,checkingInProgress:t,checkingMessage:n,applyMessage:i,onClick:a,disabled:o,className:l,spinnerClassName:c,messageClassName:d})=>r.createElement(v.zx.Primary,Object.assign({key:"update-all",name:"update-all",title:e},(0,s.Sh)(t.pipe(z.U((0,u.RN)(le.V.updateAllBtnLoading,le.V.updateAllBtn))),l),{disabled:t.view((e=>e||!0===o)),children:t.pipe(z.U((0,u.RN)(r.createElement(r.Fragment,{key:"update-all-checking"},r.createElement("span",{className:d},m.capitalize(n)),r.createElement(E.$,{size:18,strokeWidth:2,wrapperClassName:(0,s.Sh)(le.V.updateBtnSpinner,c).className,variation:"white"})),r.createElement(r.Fragment,{key:"update-all-checked"},m.capitalize(i))))),onClick:G.hz(a)})),je=({card:e})=>(0,a.pipe)(Ze(e.activeAlert,e.renderOptions.layoutDensity),d.map((t=>r.createElement(se.G3,{key:"card-actions-details",visualState:e.visualState,className:Kt.more},t))),d.toNullable),Ue=({card:e,actions:t})=>Ye(e.activeAlert,e.renderOptions.layoutDensity)?r.createElement(se.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):X.i.isDefaultItem(e)?r.createElement(Pe,{key:"card-actions-button",card:e,mode:"default",onClick:G.hz((()=>t.next({type:J.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:c.PZ.ADD_TO_DICTIONARY})))}):null,$e=e=>{const t=e.isOnboardingGateActive?{title:void 0,message:"Click a suggestion to accept it."}:{title:"Accept a correction",message:"Click on a suggestion to apply it to your text."};return r.createElement(te.TG,{alignment:"bottom",eventType:"onclick",stepId:ee.X.StepId.Step4,title:t.title,message:t.message,dotPosition:{kind:"findFirstButton",position:te.E2.rightTop},themes:{containerWrapperClassName:Kt.onboardingNotification}},e.children)},Be=({onClick:e,rl:t,layoutDensity:n,a11yContrast:i,demoDocOnboardingCopyV1:a})=>r.createElement($e,{isOnboardingGateActive:a},r.createElement(Se.zO,{replacementsLabels:t,onClick:e,layoutDensity:n,a11yContrast:i})),ze=({text:e})=>r.createElement(T.P1,Object.assign({className:Kt.title},ae.renderToHtml(e))),Ge=({text:e})=>r.createElement(T.P1,Object.assign({className:Kt.titleMinimal},ae.renderToHtml(e))),We=({alert:e})=>r.createElement(T.H4,Object.assign({className:Kt.title},ae.renderToHtml(e.title))),He=({alert:e,options:t,children:n,className:i,badge:a})=>{const l=r.useContext(y.m.Context);return r.createElement(o.F.Fragment,null,t.cardVisualMode.pipe(z.U((o=>r.createElement(re.oL,Object.assign({activeAlert:e,cardVisualMode:o,showCardLabel:t.features.has(K.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(K.j.Features.showNewPremiumCardLabels)?re.a0.new:t.features.has(K.j.Features.showPersistentPremiumCardLabels)?re.a0.persistent:re.a0.none,layoutDensity:t.layoutDensity},(0,s.Sh)(Kt.label,i),{badge:e.extraProperties.isBeta?r.createElement(x.C.Regular,{a11yContrast:t.features.has(K.j.Features.a11yContrast)},l.beta):a}),n)))))},Ve=({text:e,layoutDensity:t})=>r.createElement("div",{className:Kt.highlightedTextBox},r.createElement(T.XY,{className:(0,a.pipe)(t,K.j.Density.matchOrDefault(K.j.Density.minimal)((()=>Kt.minimalHighlightedTextInnerBox),(()=>Kt.highlightedTextInnerBox)))},e));function Ye(e,t){return!e.extraProperties.hasAddToDictionary&&(!(!d.isSome(e.examples)&&!d.isSome(e.details))||!(t!==K.j.Density.minimal||!d.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation))}const Ze=(e,t)=>{if(!Ye(e,t))return p.empty();const n=(0,a.pipe)(t,K.j.Density.matchOrDefault(K.j.Density.minimal)((()=>Kt.minimalDescription),(()=>Kt.description)));return d.some(r.createElement(r.Fragment,null,(0,a.pipe)(t,K.j.Density.matchOrDefault(K.j.Density.minimal)((()=>d.isNone(e.details)?r.createElement(T.XY,Object.assign({className:n},ae.renderToHtml(e.explanation,Ae.actionRegex))):null),(()=>null))),(0,a.pipe)(e.details,d.map((e=>r.createElement(T.XY,Object.assign({className:n},ae.renderToHtml(e))))),d.toNullable),(0,a.pipe)(e.examples,d.map((e=>r.createElement(de,{layoutDensity:t,examples:e}))),d.toNullable)))},Qe=({isChecking:e})=>r.createElement(o.F.Fragment,null,e.pipe(z.U((e=>r.createElement(E.$,{className:e?Kt.spinner:Kt.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),qe=e=>{const[t,n]=r.useState(!0);return t?r.createElement(tt,{type:e.type,actions:e.actions,onClose:()=>n(!1)}):null},Je=({card:e,actions:t})=>{if(X.i.isEthicalAIItem(e)||X.i.isSuggestedSnippetItem(e)||X.i.isKnowledgeHubSuggestedTermItem(e))return null;if(!(0,a.pipe)(e.activeAlert.isFree)&&e.renderOptions.features.has(K.j.Features.showYellowFooterForTrialUsers))return r.createElement(ot,null);if((0,a.pipe)(e.activeAlert.extraProperties.freePremium,p.contains("unlocked")))return r.createElement(at,null);if((0,a.pipe)(e.activeAlert.extraProperties.premiumYellowFooterVariant,d.isSome))return(0,a.pipe)(e.activeAlert.extraProperties.premiumYellowFooterVariant,d.fold((()=>null),(e=>r.createElement(st,{variant:e}))));if(!Z.$.isFree(e.activeAlert)&&e.renderOptions.features.has(K.j.Features.showPremiumOnboarding))return r.createElement(lt,null);if(!Z.$.isFree(e.activeAlert)&&e.renderOptions.features.has(K.j.Features.showPremiumTrialFooters))return r.createElement(it,{actions:t});if(e.renderOptions.features.has(K.j.Features.showAnonymousUserFooters))return r.createElement(rt,{actions:t,card:e});const n=e.renderOptions.isPremiumOnboarding||l.h.create(!1);return r.createElement(o.F.Fragment,null,n.view((n=>!Z.$.isFree(e.activeAlert)&&Boolean(n)?r.createElement(lt,null):(0,a.pipe)(e.renderOptions.layoutDensity,K.j.Density.matchOrDefault(K.j.Density.cozy)((()=>r.createElement(nt,{card:e,actions:t})),(()=>(0,a.pipe)(e.activeAlert.extraProperties.fluencyMessage,d.fold((()=>r.createElement(nt,{card:e,actions:t})),(e=>r.createElement(ct,{fluencyLabel:e}))))))))))};function Xe(e,t,n){n.next({type:J.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const Ke=({card:e,actions:t})=>{const n=r.useContext(y.m.Context).card.matchesNavigation;return r.createElement(o.F.Fragment,null,(0,a.pipe)(e,z.U((e=>r.createElement("div",{key:e.activeAlert.id,className:Kt.bundleNavWrapper},r.createElement(T.XY,{className:Kt.bundleTitle},q.R.bundleTitle(e)),r.createElement("div",{className:Kt.bundleNavMatchesRow},r.createElement(v.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:Kt.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>Xe("left",e,t)},r.createElement(I.JO.Arrow,{className:Kt.bundleNavLeftButtonIcon})),r.createElement(T.ck,{className:Kt.bundleNavCount},n.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),r.createElement(v.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:Kt.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>Xe("right",e,t)},r.createElement(I.JO.Arrow,{className:Kt.bundleNavRightButtonIcon}))))))))},et=({card:e,actions:t,isChecking:n})=>r.createElement(r.Fragment,null,(0,a.pipe)(e.renderOptions.layoutDensity,K.j.Density.matchOrDefault(K.j.Density.minimal)((()=>M.bZ.isRated(e.activeAlert)?r.createElement(r.Fragment,null,r.createElement(Me,{card:e}),r.createElement(Ge,{text:e.activeAlert.miniCardTitle})):r.createElement(He,{alert:e.activeAlert,options:e.renderOptions},r.createElement(Ge,{text:e.activeAlert.miniCardTitle}))),(()=>r.createElement(r.Fragment,null,r.createElement(He,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(ze,{text:e.activeAlert.title}),r.createElement(Te,{card:e,isChecking:n}))))),r.createElement(ke,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),tt=e=>{const t=r.useContext(y.m.Context),{title:n,content:i}=t.card.onboarding[e.type];return r.useLayoutEffect((()=>()=>e.actions.next({type:J.lY.Type.onboardingClose,value:e.type}))),r.createElement(S.DI.AdHoc,{key:"new-notification",title:r.createElement(r.Fragment,null,n,r.createElement(x.C.Regular,{className:Kt.newLabel},t.new)),className:Kt.newCheckNotification,onClose:e.onClose},i)},nt=({actions:e,card:t})=>{const n=r.useContext(y.m.Context);return O.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:J.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?r.createElement(ut.Base,{className:Nt},r.createElement("span",null,n.card.muteCitedText(r.createElement("button",{"data-name":"open-preferences-link",onClick:()=>e.next({type:J.lY.Type.openPreferences})},n.documentSettings.editorSettings))),r.createElement(v.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:J.lY.Type.dismissMuteQuotedAdvice})},r.createElement(I.JO.Close,null))):null},rt=({actions:e,card:t})=>{const n=r.useContext(y.m.Context),i=t.activeAlert.extraProperties.hasAddToDictionary?n.anonymousUserAddToDictionarySignInPrompt:n.anonymousUserGenericSignInPrompt;return r.createElement(ut.Base,{className:Kt.anonymousUserNotice},i((()=>{e.next({type:J.lY.Type.toSignIn})})))},it=({actions:e})=>r.createElement(ut.Small,{className:Ot},r.createElement(I.JO.PaidLink,{className:Kt.iconWrapper,width:12}),r.useContext(y.m.Context).premiumFreeTrial((()=>{e.next({type:J.lY.Type.premiumTrialFooterCtaClick})}))),at=()=>{const{beforeIcon:e,afterIcon:t}=r.useContext(y.m.Context).freePremiumAlertFooter;return r.createElement(ut.Small,{className:Ft},e,r.createElement(I.JO.PaidLink,{width:12}),t)},st=({variant:e})=>{const t=r.useContext(y.m.Context).premiumFooter;return r.createElement(ut.Small,{className:Pt},r.createElement(I.JO.PaidLink,{width:12}),t[e])},ot=()=>{const{freeTrialAlertFooter:e}=r.useContext(y.m.Context);return r.createElement(ut.Small,{className:Ft},r.createElement(I.JO.PaidLink,{width:12}),e)},lt=()=>{const{premiumOnboardingFooter:e}=r.useContext(y.m.Context);return r.createElement(ut.Small,{className:Dt},r.createElement(I.JO.PaidLink,{width:12}),e)},ct=({fluencyLabel:e})=>{const t=r.useContext(y.m.Context).card.fluency;return r.createElement(T.x4,{className:Kt.fluencyNotice},e,r.createElement(k.u,{title:t.tooltip},r.createElement(I.JO.Info,{width:10,className:Kt.fluencyInfo})))};var ut;!function(e){function t(e){return({children:t,className:n})=>r.createElement(e,Object.assign({},(0,s.Sh)(Kt.cardFooter,n)),t)}e.Small=t(T.x4),e.Base=t(T.XY)}(ut||(ut={}));function dt(e){const{transformHidden:t,isMouseInside:n,transformHiddenObservable:r}=O.P.useMemoOnDidMount((()=>{const t=l.h.create(!1),n=new W.xQ,r=j.T(H.aj([n,e]).pipe(z.U((([e,t])=>e&&t)),V.h((e=>!0===e)),P.b((()=>t.set(!0)))),e.pipe(Y.T(1),V.h((e=>!e)),P.b((()=>t.set(!1)))));return{transformHidden:t,isMouseInside:n,transformHiddenObservable:r}}));return O.P.useSubscriptionTo(r),{transformHidden:t,isMouseInside:n}}const pt=({card:e,actions:t,isChecking:n,isCheckingGlobal:i,cardTheme:a,cardBody:s,cardFooter:o,mainActions:l,subActions:c,cardExtra:d})=>{const{transformHidden:p,isMouseInside:m}=dt(n);return r.createElement(oe.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:J.lY.Type.alertCardShow,cardType:J.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOver:()=>{t.next({type:J.lY.Type.hover,kind:"hover",id:e.id}),m.next(!0)},onMouseOut:()=>{t.next({type:J.lY.Type.hover,kind:"unhover",id:e.id}),m.next(!1)},theme:Object.assign(Object.assign({content:i.pipe(z.U((0,u.RN)(Kt.loadingWrapperInvisible,Kt.loadingWrapper)))},(0,we.Gh)(e.renderOptions)),a),extra:r.createElement(r.Fragment,null,r.createElement(Qe,{isChecking:i}),null==d?void 0:d()),body:s(p),mainActions:null==l?void 0:l(),footer:null==o?void 0:o(p),subActions:null==c?void 0:c()})},mt=({card:e,actions:t,isChecking:n,body:i,footer:a,alwaysShowWrongAndOffensiveButtons:s})=>r.createElement(oe.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:J.lY.Type.alertCardShow,cardType:J.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,we.Gh)(e.renderOptions),body:null!=i?i:r.createElement(et,{card:e,actions:t,isChecking:n}),mainActions:r.createElement(Le,{card:e,feedbackActions:t,alwaysShowWrongAndOffensiveButtons:s}),footer:null!=a?a:r.createElement(je,{card:e}),subActions:r.createElement(Ue,{card:e,actions:t}),extra:r.createElement(Je,{card:e,actions:t})}),ht={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",display:"inline",textDecoration:"none",$nest:{"&:link, &:visited":{color:h.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${L.g_}, ${L.xL}`},"& ul":{margin:`${N.ux.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:N.ux.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:N.ux.rem(.5)}}},gt={lineHeight:N.ux.rem(1.3125),$nest:{"& a":{display:"initial"}}},ft={$nest:{"& i":{color:h.Il.CoreNeutral50},"& > * + *":{marginTop:N.ux.rem(.75)}}},yt={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:h.Il.CoreRed50}}},xt={marginTop:N.ux.important(0),lineHeight:N.ux.rem(1.125)},vt={fontSize:N.ux.rem(h.xv.SubheadingSize),lineHeight:N.ux.rem(h.xv.SubheadingLineHeight)},bt={width:N.ux.rem(2),height:N.ux.rem(2)},Ct={position:"absolute",top:`calc(50% - ${N.ux.rem(1)})`,left:`calc(50% - ${N.ux.rem(1)})`,width:N.ux.rem(2),height:N.ux.rem(2),transition:"opacity .2s"},It={marginLeft:N.ux.rem(.5),backgroundColor:h.Il.CoreGreen50,color:h.Il.CoreNeutral0,fontWeight:600},St={position:"absolute",marginTop:N.ux.rem(-8.5),marginLeft:N.ux.rem(-2),$nest:{"&:after":{position:"absolute",bottom:N.ux.rem(-.525),left:N.ux.rem(.7),borderTop:`${N.ux.rem(.625)} solid ${h.Il.BackgroundNotification}`,borderRight:`${N.ux.rem(.5)} solid transparent`,borderLeft:`${N.ux.rem(.5)} solid transparent`,content:"' '"}}},wt={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Et={position:"absolute",top:N.ux.rem(.75),left:N.ux.rem(.4)},At={color:h.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:h.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:h.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${h.Il.CoreBlue40}`,color:h.Il.CoreBlue40}}}}},kt={display:"flex",borderRadius:`${L.LB} ${L.LB} ${N.ux.rem(L.Jr)} ${N.ux.rem(L.Jr)}`,color:h.Il.CoreNeutral50,padding:`${N.ux.rem(.5)} ${N.ux.rem(.75)} ${N.ux.rem(.5)} ${N.ux.rem(1)}`,fontSize:N.ux.rem(.6875),lineHeight:N.ux.rem(1.125)},Tt={padding:`0 ${N.ux.rem(.6)}`,minWidth:N.ux.rem(.625),minHeight:N.ux.rem(.625)},Mt="muteQuotedAdvice",Nt=N.ux.joinClasses([Mt,N.ux.style({$nest:{"& button":{border:0,textDecoration:"underline",textUnderlineOffset:2,color:h.Il.CoreBlue50,background:"none",padding:0,$nest:{"&:link, &:visited":{color:h.Il.CoreBlue50},"&:hover":{color:h.Il.CoreBlue40}}},"& i:hover":{strokeWidth:N.ux.px(2)}}})]),Lt="premiumFreeTrial",Ot=N.ux.joinClasses([Lt,N.ux.style({$nest:{"& svg":{fill:h.Il.CoreYellow80},"& a":{fontWeight:800,color:h.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:h.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${h.Il.CoreYellow60}`,color:h.Il.CoreYellow60}}}}})]),_t="premiumAlertFooter",Dt=N.ux.joinClasses([_t,N.ux.style({justifyContent:"center"})]),Ft=N.ux.joinClasses([_t,N.ux.style({justifyContent:"start",padding:N.ux.important(`${N.ux.rem(.5)} ${N.ux.rem(1)}`)})]),Pt=N.ux.joinClasses([_t,N.ux.style({justifyContent:"start",padding:N.ux.important(`${N.ux.rem(.5)} ${N.ux.rem(1)} ${N.ux.rem(.5)} ${N.ux.rem(1.75)}`)})]),Rt={display:"block",boxSizing:"border-box",padding:`${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(1.5)}`,width:N.ux.percent(100),borderRadius:`${L.LB} ${L.LB} ${N.ux.rem(L.Jr)} ${N.ux.rem(L.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(2)}`,background:h.Il.CoreNeutral10,color:h.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(1)} ${N.ux.rem(2)}`,position:"relative",background:h.Il.CoreYellow20,color:h.Il.CoreNeutral90},"&.premiumAlertFooter":{display:"flex",alignItems:"center",padding:N.ux.rem(.5),background:h.Il.CoreYellow20,color:h.Il.CoreYellow80,$nest:{"& svg":{margin:`0 ${N.ux.rem(.25)}`,fill:h.Il.CoreYellow80}}}}},jt={position:"absolute",top:N.ux.rem(.8),left:N.ux.rem(.5),minWidth:N.ux.rem(1),minHeight:N.ux.rem(1)},Ut={fontWeight:"bold",fontSize:N.ux.rem(.875),lineHeight:N.ux.rem(1.125),flex:2},$t={padding:`${N.ux.rem(.625)} 0 ${N.ux.rem(.1875)} ${N.ux.rem(.5)}`,marginBottom:N.ux.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},Bt={fontSize:N.ux.rem(.75),lineHeight:N.ux.rem(1.125),color:h.Il.CoreNeutral90},zt={display:"flex",justifyContent:"flex-end",alignItems:"center",height:N.ux.rem(1.5),$nest:{"& > * + *":{marginLeft:N.ux.rem(.25)},"& > *":{borderRadius:N.ux.rem(L.fx)}}},Gt={height:N.ux.rem(2),minHeight:N.ux.rem(2),width:N.ux.rem(2),fill:h.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:h.Il.CoreBlue50},"&[data-disabled='true']":{fill:h.Il.CoreNeutral30}}},Wt={borderRadius:N.ux.rem(.75),background:h.Il.CoreNeutral20,margin:`${N.ux.rem(-.25)} ${N.ux.rem(-.25)}`,padding:`${N.ux.rem(.25)} ${N.ux.rem(.25)}`,$nest:{[`& .${ne.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${ne.g.fullCardSelector}`]:{padding:`${N.ux.rem(.75)} ${N.ux.rem(.5)} ${N.ux.rem(.5)} ${N.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${N.ux.rem(-.5)})`}}},Ht={paddingTop:N.ux.rem(.25),paddingBottom:N.ux.rem(.5),paddingLeft:N.ux.rem(.5),paddingRight:N.ux.rem(.5),fontWeight:"bold",fontSize:N.ux.rem(.875),lineHeight:N.ux.rem(1.125)};function Vt(e,t){return{display:["block","-webkit-box"],maxHeight:N.ux.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const Yt=Object.assign(Object.assign({},Vt(1.5,3)),{lineHeight:N.ux.rem(1.5)}),Zt=Object.assign(Object.assign({},Vt(1.3125,3)),{lineHeight:N.ux.rem(1.3125)}),Qt={padding:N.ux.rem(.5),borderRadius:N.ux.rem(L.fx),background:h.Il.CoreNeutral10,color:h.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${L.g_}, ${L.xL}`},qt=.25,Jt={opacity:0,pointerEvents:"none"},Xt={transition:`opacity ${N.ux.seconds(qt)}`},Kt=N.ux.stylesheet({loadingWrapper:[Xt],loadingWrapperInvisible:[Xt,Jt],description:[ht],minimalDescription:[ht,gt],more:[ft],onboardingNotification:[{display:"block"}],title:[yt],titleMinimal:[yt,xt],label:[vt],dropdownContainer:[bt],spinner:[Ct],spinnerInvisible:[Ct,{opacity:0,pointerEvents:"none"}],newLabel:[It],newCheckNotification:[St],baseNotice:[wt],iconWrapper:[Et],anonymousUserNotice:[wt,At],fluencyNotice:[wt,kt],fluencyInfo:[Tt],cardFooter:[Rt],circleProgress:[jt],circleText:[{display:"none"}],bundleTitle:[Ut],bundleNavWrapper:[$t],bundleNavCount:[Bt],bundleNavMatchesRow:[zt],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Gt],bundleNavLeftButtonIcon:[Gt,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Gt,{transform:"rotate(270deg)"}],cardWrapper:[Wt],cardWrapperTitle:[Ht],highlightedTextBox:[Qt],highlightedTextInnerBox:[Yt],minimalHighlightedTextInnerBox:[Zt]})},87684:(e,t,n)=>{n.d(t,{J:()=>Vt});var r,i=n(27378),a=n(57050),s=n(40327),o=n(38983),l=n(5739),c=n(18813),u=n(31278),d=n(64757),p=n(8125),m=n(5114),h=n(83078),g=n(22232),f=n(44060),y=n(81531),x=n(50474),v=n(48643),b=n(4021),C=n(14330),I=n(3656),S=n(89894),w=n(98403),E=n(77176),A=n(28706),k=n(90845),T=n(55935),M=n(2834),N=n(57091),L=n(93508),O=n(26027),_=n(66268),D=n(77610),F=n(4890),P=n(93462),R=n(1883),j=n(91324),U=n(19025);!function(e){e.Full=({card:e,actions:t,isChecking:n})=>i.createElement(R.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:_.lY.Type.alertCardShow,cardType:_.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(0,U.Gh)(e.renderOptions),body:i.createElement(j.M9,{card:e,actions:t,isChecking:n}),mainActions:i.createElement(j.Kg,{card:e,feedbackActions:t}),footer:i.createElement(j.lJ,{card:e}),subActions:i.createElement(d.zx.Primary,{href:e.activeAlert.knowledgeHubTermCreationUrl,target:"_blank",rel:"noopener noreferrer",onClick:()=>t.next({type:_.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},i.createElement(u.JO.New,null),"Add term"),extra:i.createElement(j.mQ,{card:e,actions:t})})}(r||(r={}));var $=n(55415),B=n(91175),z=n(74660),G=n(98637),W=n(59312),H=n(12187),V=n(34685),Y=function(e){var t=e.theme,n=void 0===t?{}:t;return i.createElement(l.F.div,(0,W.__assign)({},(0,H.Sh)(Q.container,n.container)),i.createElement(l.F.div,(0,W.__assign)({},(0,H.Sh)(Q.swoosh,n.animation))))},Z=S.ux.keyframes({to:{backgroundPosition:"0 100%"}}),Q=S.ux.prefixedStylesheet("ai-animation-v2",{container:[{position:"relative",width:S.ux.rem(2),height:S.ux.rem(2),display:"inline-block"}],swoosh:[{position:"absolute",left:0,right:0,top:0,bottom:0,animationName:Z,animationTimingFunction:"steps(".concat(119,", start)"),animationFillMode:"forwards",animationDuration:S.ux.seconds(2),animationIterationCount:"infinite",background:"transparent url('".concat(V.yr,"swoosh.png') 0 0 no-repeat"),backgroundSize:S.ux.percent(100)}]}),q=n(76974),J=n(66346);const X=({card:e,actions:t,disabled:n})=>(0,j.m_)(e.activeAlert,e.renderOptions.layoutDensity)?i.createElement(J.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e,disabled:n}):null,K=B.UI.Grid.make((({slots:e,state:t,notify:n})=>i.createElement(l.F.Fragment,null,t.pipe(E.U((t=>i.createElement(j.VM,{card:t,actions:{next:e=>n(e)(),error:a.Q1,complete:a.Q1},isChecking:q.of(!1),isCheckingGlobal:q.of(!1),cardBody:(0,a.a9)(i.createElement(l.F.Fragment,null,e.body)),cardTheme:{contentBody:ee.contentBody}}))))))),ee=S.ux.stylesheet({contentBody:[{paddingLeft:0}]}),te=B.UI.Knot.make(K,{body:B.UI.Node.make((()=>{const e=i.useContext(x.m.Context);return i.createElement("div",{className:ie.container},i.createElement(Y,{theme:{container:ie.animation}}),i.createElement(I.XY,{className:ie.label},e.card.shortenIt.loadingLabel))}))}),ne={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:S.ux.rem(.25)},re={paddingLeft:S.ux.rem(.5)},ie=S.ux.stylesheet({container:[ne],animation:[{transform:"scale(.7)"}],label:[re]}),ae=(e,t)=>B.Z.composeKnot({body:(0,a.a9)(q.of(null)),root:B.Z.fromSideEffect((e=>{t.next(e)}),e)}),se=B.UI.Knot.make(K,{body:B.UI.Node.make((()=>{const e=i.useContext(x.m.Context);return i.createElement("div",{className:ce.container},i.createElement(u.JO.ValidationOk,null),i.createElement(I.XY,{className:ce.label},e.card.shortenIt.notFoundLabel))}))}),oe={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:S.ux.rem(.25)},le={paddingLeft:S.ux.rem(.5)},ce=S.ux.stylesheet({container:[oe],label:[le]}),ue=(e,t)=>B.Z.composeKnot({body:(0,a.a9)(q.of(null)),root:B.Z.fromSideEffect((e=>{t.next(e)}),e)});var de=n(19962),pe=n(40219),me=n(60797),he=n(28043),ge=n(66310),fe=n(85089),ye=n(71249),xe=n(86732),ve=n(26215),be=n(94048);const Ce=B.UI.Node.make((({state:e})=>i.createElement(l.F.Fragment,null,e.pipe(E.U((({collapsed:e,text:t})=>e?i.createElement("span",{className:Ge.shortenItCollapsedDelete},i.createElement(u.JO.EllipsisSmall,{width:13,className:Ge.shortenItCollapsedIcon})):i.createElement("span",{className:Ge.shortenItDelete},t))))))),Ie=/^\W/,Se=B.UI.Node.make((({state:e})=>i.createElement(l.F.span,{className:e.pipe(E.U((e=>Ie.test(e.text)?Ge.shortenItInsertPunctuation:Ge.shortenItInsert)))},e.pipe(E.U((e=>e.text)))))),we=B.UI.Node.make((({state:e})=>i.createElement(l.F.span,null,e.pipe(E.U((e=>e.text)))))),Ee=B.UI.Union.make("kind",{insert:Se,delete:Ce,text:we}),Ae=B.UI.Grid.make((({slots:e,state:t,notify:n})=>{const r=i.useContext(x.m.Context).card.shortenIt.collapsedButtonTooltip;return i.createElement(l.F.Fragment,null,t.pipe(E.U((({isReviewableGroup:t,isInReview:s,group:o})=>(0,a.zG)(o,m.filter((()=>t)),m.fold((()=>e.parts),(t=>s?i.createElement("span",{ref:e=>{e&&(0,a.zG)(m.fromNullable(e.offsetParent),m.map((e=>e.getBoundingClientRect())),h.tap((r=>{const i=e.getBoundingClientRect();n({kind:"editGroupExpanded",group:t,offsetRect:{width:i.width,height:i.height,top:i.top-r.top,left:i.left-r.left},offsetParentSize:{width:r.width,height:r.height}})()})))},className:Ge.shortenItEditGroupExpanded},e.parts):i.createElement(d.zx,{name:"shorten-it-review-change",className:Ge.shortenItEditGroupButton,animationMode:xe.m.FromClickPoint,title:r,"aria-label":r,tag:ve.X.div,onClick:n({kind:"reviewEdit",group:t})},e.parts))))))))})),ke=B.UI.Knot.make(Ae,{parts:B.UI.List.make(ye.IX,Ee)}),Te=B.UI.List.make(ye.IX,ke),Me=B.UI.Grid.make((({slots:e,state:t})=>i.createElement(I.XY,{className:t.pipe(E.U((e=>(0,a.zG)(e,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>Ge.minimalShortenItBackground),(()=>Ge.shortenItBackground))))))},e.labels))),Ne=B.UI.Knot.make(Me,{labels:Te}),Le="cards-replacements_labels-",Oe={shortenItBackground:`${Le}shortenItBackground`,minimalShortenItBackground:`${Le}minimalShortenItBackground`,shortenItDelete:`${Le}shortenItDelete`,shortenItInsert:`${Le}shortenItInsert`,shortenItInsertPunctuation:`${Le}shortenItInsertPunctuation`,shortenItEditGroupButton:`${Le}shortenItEditGroupButton`,shortenItEditGroupExpanded:`${Le}shortenItEditGroupExpanded`,shortenItCollapsedDelete:`${Le}shortenItCollapsedDelete`,shortenItCollapsedDeleteButton:`${Le}shortenItCollapsedDeleteButton`,shortenItCollapsedIcon:`${Le}shortenItCollapsedIcon`},_e={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${S.ux.rem(1)} 0`,color:f.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${pe.g_}, ${pe.xL}`},De={color:f.Il.CoreRed50,textDecoration:"line-through",fontWeight:400},Fe={color:f.Il.CoreBlue60,fontWeight:600},Pe={transitionProperty:"background-color",transitionDuration:".2s",padding:`0 0 ${S.ux.rem(.2)} 0`,display:"inline",whiteSpace:"unset",verticalAlign:"unset",borderWidth:"1px",borderStyle:"solid",borderRadius:S.ux.rem(pe.fx)},Re=Object.assign(Object.assign({},Pe),{backgroundColor:f.Il.CoreNeutral1,borderColor:f.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:f.Il.CoreBlue10,borderColor:f.Il.CoreBlue10}}}),je=Object.assign(Object.assign({},Pe),{backgroundColor:f.Il.CoreBlue10,borderColor:f.Il.CoreBlue10,position:"relative"}),Ue={display:"inline-block",width:S.ux.rem(1),lineHeight:S.ux.rem(.625),height:S.ux.rem(.625),margin:`0 ${S.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:S.ux.rem(pe.mA)},$e=Object.assign({},Ue),Be=Object.assign(Object.assign({},Ue),{backgroundColor:f.Il.CoreNeutral20,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:f.Il.CoreBlue10}}}),ze={minWidth:"unset",minHeight:"unset",paddingBottom:S.ux.rem(.125),fill:f.Il.CoreBlue60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:f.Il.CoreNeutral50}}},Ge={shortenItBackground:S.ux.joinClasses([Oe.shortenItBackground,S.ux.style(_e),be.E.style(_e)]),minimalShortenItBackground:S.ux.joinClasses([Oe.minimalShortenItBackground,S.ux.style(_e,{lineHeight:S.ux.rem(1.3125)}),be.E.style(_e,{lineHeight:S.ux.rem(1.3125)})]),shortenItDelete:S.ux.joinClasses([Oe.shortenItDelete,S.ux.style(De),be.E.style(De)]),shortenItInsert:S.ux.joinClasses([Oe.shortenItInsert,S.ux.style(Fe),be.E.style(Fe)]),shortenItInsertPunctuation:S.ux.joinClasses([Oe.shortenItInsertPunctuation,S.ux.style(Fe),be.E.style(Fe)]),shortenItEditGroupButton:S.ux.joinClasses([Oe.shortenItEditGroupButton,S.ux.style(Re),be.E.style(Re)]),shortenItEditGroupExpanded:S.ux.joinClasses([Oe.shortenItEditGroupExpanded,S.ux.style(je),be.E.style(je)]),shortenItCollapsedDelete:S.ux.joinClasses([Oe.shortenItCollapsedDelete,S.ux.style($e),be.E.style($e)]),shortenItCollapsedDeleteButton:S.ux.joinClasses([Oe.shortenItCollapsedDeleteButton,S.ux.style(Be),be.E.style(Be)]),shortenItCollapsedIcon:S.ux.joinClasses([Oe.shortenItCollapsedIcon,S.ux.style(ze),be.E.style(ze)])};S.ux.cssRule(`.${Oe.shortenItDelete} + .${Oe.shortenItInsert}`,{marginLeft:S.ux.rem(.25)});const We=B.UI.Grid.make((({state:e,view:t,notify:n,slots:r})=>{const s=i.useContext(x.m.Context),c=Object.assign(Object.assign({},w.UF()),{next:e=>n(e)()}),u=k.P.useMemoOnDidMount((()=>o.h.create(!1)));return k.P.useSubscriptionTo(t("transformHidden").pipe(M.b(w.wW(u)))),i.createElement(l.F.Fragment,null,e.pipe(E.U((({item:e})=>i.createElement(R.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:n({type:_.lY.Type.alertCardShow,cardType:_.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOut:n({type:_.lY.Type.hover,kind:"unhover",id:e.id}),onMouseOver:n({type:_.lY.Type.hover,kind:"hover",id:e.id}),theme:Object.assign({content:t("isCheckingGlobal").pipe(E.U((0,p.RN)(et.loadingWrapperInvisible,et.loadingWrapper)))},(0,U.Gh)(e.renderOptions)),mainActions:i.createElement(j.Kg,{card:e,feedbackActions:c}),subActions:i.createElement(X,{card:e,actions:c}),body:i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(b.C.Regular,null,s.beta)}),(0,a.zG)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:{next:e=>n(e)(),error:a.Q1,complete:a.Q1},layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(l.F.div,{className:t("transformHidden").pipe(E.U((0,p.RN)(et.transformHidden,void 0)))},r.transform)),footer:i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:et.footerBtns},i.createElement(j.Nm,{className:et.applyButton,spinnerClassName:et.applyButtonSpinner,messageClassName:et.applyButtonMessage,applyMessage:e.activeAlert.todoAction,checkingMessage:s.card.shortenIt.acceptButtonCheckingLabel,checkingInProgress:u,onClick:A.hz(n({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)}))}))),extra:i.createElement(j.o,{isChecking:t("isCheckingGlobal")})})))))})),He=B.UI.Grid.make((({slots:e,state:t,notify:n})=>{const r=i.useContext(x.m.Context).card.shortenIt,{ref:s,onMount:o}=k.P.useElWatcher(),c=me.oA(t).pipe(E.U((e=>e.group)),he.x(),ge.w((e=>s.pipe(me.cp((t=>fe.YC(t).pipe(E.U((()=>({width:t.clientWidth,height:t.clientHeight}))),L.O({width:t.clientWidth,height:t.clientHeight}),he.x(de.Box.eq.equals),M.b((t=>n(Object.assign(Object.assign({kind:"editPopupSize"},t),{group:e}))())))))))));return k.P.useSubscriptionTo(c),i.createElement(l.F.div,{className:et.editPopupContainer},e.replacementLabels,t.pipe(E.U(m.fold(a.gn,(e=>{var{group:t}=e,a=(0,W.__rest)(e,["group"]);return i.createElement(l.F.div,{className:et.editPopup,style:"withPosition"===a.kind?{transform:`translate(${a.left}px, ${a.top}px)`,visibility:"visible",opacity:1}:"withoutPosition"===a.kind?{visibility:"hidden",opacity:0}:(0,g.vE)(a),mount:o},i.createElement(d.zx.Primary,{name:"shorten-it-keep-change",onClick:n({kind:"keepEdit",group:t})},r.editPopupKeepButtonLabel),i.createElement(d.zx.Tertiary,{name:"shorten-it-dismiss-change",onClick:n({kind:"dismissEdit",group:t})},r.editPopupDismissButtonLabel))})))))})),Ve=B.UI.Knot.make(He,{replacementLabels:Ne}),Ye=B.UI.Knot.make(We,{transform:Ve}),Ze={padding:`0 ${S.ux.rem(1)}`},Qe={display:"flex",flexDirection:"row",padding:S.ux.rem(.25),position:"absolute",backgroundColor:f.Il.CoreNeutral0,boxShadow:"0px 0px 0.5px rgba(0, 0, 0, 0.7), 0px 2px 8px rgba(26, 33, 52, 0.2)",borderRadius:S.ux.rem(pe.fx),zIndex:1,top:0,left:0,transition:"visibility 0.15s linear, opacity 0.15s linear"},qe={$nest:{"&[data-disabled='true']":{backgroundColor:f.Il.CoreNeutral10,color:f.Il.CoreNeutral40}}},Je={$nest:{"& circle":{stroke:f.Il.CoreNeutral40}}},Xe={paddingRight:S.ux.rem(.25)},Ke={transition:`opacity ${S.ux.seconds(j.k_)}`},et=S.ux.stylesheet({loadingWrapper:[Ke],loadingWrapperInvisible:[Ke,{opacity:0,pointerEvents:"none"}],footerBtns:[{display:"flex"}],expandEditsBtn:[Ze],editPopupContainer:[{position:"relative"}],editPopup:[Qe],applyButton:[qe],applyButtonSpinner:[Je],applyButtonMessage:[Xe],transformHidden:[{pointerEvents:"none",opacity:.5}]});var tt=n(24209),nt=n(83401),rt=n(19751),it=n(41398),at=n(35214),st=n(73975);const ot=(e,t,n)=>B.Z.composeKnot({root:B.Z.fromSideEffect(a.Q1,e.pipe(E.U((e=>e.renderOptions.layoutDensity)))),labels:r=>tt.T(r.pipe(it.M(e),M.b((([e,r])=>{const i=e.action.action;switch(i.kind){case"reviewEdit":t.set(m.some({groupId:i.group,expandedEdit:m.none,popupSize:m.none,popupPosition:m.none})),n.next({type:_.lY.Type.shortenItReviewEdit,alertId:r.activeAlert.id,itemId:r.id,group:i.group});break;case"editGroupExpanded":t.set((0,a.zG)(t.get(),m.filter((e=>e.groupId===i.group)),m.fold((()=>m.some({groupId:i.group,popupSize:m.none,popupPosition:m.none,expandedEdit:m.some({offsetRect:i.offsetRect,offsetParentSize:i.offsetParentSize})})),(e=>m.some(Object.assign(Object.assign({},e),{expandedEdit:m.some({offsetRect:i.offsetRect,offsetParentSize:i.offsetParentSize})}))))));break;default:(0,g.vE)(i)}})),ge.w((()=>nt.C))),rt.sequenceS({item:e,editsInReview:t}).pipe(E.U((({item:e,editsInReview:t})=>(0,a.zG)(e.transform,m.filter(G.b$.isShortenIt),m.map($.pick("labels")),m.map((t=>(0,a.zG)(t,ye.DZ((t=>(0,a.zG)(t.group,m.fold(a.jv,(t=>e.activeAlert.dismissedTransformGroups.has(t))))?t.type===G.GP.Delete?m.some(Object.assign(Object.assign({},t),{type:G.GP.Text})):t.type===G.GP.Insert?m.none:m.some(t):m.some(t)))))),m.fold((()=>[]),(0,a.ls)(ye.u4([],((e,n)=>{const r=n.type===G.GP.Delete?{kind:n.type,text:n.text,collapsed:(0,a.zG)(n.group,m.fold((()=>{var e;return null!==(e=n.shouldBeCollapsed)&&void 0!==e&&e}),(e=>!(0,a.zG)(t,m.exists((t=>t.groupId===e)))))),group:n.group}:n.type===G.GP.Insert||n.type===G.GP.Text?{kind:n.type,text:n.text,group:n.group}:(0,g.vE)(n);return e.length>0&&m.getEq(st.yv).equals(e[e.length-1].group,n.group)&&m.isSome(n.group)?e.slice(0,-1).concat({group:n.group,parts:e[e.length-1].parts.concat(r)}):e.concat({group:n.group,parts:[r]})})),ye.UI((e=>({root:{isReviewableGroup:e.parts.length>1||1===e.parts.length&&e.parts[0].kind!==G.GP.Text,isInReview:(0,a.zG)(e.group,m.fold(a.jv,(e=>(0,a.zG)(t,m.exists((t=>t.groupId===e)))))),group:(0,a.zG)(e.parts.map((e=>e.group)),(0,at.fold)(m.getFirstMonoid()))},parts:e.parts}))))))))))}),lt=(e,t,n,r,i,a)=>B.Z.composeKnot({root:r=>tt.T(r.pipe(M.b((e=>{e.type===_.lY.Type.hover&&a.next("hover"===e.kind),n.next(e)})),ge.w((()=>nt.C))),rt.sequenceS({item:e,isCheckingGlobal:t,transformHidden:i})),transform:B.Z.composeKnot({root:ct(e,r,n),replacementLabels:ot(e,r,n)})});const ct=(e,t,n)=>r=>tt.T(r.pipe(it.M(e),M.b((([e,r])=>{"editPopupSize"===e.kind?t.set((0,a.zG)(t.get(),m.filter((t=>t.groupId===e.group)),m.fold((()=>m.some({groupId:e.group,expandedEdit:m.none,popupPosition:m.none,popupSize:m.some({width:e.width,height:e.height})})),(t=>m.some(Object.assign(Object.assign({},t),{popupSize:m.some({width:e.width,height:e.height})})))))):function(e,t,n,r){switch(n.set((0,a.zG)(n.get(),m.filter((e=>e.groupId!==t.group)))),t.kind){case"dismissEdit":r.next({type:_.lY.Type.shortenItDismissEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group}),e.activeAlert.transformGroups.size===new Set(e.activeAlert.dismissedTransformGroups).add(t.group).size&&r.next({type:_.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:O.X.isEligibleForDismissSurvey(e)});break;case"keepEdit":r.next({type:_.lY.Type.shortenItKeepEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group});break;default:(0,g.vE)(t.kind)}}(r,e,t,n)})),ge.w((()=>nt.C))),t.view(m.chain((e=>(0,a.zG)(e.expandedEdit,m.map((t=>(0,a.zG)(e.popupSize,m.fold((()=>({kind:"withoutPosition",group:e.groupId})),(n=>Object.assign({kind:"withPosition",group:e.groupId},function(e,t,n=-10){const r=t.offsetRect.top+t.offsetRect.height,i=t.offsetRect.left+n;if(i+e.width>t.offsetParentSize.width)return{top:r,left:t.offsetParentSize.width-e.width};return{top:r,left:i}}(n,t))))))))))));const ut={loading:te,summary:Ye,notFound:se},dt=B.UI.Union.make("kind",ut),pt=e=>e.pipe(E.U((e=>{const t=e.activeAlert.summaryState,n=m.fold(a.jv,G.b$.isShortenIt)(e.transform);switch(t){case z.vQ.SummaryState.notFound:return{kind:"notFound"};case z.vQ.SummaryState.notRequested:return{kind:"loading"};case z.vQ.SummaryState.requestSent:return n?{kind:"summary"}:{kind:"loading"};case z.vQ.SummaryState.invalidated:case z.vQ.SummaryState.received:return{kind:"summary"};default:(0,g.vE)(t)}})));var mt,ht=n(2844);!function(e){e.Full=e=>{const t=k.P.useAtomOf(e.card),{isChecking:n,isCheckingGlobal:r}=function(e,t,n){const r=k.P.useAtomOf({isWaiting:e.activeAlert.summaryState===z.vQ.SummaryState.requestSent||e.activeAlert.summaryState===z.vQ.SummaryState.invalidated,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return k.P.useMemoOnDidMount((()=>({isChecking:ht.aj([t,r]).pipe(E.U((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),he.x()),isCheckingGlobal:ht.aj([n,r]).pipe(E.U((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),he.x())})))}(e.card,e.isChecking,e.isCheckingGlobal),{transformHidden:s,isMouseInside:l}=(0,j.ce)(n),c=k.P.useMemoOnDidMount((()=>o.h.create(m.none))),u=k.P.useMemoOnDidMount((()=>t.pipe(E.U((0,a.ls)($.pick("transform"),m.filter(G.b$.isShortenIt))),rt.skipBy(m.getEq(G.b$.ShortenIt.eq)),E.U((()=>m.none)),M.b(w.wW(c)))));return k.P.useSubscriptionTo(u),i.createElement(i.Fragment,null,B.UI.mount(dt,((e,t,n,r,i,a)=>B.Z.composeUnion({loading:ae(e,n),notFound:ue(e,n),summary:lt(e,t,n,r,i,a)},(()=>pt(e))))(t,r,e.actions,c,s,l)))}}(mt||(mt={}));var gt=n(97428);const ft=({card:e,actions:t})=>{const n=i.useContext(x.m.Context),r=m.isNone(e.activeAlert.takeawayFeedback)?n.card.takeaway.defaultTitle:e.activeAlert.title,o=m.fromNullable(e.activeAlert.highlightTexts[0]),l=(0,s.pipe)(e.activeAlert,m.fromPredicate((e=>!e.takeawayIsLikelyToBeRead&&h.contains(z.TO.correctlyDetected)(e.takeawayFeedback))),m.map((()=>e.meta.explanation)));return i.createElement(i.Fragment,null,(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions},i.createElement(j.jg,{text:O.X.miniTitle(e,n)}))),(()=>i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(j.Dx,{text:r}))))),(0,s.pipe)(o,m.fold(a.gn,(t=>i.createElement(j.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,s.pipe)(l,m.fold(a.gn,(n=>i.createElement(j.dk,{description:n,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))},yt=({card:e,feedbackActions:t})=>i.createElement(i.Fragment,null,i.createElement(d.zx.Ghost,{name:"takeaway-like",onClick:A.hz((()=>{var n;return t.next({type:_.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(n=e.activeAlert.highlightTexts[0])&&void 0!==n?n:"",isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})}))},i.createElement(u.JO.YesCircle,null)," Yes"),i.createElement(d.zx.Ghost,{name:"takeaway-dislike",onClick:A.hz((()=>t.next({type:_.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},i.createElement(u.JO.NoCircle,null)," No")),xt=({card:e,feedbackActions:t})=>{const n=i.useContext(x.m.Context);return i.createElement(i.Fragment,null,i.createElement(d.zx.Ghost,{name:"resolve",title:n.resolve,"aria-label":n.resolveLabel,onClick:A.hz((()=>t.next({type:_.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},i.createElement(u.JO.YesCircle,null)),i.createElement(d.zx.Ghost,{name:"ignore",title:n.dismiss,"aria-label":n.dismiss,onClick:A.hz((()=>t.next({type:_.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},i.createElement(u.JO.Ignore,null)))};function vt(e){return!m.isNone(e.takeawayFeedback)&&!(!m.isSome(e.examples)&&!m.isSome(e.details))}var bt;!function(e){e.Full=({card:e,actions:t})=>{return i.createElement(R.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:_.lY.Type.alertCardShow,cardType:_.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(n=e.renderOptions,Object.assign(Object.assign({},(0,U.f8)(n.layoutDensity)),{wrapper:(0,s.pipe)(n.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>It.minimalCardWrapper),(()=>{})))})),body:i.createElement(ft,{card:e,actions:t}),mainActions:m.isNone(e.activeAlert.takeawayFeedback)?i.createElement(yt,{card:e,feedbackActions:t}):i.createElement(xt,{card:e,feedbackActions:t}),footer:vt(e.activeAlert)?i.createElement(j.lJ,{card:e}):null,subActions:vt(e.activeAlert)?i.createElement(J.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var n}}(bt||(bt={}));const Ct={padding:`${S.ux.rem(.75)} ${S.ux.rem(.5)} ${S.ux.rem(.5)} ${S.ux.rem(1)}`},It=S.ux.stylesheet({minimalCardWrapper:[Ct]});var St=n(28748),wt=n(11662),Et=n(77678);const At=e=>S.ux.style({textDecoration:"line-through",color:e,fontWeight:"bold"}),kt=e=>S.ux.style({fontWeight:"bold",padding:`${S.ux.rem(.0625)} ${S.ux.rem(.21875)} ${S.ux.rem(.0625)} ${S.ux.rem(.21875)}`,border:`1px solid ${e}`,borderRadius:S.ux.rem(.125),color:e}),Tt=S.ux.style({fontSize:S.ux.rem(.875),letterSpacing:"0px",lineHeight:S.ux.rem(1.3125),padding:`${S.ux.rem(.15625)} 0`}),Mt=S.ux.style({fontWeight:"bold",padding:`${S.ux.rem(.0625)} ${S.ux.rem(.21875)} ${S.ux.rem(.0625)} ${S.ux.rem(.21875)}`,borderRadius:S.ux.rem(.125),color:Et.CoreNeutral50,background:Et.CoreNeutral10}),Nt=S.ux.style({fontStyle:"italic"}),Lt=[Mt,Tt],Ot=/[\d\w&]/,_t=e=>1===e.length&&!Ot.test(e),Dt=(e,t,n)=>(r,i,a)=>{const s=a[i-1];switch(r.type){case"insert":return e(r,i,s);case"delete":return t(r,i,s);case"text":return n(r,i,s);default:throw new Error("Unexpected citation alert transform part:"+JSON.stringify(r))}},Ft=(e,t)=>"text"===(null==t?void 0:t.type)?null:i.createElement("span",{key:"s"+e,className:Tt}," "),Pt=e=>i.createElement(i.Fragment,null,e.replacement.labels.map(e.isCitationGap?Dt(((e,t,n)=>i.createElement(i.Fragment,{key:t},Ft(t,n),i.createElement("span",Object.assign({},(0,H.Sh)(...Lt),{key:t}),e.text))),((e,t)=>i.createElement(i.Fragment,{key:t})),((e,t)=>i.createElement("span",{key:t,className:Tt},e.text))):Dt(((e,t,n)=>{return i.createElement(i.Fragment,{key:t},Ft(t,n),i.createElement("span",Object.assign({key:t},(0,H.Sh)(...(r=e.text,[_t(r)?kt(Et.CoreBlue50):(a=Et.CoreBlue50,S.ux.style({color:a,fontWeight:"bold"})),Tt,Nt]))),e.text));var r,a}),((e,t,n)=>{return i.createElement(i.Fragment,{key:t},Ft(t,n),i.createElement("span",Object.assign({key:t},(0,H.Sh)(...(r=e.text,_t(r)?[kt(Et.CoreRed50),(a=Et.CoreRed50,S.ux.style({backgroundImage:`linear-gradient(to top left,\n        rgba(0,0,0,0) 0%,\n        rgba(0,0,0,0) calc(50% - 0.5px),\n        ${a} 50%,\n        rgba(0,0,0,0) calc(50% + 0.5px),\n        rgba(0,0,0,0) 100%)`})),Tt,Nt]:[At(Et.CoreRed50),Tt,Nt]))),e.text));var r,a}),((t,n)=>i.createElement("span",Object.assign({key:n},(0,H.Sh)(Tt,("italic"===t.style||!e.isCitationItalicization)&&Nt)),t.text))))),Rt=({transformHidden:e})=>{const t=i.useContext(x.m.Context);return i.createElement(I.Xk,{"aria-hidden":w.U_(e),className:e.pipe(E.U((0,p.RN)(Xt.transformHint,Xt.transformHintInvisible)))},t.card.updatingSuggestion)},jt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const s=i.useContext(x.m.Context);return i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(j.M9,{card:e,actions:t,isChecking:n})),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement("div",{className:Xt.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:s.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:A.hz((()=>{t.next({type:_.lY.Type.alertApply,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),alertId:e.activeAlert.id,alternativeIndex:0,cardType:_.lY.getCardType(e)})}))})))})},Ut=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:c})=>{const u=i.useContext(x.m.Context),d=o.h.create(!0);return k.P.useSubscriptionTo((0,s.pipe)(d,T.T(1),M.b((e=>t.next({type:_.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Yt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),i.createElement(v.T9,{classes:{rendered:Xt.replacement,removing:Xt.replacementHidden},timeout:250,content:d.pipe(N.a(c,((t,n)=>(0,s.pipe)(n,m.fold((()=>(y.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(n=>i.createElement(wt.n4,{replacements:n,showDiff:t,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(F.j.Features.a11yContrast)})))))))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:Xt.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:c.pipe(E.U(m.fold((()=>""),(e=>u.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:A.hz((()=>{t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)})}))}),i.createElement(C.Ys,{className:Xt.fullSentenceCardCheckbox,checked:d,name:"set-goals"},u.card.showChangesToggle)))})},$t=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const c=i.useContext(x.m.Context),u=(0,s.pipe)(e.activeAlert.extraProperties.citationGap,h.contains(!0)),d=(0,s.pipe)(e.activeAlert.extraProperties.citationItalicization,h.contains(!0));return i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Yt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity,className:Kt.description})))),i.createElement(v.T9,{classes:{rendered:Xt.replacement,removing:Xt.replacementHidden},timeout:250,content:o.pipe(E.U((e=>i.createElement(Pt,{replacement:e.value,isCitationGap:u,isCitationItalicization:d}))))}),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:Xt.fullSentenceCardFooterBtns},!u&&i.createElement(j.Nm,{title:c.card.todoAction(e.activeAlert.todoAction),applyMessage:"Reformat",checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:A.hz((()=>{t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)})}))})))})},Bt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const c=(0,s.pipe)(e.userInput,m.getOrElse((0,a.a9)("")));return i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,{key:"content"},i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Yt,{isNew:e.renderOptions.isNew,actions:t}),i.createElement(l.F.div,{className:r.pipe(E.U((0,p.RN)(Xt.transformContainerInvisible,Xt.transformContainer)))},i.createElement(v.T9,{classes:{rendered:Xt.replacement,removing:Xt.replacementHidden},timeout:250,content:o.pipe(E.U(m.fold((()=>(y.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(wt.$s,{key:"label",gapValue:c,replacements:n,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(F.j.Features.a11yContrast),onFocus:()=>t.next({type:_.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:n=>t.next({type:_.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:n}),onApply:A.hz((()=>t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)})))})))))})),i.createElement(Rt,{transformHidden:r}),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))})},zt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{(0,g.kG)(m.isSome(e.activeAlert.extraProperties.citationDetection),"Should contain citation detection");const p=i.useContext(x.m.Context),f=o.h.create(h.unsafeGet(e.activeAlert.extraProperties.citationDetection));return i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,a.a9)(i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(Yt,{isNew:e.renderOptions.isNew,actions:t}),i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),i.createElement("div",{className:(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.cozy)((()=>en.dropdownContainer),(()=>en.minimalDropdownContainer)))},i.createElement(c.L,{name:"citationStyle",label:i.createElement(l.F.div,null,f.pipe(E.U((e=>i.createElement("span",{className:en.dropdownLabel,key:e},p.citation.essayDetectionCard.dropdownOptions[e],i.createElement(u.JO.TriangleArrow,{className:en.arrowIcon}))))))},Object.entries(p.citation.essayDetectionCard.dropdownOptions).map((([t,n])=>i.createElement(d.zx.Flat,{key:t,name:t,onClick:()=>f.set(t),textPosition:"right"},f.pipe(E.U((e=>t===e?i.createElement(u.JO.DocumentSettings.Selected,null):i.createElement("div",{className:en.placeholder})))),n,void 0!==p.citation.essayDetectionCard.examples[t]&&(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.cozy)((()=>i.createElement("span",{className:en.example},p.citation.essayDetectionCard.examples[t])),(()=>null)))))))),i.createElement(j.ko,{card:e,isChecking:n}))),cardFooter:n=>i.createElement(i.Fragment,null,i.createElement(j.lJ,{card:e}),i.createElement(l.F.div,{className:Xt.fullSentenceCardFooterBtns},i.createElement(j.Nm,{title:p.card.todoAction(e.activeAlert.todoAction),applyMessage:"Set style",checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:A.hz((()=>{t.next({type:_.Wh.Kind.setAcademicDomainAndCitationStyle,citationStyle:f.get(),id:e.id}),t.next({type:_.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})}))})))})},Gt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>{const c=i.useContext(x.m.Context);return i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(l.F.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions,badge:i.createElement(b.C.Regular,{a11yContrast:e.renderOptions.features.has(F.j.Features.a11yContrast)},c.beta)})),i.createElement(l.F.div,{className:r.pipe(E.U((0,p.RN)(Xt.transformContainerInvisible,Xt.transformContainer)))},i.createElement(v.T9,{classes:{rendered:Xt.replacement,removing:Xt.replacementHidden},timeout:250,content:o.pipe(E.U(m.fold((()=>(y.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>{const r=(0,s.pipe)(e.synfonySelection,m.getOrElse((()=>[])));return i.createElement(wt.Px,{replacements:n,onClick:n=>A.hz((()=>{t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:_.lY.getCardType(e),id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),drilldownSuggestionIds:r})})),onDive:(n,i)=>t.next({type:_.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:n,cardId:e.id,alternativeId:i,drilldownSuggestionIds:r}),onBack:()=>t.next({type:_.GM.Kind.back,cardId:e.id}),selection:r,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(F.j.Features.a11yContrast)})}))))})),i.createElement(Rt,{transformHidden:r}),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))})},Wt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:o})=>i.createElement(Ht,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>i.createElement(i.Fragment,null,i.createElement(j.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(l.F.div,{className:r.pipe(E.U((0,p.RN)(Xt.transformContainerInvisible,Xt.transformContainer)))},i.createElement(v.T9,{classes:{rendered:Xt.replacement,removing:Xt.replacementHidden},timeout:250,content:o.pipe(E.U(m.fold((()=>(y.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>i.createElement(j.hT,{rl:n,onClick:n=>A.hz((()=>{t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,id:e.id,eligibleForSurvey:O.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:O.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(F.j.Features.a11yContrast),demoDocOnboardingCopyV1:e.renderOptions.features.has(F.j.Features.demoDocOnboardingCopyV1)})))))})),i.createElement(Rt,{transformHidden:r}),i.createElement(j.ko,{card:e,isChecking:n}),(0,s.pipe)(e.renderOptions.layoutDensity,F.j.Density.matchOrDefault(F.j.Density.minimal)((()=>null),(()=>i.createElement(j.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,a.a9)(i.createElement(j.lJ,{card:e}))}),Ht=e=>{var t,n,r;return i.createElement(j.VM,Object.assign({},e,{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,a.a9)(i.createElement(j.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(n=e.mainActions)&&void 0!==n?n:(0,a.a9)(i.createElement(j.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(r=e.subActions)&&void 0!==r?r:(0,a.a9)(i.createElement(j.q4,{card:e.card,actions:e.actions}))}))},Vt=({card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s})=>D.i.isTakeawayItem(e)?i.createElement(bt.Full,{card:e,actions:t}):D.i.isShortenItItem(e)?i.createElement(mt.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):D.i.isToneAIItem(e)?i.createElement(St.Y.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):D.i.isEthicalAIItem(e)?i.createElement(P.T.Full,{card:e,actions:t,isChecking:n}):D.i.isSuggestedSnippetItem(e)?i.createElement(gt.w.Full,{card:e,actions:t,isChecking:n}):D.i.isKnowledgeHubSuggestedTermItem(e)?i.createElement(r.Full,{card:e,actions:t,isChecking:n}):O.X.isCitationDetectionCard(e)?i.createElement(zt,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):O.X.hasTransform(e)?O.X.hasFullSentenceTransform(e)?i.createElement(Ut,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):O.X.hasCitationTransform(e)?i.createElement($t,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):O.X.hasOneGapTransform(e)?i.createElement(Bt,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):O.X.hasSynfonyTransform(e)?i.createElement(Gt,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):i.createElement(Wt,{card:e,actions:t,isChecking:n,isCheckingGlobal:a,transform:s}):O.X.isSimple(e)?i.createElement(jt,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}):i.createElement(j.eb,{card:e,actions:t,isChecking:n}),Yt=e=>i.createElement(l.F.Fragment,null,e.isNew.pipe(E.U(m.fold(a.gn,(t=>i.createElement(j.jt,{type:t,actions:e.actions,key:"new-notification"})))),L.O(null))),Zt={transition:`opacity ${S.ux.seconds(j.k_)}`,transitionDelay:S.ux.seconds(j.k_)},Qt={position:"absolute",top:S.ux.rem(2),color:f.Il.CoreNeutral40,lineHeight:S.ux.rem(2),transition:`opacity ${S.ux.seconds(j.k_)}`,transitionDelay:S.ux.seconds(j.k_)},qt={transition:`opacity ${S.ux.seconds(j.k_)}`},Jt={fontSize:S.ux.rem(f.xv.BodySize),lineHeight:S.ux.rem(2.0625)},Xt=Object.assign({},S.ux.stylesheet({invisible:[j.Bn],transformContainer:[Zt],transformContainerInvisible:[Zt,j.Bn,{transitionDelay:"initial"}],transformHint:[Qt],transformHintInvisible:[Qt,j.Bn,{transitionDelay:"initial"}],replacement:[qt],replacementHidden:[qt,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[Jt]})),Kt=S.ux.prefixedStylesheet("withCitation",{description:[{$nest:{"& a":{backgroundImage:`repeating-linear-gradient(90deg, ${f.Il.CoreBlue50}, ${f.Il.CoreBlue50} 1px, transparent 1px, transparent 2px, ${f.Il.CoreBlue50} 2px)`,backgroundSize:"100% 1px",backgroundPosition:"0 100%",backgroundRepeat:"no-repeat",borderBottom:"none",paddingBottom:S.ux.px(1)}}}]}),en=S.ux.prefixedStylesheet("withCitationDetection",{dropdownLabel:[{color:f.Il.CoreBlue50,fontSize:S.ux.rem(.875),fontWeight:700,lineHeight:S.ux.rem(1.3125),cursor:"pointer"}],dropdownContainer:[{width:S.ux.rem(18.75)}],minimalDropdownContainer:[{width:S.ux.rem(10)}],arrowIcon:[{transform:"rotate(180deg)",position:"absolute",marginLeft:S.ux.rem(-.5625),top:S.ux.rem(-.34375),$nest:{"*":{fill:f.Il.CoreBlue50}}}],placeholder:[{width:S.ux.rem(2),margin:`0 ${S.ux.rem(.25)} 0 0`}],example:[{display:"inline-block",marginLeft:"auto",marginRight:0,color:f.Il.CoreNeutral50,fontStyle:"italic",fontSize:S.ux.rem(.75),lineHeight:S.ux.rem(2)}]})},76578:(e,t,n)=>{n.d(t,{P:()=>D});var r=n(27378),i=n(40327),a=n(12187),s=n(5739),o=n(77176),l=n(5114),c=n(50474),u=n(4021),d=n(3656),p=n(66896),m=n(91549),h=n(4890),g=n(54290),f=n(50224),y=n(32941),x=n(38983),v=n(83078),b=n(48911),C=n(31278),I=n(26027),S=n(77610),w=n(28584);function E(e,t){return p.R.outcomeTypeMatch({correctness:r.createElement(C.JO.Correctness,{className:t}),clarity:r.createElement(C.JO.ClarityOutcome,{className:t}),premium:r.createElement(C.JO.Star,{className:t}),engagement:r.createElement(C.JO.EngagementOutcome,{className:t}),delivery:r.createElement(C.JO.DeliveryOutcome,{className:t}),vox:null,knowledgeHub:null})(e)}const A=({text:e,className:t})=>r.createElement("div",{className:t},e),k=(e,t,n)=>{const s=I.X.miniTitle(e,t),o=(0,i.pipe)(e.activeAlert.extraProperties.vox,l.map((e=>(({vox:e,theme:t={}})=>({icon:(0,i.pipe)(e.logoUrl,l.map((e=>r.createElement(w.Im,Object.assign({},(0,a.Sh)(t.logo),{logoUrl:e}))))),action:r.createElement(w.$x,Object.assign({vox:e},(0,a.Sh)(t.label),{isMinimalCard:!1}))}))({vox:e,theme:{logo:n.voxLogo,label:n.voxLabel}})))),c=(0,i.pipe)(((e,t)=>(0,i.pipe)(e.activeAlert.extraProperties.tone,l.map((({emojiId:e})=>({action:t.replace(b.Vg,""),emojiId:e})))))(e,s),l.map((({action:e,emojiId:t})=>({icon:l.some(r.createElement(b.In,{id:t,className:(0,a.Sh)(n.emojiLogo).className})),action:r.createElement(A,{text:e,className:n.wrapper})})))),u=({className:e})=>r.createElement(C.JO.PaidLink,{width:14,className:e});return(0,i.pipe)(o,v.orElse(c),l.getOrElse((()=>{return{icon:(t=e.activeAlert,(0,i.pipe)(t.freePremium,l.exists((e=>"unlocked"===e)))?l.some(r.createElement(u,{className:(0,a.Sh)(n.freePremiumIcon).className})):S.i.isTakeawayItem(e)?l.some(r.createElement(C.JO.Megaphone,{width:16,className:n.takeawayLogo})):l.none),action:r.createElement(A,{text:s,className:n.wrapper})};var t})))},T=(e,t,n)=>{const{action:r,icon:a}=k(e,t,n);return{actionComponent:r,iconComponent:(0,i.pipe)(a,l.fold((()=>e.renderOptions.cardVisualMode.view(h.j.CardVisualMode.match({onRegular:()=>l.none,onContrast:()=>l.fromNullable(E(e.activeAlert.lensType,n.lensLogo))}))),(e=>x.h.create(l.some(e)))))}},M=e=>e?g.b.MiniContrast:g.b.Mini,N=e=>[p.R.outcomeTypeMatch({correctness:f.m.dotCorrectness,clarity:f.m.dotClarity,premium:f.m.dotAdvanced,engagement:f.m.dotEngagement,delivery:f.m.dotDelivery,vox:f.m.dotVox,knowledgeHub:f.m.knowledgeHub})(e.lensType),y.FW.cta],L=()=>{const e=r.useContext(c.m.Context);return r.createElement(u.C.Regular,{className:y.FW.newLabel},e.new)},O=e=>e.hasOwnProperty("features")&&e.features.has(h.j.Features.a11yContrast),_=e=>e.hasOwnProperty("features")&&e.features.has(h.j.Features.sduiContainerStyle);var D;!function(e){e.Bundle=({card:e,actions:t})=>{const[n]=N(e.activeAlert),o=(0,i.pipe)(e.renderOptions,O,M);return r.createElement(o,Object.assign({},(0,a.Sh)(y.l$.wrapper,y.l$.bundleContainer,y.l$.dot,n),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,counter:r.createElement(d.CL,{className:y.l$.alertsCounter},e.alerts.length),sduiStyle:_(e.renderOptions)}),r.createElement(s.F.div,Object.assign({},(0,a.Sh)(y.l$.miniContainer)),r.createElement("div",{className:y.l$.highlightedText},m.R.bundleTitle(e))))},e.Standard=({card:e,actions:t})=>{const n=r.useContext(c.m.Context),[u,d]=N(e.activeAlert),p=(0,i.pipe)(e.renderOptions,O,M),{actionComponent:m,iconComponent:h}=T(e,n,{wrapper:(0,a.Sh)(d,y.FW.ctaText).className,voxLogo:(0,a.Sh)(y.FW.cardLogo,y.l$.cardLogo).className,voxLabel:y.FW.cta,emojiLogo:(0,a.Sh)(y.FW.cardLogo,y.l$.cardLogo).className,lensLogo:(0,a.Sh)(y.FW.cardLogo,y.l$.cardLogo,y.FW.lensIcon).className,takeawayLogo:y.nu.takeawayIconStandard,freePremiumIcon:(0,a.Sh)(y.FW.diamondIcon,y.FW.cardLogo,y.l$.cardLogo).className});return r.createElement(p,Object.assign({},(0,a.Sh)(y.l$.wrapper,h.view((e=>l.isSome(e)?y.l$.invisibleDot:y.l$.dot)),u),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:_(e.renderOptions)}),r.createElement(s.F.div,Object.assign({},(0,a.Sh)(y.l$.miniContainer)),(0,i.pipe)(h.view(l.toNullable)),r.createElement("div",{className:y.l$.highlightedText},e.activeAlert.highlightTexts[0]),r.createElement("div",{className:y.l$.middleDot},""),m,(0,i.pipe)(e.renderOptions.isNew,o.U((e=>l.isSome(e)?r.createElement(L,{key:"new-label"}):null)))))},e.TwoLined=({card:e,actions:t})=>{const n=r.useContext(c.m.Context),[o,u]=N(e.activeAlert),d=(0,i.pipe)(e.renderOptions,O,M),{actionComponent:p,iconComponent:m}=T(e,n,{wrapper:(0,a.Sh)(u,y.FW.ctaText,y.nu.ctaText,y.nu.subTitle).className,voxLogo:(0,a.Sh)(y.FW.cardLogo,y.nu.cardLogo).className,voxLabel:(0,a.Sh)(y.FW.cta,y.nu.subTitle).className,emojiLogo:(0,a.Sh)(y.FW.cardLogo,y.nu.cardLogo).className,lensLogo:(0,a.Sh)(y.FW.cardLogo,y.nu.lensIcon,y.FW.lensIcon).className,takeawayLogo:y.nu.takeawayIconMini,freePremiumIcon:(0,a.Sh)(y.FW.diamondIcon,y.FW.cardLogo,y.nu.cardLogo).className});return r.createElement(d,Object.assign({},(0,a.Sh)(y.nu.wrapper,m.view((e=>l.isSome(e)?y.nu.invisibleDot:y.nu.dot)),o),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:_(e.renderOptions)}),r.createElement(s.F.div,Object.assign({},(0,a.Sh)(y.nu.miniContainer)),p,(0,i.pipe)(m.view(l.toNullable)),r.createElement("div",{className:y.Es},e.activeAlert.highlightTexts[0])))}}(D||(D={}))},32941:(e,t,n)=>{n.d(t,{Es:()=>u,FW:()=>_,l$:()=>A,nu:()=>y});var r=n(44060),i=n(89894),a=n(24588),s=n(40219);const o="0 1px 8px rgba(109, 117, 141, .18)",l={$nest:{"&:before":{top:i.ux.rem(.85),left:0}}},c="miniTwoLinedHighlightedText",u=i.ux.joinClasses([c,i.ux.style({overflow:"hidden",marginTop:i.ux.rem(-.25),color:r.Il.CoreNeutral90,textOverflow:"ellipsis"})]),d={height:i.ux.rem(3.25),borderRadius:i.ux.rem(s.Jr),boxShadow:o,$nest:{"&:hover":{boxShadow:o},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},p={top:i.ux.rem(.7)},m={top:i.ux.rem(.1)},h={fontWeight:i.ux.important(400),fontSize:i.ux.rem(.75)},g={position:"absolute",left:i.ux.rem(.5),minWidth:"initial",minHeight:"initial",background:r.Il.CoreNeutral0},f=Object.assign(Object.assign({},g),{top:i.ux.rem(.6)}),y=i.ux.stylesheet({dot:[l],invisibleDot:[l,{$nest:{"&:before":{visibility:"hidden"}}}],wrapper:[d],miniContainer:[{flexDirection:"column"}],cardLogo:[p],lensIcon:[m],subTitle:[h],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[f],takeawayIconStandard:[g]}),x={height:i.ux.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},v={$nest:{"&:before":{top:i.ux.px(1),bottom:0,left:0}}},b={$nest:{"&:before":{top:i.ux.px(1),bottom:0,left:0,visibility:"hidden"}}},C={height:i.ux.important(i.ux.rem(2.5)),borderRadius:i.ux.rem(s.Jr)},I={color:r.Il.CoreNeutral50,display:"flex",width:i.ux.rem(2),height:i.ux.percent(100),justifyContent:"center",alignItems:"center"},S={overflow:"hidden",color:r.Il.CoreNeutral90,textOverflow:"ellipsis"},w={display:"inline-block",padding:`0 ${i.ux.rem(.5)}`},E={top:0,bottom:0,left:i.ux.rem(.5),margin:"auto"},A=i.ux.stylesheet({wrapper:[x],dot:[v],invisibleDot:[v,b],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[C],alertsCounter:[I],highlightedText:[S],middleDot:[w],cardLogo:[E]}),k={color:r.Il.CoreNeutral50,fontWeight:300},T={position:"absolute",left:i.ux.rem(.5),width:i.ux.rem(1),height:i.ux.rem(1),background:a.Zn},M={left:i.ux.rem(0)},N={marginLeft:i.ux.rem(.5)},L={marginLeft:i.ux.rem(-.5)},O={minHeight:"auto",left:i.ux.rem(.4)},_=i.ux.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[k],cardLogo:[T],lensIcon:[L],outcomesCardLogo:[T,M],newLabel:[N],diamondIcon:[O]})},11662:(e,t,n)=>{n.d(t,{Px:()=>Ze,n4:()=>Ye,$s:()=>qe,zO:()=>Ke,RF:()=>nt});var r=n(27378),i=n(57050),a=n(40327),s=n(12187),o=n(38983),l=n(5739),c=n(18208),u=n(55415),d=n(22232),p=n(8125),m=n(5114),h=n(50474),g=n(64757),f=n(86732),y=n(26215),x=n(31278),v=n(66672),b=n(3656),C=n(51006),I=n(77176),S=n(98637),w=n(4890),E=n(22391),A=n(91463),k=n(13578),T=n(94632),M=n(44060),N=n(89894),L=n(94048),O=n(40219);const _=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:N.ux.rem(.5*e)}}}),D=(e,t,n,r)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:r,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${n}) '. '`}}}}}),F=e=>[D(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),D(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),D(e,5,"lower-roman","card-list6 card-list7 card-list8"),D(e,6,"decimal","card-list7 card-list8"),D(e,7,"lower-alpha","card-list8"),D(e,8,"lower-roman","none")],P="cards-replacements_labels-",R={list:`${P}list`,item:`${P}item`,diff:`${P}diff`,columnList:`${P}columnList`,itemInsert:`${P}itemInsert`,deleteAll:`${P}deleteAll`,crossed:`${P}crossed`,deleteQuote:`${P}deleteQuote`,deletePunctuation:`${P}deletePunctuation`,deleteDoubleComma:`${P}deleteDoubleComma`,deleteApostrophe:`${P}deleteApostrophe`,deleteLetter:`${P}deleteLetter`,deletePunctuationBeforeLetter:`${P}deletePunctuationBeforeLetter`,itemOriginal:`${P}itemOriginal`,itemOriginalStrikeThrough:`${P}itemOriginalStrikeThrough`,itemOriginalContent:`${P}itemOriginalContent`,spacesOnlyContent:`${P}spacesOnlyContent`,removeOrContainer:`${P}removeOrContainer`,itemContext:`${P}itemContext`,itemContextShifted:`${P}itemContextShifted`,or:`${P}or`,arrowInsertsList:`${P}arrowInsertsList`,cozyArrowInsertsList:`${P}cozyArrowInsertsList`,inlineHeader:`${P}inlineHeader`,fullSentenceBackground:`${P}fullSentenceBackground`,minimalFullSentenceBackground:`${P}minimalFullSentenceBackground`,fullSentenceDelete:`${P}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${P}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${P}fullSentenceHidden`,fullSentenceListItem:`${P}fullSentenceListItem`,fullSentenceBulletListItem:`${P}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${P}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${P}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:P+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:P+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:P+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${P}fullSentenceInsert`,fullSentenceInsertPunctuation:`${P}fullSentenceInsertPunctuation`,toneAIInsert:`${P}toneAIInsert`,itemRemove:`${P}itemRemove`,oneGapInsert:`${P}oneGapInsert`,oneGapInput:`${P}oneGapInput`,drilldownInsertGroup:`${P}drilldownInsertGroup`,drilldownArrowButton:`${P}drilldownArrowButton`,drilldownIcon:`${P}drilldownIcon`,drilldownOriginalRow:`${P}drilldownOriginalRow`,drilldownBackButton:`${P}drilldownBackButton`,collapsibleDelete:`${P}collapsibleDelete`,collapsibleInsert:`${P}collapsibleInsert`,collapsiblePartContent:`${P}collapsiblePartContent`},j={position:"relative",overflow:"hidden",margin:`0 ${N.ux.rem(.5)} ${N.ux.rem(.5)} 0`,padding:`${N.ux.rem(.25)} ${N.ux.rem(.5)}`,borderRadius:N.ux.rem(O.fx),color:M.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:N.ux.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},U={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:N.ux.rem(.3125),width:"1px",height:"120%",background:M.Il.CoreNeutral0,content:"''",opacity:.8}}},$={position:"relative",marginRight:N.ux.rem(.5),whiteSpace:"nowrap"},B=e=>({overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${N.ux.rem(1)} 0`,padding:e?0:N.ux.rem(.5),maxHeight:N.ux.rem(12),borderRadius:N.ux.rem(O.fx),background:e?M.Il.CoreNeutral0:M.Il.CoreNeutral10,color:M.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${O.g_}, ${O.xL}`}),z={position:"relative",marginRight:N.ux.rem(.5),maxWidth:`calc(100% - ${N.ux.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:N.ux.rem(.5),color:M.Il.CoreNeutral50,content:"''",verticalAlign:"middle"}}},G={textDecoration:"line-through",color:M.Il.CoreRed40,textDecorationLine:"line-through"},W=[_(0),_(1),_(2),_(3),_(4),_(5),_(6),_(7),_(8)],H={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${O.g_}, ${O.xL}`},V=e=>({display:"inline-block",background:e?k.vU.InteractiveBranded.Primary.Default:M.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:e?k.vU.InteractiveBranded.Primary.Hover:M.Il.CoreGreen50},"&[data-disabled='true']":{background:e?k.vU.InteractiveBranded.Primary.Default:M.Il.CoreGreen40,opacity:.4}}}),Y={$nest:{"&:after":{transform:"rotate(-25deg)"}}},Z={paddingRight:N.ux.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Q=e=>({color:e?k.vU.InteractiveBranded.Primary.Default:M.Il.CoreGreen60,fontWeight:600}),q={paddingRight:N.ux.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},J={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},X={display:"flex",flexBasis:"100%"},K={margin:`0 ${N.ux.rem(.5)} ${N.ux.rem(.5)} 2px`,color:M.Il.CoreNeutral60},ee={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},te={marginBottom:N.ux.rem(.25),color:M.Il.CoreNeutral60,fontWeight:400,fontSize:N.ux.rem(.8),lineHeight:N.ux.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ne={color:k.vU.DangerAndDeletion.Primary.Default,textDecoration:"line-through",fontWeight:600},re=Object.assign(Object.assign({},ne),{textDecoration:"none"}),ie={fontWeight:"bold",color:M.Il.CorePurple50},ae={background:k.vU.DangerAndDeletion.Primary.Default,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:k.vU.DangerAndDeletion.Primary.Hover}}},se={$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}},oe={$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}},le={width:"100%",marginTop:N.ux.rem(.5),marginBottom:N.ux.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:M.Il.CoreNeutral40}}},ce={marginTop:N.ux.rem(.5),lineHeight:`calc(${N.ux.rem(2)} - ${N.ux.px(2)})`,padding:`0 ${N.ux.rem(.5)}`,border:N.ux.important(`${N.ux.px(1)} solid ${M.Il.CoreNeutral50}`),color:M.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:N.ux.important(M.Il.CoreNeutral20)}}},ue=L.E.style(j,V(!1)),de={margin:`0 ${N.ux.rem(.5)} ${N.ux.rem(.5)} 0`,$nest:{[`& .${R.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${R.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${R.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},pe={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:N.ux.rem(.1875),paddingRight:N.ux.rem(.3125)},me={width:N.ux.rem(1),height:N.ux.rem(1),minWidth:N.ux.rem(1),minHeight:N.ux.rem(1),verticalAlign:"top",marginTop:N.ux.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:N.ux.important("white")}}},he={width:N.ux.percent(100),marginBottom:N.ux.rem(.5),display:"flex",$nest:{"& > *":{marginRight:N.ux.rem(.5)}}},ge={background:M.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:M.Il.CoreNeutral10}}},fe={display:"inline-block",width:N.ux.rem(1),lineHeight:N.ux.rem(.625),height:N.ux.rem(.625),margin:`0 ${N.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:N.ux.rem(O.mA)},ye={lineHeight:N.ux.rem(.2),verticalAlign:"super",marginLeft:"1px"},xe=Object.assign(Object.assign({},fe),{backgroundColor:M.Il.CoreRed10}),ve=Object.assign(Object.assign({},fe),{backgroundColor:M.Il.CoreGreen10}),be={list:N.ux.joinClasses([R.list,N.ux.style(H),L.E.style(H)]),item:N.ux.joinClasses([R.item,N.ux.style(j),L.E.style(j)]),itemInsert:N.ux.joinClasses([R.itemInsert,N.ux.style(j,V(!1)),ue]),deleteAll:N.ux.joinClasses([R.deleteAll,N.ux.style({textDecoration:"line-through"}),L.E.style({textDecoration:"line-through"})]),crossed:N.ux.joinClasses([R.crossed,N.ux.style(U)]),deleteQuote:N.ux.joinClasses([R.deleteQuote,N.ux.style(U,Y),L.E.style(U,Y)]),deletePunctuation:N.ux.joinClasses([R.deletePunctuation,N.ux.style(U,Z),L.E.style(U,Z)]),deleteDoubleComma:N.ux.joinClasses([R.deleteDoubleComma,N.ux.style({textDecoration:"line-through"}),L.E.style({textDecoration:"line-through"})]),deleteApostrophe:N.ux.joinClasses([R.deleteApostrophe,N.ux.style(U,q),L.E.style(U,q)]),deleteLetter:N.ux.joinClasses([R.deleteLetter,N.ux.style(J),L.E.style(J)]),deletePunctuationBeforeLetter:N.ux.joinClasses([R.deletePunctuationBeforeLetter,N.ux.style({textDecoration:"line-through"}),L.E.style({textDecoration:"line-through"})]),itemOriginal:N.ux.joinClasses([R.itemOriginal,N.ux.style(z),L.E.style(z)]),itemOriginalStrikeThrough:N.ux.joinClasses([R.itemOriginalStrikeThrough,N.ux.style(G),L.E.style(G)]),itemOriginalContent:N.ux.joinClasses([R.itemOriginalContent,N.ux.style({color:M.Il.CoreNeutral90}),L.E.style({color:M.Il.CoreNeutral90})]),spacesOnlyContent:N.ux.joinClasses([R.spacesOnlyContent,N.ux.style({whiteSpace:"pre"})]),removeOrContainer:N.ux.joinClasses([R.removeOrContainer,N.ux.style(X),L.E.style(X)]),itemContext:N.ux.joinClasses([R.itemContext,N.ux.style($)]),itemContextShifted:N.ux.joinClasses([R.itemContextShifted,N.ux.style($,{marginRight:"2px"}),L.E.style($,{marginRight:"2px"})]),or:N.ux.joinClasses([R.or,N.ux.style(K),L.E.style(K)]),arrowInsertsList:N.ux.joinClasses([R.arrowInsertsList,N.ux.style(ee),L.E.style(ee)]),columnList:N.ux.joinClasses([R.columnList,N.ux.style(ee,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),L.E.style(ee)]),cozyArrowInsertsList:N.ux.joinClasses([R.arrowInsertsList,N.ux.style(ee,{flex:2,flexBasis:"0%"}),L.E.style(ee)]),inlineHeader:N.ux.joinClasses([R.inlineHeader,N.ux.style(te),L.E.style(te)]),toneAIInsert:N.ux.joinClasses([R.toneAIInsert,N.ux.style(ie),L.E.style(ie)]),fullSentenceBackground:N.ux.joinClasses([R.fullSentenceBackground,N.ux.style(B(!1)),L.E.style(B(!1))]),minimalFullSentenceBackground:N.ux.joinClasses([R.minimalFullSentenceBackground,N.ux.style(B(!1),{lineHeight:N.ux.rem(1.3125)}),L.E.style(B(!1),{lineHeight:N.ux.rem(1.3125)})]),fullSentenceDelete:N.ux.joinClasses([R.fullSentenceDelete,N.ux.style(ne),L.E.style(ne)]),fullSentenceDeleteCollapsed:N.ux.joinClasses([R.fullSentenceDeleteCollapsed,N.ux.style(re),L.E.style(re)]),fullSentenceHidden:N.ux.joinClasses([R.fullSentenceHidden,N.ux.style({display:"none"})]),fullSentenceListItem:N.ux.joinClasses([R.fullSentenceListItem,N.ux.style(...W),L.E.style(...W)]),fullSentenceBulletListItem:N.ux.joinClasses([R.fullSentenceBulletListItem,N.ux.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),L.E.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:N.ux.joinClasses([R.fullSentenceDashedListItem,N.ux.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),L.E.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:N.ux.joinClasses([R.fullSentenceOrderedListItem,N.ux.style(...F(""),...W),L.E.style(...F(""),...W)]),fullSentenceOrderedListItemWithFormatting:N.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,N.ux.style(...F(""),...W,Q(!1)),L.E.style(...F(""),...W,Q(!1))]),fullSentenceBulletListItemWithFormatting:N.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,N.ux.style(...W,oe,Q(!1)),L.E.style(...W,oe)]),fullSentenceDashedListItemWithFormatting:N.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,N.ux.style(...W,se,Q(!1)),L.E.style(...W,se)]),fullSentenceInsert:N.ux.joinClasses([R.fullSentenceInsert,N.ux.style(Q(!1))]),fullSentenceInsertPunctuation:N.ux.joinClasses([R.fullSentenceInsertPunctuation,N.ux.style(Q(!1))]),diff:N.ux.joinClasses([R.diff,N.ux.style({fontWeight:"bolder"}),L.E.style({fontWeight:"bolder"})]),itemRemove:N.ux.joinClasses([R.itemRemove,N.ux.style(j,ae)]),oneGapInsert:N.ux.joinClasses([R.oneGapInsert,N.ux.style(j,V(!1),le),ue]),oneGapInput:N.ux.joinClasses([R.oneGapInput,N.ux.style(ce)]),drilldownInsertGroup:N.ux.joinClasses([R.drilldownInsertGroup,N.ux.style(de)]),drilldownArrowButton:N.ux.joinClasses([R.drilldownArrowButton,N.ux.style(pe)]),drilldownIcon:N.ux.joinClasses([R.drilldownIcon,N.ux.style(me)]),drilldownOriginalRow:N.ux.joinClasses([R.drilldownOriginalRow,N.ux.style(he)]),drilldownBackButton:N.ux.joinClasses([R.drilldownBackButton,N.ux.style(ge)]),collapsibleDelete:N.ux.joinClasses([R.collapsibleDelete,N.ux.style(xe)]),collapsibleInsert:N.ux.joinClasses([R.collapsibleInsert,N.ux.style(ve)]),collapsiblePartContent:N.ux.joinClasses([R.collapsiblePartContent,N.ux.style(ye)])};N.ux.cssRule(`.${R.fullSentenceDelete} + .${R.fullSentenceInsert}`,{marginLeft:N.ux.rem(.25)});const Ce=Object.assign(Object.assign({},be),{itemInsert:N.ux.joinClasses([R.itemInsert,N.ux.style(j,V(!0)),ue,T.T$]),oneGapInsert:N.ux.joinClasses([R.oneGapInsert,ue,N.ux.style(j,V(!0),le),T.T$]),fullSentenceOrderedListItemWithFormatting:N.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,L.E.style(...F(""),...W,Q(!1)),N.ux.style(...F(""),...W,Q(!0))]),fullSentenceBulletListItemWithFormatting:N.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,N.ux.style(...W,oe,Q(!0)),L.E.style(...W,oe)]),fullSentenceDashedListItemWithFormatting:N.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,N.ux.style(...W,se,Q(!0)),L.E.style(...W,se)]),fullSentenceInsert:N.ux.joinClasses([R.fullSentenceInsert,N.ux.style(Q(!0))]),fullSentenceInsertPunctuation:N.ux.joinClasses([R.fullSentenceInsertPunctuation,N.ux.style(Q(!0))]),fullSentenceBackground:N.ux.joinClasses([R.fullSentenceBackground,N.ux.style(B(!0)),L.E.style(B(!1))]),minimalFullSentenceBackground:N.ux.joinClasses([R.minimalFullSentenceBackground,N.ux.style(B(!0),{lineHeight:N.ux.rem(1.3125)}),L.E.style(B(!0),{lineHeight:N.ux.rem(1.3125)})])});var Ie;function Se(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'.,;:!?\\\/\-()]+$/)}function we(e,t){if(e===t)return;const n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}const i=r<n?r:n,a=function(e,t,n){let r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i);let s=function(e,t,n,r,i){let a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);return a+s>n&&(s-=a+s-n),a+s>r&&(s-=a+s-r),{from:a,to:n-s,oldFragment:e.substr(a,n-s-a),newFragment:t.substr(a,r-s-a)}}!function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["']/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'][.,;]/)}(t)?e.deleteQuote:Se(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:Boolean(function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t))?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(Ie||(Ie={}));const Ee=e=>e?Ce:be,Ae=({theme:e,children:t})=>r.createElement(b.Xk,{className:e.list},t),ke=({transform:e,title:t,disabled:n,boldifier:i=_e,classes:a,onClick:s})=>r.createElement(g.zx,{animationMode:f.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:y.X.div,onClick:s,title:t,disabled:n,className:a.itemInsert},e.map(((e,t)=>r.createElement(r.Fragment,{key:t},i(e,a.diff))))),Te=({transform:e,theme:t,showOnboarding:n,onClick:i,onExpand:a})=>{const o=r.useContext(h.m.Context),l=e.label.map(((e,t)=>r.createElement(r.Fragment,{key:t},e.text))),c=r.createElement(g.zx,Object.assign({animationMode:f.m.FromClickPoint,name:"expand-insert",onClick:a,title:o.synfony.drilldownTooltip(l)},(0,s.Sh)(t.itemInsert,t.drilldownArrowButton)),r.createElement(x.JO.Arrow,{direction:x.n4.right,className:t.drilldownIcon}));return r.createElement("div",{className:t.drilldownInsertGroup},r.createElement(g.zx,{animationMode:f.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:y.X.div,onClick:i,title:o.synfony.applyTooltip,className:t.itemInsert},l),Boolean(e.subLabels.length)&&(n?r.createElement(Qe,null,c):c))},Me=({transform:e,title:t,theme:n,onClick:i})=>r.createElement(g.zx,Object.assign({animationMode:f.m.FromClickPoint,name:"apply-remove",role:"deletion",tag:y.X.div},{onClick:i,title:t,className:n.itemRemove}),e.map(((e,t)=>r.createElement(Fe,{key:t,element:e,theme:n})))),Ne=({transform:e,title:t,theme:n,onClick:i,children:a})=>r.createElement("div",{className:n.removeOrContainer},e.map(((a,s)=>"text"===a.type?r.createElement("span",{key:s,className:s===e.length-1?n.itemContextShifted:n.itemContext},a.text):r.createElement(g.zx,Object.assign({key:s,animationMode:f.m.FromClickPoint,name:"apply-remove-or",role:"deletion",tag:y.X.div},{onClick:i,title:t,className:n.itemRemove}),r.createElement(Fe,{element:a,theme:n})))),a),Le=e=>r.createElement("span",{className:e.classes.or},r.useContext(h.m.Context).card.or),Oe=({transform:e,replacements:t,boldifier:n=_e,theme:i,strikeThrough:o=!0})=>{const l=e.every((e=>null===e.text.match(/\n/))),u=we(e.map((e=>e.text)).join(""),1===t.length?t[0].map((e=>e.text)).join(""):""),d=(0,a.pipe)(null==u?void 0:u.oldFragment,(e=>Boolean(e)&&c.containsSpacesOnly(e))),p=l&&d;return r.createElement("div",Object.assign({},(0,s.Sh)(i.itemOriginal,o&&i.itemOriginalStrikeThrough)),r.createElement("span",Object.assign({},(0,s.Sh)(i.itemOriginalContent,p&&i.spacesOnlyContent)),e.map(((e,t)=>r.createElement(r.Fragment,{key:t},n(e,i.diff))))))},_e=u.pick("text"),De=({text:e,type:t},n)=>"text"===t?e:r.createElement("span",{className:n},e),Fe=({element:e,strikeClass:t,theme:n})=>"delete"===e.type?r.createElement("span",Object.assign({},(0,s.Sh)(Ie.getClass(n,e.text),t)),e.text):r.createElement(r.Fragment,null,e.text);function Pe({labels:e,original:t,onlyReplacements:n},i,a,s,o){const l=1===t.length,[c]=l?[t[0].text,e[0][0].text].map((e=>(t,n)=>i=>r.createElement(Ve,{index:n,oldText:t,newText:i.text,theme:e}))(s)):[De,De];return r.createElement(Ae,{theme:s},!n&&r.createElement(Oe,{transform:t,theme:s,replacements:e}),r.createElement("div",{className:a===w.j.Density.cozy?s.cozyArrowInsertsList:e.length>2?s.columnList:s.arrowInsertsList},e.map(((e,t)=>r.createElement(ke,Object.assign({},{key:t,title:i,onClick:o(t)},{transform:e,boldifier:c,classes:s}))))))}const Re=/^\W/,je=(e,t)=>{switch(e.type){case S.GP.Delete:return t.fullSentenceDelete;case S.GP.Insert:return Re.test(e.text)?t.fullSentenceInsertPunctuation:t.fullSentenceInsert;case S.GP.Text:case S.GP.List:return"";default:return(0,d.vE)(e)}},Ue=(e,t)=>{switch(e.type){case S.GP.Delete:return t.fullSentenceHidden;case S.GP.List:case S.GP.Text:case S.GP.Insert:return"";default:return(0,d.vE)(e)}},$e=(e,t)=>{switch(e.type){case S.GP.Delete:return t.fullSentenceHidden;case S.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?t.fullSentenceDashedListItemWithFormatting:t.fullSentenceOrderedListItemWithFormatting;case S.GP.Insert:case S.GP.Text:return"";default:return(0,d.vE)(e)}},Be=(e,t)=>{switch(e.type){case S.GP.Delete:return t.fullSentenceHidden;case S.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItem:"dashed"===e.kind?t.fullSentenceDashedListItem:t.fullSentenceOrderedListItem;case S.GP.Insert:case S.GP.Text:return"";default:return(0,d.vE)(e)}},ze=({p:e,theme:t})=>{const n=o.h.create(e.shouldBeCollapsed);return r.createElement(l.F.Fragment,null,n.view((0,p.RN)(r.createElement("span",{className:e.type===S.GP.Delete?t.collapsibleDelete:t.collapsibleInsert,onClick:()=>n.set(!1),role:"button",tabIndex:0},r.createElement("span",{className:t.collapsiblePartContent},"")),r.createElement(r.Fragment,null,e.text))))},Ge=(e,t,n)=>{var i;if(null===(i=e.shouldBeCollapsed)||void 0===i||!i)return e.text;switch(e.type){case S.GP.Insert:case S.GP.Delete:return t?r.createElement(ze,{p:e,theme:n}):e.text;case S.GP.Text:return r.createElement("span",null,"  ");default:(0,d.vE)(e)}},We=e=>{const t=(0,a.pipe)(e.showDiff,(0,p.RN)(je,Ue),(t=>t(e.transformPart,e.theme)));return r.createElement("span",{className:t},Ge(e.transformPart,e.showDiff,e.theme))},He=e=>{const t=(0,a.pipe)(e.showDiff,(0,p.RN)($e,Be),(t=>t(e.transformPart,e.theme)));return e.transformPart.type===S.GP.List?r.createElement("span",{className:t,"data-indent":e.transformPart.indent}):r.createElement("span",{className:t},Ge(e.transformPart,e.showDiff,e.theme))},Ve=({index:e=0,oldText:t,theme:n,newText:i})=>{const a=function(e,t){if(e.length<=4)return null;const n=we(e,t);if(void 0===n)return null;const{from:r,to:i,oldFragment:a,newFragment:s}=n,o=1===s.length&&r>0&&e[r-1]===s,l=1===a.length&&0===s.length&&t[r-1]===a;let c=r,u=s;return(o||l)&&(c=r-1),o&&(u=s+s),l&&(u=a),u.length>3?null:[e.substring(0,c),u,e.substring(i)]}(t,i),s=!!a&&c.containsSpacesOnly(a[1]);return r.createElement(r.Fragment,null,a?[a[0],r.createElement("span",{key:e,className:s?n.spacesOnlyContent:n.diff},a[1]),a[2]]:i)},Ye=e=>{const{onMount:t,maxHeight:n}=(0,E.N)(),s=Ee(e.a11yContrast);return r.createElement(b.XY,{mount:t,style:{maxHeight:n.pipe(I.U(m.getOrElse(i.r5)))},tabIndex:0,className:(0,a.pipe)(e.layoutDensity,w.j.Density.matchOrDefault(w.j.Density.minimal)((()=>s.minimalFullSentenceBackground),(()=>s.fullSentenceBackground)))},e.replacements.kind===S._k.WithFormatting?e.replacements.labels.map(((t,n)=>r.createElement(He,{showDiff:e.showDiff,transformPart:t,key:n,theme:s}))):e.replacements.labels.map(((t,n)=>r.createElement(We,{showDiff:e.showDiff,transformPart:t,key:n,theme:s}))))},Ze=({replacements:e,layoutDensity:t,a11yContrast:n,selection:i,onClick:a,onDive:s,onBack:o})=>{const l=r.useContext(h.m.Context),{activeLabels:c,original:u}=S.ey.getSelectedItems(e,i),d=Ee(n);return r.createElement(Ae,{theme:d},r.createElement("div",{className:d.drilldownOriginalRow},i.length>0&&r.createElement(g.zx.Ghost,{name:"go-back",title:l.synfony.back,onClick:o,className:d.drilldownBackButton},r.createElement(x.JO.Arrow,{direction:x.n4.left})),r.createElement(Oe,{transform:u,theme:d,replacements:[],strikeThrough:!Boolean(i)||0===i.length})),r.createElement("div",{className:t===w.j.Density.cozy?d.cozyArrowInsertsList:d.arrowInsertsList},c.map(((e,t)=>r.createElement(Te,{key:t,transform:e,showOnboarding:2===t,theme:d,onClick:a(e.alternativeId),onExpand:()=>s(t,e.alternativeId)})))))},Qe=e=>{const t=r.useContext(h.m.Context);return r.createElement(A.TG,{alignment:"topLeft",eventType:"onclick",stepId:C.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:A.E2.rightCenter}},e.children)},qe=e=>{const t=r.useContext(h.m.Context).card,n=""===e.gapValue,i=Ee(e.a11yContrast);return r.createElement(r.Fragment,null,r.createElement(v.B2,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:i.oneGapInput}),r.createElement(ke,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:De,onClick:e.onApply,classes:{itemInsert:i.oneGapInsert,inlineHeader:i.inlineHeader,diff:i.diff},disabled:n,transform:Je(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Je=(e,t,n)=>[...e,{type:S.GP.Insert,text:Xe(e)+(t||"")+Xe(n)},...n],Xe=e=>e.length?" ":"",Ke=({replacementsLabels:e,layoutDensity:t,a11yContrast:n,onClick:i})=>{const a=r.useContext(h.m.Context).card.todoAction(e.tooltipText),s=Ee(n);switch(e.type){case S.b$.Type.InsertList:return r.createElement(Ae,{theme:s},e.labels.map(((e,t)=>r.createElement(ke,Object.assign({},{key:t,title:a,onClick:i(t)},{transform:e,classes:s})))));case S.b$.Type.DeleteList:return r.createElement(Ae,{theme:s},e.labels.map(((e,t)=>r.createElement(Me,Object.assign({},{key:t,title:a,onClick:i(t)},{transform:e,theme:s})))));case S.b$.Type.Arrow:return Pe(e,a,t,s,i);case S.b$.Type.InsertOr:return r.createElement(Ae,{theme:s},r.createElement(ke,Object.assign({transform:e.labels[0]},{title:a,onClick:i(0)},{boldifier:De,classes:s})),r.createElement(Le,{classes:s}),r.createElement(ke,Object.assign({transform:e.labels[1]},{title:a,onClick:i(1)},{boldifier:De,classes:s})));case S.b$.Type.DeleteOr:return r.createElement(Ae,{theme:s},e.labels.map(((t,n)=>r.createElement(Ne,Object.assign({},{key:n,title:a,onClick:i(n)},{theme:s,transform:t}),n===e.labels.length-2&&r.createElement(Le,{classes:s})))));case S.b$.Type.Citation:case S.b$.Type.FullSentence:case S.b$.Type.OneGap:case S.b$.Type.Drilldown:case S.b$.Type.ShortenIt:case S.b$.Type.ToneAI:return null;default:return(0,d.vE)(e)}},et=({label:e,a11yContrast:t})=>{const n=e.findIndex((e=>e.type===S.GP.Delete));let i=e.reduce(((e,t)=>e=e.concat(t.text.split(" ").map((e=>({word:e,isDelete:t.type===S.GP.Delete,shouldHighlight:!1}))))),[]).filter((e=>""!==e.word));return i=0===n?i.filter((e=>!e.isDelete)).map(((e,t)=>{let n=!1;return t-2<0&&(n=!0),Object.assign(Object.assign({},e),{shouldHighlight:n})})):n===e.length-1?i.filter((e=>!e.isDelete)).map(((e,t,n)=>{let r=!1;return t+2>=n.length&&(r=!0),Object.assign(Object.assign({},e),{shouldHighlight:r})})):i.map(((e,t,n)=>{let r=!1;return(void 0!==n[t+1]&&n[t+1].isDelete||void 0!==n[t-1]&&n[t-1].isDelete)&&(r=!0),Object.assign(Object.assign({},e),{shouldHighlight:r})})).filter((e=>!e.isDelete)),r.createElement(r.Fragment,null,i.map(((e,n,i)=>r.createElement("span",{key:`${e.word}-${n}`,className:e.shouldHighlight?Ee(t).toneAIInsert:void 0},e.word,void 0===i[n+1]||Se(i[n+1].word)?"":" "))))},tt=({label:e,a11yContrast:t})=>r.createElement(r.Fragment,null,e.filter((e=>e.type!==S.GP.Delete)).map((e=>r.createElement("span",{key:e.text,className:e.type===S.GP.Insert?Ee(t).toneAIInsert:void 0},e.text)))),nt=({label:e,className:t,a11yContrast:n})=>{let i;return i=!e.some((e=>e.type===S.GP.Insert))?r.createElement(et,{label:e,a11yContrast:n}):r.createElement(tt,{label:e,a11yContrast:n}),r.createElement("div",{className:t},i)}},19025:(e,t,n)=>{n.d(t,{Gh:()=>d,f8:()=>u});var r=n(40327),i=n(44060),a=n(89894),s=n(40219),o=n(4890),l=n(50224),c=n(52187);const u=e=>({container:(0,r.pipe)(e,o.j.Density.matchOrDefault(o.j.Density.cozy)((()=>y.cozyCardContainer),(()=>y.compactCardContainer)))}),d=e=>Object.assign(Object.assign({},e.hasOwnProperty("features")&&e.features.has(o.j.Features.a11yContrast)?(e=>({container:(0,r.pipe)(e.layoutDensity,o.j.Density.matchOrDefault(o.j.Density.cozy)((()=>e.features.has(o.j.Features.sduiContainerStyle)?y.cozyCardContainerContrastSdui:y.cozyCardContainerContrast),(()=>y.compactCardContainer)))}))(e):u(e.layoutDensity)),{wrapper:(0,r.pipe)(e.layoutDensity,o.j.Density.matchOrDefault(o.j.Density.minimal)((()=>y.minimalCardWrapper),(()=>{})))}),p={padding:`${a.ux.rem(.75)} ${a.ux.rem(.5)} ${a.ux.rem(.5)} ${a.ux.rem(1)}`},m={margin:`${a.ux.rem(1)} 0 ${a.ux.rem(1.5)}`,borderRadius:a.ux.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:`0 ${a.ux.rem(.625)} ${a.ux.rem(s.mJ)} 0 rgba(198, 203, 222, .45)`},h={margin:`${a.ux.rem(1)} 0 ${a.ux.rem(1.5)}`,borderRadius:a.ux.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:c.S.z300},g={boxShadow:c.s.llamaShadowToken},f={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:a.ux.rem(s.Jr),background:i.Il.CoreNeutral0},y=Object.assign(Object.assign({},a.ux.stylesheet({minimalCardWrapper:[p],compactCardContainer:[f]})),{cozyCardContainer:a.ux.joinClasses([l.g.cozyCardContainerSelector,a.ux.style(m)]),cozyCardContainerContrast:a.ux.joinClasses([l.g.cozyCardContainerSelector,a.ux.style(h)]),cozyCardContainerContrastSdui:a.ux.joinClasses([l.g.cozyCardContainerSelector,a.ux.style(h),a.ux.style(g)])})},93462:(e,t,n)=>{n.d(t,{T:()=>r});var r,i=n(27378),a=n(12187),s=n(5739),o=n(38983),l=n(2834),c=n(18208),u=n(44060),d=n(50474),p=n(64757),m=n(48911),h=n(31278),g=n(89894),f=n(40219),y=n(90845),x=n(66268),v=n(54290),b=n(91324);!function(e){e.Mini=({card:e,actions:t,twoLined:n,useBundleContainer:r})=>i.createElement(v.b.Mini,Object.assign({},(0,a.Sh)(!0===n?A.twoLinedWrapper:A.standardWrapper,!0===r?A.bundleContainer:null),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,hideDot:!0}),i.createElement(s.F.div,{className:A.content},void 0!==e.activeAlert.emojiID?i.createElement(m.In,{id:e.activeAlert.emojiID,className:A.icon}):i.createElement(h.JO.EthicalAI.Heart,{className:A.icon}),i.createElement("div",{className:A.highlightedText},e.activeAlert.miniCardTitle))),e.Full=({card:e,actions:t,isChecking:n})=>{const r=i.useContext(d.m.Context),a=o.h.create(!1);return y.P.useSubscriptionTo(n.pipe(l.b((e=>a.set(e))))),i.createElement(b.eb,{card:e,actions:t,isChecking:n,body:i.createElement(i.Fragment,null,i.createElement(b.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(b.Dx,{text:e.activeAlert.title}),void 0!==e.activeAlert.bannerColors?i.createElement("div",null,e.activeAlert.bannerColors.map((e=>i.createElement("div",{className:L.bannerStripe,style:{backgroundColor:e}})))):null,i.createElement(b.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),footer:i.createElement(i.Fragment,null,i.createElement(b.lJ,{card:e}),i.createElement(p.zx.Primary,{key:"ethical-ai-external-link",name:"ethical-ai-external-link",href:e.activeAlert.externalLink,target:"_blank",rel:"noopener noreferrer",title:r.card.todoAction(e.activeAlert.todoAction),onClick:()=>{t.next({type:x.lY.Type.ethicalAIOpenExternalLink,alertId:e.activeAlert.id,itemId:e.id,externalLink:e.activeAlert.externalLink}),e.activeAlert.shouldDismissAfterOpeningLink&&t.next({type:x.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},className:L.externalLinkButton},i.createElement("div",{className:L.externalLinkButtonContent},c.capitalize(e.activeAlert.todoAction),i.createElement(h.JO.EthicalAI.ExternalLink,{className:L.externalLinkButtonContentIcon})))),alwaysShowWrongAndOffensiveButtons:e.activeAlert.isFlaggable})}}(r||(r={}));const C={height:g.ux.rem(3.25),borderRadius:g.ux.rem(f.Jr),boxShadow:"0 1px 8px rgba(109, 117, 141, .18)"},I={height:g.ux.rem(3)},S={height:g.ux.important(g.ux.rem(2.5)),borderRadius:g.ux.rem(f.Jr)},w={width:g.ux.rem(1),height:g.ux.rem(1),marginRight:g.ux.rem(.5)},E={overflow:"hidden",color:u.Il.CoreNeutral90,textOverflow:"ellipsis"},A=g.ux.stylesheet({twoLinedWrapper:[C],standardWrapper:[I],bundleContainer:[S],content:[{display:"flex",alignItems:"center"}],icon:[w],highlightedText:[E]}),k={width:g.ux.percent(100),$nest:{a:{color:u.Il.CoreNeutral0,textDecoration:"none"}}},T={width:g.ux.percent(100),position:"relative",textAlign:"center"},M={position:"absolute",top:g.ux.rem(.25),right:g.ux.rem(.25)},N={width:g.ux.percent(100),height:g.ux.rem(.5)},L=g.ux.stylesheet({externalLinkButton:[k],externalLinkButtonContent:[T],externalLinkButtonContentIcon:[M],bannerStripe:[N]})},88529:(e,t,n)=>{n.d(t,{A:()=>Le});var r=n(27378),i=n(57050),a=n(40327),s=n(5739),o=n(28043),l=n(77176),c=n(26027),u=n(77610),d=n(4890),p=n(54290),m=n(38983),h=n(32881),g=n(1509),f=n(5114),y=n(8125),x=n(22232),v=n(81531),b=n(50474),C=n(64757),I=n(31278),S=n(66672),w=n(3656),E=n(74660),A=n(28706),k=n(17594),T=n(66268),M=n(1883),N=n(44060),L=n(89894);const O=L.ux.style({margin:`${L.ux.rem(1)} 0`}),_=(L.ux.style({marginLeft:L.ux.rem(.5),lineHeight:L.ux.rem(1.3125),fontSize:L.ux.rem(.875),color:N.Il.CoreNeutral90}),L.ux.style({marginLeft:L.ux.rem(1)})),D={color:N.Il.CoreRed60,fontSize:L.ux.rem(.75),lineHeight:L.ux.rem(1.125)},F=L.ux.style(D),P=L.ux.style(D,{visibility:"hidden"}),R=L.ux.style({padding:0}),j=L.ux.style({paddingTop:L.ux.rem(1),paddingLeft:L.ux.rem(1),paddingRight:L.ux.rem(1),display:"flex"}),U=L.ux.style({minWidth:L.ux.rem(1)}),$=L.ux.style({paddingTop:L.ux.rem(.25),paddingLeft:L.ux.rem(.5)}),B=L.ux.style({paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),marginTop:L.ux.rem(.5)}),z=L.ux.style({display:"flex",alignItems:"center",gap:L.ux.rem(.75),marginTop:L.ux.rem(1)}),G=L.ux.style({flexGrow:1}),W=L.ux.style({marginTop:L.ux.rem(1.5)}),H=L.ux.style({fontWeight:"bold",paddingBottom:L.ux.rem(.25)}),V=L.ux.style({height:L.ux.rem(2.5),paddingLeft:L.ux.rem(.5)}),Y=L.ux.style({height:L.ux.rem(6),paddingLeft:L.ux.rem(.5)}),Z=L.ux.style({paddingTop:L.ux.rem(1.5),color:N.Il.CoreNeutral50}),Q=L.ux.style({display:"flex",flexDirection:"row",columnGap:L.ux.rem(.5),alignItems:"center",paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),paddingBottom:L.ux.rem(.5)}),q=L.ux.style({flex:3,textAlign:"center"}),J=L.ux.style({color:N.Il.CoreNeutral50,border:`1px solid ${N.Il.CoreNeutral20}`,borderRadius:L.ux.rem(.25)});var X=n(19025);const K=({card:e,actions:t})=>(0,a.pipe)(e.visualState.transition,f.fromPredicate((e=>"feedback_form"===e.type)),f.fold((()=>(v.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(n=>"survey"===n.formType?r.createElement(ee,{card:e,data:n,actions:t}):r.createElement(te,{card:e,data:n,actions:t})))),ee=({card:e,data:t,actions:n})=>{const i=r.useContext(b.m.Context).card.feedbackForm,a=m.h.create(void 0),o=m.h.create(!1),l=r=>n.next(Object.assign({alertId:e.activeAlert.id,reason:r},t.submitActionType===T.lY.Type.alertApplyFormSubmit?{type:T.lY.Type.alertApplyFormSubmit,alertApplyActionProps:t.alertApplyActionProps}:{type:T.lY.Type.alertIgnoreFormSubmit})),c=`survey-title-${e.id}`;return r.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>n.next({type:T.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,X.Gh)(e.renderOptions),visualState:e.visualState,body:r.createElement(r.Fragment,null,r.createElement(w.H4,{id:c,className:O},t.survey.question||i.dismissReason),r.createElement(h.V.Group,{id:`survey-${e.id}`,selectedItemIndex:a,"aria-labelledby":c,items:t.survey.options.map((e=>e.text)),onChange:()=>o.set(!1)})),mainActions:r.createElement(r.Fragment,null),footer:r.createElement(r.Fragment,null,r.createElement(s.F.div,{"aria-hidden":o,className:o.view((0,y.RN)(F,P))},i.error),r.createElement("div",null,r.createElement(C.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const e=a.get();return void 0===e?o.set(!0):A.hz((()=>l(t.survey.options[e].key)))()}},i.submit),r.createElement(C.zx.Ghost,{className:_,name:"skipCardFeedbackForm",onClick:A.hz((()=>l("skipped")))},i.skip))),subActions:r.createElement(r.Fragment,null)})},te=({card:e,data:t,actions:n})=>{const i=ie(e,t),a="background"===t.gbPrompt.promptType&&E.BY.isVox(t.gbPrompt),[s,o]=r.useState("initial"),[l,c]=r.useState(i.source),[u,d]=r.useState(i.target),[p,m]=r.useState(""),h=!("createRule"!==s||l&&u),f=r=>{const i={alertId:e.activeAlert.id,alertApplyActionProps:t.alertApplyActionProps,gbPrompt:t.gbPrompt,patternName:e.activeAlert.patternName,source:l,target:u,description:p};switch(r){case T.lY.Type.gbPromptDismiss:n.next(Object.assign(Object.assign({},i),{type:r,step:s}));break;case T.lY.Type.gbPromptApply:case T.lY.Type.gbPromptCreateRule:n.next(Object.assign(Object.assign({},i),{type:r}));break;default:(0,x.vE)(r)}},y="initial"===s?t.gbPrompt.description:r.createElement(r.Fragment,null,r.createElement("div",{className:z},r.createElement("div",{className:G},r.createElement(g.Z.Base,{className:H},"Original"),r.createElement(S.B2,{name:"gbprompt-source",className:V,value:l,onChange:e=>c(e.target.value)})),r.createElement(g.Z.Paper,{className:Z},""),r.createElement("div",{className:G},r.createElement(g.Z.Base,{className:H},"Change to"),r.createElement(S.B2,{name:"gbprompt-target",className:V,value:u,onChange:e=>d(e.target.value)}))),r.createElement("div",{className:W},r.createElement(g.Z.Base,{className:H},"Explanation"),r.createElement(S.E_,{className:Y,value:p,onChange:e=>m(e.target.value),placeholder:"Add it here...",blockExtension:!0})));return r.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>n.next({type:T.lY.Type.gbPromptShow,patternName:e.activeAlert.patternName}),theme:Object.assign(Object.assign({},(0,X.Gh)(e.renderOptions)),{wrapper:R}),visualState:e.visualState,header:r.createElement("div",{className:j},r.createElement(I.JO.StyleGuide,null),r.createElement(w.H4,{className:$},t.gbPrompt.title)),body:r.createElement("div",{className:B},y),mainActions:r.createElement(r.Fragment,null),footer:r.createElement("div",{className:Q},r.createElement(ne,{step:s,disabled:h,onClick:()=>{"initial"===s&&a?(o("createRule"),f(T.lY.Type.gbPromptCreateRule)):f(T.lY.Type.gbPromptApply)}}),r.createElement(re,{step:s,onClick:()=>f(T.lY.Type.gbPromptDismiss)})),subActions:r.createElement(r.Fragment,null)})},ne=({step:e,disabled:t,onClick:n})=>{const i=r.useContext(b.m.Context).card.gbPrompt;return"initial"===e?r.createElement(C.zx.Primary,{name:"submitGbPromptFeedbackForm",className:q,disabled:t,onClick:A.hz(n)},r.createElement(I.JO.StyleGuideWhite,{width:18,className:U}),i.addRule):r.createElement(C.zx.Primary,{name:"submitGbPromptFeedbackForm",className:q,disabled:t,onClick:A.hz(n)},i.saveRule)},re=({step:e,onClick:t})=>{const n=r.useContext(b.m.Context).card.gbPrompt;return"initial"===e?r.createElement(C.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:J,onClick:A.hz(t)},n.dismiss):r.createElement(C.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:J,onClick:A.hz(t)},n.cancelSavingRule)},ie=(e,t)=>{const n=e.activeAlert,r=t.alertApplyActionProps.alternativeIndex;return k.$.isSuper(n)?E.BY.isVox(t.gbPrompt)?ae(n,r):se(n,r):{source:"",target:""}},ae=(e,t)=>{const n=e.labels;return{source:n.filter(((e,n)=>n!==t)).map(oe)[0],target:oe(n[t])}},se=(e,t)=>({source:"",target:e.labels[t].label}),oe=({replacementTexts:e})=>[...e].sort()[0];var le=n(87684),ce=n(76578),ue=n(90845),de=n(91324);const pe=L.ux.style({marginRight:L.ux.rem(-.5),marginTop:L.ux.rem(.5)}),me=L.ux.style({padding:`0 ${L.ux.rem(1.625)} !important`,marginRight:L.ux.rem(.125)}),he=L.ux.style({marginRight:0}),ge=({card:e,actions:t,showLabel:n=!0})=>{const i=r.useRef(m.h.create(!1));ue.P.useEffectOnWillUnmount((()=>{i.current.get()||(0,a.pipe)(e.muteCategory,f.map((n=>t.next({type:T.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:n.id}))))}));const s=r.useContext(b.m.Context).card.mutedAlertCard;return r.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:T.lY.Type.mutedAlertSuccessShow}),theme:(0,X.Gh)(e.renderOptions),visualState:e.visualState,body:r.createElement(r.Fragment,null,n?r.createElement(de.__,{alert:e.activeAlert,options:e.renderOptions}):null,r.createElement(w.XY,null,s.description((0,a.pipe)(e.muteCategory,f.fold((()=>""),(e=>e.description)))))),mainActions:r.createElement(r.Fragment,null),footer:r.createElement("div",{className:pe},r.createElement(C.zx.Primary,{name:"gotIt",className:me,onClick:()=>A.hz((()=>t.next({type:T.lY.Type.switchToNext})))()},s.successButtonLabel),r.createElement(C.zx.Ghost,{name:"turnBackOn",onClick:A.hz((()=>{i.current.set(!0),(0,a.pipe)(e.muteCategory,f.map((n=>t.next({type:T.lY.Type.undoMuteAlertCategory,categoryId:n.id,viewType:e.activeAlert.type,id:e.id}))))}))},s.undoButtonLabel,r.createElement(I.JO.Undo,{color:N.Il.CoreBlue50,className:he}))),subActions:r.createElement(C.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:T.lY.Type.mutedAlertSuggestionManagementClick})},s.settingsLabel,r.createElement(I.JO.OuterLink,null))})};var fe=n(93462),ye=n(97428),xe=n(66346),ve=n(2834),be=n(12187);const Ce=({onLeftClick:e,onRightClick:t,currentMatch:n,totalMatch:i,replaceOneMatch:a=!0,disableOnEnd:s=!0,style:o})=>{const l=r.useContext(b.m.Context).card.matchesNavigation;return 0===i?null:1===i&&a?r.createElement("div",Object.assign({},(0,be.Sh)(we.matchesRow,!!Boolean(o.matchesRow)&&o.matchesRow)),r.createElement(w.ck,Object.assign({},(0,be.Sh)(we.matchesCount,!!Boolean(o.matchesCount)&&o.matchesCount)),l.numberOfMatches(i))):r.createElement("div",Object.assign({},(0,be.Sh)(we.matchesRow,!!Boolean(o.matchesRow)&&o.matchesRow)),r.createElement(C.zx.Ghost,{disabled:s&&0===n,name:"left",title:l.prev,"aria-label":l.prev,onClick:e},r.createElement(I.JO.Arrow,Object.assign({},(0,be.Sh)(we.leftButtonIcon,!!Boolean(o.leftButtonIcon)&&o.leftButtonIcon)))),r.createElement(w.ck,Object.assign({},(0,be.Sh)(we.matchesCount,!!Boolean(o.matchesCount)&&o.matchesCount)),l.currentMatchPosition(n+1,i)),r.createElement(C.zx.Ghost,{disabled:s&&n===i-1,name:"right",title:l.next,"aria-label":l.next,onClick:t},r.createElement(I.JO.Arrow,Object.assign({},(0,be.Sh)(we.rightButtonIcon,!!Boolean(o.rightButtonIcon)&&o.rightButtonIcon)))))},Ie={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:L.ux.rem(.25)}}},Se={textTransform:"uppercase",letterSpacing:L.ux.px(.8),lineHeight:L.ux.rem(2)},we=L.ux.stylesheet({matchesRow:[Ie],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[Se]});function Ee(e,t,n){const{activeAlert:r,activeHighlightIndex:i}=t,a=r.getHighlightRanges(),s=(i+("left"===e?a.length-1:1))%a.length;n.next({type:T.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:s},direction:e})}const Ae=({card:e,actions:t,selectedLabelIndex:n,isChecking:i})=>{const a=r.useContext(b.m.Context),s=m.h.create(!1);return ue.P.useSubscriptionTo(i.pipe(ve.b((e=>s.set(e))))),r.createElement(de.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:s,onClick:()=>{t.next({type:T.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n.get(),id:e.id,eligibleForSurvey:c.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:c.X.isEligibleForGbPrompt(e),cardType:T.lY.getCardType(e)})}})},ke=({card:e,actions:t})=>r.createElement(Ce,{onLeftClick:()=>Ee("left",e,t),onRightClick:()=>Ee("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var Te=n(78416);const Me=({activeAlert:e,selectedLabelIndex:t,actions:n})=>{const i=r.useContext(b.m.Context);return r.createElement("div",{className:Te.V.optionsContainer},e.labels.map(((a,s)=>r.createElement(r.Fragment,{key:`option-${s}`},r.createElement(h.V.Item,{id:`${e.id}-${s}`,className:Te.V.optionLabel,onChange:()=>{t.set(s),n.next({type:T.lY.Type.alternativeReplacementRadioButtonClick,index:s})},checked:t.view((e=>e===s))},a.label),r.createElement(w.x4,{className:Te.V.optionExample},a.replacementTexts.join("; ")),r.createElement(w.x4,{className:Te.V.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(a.matches))))))},Ne=({card:e,actions:t,isChecking:n,isCheckingGlobal:i})=>{const a=m.h.create(0);return r.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:T.lY.Type.alertCardShow,cardType:T.lY.getCardType(e),alertId:e.activeAlert.id}),theme:Object.assign({wrapper:(s=e.renderOptions,s.hasOwnProperty("features")&&s.features.has(d.j.Features.sduiContainerStyle)?Te.V.sduiSuperWrapper:Te.V.superWrapper),content:i.pipe(l.U((0,y.RN)(Te.V.loadingWrapperInvisible,Te.V.loadingWrapper)))},(0,X.f8)(e.renderOptions.layoutDensity)),extra:r.createElement(de.o,{isChecking:i}),body:r.createElement(r.Fragment,null,r.createElement(de.__,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(de.Ot,{alert:e.activeAlert}),r.createElement(de.ko,{card:e,isChecking:n}),r.createElement(de.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),r.createElement(Me,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:r.createElement(de.Kg,{card:e,feedbackActions:t}),footer:r.createElement(r.Fragment,null,r.createElement(de.lJ,{card:e}),r.createElement(Ae,{selectedLabelIndex:a,card:e,actions:t,isChecking:n})),navigation:r.createElement(ke,{card:e,actions:t}),subActions:r.createElement(xe.Vh,{actions:t,card:e,mode:"mini"})});var s};var Le;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:n,isCheckingGlobal:a,transform:u}=c.X.useCardStates(e),d=e=>r.createElement(le.J,{card:e,actions:t,isChecking:n,transform:u,isCheckingGlobal:a});return r.createElement(s.F.Fragment,null,e.pipe(o.x(((e,t)=>e.hashCode()===t.hashCode())),l.U((0,i.ls)(c.X.match({super:e=>r.createElement(Ne,{card:e,actions:t,isChecking:n,isCheckingGlobal:a}),takeaway:d,synfony:d,shortenIt:d,toneAI:d,ethicalAI:d,suggestedSnippet:d,knowledgeHubSuggestedTerm:d,default:d}),c.X.foldCard))))},e.Mini=({card:t,actions:n})=>r.createElement(s.F.Fragment,null,t.pipe(l.U((t=>d.j.Density.matchL((()=>r.createElement(e.MiniSingleLined,{card:t,actions:n})),(()=>r.createElement(e.MiniTwoLined,{card:t,actions:n})),(()=>r.createElement(e.MiniTwoLined,{card:t,actions:n})))(t.renderOptions.layoutDensity))))),e.MiniSingleLined=({card:e,actions:t})=>{function n(e){return r.createElement(ce.P.Standard,{card:e,actions:t})}return(0,a.pipe)(e,c.X.match({super:n,takeaway:n,synfony:n,shortenIt:n,toneAI:n,ethicalAI:function(e){return r.createElement(fe.T.Mini,{card:e,actions:t})},suggestedSnippet:n,knowledgeHubSuggestedTerm:n,default:n}),c.X.foldCard)},e.MiniTwoLined=({card:e,actions:t})=>{function n(e){return r.createElement(ce.P.TwoLined,{card:e,actions:t})}return(0,a.pipe)(e,c.X.match({super:n,takeaway:n,synfony:n,shortenIt:n,toneAI:n,ethicalAI:function(e){return r.createElement(fe.T.Mini,{card:e,actions:t,twoLined:!0})},suggestedSnippet:n,knowledgeHubSuggestedTerm:n,default:n}),c.X.foldCard)},e.Success=({cardData:e,actions:t,isLastCard:n})=>{function i(){return r.createElement(p.b.Success,{actions:t,isLastCard:n})}return(0,a.pipe)(e,u.i.match({takeaway:i,default:i,synfony:i,super:i,shortenIt:i,toneAI:i,ethicalAI:i,suggestedSnippet:function(e){return r.createElement(ye.w.Success,{card:e,actions:t})},knowledgeHubSuggestedTerm:i}),c.X.foldCard)},e.FeedbackForm=({cardData:e,actions:t})=>{function n(e){return r.createElement(K,{card:e,actions:t})}return(0,a.pipe)(e,u.i.match({takeaway:n,default:n,synfony:n,super:n,shortenIt:n,toneAI:n,ethicalAI:n,suggestedSnippet:n,knowledgeHubSuggestedTerm:n}),c.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function n(e){return r.createElement(ge,{card:e,actions:t})}return(0,a.pipe)(e,u.i.match({takeaway:n,default:n,synfony:n,super:n,shortenIt:n,toneAI:n,ethicalAI:n,suggestedSnippet:n,knowledgeHubSuggestedTerm:n}),c.X.foldCard)}}(Le||(Le={}))},97428:(e,t,n)=>{n.d(t,{w:()=>r});var r,i=n(27378),a=n(57050),s=n(38983),o=n(5114),l=n(95195),c=n(44060),u=n(50474),d=n(64757),p=n(31278),m=n(66672),h=n(3656),g=n(89894),f=n(40219),y=n(28706),x=n(90845),v=n(66268),b=n(4557),C=n(66346),I=n(1883),S=n(91324),w=n(19025);!function(e){e.Full=({card:e,actions:n,isChecking:r})=>{const c=i.useContext(u.m.Context),[d,p]=i.useState(""),[g,f]=i.useState(e.activeAlert.snippetText),[x,I]=i.useState(""),[w,E]=i.useState(""),A=(0,a.zG)(e.activeAlert.snippetsTrigger,o.fold((()=>"\\"),a.yR));return i.createElement(S.eb,{card:e,actions:n,isChecking:r,body:i.createElement("div",null,i.createElement(S.__,{alert:e.activeAlert,options:e.renderOptions}),i.createElement(h.XY,{className:D.subheader},c.card.suggestedSnippet.subheader),i.createElement("div",{className:D.inputContainer},i.createElement(m.B2,{name:"snippet-name",placeholder:c.card.suggestedSnippet.namePlaceholder,value:d,onChange:e=>p(e.target.value),className:D.snippetName}),x.length>0&&i.createElement(h.x4,{className:D.inputError},x)),i.createElement("div",{className:D.inputContainer},i.createElement(m.E_,{blockExtension:!0,name:"snippet-content",placeholder:c.card.suggestedSnippet.textPlaceholder,value:g,onChange:e=>f(e.target.value),className:D.snippetText}),w.length>0&&i.createElement(h.x4,{className:D.inputError},w)),i.createElement(h.x4,{className:D.explanation},c.card.suggestedSnippet.explanation(i.createElement(t,{trigger:A}))),i.createElement(S.Nm,{title:c.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:s.h.create(!1),onClick:y.hz((()=>{(0,a.zG)(b.B.validate(d,g,c.card.suggestedSnippet.validationMessages),l.fold((({nameError:e,contentError:t})=>{(0,a.zG)(e,o.fold((()=>I("")),I)),(0,a.zG)(t,o.fold((()=>E("")),E))}),(()=>{n.next({type:v.lY.Type.createSnippet,id:e.id,alertId:e.activeAlert.id,snippetName:d,snippetText:g}),I(""),E("")})))}))})),footer:i.createElement(C.G3,{key:"card-actions-details",visualState:e.visualState,className:D.more},i.createElement(h.XY,null,c.card.suggestedSnippet.details(i.createElement(i.Fragment,null,A))))})};const t=({trigger:e})=>i.createElement("span",{className:D.snippetsTrigger},e);e.Success=({card:e,actions:t})=>{const n=i.useContext(u.m.Context);return x.P.useEffectOnWillUnmount((()=>{t.next({type:v.lY.Type.suggestedSnippetSuccessDismissed,id:e.id,alertId:e.activeAlert.id})})),i.createElement(I.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:v.lY.Type.mutedAlertSuccessShow}),theme:(0,w.Gh)(e.renderOptions),visualState:e.visualState,body:i.createElement("div",{className:D.successHeader},i.createElement(p.JO.ValidationOk,{className:D.successIcon}),i.createElement(h.x4,null,n.card.suggestedSnippet.successStateTitle)),mainActions:i.createElement(i.Fragment,null),footer:i.createElement(i.Fragment,null),subActions:i.createElement("div",{className:D.successAction},i.createElement(d.zx.Tertiary,{name:"openSnippetsLibrary",onClick:()=>t.next({type:v.lY.Type.snippetsOpenExternalLink,externalLink:e.activeAlert.libLink,alertId:e.activeAlert.id,itemId:e.id})},n.card.suggestedSnippet.libraryLinkCaption,i.createElement(p.JO.OuterLink,null)),i.createElement(d.zx.Ghost,{name:"done",onClick:()=>y.hz((()=>t.next({type:v.lY.Type.switchToNext})))()},n.done))})}}(r||(r={}));const E={paddingTop:g.ux.rem(.75),paddingBottom:g.ux.rem(.5),letterSpacing:c.xv.SubheadingLetterSpacing,fontSize:g.ux.rem(c.xv.SubheadingSize),lineHeight:g.ux.rem(c.xv.SubheadingLineHeight),color:c.xv.SubheadingColor,textTransform:"uppercase"},A={fontFamily:"inherit",boxSizing:"border-box",padding:`${g.ux.rem(.5)}`,fontSize:g.ux.rem(.875)},k=Object.assign(Object.assign({},A),{height:g.ux.rem(2.5)}),T=Object.assign(Object.assign({},A),{height:g.ux.rem(8)}),M={marginBottom:g.ux.rem(.5)},N={color:c.Il.CoreRed50},L={display:"block",color:c.Il.CoreNeutral50,marginBottom:g.ux.rem(.75)},O={position:"absolute",left:g.ux.rem(.5),width:g.ux.rem(1),height:g.ux.rem(1),minWidth:g.ux.rem(1),minHeight:g.ux.rem(1)},_={display:"inline-block",width:g.ux.rem(1),height:g.ux.rem(1),backgroundColor:c.Il.CoreBlue1,borderRadius:g.ux.rem(f.fx),textAlign:"center"},D=g.ux.stylesheet({subheader:[E],snippetName:[k],snippetText:[T],explanation:[L],successIcon:[O],successHeader:[{display:"flex",alignItems:"center"}],successAction:[{display:"flex",justifyContent:"space-between",width:"100%"}],inputContainer:[M],inputError:[N],more:[S.IH],snippetsTrigger:[_]})},78416:(e,t,n)=>{n.d(t,{V:()=>S});var r=n(9546),i=n(32096),a=n(44060),s=n(89894),o=n(40219),l=n(52187);const c=(e,t,n,r,i,o)=>Object.assign({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:s.ux.rem(2),borderRadius:i,backgroundColor:a.Il.CoreNeutral0,boxShadow:r,content:"' '"},Boolean(o)&&"bottom"!==o?{top:n}:{bottom:n}),u=`0 ${s.ux.rem(.25)} ${s.ux.rem(1.625)} 0 rgba(198, 203, 222, .25)`,d={marginRight:s.ux.rem(1),flexShrink:0,maxWidth:s.ux.percent(100)},p={padding:`0 ${s.ux.rem(1)}`},m={padding:`0 ${s.ux.rem(1.9)} 0 ${s.ux.rem(1)}`},h={position:"absolute",top:s.ux.rem(.27),right:s.ux.rem(.5)},g={display:"grid",width:s.ux.percent(100),gridTemplateColumns:"fit-content(60%) auto min-content",columnGap:s.ux.rem(.5),alignItems:"center"},f={minWidth:s.ux.rem(7)},y={marginLeft:s.ux.rem(.5)},x={color:a.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:s.ux.rem(1.5)},v={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic",paddingRight:s.ux.rem(r.F2)},b={$nest:{"&:before":c(s.ux.rem(.5),-10,s.ux.rem(-.5),u,s.ux.rem(o.Jr)),"&:after":c(s.ux.rem(1),-20,s.ux.rem(-1),u,s.ux.rem(o.Jr))}},C={boxShadow:l.s.llamaShadowToken,borderRadius:s.ux.rem(i.Jr)},I={transition:"opacity .2s"},S=s.ux.prefixedStylesheet("super",{updateAllBtnCommon:[d],updateAllBtn:[d,p],updateAllBtnLoading:[d,m],updateBtnSpinner:[h],optionsContainer:[g],optionLabel:[f],optionRadio:[y],optionSecondaryAttribute:[x],optionExample:[x,v],superWrapper:[b],sduiSuperWrapper:[C],loadingWrapper:[I],loadingWrapperInvisible:[I,{opacity:0,pointerEvents:"none"}]})},28748:(e,t,n)=>{n.d(t,{Y:()=>ye});var r=n(27378),i=n(57050),a=n(40327),s=n(12187),o=n(5739),l=n(77176),c=n(76974),u=n(5114),d=n(44060),p=n(50474),m=n(48643),h=n(48911),g=n(3656),f=n(89894),y=n(90845),x=n(28706),v=n(98637),b=n(26027),C=n(91549),I=n(66268),S=n(4890),w=n(54290),E=n(91324),A=n(32941),k=n(11662),T=n(32952),M=n(24209),N=n(17343),L=n(93508),O=n(41398),_=n(85985),D=n(60797),F=n(28043),P=n(2834),R=n(2844),j=n(98403);const U=({toneAlternatives:e,onSelectToneAlternative:t})=>{const n=new T.xQ,i=new T.xQ,c=new T.xQ,d=new T.xQ,p=new T.xQ,m=new T.xQ,{ref:g,onMount:x}=y.P.useElWatcher(),v=M.T(p.pipe(N.h(!0)),c.pipe(N.h(!1)),d.pipe(N.h(!1))).pipe(L.O(!1)),b=M.T(p,i).pipe(O.M(v),_.h((([e,t])=>t)),l.U((([e,t])=>e)),O.M(g),l.U((([e,t])=>(0,a.pipe)(t,u.map((e=>e.getBoundingClientRect())),u.bindTo("sliderClientRect"),u.apS("containerMouseEventVal",u.some(e))))),D.oA,l.U((({containerMouseEventVal:e,sliderClientRect:t})=>{const n=t.x,r=t.x+t.width;let i=0;return i=e.clientX<=n?0:e.clientX>=r?100:(e.clientX-n)/(r-n)*100,i}))),C=M.T(b.pipe(F.x()),v.pipe(F.x(),_.h((e=>!e)),O.M(b),l.U((([e,t])=>t)),l.U((e=>e>=50?100:0))),n.pipe(_.h((e=>"ArrowRight"===e.key||"ArrowLeft"===e.key)),P.b((e=>{e.preventDefault(),e.stopPropagation()})),l.U((e=>e.key)),_.h((e=>"ArrowRight"===e||"ArrowLeft"===e)),l.U((e=>"ArrowRight"===e?100:0))),m.pipe(l.U((e=>1===e?100:0)))).pipe(L.O(100)),I=C.pipe(F.x(),l.U((e=>e>=50?1:0))),S=R.aj([I,j.Dx(e)]).pipe(l.U((([e,t])=>t[e])));return y.P.useSubscriptionTo(I.pipe(F.x(),P.b(t))),r.createElement(o.F.div,{className:fe.outerContainer,onKeyDown:e=>n.next(e)},r.createElement(o.F.div,{className:fe.label},S.pipe(l.U((e=>e.name)))),r.createElement(o.F.div,{className:fe.container,onMouseMove:e=>i.next(e),onMouseUp:e=>c.next(e),onMouseLeave:e=>d.next(e)},r.createElement(o.F.div,Object.assign({},(0,s.Sh)(fe.slider,v.pipe(l.U((e=>e?fe.sliderDragging:null)))),{mount:x}),r.createElement(o.F.div,Object.assign({},(0,s.Sh)(fe.sliderInner,v.pipe(l.U((e=>e?fe.sliderInnerDragging:null)))),{style:{width:C.pipe(l.U(f.ux.percent))}}),r.createElement(o.F.div,Object.assign({},(0,s.Sh)(fe.knob,v.pipe(l.U((e=>e?fe.knobDragging:null)))),{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),p.next(e)},tabIndex:0}),S.pipe(l.U((e=>r.createElement(h.In,{id:e.emojiID,className:fe.knobEmoji})))))),R.aj([I,v]).pipe(l.U((([e,t])=>r.createElement(r.Fragment,null,r.createElement("div",Object.assign({},(0,s.Sh)(fe.sliderDivisionPoint,fe.sliderDivisionPointLeft))),0===e||t?null:r.createElement(o.F.div,Object.assign({},(0,s.Sh)(fe.sliderDivisionPointHoverArea,fe.sliderDivisionPointHoverAreaLeft),{onClick:()=>m.next(0)})),r.createElement("div",Object.assign({},(0,s.Sh)(fe.sliderDivisionPoint,fe.sliderDivisionPointRight))),1===e||t?null:r.createElement(o.F.div,Object.assign({},(0,s.Sh)(fe.sliderDivisionPointHoverArea,fe.sliderDivisionPointHoverAreaRight),{onClick:()=>m.next(1)})))))))))},$="toneSliderOuterContainer",B="toneSliderLabel",z="toneSliderContainer",G="toneSlider",W="toneSliderDragging",H="toneSliderSliderDivisionPoint",V="toneSliderDivisionPointLeft",Y="toneSliderDivisionPointRight",Z="toneSliderDivisionPointHoverArea",Q="toneSliderDivisionPointHoverAreaLeft",q="toneSliderDivisionPointHoverAreaRight",J="toneSliderInner",X="toneSliderInnerDragging",K="toneSliderKnob",ee="toneSliderKnobDragging",te="toneSliderKnobEmoji",ne={fontWeight:700,fontSize:f.ux.rem(.875),lineHeight:f.ux.rem(1),width:f.ux.rem(7.5)},re={width:f.ux.rem(5.375),height:f.ux.rem(1.75),display:"flex",flexDirection:"column",justifyContent:"center"},ie={position:"relative",width:f.ux.percent(100),backgroundColor:d.Il.CoreNeutral40,height:f.ux.rem(.125),borderRadius:f.ux.rem(.375),transition:"all 0.15s ease-in-out",$nest:{"&:hover":{height:f.ux.rem(.5)},[`&:hover .${H}`]:{visibility:"visible"}}},ae={height:f.ux.rem(.5),$nest:{[`& .${H}`]:{visibility:"visible"}}},se={position:"absolute",width:f.ux.rem(.25),height:f.ux.rem(.25),backgroundColor:d.Il.CoreNeutral0,top:f.ux.rem(.125),bottom:f.ux.rem(.125),borderRadius:f.ux.percent(100),visibility:"hidden"},oe={left:f.ux.rem(.125)},le={right:f.ux.rem(.125)},ce={background:d.Il.CoreNeutral90,opacity:0,width:f.ux.rem(1.5),height:f.ux.rem(1.5),position:"absolute",borderRadius:f.ux.percent(100),cursor:"pointer",top:f.ux.rem(-.5),zIndex:1,transition:"all 0.15s ease-in-out",$nest:{"&:hover":{opacity:.1}}},ue={left:f.ux.rem(-.5)},de={right:f.ux.rem(-.5)},pe={position:"relative",display:"flex",alignItems:"center",backgroundColor:d.Il.CorePurple40,height:f.ux.percent(100),borderRadius:f.ux.rem(.375),transition:"all 0.15s ease-in-out"},me={position:"absolute",right:f.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",width:f.ux.rem(1.75),height:f.ux.rem(1.75),backgroundColor:d.Il.CoreNeutral0,boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)",borderRadius:f.ux.rem(1.875),cursor:"ew-resize",transition:"all 0.15s ease-in-out",zIndex:1,$nest:{"&:hover":{width:f.ux.rem(2),height:f.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},he={width:f.ux.rem(2),height:f.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},ge={width:f.ux.rem(.9375),height:f.ux.rem(.9375),pointerEvents:"none"},fe={outerContainer:f.ux.joinClasses([$,f.ux.style({display:"flex",alignItems:"center"})]),label:f.ux.joinClasses([B,f.ux.style(ne)]),container:f.ux.joinClasses([z,f.ux.style(re)]),slider:f.ux.joinClasses([G,f.ux.style(ie)]),sliderDragging:f.ux.joinClasses([W,f.ux.style(ae)]),sliderDivisionPoint:f.ux.joinClasses([H,f.ux.style(se)]),sliderDivisionPointLeft:f.ux.joinClasses([V,f.ux.style(oe)]),sliderDivisionPointRight:f.ux.joinClasses([Y,f.ux.style(le)]),sliderDivisionPointHoverArea:f.ux.joinClasses([Z,f.ux.style(ce)]),sliderDivisionPointHoverAreaLeft:f.ux.joinClasses([Q,f.ux.style(ue)]),sliderDivisionPointHoverAreaRight:f.ux.joinClasses([q,f.ux.style(de)]),sliderInner:f.ux.joinClasses([J,f.ux.style(pe)]),sliderInnerDragging:f.ux.joinClasses([X,f.ux.style({transition:"none"})]),knob:f.ux.joinClasses([K,f.ux.style(me)]),knobDragging:f.ux.joinClasses([ee,f.ux.style(he)]),knobEmoji:f.ux.joinClasses([te,f.ux.style(ge)])};var ye;!function(e){e.BundleMini=({card:e,actions:t})=>r.createElement(w.b.Mini,Object.assign({},(0,s.Sh)(A.l$.wrapper,A.l$.bundleContainer),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:r.createElement(g.CL,{className:A.l$.alertsCounter},e.alerts.length),inert:e.positionState.inert,hideDot:!0}),r.createElement(o.F.div,{className:ve.content},r.createElement(h.In,{id:e.activeAlert.toneAlternatives[e.activeAlert.selectedToneAlternativeIdx].emojiID,className:ve.emoji}),r.createElement("div",{className:A.l$.highlightedText},C.R.bundleTitle(e)))),e.Full=({card:e,actions:t,isChecking:n,isCheckingGlobal:s})=>{const d=r.useContext(p.m.Context),h=y.P.useAtomOf(e.activeAlert.toneAlternatives),g=r.useCallback((n=>{"focused"!==e.visualState.transition.type&&"expanded"!==e.visualState.transition.type||t.next({type:I.lY.Type.toneAIChangeToneAlternative,alertId:e.activeAlert.id,itemId:e.id,selectedToneAlternativeIdx:n})}),[t,e.visualState.transition.type,e.activeAlert.id,e.id]);return(0,a.pipe)(e.transform,u.filter(v.b$.isToneAI),u.fold((()=>null),(a=>r.createElement(E.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:s,cardBody:n=>r.createElement(r.Fragment,null,r.createElement(E.__,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(o.F.Fragment,null,h.pipe(l.U((e=>r.createElement(U,{toneAlternatives:e,onSelectToneAlternative:g}))))),0===e.activeAlert.selectedToneAlternativeIdx?r.createElement("div",{className:Ie.replacementContainer},e.activeAlert.highlightTexts[0]):r.createElement(m.T9,{classes:{rendered:Ie.replacement,removing:Ie.replacementHidden},timeout:250,content:c.of(r.createElement(k.RF,{label:a.labels[e.activeAlert.selectedToneAlternativeIdx-1],className:Ie.replacementContainer,a11yContrast:e.renderOptions.features.has(S.j.Features.a11yContrast)}))}),0!==e.activeAlert.selectedToneAlternativeIdx?r.createElement(E.Nm,{title:d.card.todoAction(a.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:x.hz((()=>t.next({type:I.lY.Type.alertApply,alertId:e.activeAlert.id,id:e.id,alternativeIndex:e.activeAlert.selectedToneAlternativeIdx-1,cardType:I.lY.getCardType(e),eligibleForSurvey:b.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:b.X.isEligibleForGbPrompt(e)})))}):null),mainActions:(0,i.a9)(r.createElement(E.Kg,{card:e,feedbackActions:t})),subActions:(0,i.a9)(r.createElement(E.q4,{card:e,actions:t})),cardFooter:(0,i.a9)(r.createElement(E.lJ,{card:e}))}))))}}(ye||(ye={}));const xe={width:f.ux.rem(1),height:f.ux.rem(1),marginRight:f.ux.rem(.5)},ve=f.ux.stylesheet({content:[{display:"flex",alignItems:"center"}],emoji:[xe]}),be={transition:`opacity ${f.ux.seconds(E.k_)}`},Ce={width:f.ux.percent(100),background:d.Il.CoreNeutral10,borderRadius:f.ux.px(4),fontSize:f.ux.rem(.875),lineHeight:f.ux.rem(1.5),fontFeatureSettings:"'ss03' on",padding:f.ux.px(8),marginTop:f.ux.px(12),boxSizing:"border-box"},Ie=f.ux.stylesheet({replacement:[be],replacementHidden:[be,{opacity:0}],replacementContainer:[Ce]})},18955:(e,t,n)=>{n.d(t,{d:()=>k});var r=n(27378),i=n(5739),a=n(38983),s=n(5114),o=n(19962),l=n(81531),c=n(46680),u=n(9922),d=n(77176),p=n(24209),m=n(18625),h=n(66310),g=n(40151),f=n(85089),y=n(2834),x=n(49708),v=n(93508),b=n(17343),C=n(98403),I=n(76974),S=n(19751),w=n(67434),E=n(57091),A=n(74238);class k extends r.Component{constructor(){super(...arguments),this._log=l.C8.Logging.getLogger("CardsListConnectorView",c.i.DEBUG),this._subs=new u.w.Keeper}componentDidMount(){!0===this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),!0===this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:n}=this.props;return r.createElement(i.F.div,{"data-purpose":"card-list-connector",style:n.pipe(d.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}}!function(e){let t;!function(e){e.create=()=>a.h.create({scrollProvider:s.none,scrollConsumer:s.none,viewport:s.none,title:s.none})}(t=e.Elements||(e.Elements={})),e.boundedScrollListener=(e,t)=>p.T(m.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold((()=>g.E),(e=>f.YC(e).pipe(d.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),y.b((t=>e.viewport.set({top:A.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(h.w(s.fold((()=>g.E),(t=>x.R(t,"scroll").pipe(d.U((()=>t.scrollTop)),v.O(t.scrollTop),y.b((t=>e.scrollTop.set(t))),b.h(C.PU)))))),t.view("title").pipe(h.w(s.fold((()=>I.of(o.Rect.empty)),(e=>f.YC(e)))),d.U((e=>e.height)),S.shareReplay({bufferSize:1,refCount:!0}),y.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(h.w(s.fold((()=>g.E),(t=>e.scrollOffset.pipe(y.b((e=>{t.scrollTop+=e})))))))).pipe(b.h(void 0)),e.superScrollListener=(e,t)=>{const n=t.view("title").pipe(h.w(s.fold((()=>I.of(o.Rect.empty)),(e=>f.YC(e)))),d.U((e=>e.height)),S.shareReplay({bufferSize:1,refCount:!0}));return p.T(m.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold((()=>g.E),(e=>f.YC(e).pipe(d.U((t=>Object.assign(Object.assign({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),y.b((t=>e.viewport.set({top:A.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(h.w(s.fold((()=>g.E),(t=>x.R(t,"scroll").pipe(d.U((()=>t.scrollTop)),v.O(t.scrollTop),y.b((t=>e.scrollTop.set(t))),b.h(C.PU)))))),t.view("scrollConsumer").pipe(h.w(s.fold((()=>g.E),(t=>e.scrollOffset.pipe(w.R(((e,t)=>e-t),0),y.b((e=>{t.style.transform=`translateY(${e}px)`})))))),E.a(n),y.b((([t,n])=>e.paddingTop.set(t+n))))).pipe(b.h(void 0))}}(k||(k={}))},4948:(e,t,n)=>{n.d(t,{J:()=>c});var r=n(27378),i=n(44060);if(3075==n.j)var a=n(64757);var s=n(94632),o=n(89894),l=n(40219);const c=e=>r.createElement(a.zx.Animated,Object.assign({},(0,a.L_)(e,p.gray))),u={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},d={overflow:"hidden",padding:`0 ${o.ux.rem(.5)}`,borderRadius:o.ux.rem(l.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:o.ux.rem(i.xv.ButtonLetterSpacing),fontSize:o.ux.rem(i.xv.ButtonSize),lineHeight:o.ux.rem(i.xv.ButtonLineHeight),transitionDuration:o.ux.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},[`.${s.vD} &`]:{padding:`0 ${o.ux.rem(.5)}`,marginRight:o.ux.px(2),borderRadius:0,backgroundColor:i.Il.CoreNeutral60,$nest:{"&:first-child":{borderRadius:`${o.ux.rem(l.fx)} 0 0 ${o.ux.rem(l.fx)}`},"&:last-child":{marginRight:0,borderRight:"none",borderRadius:`0 ${o.ux.rem(l.fx)} ${o.ux.rem(l.fx)} 0`},"&[data-active='true']":{backgroundColor:i.Il.CoreBlue50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreBlue40,color:i.Il.CoreNeutral0}}}}}}},p=o.ux.stylesheet({button:[u],gray:[u,d]})},82858:(e,t,n)=>{n.d(t,{s:()=>O});var r,i,a=n(27378),s=n(5739),o=n(22232),l=n(44060),c=n(35407),u=n(88056),d=n(19429),p=n(76024),m=n(59312),h=n(95195),g=n(69243),f=n(55485);!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(r||(r={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian",e.indian="indian"}(i||(i={}));var y,x=g.keyof({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),v=(0,m.__spreadArray)((0,m.__spreadArray)([],Object.keys(x.keys),!0),["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net","outlook.live.com","127.0.0.1"],!1).map((function(e){return e.startsWith(".")?e.slice(1):e})),b=g.union([g.type({state:g.literal("disabled")}),g.type({state:g.literal("enabled")}),g.type({state:g.literal("test")})]),C=(g.type({version:g.string}),new g.Type("HttpString",g.string.is,(function(e,t){return h.either.chain(g.string.validate(e,t),(function(n){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?g.success(n):g.failure(e,t,"URL parsing failed (".concat(n,")"))}))}),String)),I=new g.Type("MsStoreUrlString",g.string.is,(function(e,t){return h.either.chain(g.string.validate(e,t),(function(n){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(n)?g.success(n):g.failure(e,t,"Edge URL parsing failed (".concat(n,")"))}))}),String),S=new g.Type("AllowedHttpString",C.is,(function(e,t){return h.either.chain(C.validate(e,t),(function(n){for(var r=n.split("//")[1].split("/")[0].split(":")[0],i=0,a=v;i<a.length;i++){var s=a[i];if(r.endsWith(s))return g.success(n)}var o="Domain (".concat(r,") is not allowed in ").concat(v.join(", "));return g.failure(e,t,o)}))}),C.encode),w=g.keyof({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),E=(g.partial({env:f.D.createStringEnum(r,"Environment"),logLevel:w,accumulateCrashLogLevel:w,sendCrashOnLogLevel:w,collectLogs:g.boolean,collectCrashLogs:g.boolean,copyLogsToConsole:g.boolean,crashLogsCacheSize:g.number,debugLogsCacheSize:g.number,tracking:b,alertCache:g.partial({prefix:g.string,version:g.string}),mutedCategoriesCache:g.partial({prefix:g.string,version:g.string}),outcomeScoreCache:g.partial({prefix:g.string,version:g.string}),userSettingsPrefix:g.string,userSettingsVersion:g.string,defaultDialect:f.D.createStringEnum(i,"DialectEnum"),notificationShowTimeMs:g.number,maxNotificationsOnTheScreen:g.number,selfUpdate:g.partial({versionCheckInterval:g.number,selfUpdateDelay:g.number,canReloadCheckInterval:g.number,blockingModalAutoReloadDelay:g.number,retryFailedVersionCheckInterval:g.number,retryFailedVersionCheckLimit:g.number,debugBuildVersion:g.string,versionFilePath:g.string}),pingMaybeGnarDelay:g.number,domains:g.partial({cookie:x,localServer:g.string}),api:g.partial({analyticsUrl:S,analyticsPrivateUrl:S,authUrl:S,institutionUrl:S,snippetsUrl:S,clientControlsUrl:S,institutionAdminUrl:S,institutionAnalyticsUrl:S,institutionMembersUrl:S,institutionInviteesUrl:S,institutionGroupsUrl:S,institutionTonesUrl:S,institutionVaultUrl:S,gbHarvesterUrl:S,knowledgeHubUrl:S,profileTonesUrl:S,tonesUrl:S,dapiUrl:S,doxUrl:S,doxWsUrl:S,irbisUrl:S,subscriptionUrl:S,discountUrl:S,dataReportUrl:S,capiWsUrl:S,capiApiUrl:S,gnarApi:g.partial({url:S}),femetricsUrl:S,felogUrl:S,felogDebugUrl:S,sumoUrl:S,crashLogUrl:S,onlineTestUrl:g.string,wsTest:S,proofitResultUrl:S,redirect:S,mailApiUrl:S,ssoUrl:S,scimUrl:S,voxInstitutionUrl:S,writingStylesUrl:S,appsUrl:S,tokensUrl:S,cheetahUrl:S,cheetahInstitutionUrl:S,inProductReportUrl:S}),app:g.partial({nameWeb:g.string,nameMacEditor:g.string,nameDesktop:g.string,webOnboarding:g.string}),urls:g.partial({free:g.string,account:S}),onlineEditor:g.partial({docId:S}),external:g.partial({gmail:S,gDocs:S,outlook:S}),funnel:g.partial({base:S,resetPassword:S,accountDeleted:S,businessLanding:S,businessStyleguideLanding:S,businessUpgradeLanding:S,subscribe:S,upgrade:S,plans:S,signin:S,socialSignin:S,signup:S,mainPage:S,deleteSocialAccount:S,subscriptionCancellationSurvey:S,keyboardInstall:S,desktopAppInstall:S,claimedUserJoinFallback:S,userTrustGuidelines:S,llamaServiceDownload:S,llamaServiceDownloadDirect:S,productRecommendation:S,tour:S,facebookTour:S,gDocsTour:S,gmailTour:S,canvasTour:S,linkedInTour:S,outlookTour:S,slackTour:S}),desktop:g.partial({windows:g.partial({installURL:S,infoURL:S}),mac:g.partial({installURL:S,infoURL:S})}),llama:g.partial({windows:S,mac:S}),mobileApp:g.partial({android:S,iOS:S}),extension:g.partial({autoCitations:g.partial({demoPageUrl:g.string}),chrome:g.partial({installURL:S,infoURL:S}),firefox:g.partial({installURL:S,infoURL:S}),safari:g.partial({installURL:S}),edge:g.partial({installURL:I,infoURL:S}),edgeChromium:g.partial({installURL:S})}),edu:g.partial({adminPanelURL:S}),support:g.partial({login:S,email:g.string,mainPage:S,newRequest:S,contact:S,connectionTroubleshooting:S,emailExistsKBUrl:S,safariDownloadFilesKBUrl:S,rtfCompatibilityUrl:S,diagnosticTestPath:g.string,documentAcceptTrackedChanges:S,introducingGrammarlyEditor:S}),privacyPolicy:S,termsOfService:S,account:g.partial({customize:S,subscription:S,adminSubscription:S,members:S,styleGuide:S,writingStyle:S,suggestions:S,writingProgress:S}),preconnectLinks:g.array(C),ideas:g.partial({galleryURL:S})}),d.VF((function(){return{env:r.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:i.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*p.MS_IN_MIN,selfUpdateDelay:12*p.MS_IN_HOUR,canReloadCheckInterval:5*p.MS_IN_SEC,blockingModalAutoReloadDelay:1*p.MS_IN_MIN,retryFailedVersionCheckInterval:5*p.MS_IN_MIN,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*p.MS_IN_HOUR,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",institutionUrl:"https://goldengate.grammarly.com/institution/api",snippetsUrl:"https://goldengate.ppgr.io/snippets/v1/snippets",clientControlsUrl:"https://goldengate.grammarly.com/client-controls",institutionAdminUrl:"https://goldengate.grammarly.com/institution/api/institution/admin",institutionMembersUrl:"https://goldengate.grammarly.com/institution/api/institution/members",institutionInviteesUrl:"https://goldengate.grammarly.com/institution/api/institution/invitees",institutionGroupsUrl:"https://goldengate.grammarly.com/institution/api/groups",institutionVaultUrl:"https://goldengate.grammarly.com/institution/api/vault",gbHarvesterUrl:"https://goldengate.grammarly.com/gb-harvester/api",knowledgeHubUrl:"https://goldengate.grammarly.com/knowledge-hub/v1/institution",analyticsUrl:"https://goldengate.grammarly.com/analytics/api/institution/statistics",analyticsPrivateUrl:"https://analytics.grammarly.com/private/api",institutionAnalyticsUrl:"https://goldengate.grammarly.com/institution/public/api/institution/statistics",institutionTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",profileTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",tonesUrl:"https://goldengate.ppgr.io/brand-tones/v1",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",doxWsUrl:"wss://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",discountUrl:"https://irbis.grammarly.com/api/discounts",dataReportUrl:"https://datareport.grammarly.com",capiWsUrl:"wss://capi.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com"},femetricsUrl:"https://femetrics.grammarly.io/batch/import",felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com",scimUrl:"https://goldengate.grammarly.com/auth/api/token/scim",voxInstitutionUrl:"https://goldengate.grammarly.com/vox/v2/institution",writingStylesUrl:"https://goldengate.grammarly.com/writing-style",appsUrl:"https://apps.grammarly.com",tokensUrl:"https://tokens.grammarly.com",cheetahUrl:"https://capi.grammarly.com/api/cheetah/v1/settings",cheetahInstitutionUrl:"https://goldengate.grammarly.com/cheetah/v1/institution/settings",inProductReportUrl:"https://in-product.report.grammarly.io/v1/report"},app:{nameWeb:"editor",nameMacEditor:"macEditor",nameDesktop:"desktopEditor",webOnboarding:"webOnboarding"},urls:{free:"/free",account:"https://account.grammarly.com"},onlineEditor:{docId:"https://app.grammarly.com/ddocs/"},external:{gmail:"https://mail.google.com/",gDocs:"https://docs.google.com",outlook:"https://outlook.live.com/mail"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",plans:"https://www.grammarly.com/plans",signin:"https://www.grammarly.com/signin",socialSignin:"https://www.grammarly.com/signin/app",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1",userTrustGuidelines:"https://www.grammarly.com/trust",llamaServiceDownload:"https://www.grammarly.com/service/download",llamaServiceDownloadDirect:"https://www.grammarly.com/service/download/direct",productRecommendation:"https://www.grammarly.com/product/recommendation",tour:"https://www.grammarly.com/tour",facebookTour:"https://www.grammarly.com/tour-facebook",gDocsTour:"https://www.grammarly.com/tour-gdocs",gmailTour:"https://www.grammarly.com/tour-gmail",canvasTour:"https://grammarly.com/tour-canvas",linkedInTour:"https://grammarly.com/tour-linkedin",outlookTour:"https://grammarly.com/tour-outlook",slackTour:"https://grammarly.com/tour-slack"},desktop:{windows:{installURL:"https://download-editor.grammarly.com/windows/GrammarlyEditor.exe",infoURL:"https://www.grammarly.com/native/windows"},mac:{installURL:"https://download-editor.grammarly.com/osx/GrammarlyEditor.dmg",infoURL:"https://www.grammarly.com/native/mac"}},llama:{windows:"https://download-windows.grammarly.com/GrammarlyInstaller.exe",mac:"https://download-mac.grammarly.com/Grammarly.dmg"},mobileApp:{android:"https://play.google.com/store/apps/details?id=com.grammarly.android.keyboard",iOS:"https://apps.apple.com/us/app/grammarly-grammar-keyboard/id1158877342"},extension:{autoCitations:{demoPageUrl:"https://www.sciencedirect.com/science/article/abs/pii/S0885200618300826"},chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",diagnosticTestPath:"/diagnostic-test?origin=editor",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc",introducingGrammarlyEditor:"https://support.grammarly.com/hc/en-us/articles/360003474732-Introducing-the-Grammarly-Editor"},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",writingStyle:"https://account.grammarly.com/admin/style-guide-writing-style",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1",writingProgress:"https://account.grammarly.com/writing-progress"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com"],ideas:{galleryURL:"https://app.grammarly.com/ideas/sales"}}})));!function(e){e.createFromPlatformConfig=c.createFrom(E),e.Context=a.createContext(u.Y.invariantContent("PlatformConfig"))}(y||(y={}));var A=n(81531),k=n(50474),T=n(64757),M=n(50790),N=n(89894),L=n(4948);var O;!function(e){e.UnauthorizedError=({action:e})=>a.createElement(M.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",a.createElement("br",null),a.createElement(L.J,{name:"login",className:F.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>a.createElement(M.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. Well try to reconnect you in"," ",a.createElement(s.F.span,null,t.view((e=>e)))," seconds.",a.createElement("br",null),a.createElement(L.J,{name:"reconnect",className:F.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const t=e.withReload(L.J,"UnknownConnectionError");return a.createElement(M.DI.TitledContent,{title:"Sorry, Unexpected Issue"},"A small error has occurred, causing an interruption of service.",a.createElement("br",null),a.createElement(t,{name:"reload-page",className:F.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=a.useContext(y.Context);return a.createElement(M.DI.TitledContent,{title:"Cant Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",a.createElement("br",null),a.createElement(L.J,{name:"troubleshoot",className:F.footerLink,href:e.support.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const t=e.withReload(L.J,"ClientConnectionErrorNotification");return a.createElement(M.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Please check your network stability and then reload this page.",a.createElement("br",null),a.createElement(t,{name:"reload-page",className:F.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>a.createElement(M.DI.TitledContent,{title:"Cant find this document"},"It looks like this document was removed or URL is incorrect.",a.createElement("br",null),a.createElement(L.J,{name:"goto-docs",className:F.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const t=a.useContext(k.m.Context),n=e.withReload(T.zx,"SelfUpdateBlocker");return a.createElement(M.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",a.createElement(n,{name:"reload-page",className:F.link},"reload")," ","the page ",t.hotkeyLabelR,".")},e.DesktopHardUpdate=({reloadMethod:e})=>{const t=a.useContext(k.m.Context).desktopUpdate;return a.createElement(M.DI.TitledContent,{title:t.hardTitle},t.hard,a.createElement("br",null),a.createElement(L.J,{name:"reload-desktop",className:F.footerLink,onClick:e},t.reload))},e.DesktopHardDownload=({downloadMethod:e})=>{const t=a.useContext(k.m.Context).desktopUpdate;return a.createElement(M.DI.TitledContent,{title:t.hardTitle},t.hard,a.createElement("br",null),a.createElement(L.J,{name:"download-desktop",className:F.footerLink,onClick:e},t.download))},e.SlowNetworkError=()=>a.createElement(M.DI.TitledContent,{title:"Your Internet Connection Is Unstable"},"Grammarly may work slower than normal."),e.CheckingIsDownError=()=>a.createElement(M.DI.TitledContent,{title:"Text Checking Is Temporarily Unavailable"},"Grammarly is unable to check your text for errors at this time. Were working to resolve the issue. Please check back soon."),e.Error=()=>{const e=a.useContext(y.Context);return a.createElement(M.DI.TitledContent,{title:"Sorry, Something Went Wrong"},"Please try again later or"," ",a.createElement(T.zx,{name:"support",className:F.link,href:e.support.login,target:"_blank"},"contact support")," ","now to report the issue.")},e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const n=a.useContext(k.m.Context).proofitPayment,r=function(e,t,n){switch(e){case"creditCard":return t;case"payPal":return n;default:const r=`Unknown payment method: ${e}`;throw A.C8.Logging.getLogger("ProofitView").warn(r),new Error(r)}}(e,n.creditCard,n.payPal);return a.createElement(M.DI.TitledContent,{title:"Order can not be processed"},a.createElement("div",null,r),"Please update your credit card information in the Manage Subscription section.",a.createElement("br",null),a.createElement(L.J,{name:"manage-subscription",className:F.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=a.useContext(k.m.Context).proofitOrderModal.card.paymentSuccess;return a.createElement(M.DI.TitledContent,{title:e.title},a.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=a.useContext(k.m.Context).proofitOrderModal.card.paymentError,t=a.useContext(y.Context);return a.createElement(M.DI.TitledContent,{title:e.title},a.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>a.createElement(M.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>a.createElement(M.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",a.createElement("br",null),a.createElement(L.J,{name:"goto-docs",className:F.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>a.createElement(M.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading is either too long or has a complex internal structure. Please edit your text (e.g., reduce length, remove significantly long tables) or select another document.",a.createElement("br",null),a.createElement(L.J,{name:"goto-docs",className:F.footerLink,onClick:e},"Go to your documents")),e.withReload=(e,t)=>class extends a.Component{render(){return a.createElement(e,Object.assign({},this.props,{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:self.location.href,timestamp:Date.now()}))}catch(e){}self.location.reload()}}))}},e.CopyToClipboardError=()=>{const e=a.useContext(k.m.Context);return a.createElement(M.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=a.useContext(y.Context);return a.createElement(M.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",a.createElement(L.J,{name:"support",className:F.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:n})=>a.createElement(M.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders marks has been emailed to you at ",n," in .docx format.",a.createElement("br",null),a.createElement(L.J,{name:"download",className:F.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=a.useContext(k.m.Context),t=a.useContext(y.Context);return a.createElement(M.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your documents formatting, Grammarlys formatting tools are temporarily not available.",a.createElement("br",null),a.createElement(L.J,{name:"support",className:F.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=a.useContext(k.m.Context);return a.createElement(M.DI.TitledContent,{title:t.title},t.text,"",a.createElement(T.zx,{name:"goto-docs",className:F.link,onClick:e},t.link))},e.AlertsNothingFound=()=>a.createElement(M.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DesktopSoftUpdate=({reloadMethod:e})=>{const t=a.useContext(k.m.Context).desktopUpdate;return a.createElement(M.DI.TitledContent,{title:t.softTitle},t.soft,a.createElement("br",null),a.createElement(L.J,{name:"reload-desktop",className:F.footerLink,onClick:e},t.reload))},e.DesktopSoftDownload=({downloadMethod:e})=>{const t=a.useContext(k.m.Context).desktopUpdate;return a.createElement(M.DI.TitledContent,{title:t.softTitle},t.soft,a.createElement("br",null),a.createElement(L.J,{name:"download-desktop",className:F.footerLink,onClick:e},t.download))},e.DownloadDocumentNotFoundError=()=>{const e=a.useContext(k.m.Context);return a.createElement(M.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=a.useContext(k.m.Context);return a.createElement(M.DI.Content,null,t.hotkeyUnsupported,a.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const n=a.useContext(k.m.Context).fileSizeExceededNotification;return a.createElement(M.DI.TitledContent,{title:n.title},n.body,"windows"===e&&a.createElement(L.J,{name:"officeAddin",className:F.footerLink,href:t,target:"_blank"},n.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=a.useContext(k.m.Context).documentUploaded;return a.createElement(M.DI.Content,null,t.message,a.createElement("br",null),a.createElement(L.J,{name:"goto-doc",className:F.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=a.useContext(k.m.Context);return a.createElement(M.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>a.createElement(M.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",a.createElement(T.zx,{name:"document-accept-tracked-changes",className:F.link,href:e,target:"_blank"},"here")," ","for details.");const t=(e,t)=>{switch(e){case P.switchToDenali:return t.switchToDenali;case P.feedbackSend:return t.feedbackSend;case P.statisticsError:return t.statisticsError;case P.referenceCopied:return t.referenceCopied;case P.documentCopied:return t.documentCopied;case P.isTemporaryDownloadError:return t.isTemporaryDownloadError;case P.documentUploadGeneralError:return t.documentUploadGeneralError;case P.documentIsEmpty:return t.documentIsEmpty;case P.noFileToUpload:return t.noFileToUpload;case P.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,o.vE)(e)}};e.Generic=({type:e})=>{const n=a.useContext(k.m.Context);return a.createElement(M.DI.TitledContent,{title:t(e,n)})}}(O||(O={}));const _={display:"inline-flex",overflow:"unset",color:l.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},D={marginTop:N.ux.rem(.5),textDecoration:"none"},F=N.ux.stylesheet({link:[_],footerLink:[_,D]});var P;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(P||(P={}))},32380:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(27378),i=n(18208),a=n(44060),s=n(50474),o=n(31278),l=n(50790),c=n(89894),u=n(4948);const d=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return r.createElement(r.Fragment,null,r.createElement("span",null,e.alerts)," ",i.pluralize(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return r.createElement(r.Fragment,null,e.transform);case"addToDictionary":return r.createElement(r.Fragment,null,r.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as Will address";case"markAsNotHelpful":return"Marked as Not helpful";case"acknowledge":return"Acknowledged";default:return""}},p={display:"flex",marginTop:c.ux.rem(-1.1),marginBottom:c.ux.rem(-.5),alignItems:"center",justifyContent:"space-between"},m={marginTop:c.ux.rem(.6),marginRight:c.ux.rem(1),color:a.Il.CoreNeutral0,flexGrow:0,flexShrink:0},h={marginTop:c.ux.rem(-.25),paddingRight:c.ux.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},g={marginTop:c.ux.rem(.6),maxWidth:c.ux.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},f={marginRight:c.ux.rem(1.4)},y=c.ux.stylesheet({alertUndoWrapper:[p],alertUndoWrapperFlexible:[p,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[p,{flexWrap:"wrap"}],alertUndoBtn:[m],alertUndoIcon:[h],alertUndoContent:[g],alertUndoContentFlexible:[g,f],addToDictionary:[{wordBreak:"break-all"}]});var x;!function(e){const t={wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContent,icon:y.alertUndoIcon,button:y.alertUndoBtn};e.Standard=({action:n,params:i})=>r.createElement(l.DI.Content,null,r.createElement(e.Content,{action:n,content:d(i),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFullWidth})})),e.Flexible=({notification:n,onClose:i,action:a,params:s})=>r.createElement(l.SJ.Wrapper,{notification:n,onClose:i},r.createElement(l.DI.Content,null,r.createElement(e.Content,{action:a,content:d(s,{addToDictionary:y.addToDictionary}),theme:Object.assign(Object.assign({},t),{wrapper:y.alertUndoWrapperFlexible,content:y.alertUndoContentFlexible})}))),e.Content=({action:e,content:n,theme:i=t})=>{const a=r.useContext(s.m.Context);return r.createElement("div",{className:i.wrapper},r.createElement("div",{className:i.content},n),r.createElement(u.J,{name:"alertUndoButton",className:i.button,onClick:e},r.createElement(o.JO.Undo,{className:i.icon}),a.undo))}}(x||(x={}))},91463:(e,t,n)=>{n.d(t,{E2:()=>oe,TG:()=>le});var r,i=n(59312),a=n(27378),s=n(57050),o=n(40327),l=n(49524),c=n(5739),u=n(12187),d=n(38983),p=n(5114),m=n(22232),h=n(19962),g=n(83078),f=n(15073),y=n(101),x=n(77176),v=n(24209),b=n(85985),C=n(13444),I=n(41398),S=n(66310),w=n(98403),E=n(76974),A=n(60797),k=n(40151),T=n(2844),M=n(23063),N=n(81531);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));class L{constructor(){this.completionTrigger=d.h.create(!1),this._steps={},this.getFirstTargetRect=()=>k.E}isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){N.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=d.h.create(r.Hidden);return Boolean(this._steps[e])?this._steps[e]:this._steps[e]={id:e,state:t,dotShown:s.Q1,dotClicked:()=>t.set(r.Popup),popupClosed:()=>t.set(r.Passed),popupIgnored:()=>t.set(r.Hidden),actionTaken:()=>t.set(r.Passed)}}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}}var O=n(9546),_=n(44060),D=n(89894),F=n(24588),P=n(40219);const R=_.Il.BackgroundTooltip,j=D.ux.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${D.ux.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),U={width:D.ux.rem(1),height:D.ux.rem(1),borderRadius:D.ux.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${j} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},$=D.ux.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),B={width:D.ux.rem(1),height:D.ux.rem(1),borderRadius:D.ux.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:D.ux.rem(1),height:D.ux.rem(1),borderRadius:D.ux.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${$} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},z={margin:`${D.ux.rem(-1.5)} 0 0 ${D.ux.rem(-1.5)}`,padding:D.ux.rem(1),borderRadius:D.ux.percent(50),cursor:"pointer",pointerEvents:"all"},G={margin:`0 0 ${D.ux.rem(.5)}`,color:_.Il.CoreNeutral0,fontWeight:"bold"},W={color:_.Il.CoreNeutral0,lineHeight:D.ux.rem(1.25)},H={display:"flex",padding:`${D.ux.rem(1)} ${D.ux.rem(1.5)} ${D.ux.rem(1.25)} ${D.ux.rem(2)}`,width:D.ux.rem(20),borderRadius:D.ux.rem(P.fx),background:R,color:_.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},V={display:"inline-block",marginRight:D.ux.rem(O.x)},Y={marginRight:D.ux.rem(2),width:D.ux.rem(2),flexShrink:0,alignSelf:"center"},Z={stroke:F.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:_.Il.CoreNeutral0,fill:_.Il.CoreNeutral0}}},Q={position:"absolute",top:D.ux.percent(50),left:D.ux.percent(50),zIndex:P.I3},q={position:"relative",zIndex:P.VN},J={zIndex:P.w$},X={position:"absolute",zIndex:P.w$},K=D.ux.prefixedStylesheet("onboarding",{pulse:[U],pulseWrapper:[z],header:[G],description:[W],stepWrapper:[H],content:[V],alertIcon:[Y],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[Z],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[Q],containerDiv:[{}],editor:[q],onboardingPopup:[J],notificationContainer:[X],pulseOptimized:[B]});var ee=n(64757),te=n(31278),ne=n(11413),re=n(3656);const ie=({alignment:e,rect:t,onClose:n,className:r,children:i,icon:s,pinTargetRect:l,hideCloseButton:d,onMount:m})=>a.createElement(ne.t.ByRelativeRect,Object.assign({rect:t,className:K.notificationContainer},ne.t.Alignment.toSelector(e),{pinTargetRect:l,withPin:!0}),a.createElement(c.F.div,Object.assign({},(0,u.Sh)(K.stepWrapper,r),{mount:m}),(0,o.pipe)(s,p.fold((()=>a.createElement(te.JO.Grammarly,{className:K.alertIcon})),(e=>a.createElement(e,{className:K.alertIcon})))),i,!(null!=d&&d)&&a.createElement(ee.zx,{name:"onboard-close",className:K.closeIconWrapper,onClick:()=>n&&n()},a.createElement(te.JO.Close,{className:K.closeIcon,width:12})))),ae=e=>{var{title:t,description:n}=e,r=(0,i.__rest)(e,["title","description"]);return a.createElement(ie,Object.assign({},r),a.createElement("span",{className:K.content},Boolean(t)?a.createElement(re.P1,{className:K.header},t):null,a.createElement(re.XY,{className:K.description},n)))},se=({className:e,onClick:t,customStyle:n})=>a.createElement(c.F.div,Object.assign({},(0,u.Sh)(K.pulseWrapper,e),{style:n,onClick:()=>t&&t()}),a.createElement("div",{className:K.pulseOptimized}));var oe;function le(e){const t=a.useContext(le.Context),{stepId:n,onboardingViewModel:r}=e,s=(0,i.__rest)(e,["stepId","onboardingViewModel"]),l=ce(n,r||t),c=a.useContext(y.l.Context).pipe(x.U((e=>e.rect)));return(0,o.pipe)(l,p.fold((()=>a.Children.only(e.children)),(e=>a.createElement(ue,Object.assign({},s,{onboardingStep:e,viewportRect:c})))))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(oe||(oe={}));const ce=(e,t)=>((0,m.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?p.some(t.subscribeForStep(e)):p.none);class ue extends a.Component{constructor(){super(...arguments),this._subs=[],this._wrapperElement=d.h.create(p.none),this._containerElement=d.h.create(p.none),this._exactTargetRect=d.h.create(p.none),this._visibilityState=d.h.create(!1),this._spotStyle=d.h.create({}),this._onEventActionTaken=(e,t=!0)=>n=>{var r;const i=e.state.get();if("popup"===i||t&&"dot"===i){const i=n.target;if(h.isDisabled(i))return;const a=t||h.hasParentWithClassName(i,K.containerDiv);if("findFirstButton"===(null===(r=this.props.dotPosition)||void 0===r?void 0:r.kind)&&!h.hasParentWithAttribute(i,"role","button"))return;a&&e.actionTaken()}else"dot"===i&&(n.preventDefault(),n.stopPropagation())}}componentWillUnmount(){const e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){var e;const t=this.props.dotPosition;t?this._subs.push(v.T(this.context,this.props.onboardingStep.state.pipe(b.h((e=>"dot"===e||"popup"===e)))).pipe(C.g(500),I.M(this._wrapperElement,this._containerElement),S.w((([e,n,r])=>(0,o.pipe)((0,s.bc)(n,r),(0,s.og)(g.map2(((e,n)=>{switch(t.kind){case"findFirstButton":return w.Dx(t.buttonOrder).pipe(S.w((r=>E.of(void 0).pipe(C.g(500),x.U((()=>{const[i,a]=me(e,n,t.position,r,t.selector);return this._exactTargetRect.set(a),i})),A.oA))));case"dotAtPosition":return E.of(de(t.position));default:return(0,m.vE)(t)}}))),p.fold((()=>k.E),l.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)})),T.aj([null!==(e=this.props.dismissalTrigger)&&void 0!==e?e:k.E,this.props.onboardingStep.state]).pipe(b.h((([e,t])=>e&&("dot"===t||"popup"===t))),M.q(1)).subscribe((()=>{this.props.onboardingStep.actionTaken()}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return a.createElement(c.F.div,Object.assign({key:"onboarding-wrapper"},(0,u.Sh)(K.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:e=>this._wrapperElement.set(p.fromNullable(e))}),a.createElement("div",Object.assign({key:"container",ref:e=>this._containerElement.set(p.fromNullable(e))},(0,u.Sh)(K.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),d.h.combine(e.state,this._visibilityState,((t,n)=>{if(!n)return null;switch(t){case"dot":const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),a.createElement(se,Object.assign({customStyle:this._spotStyle,key:"spot"},(0,u.Sh)(K.onboardingSpot,t),{onClick:()=>e.dotClicked()}));case"popup":return a.createElement(ae,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(p.fold((()=>h.Rect.empty),h.Rect.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:p.fromNullable(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(g.orUndefined)});default:return null}})))}}ue.contextType=f.u.Context,ue.defaultProps={alignment:"left"};const de=e=>{switch(e){case oe.leftTop:return{top:0,left:0};case oe.leftCenter:return{top:"50%",left:0};case oe.leftBottom:return{top:"100%",left:0};case oe.rightTop:return{top:0,left:"100%"};case oe.rightCenter:return{top:"50%",left:"100%"};case oe.rightBottom:return{top:"100%",left:"100%"};case oe.center:return{top:"50%",left:"50%"};default:return(0,m.vE)(e)}},pe=(e,t,n)=>{switch(n){case oe.rightTop:return{top:e.top-t.top,left:e.left-t.left+e.width};case oe.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,m.vE)(n)}},me=(e,t,n,r,i)=>{const a=t.querySelectorAll(null!=i?i:'[role="button"], [role="insertion"], [role="deletion"]'),o=a.length>0&&(void 0===r?a[a.length-1]:a[r]);if(Boolean(o)){const t=h.Rect.fromEl((0,s.MZ)(o)),r=h.Rect.fromEl(e);return[p.some(pe(t,r,n)),p.some(t)]}return Boolean(i)?[p.none,p.none]:[p.some({top:"50%",left:"50%"}),p.none]};!function(e){e.Context=a.createContext(null),e.ContextMock=({children:t})=>a.createElement(e.Context.Provider,{value:new L,children:t})}(le||(le={}))},91175:(e,t,n)=>{n.d(t,{Z:()=>N,UI:()=>V});var r,i=n(59312),a=n(5114),s=n(19429),o=n(45614),l=n(93756),c=n(57050),u=n(24209),d=n(83401),p=n(2844),m=n(76974),h=n(40151),g=n(44586),f=n(2834),y=n(66310),x=n(85985),v=n(77176),b=n(24713),C=n(67434),I=n(17343),S=n(78674),w=n(93508),E=n(13444),A=n(50628),k=n(40327),T=n(48403),M=n(95343);!function(e){e.split=function(e){var t=(0,k.pipe)(e,T._(1),M.x());return{animation:(0,k.pipe)(t,x.h((function(e){return"root"===e.action.key})),v.U((function(e){return{key:e.key,action:e.action.action}}))),action:(0,k.pipe)(t,x.h((function(e){return"children"===e.action.key})),v.U((function(e){return{key:e.key,action:e.action.action}})))}}}(r||(r={}));var N,L={URI:"Observable",map:function(e,t){return e.pipe((0,v.U)(t))},ap:function(e,t){return(0,p.aj)([e,t]).pipe((0,v.U)((function(e){return(0,e[0])(e[1])})))},of:function(e){return(0,m.of)(e)}},O=n(14601),_=n(32952),D=n(62962);function F(e){return function(t){return new g.y((function(n){for(var r=(0,D.n)()(t),i=[],a=new O.w,s=0;s<e.length;++s){var o=new _.xQ;i.push(o),a.add(r.subscribe(o))}return a.add(e.apply(void 0,i).subscribe(n)),a.add(r.connect()),a}))}}!function(e){function t(e){return s.UI(e)}function n(e){return s.I_(e)}function k(e,t){return s.VF((function(n){return(0,c.zG)(n,F((function(n,r){return(0,c.zG)(t(r),y.w((function(t){var r=Object.entries(t)[0],a=r[0],s=r[1];return(0,c.zG)(n,x.h((function(e){return e.key===s})),v.U((function(e){return e.action})),e[s],v.U((function(e){var t;return(0,i.__assign)((0,i.__assign)({},e),((t={})[a]=s,t))})))})))})))}))}function T(e,t){return function(n){return(0,c.zG)(e,x.h((function(e){return e.key===t&&e.action.animationType===n})),v.U((function(e){return e.action})),w.O({kind:"init"}),y.w((function(e){return"end"===e.kind?(0,m.of)(e):(0,c.zG)((0,m.of)({kind:"end",animationType:n}),E.g("start"===e.kind?O:N))})),A.P())}}e.fromSideEffect=function(e,t){return function(n){return(0,u.T)(n.pipe(f.b(e),y.w((function(){return d.C}))),(r=t)instanceof g.y?r:(0,m.of)(r));var r}},e.patchState=t,e.extendActions=n,e.patch=function(e,r){return(0,c.ls)(n(e),t(r))},e.replaceActions=function(e){return s.I_((0,c.ls)(e,y.w((function(){return d.C}))))},e.composeKnot=function(e){return s.VF((function(t){return(0,p.aj)(Object.keys(e).map((function(n){return e[n](t.pipe(x.h((function(e){return e.key===n})),v.U((function(e){return e.action})))).pipe(v.U((function(e){var t;return(t={})[n]=e,t})))}))).pipe(v.U((function(e){return e.reduce((function(e,t){return(0,i.__assign)((0,i.__assign)({},e),t)}))})))}))},e.composeUnion=k,e.composeOption=function(t,n){return k({None:function(){return(0,m.of)(null)},Some:e.composeKnot({value:t})},s.VF((function(e){return(0,c.zG)(e,x.h((function(e){return"Some"===e.key})),v.U((function(e){return e.action.action})),n)})))},e.composeList=function(e,t,n){return s.VF((function(r){return(0,c.zG)(r,F((function(r,i){return(0,c.zG)(t(i),y.w((function(t){return e.traverseWithIndex(L)(t,(function(e,t){return n(t)((0,c.zG)(r,x.h((function(t){return t.key===e})),v.U((function(e){return e.action}))))}))})))})))}))},e.animatingFlow=function(e,t){return function(n){var s=r.split(n),d=s.action,p=s.animation,m=0;return(0,c.zG)(d,x.h((function(e){return e.key===String(m)})),b.j("action"),e,C.R(function(e,t){return function(n,r){var i,s,o=t(),u=a.fromNullable(n[o]),d=(0,c.zG)(u,a.map((function(e){return e.children}))),p=e(d,r);if(a.isNone(p))return(i={})[o]={root:a.none,children:r},i;var m=((s={})[o+1]={root:l.EK(p.value),children:r},s),h=l.IS(p.value);return a.isSome(h)&&a.isSome(d)&&(m[o]={root:h,children:d.value}),m}}(t,(function(){return m})),{}),f.b((function(e){return m=Number(Object.keys(e).pop())})),y.w(function(e,t){return function(n){var r=String(t()-1),s=String(t()),l=(0,c.zG)(a.fromNullable(n[r]),a.chain((function(e){return e.root})),a.map(T(e,r)),a.fold((function(){return h.E}),c.yR),I.h(o.deleteAt(r))),d=(0,c.zG)(n[s].root,a.map(T(e,s)),a.fold((function(){return h.E}),c.yR),I.h((function(e){var t=(0,i.__assign)({},e);return t[s]=(0,i.__assign)((0,i.__assign)({},t[s]),{root:a.none}),t})));return(0,c.zG)((0,u.T)(l,d),C.R((function(e,t){return t(e)}),n),S.b(M),w.O(n))}}(p,(function(){return m}))))}};var M=100,N=500,O=10*N}(N||(N={}));var P=n(27378),R=n(46455),j=n(28043),U=n(5739),$="root",B=n(73975),z=n(95300);function G(e){return(0,c.ls)(j.x(),C.R((function(t,n){return e.reduceWithIndex(n,new Map,(function(e,n,r){var i=t.get(e);return void 0!==i?(n.set(e,i),i.next(r)):n.set(e,new z.X(r)),n}))}),new Map),j.x((t=B.f7((function(){return!0})),{equals:function(e,n){var r;if(e===n)return!0;if(e.size===n.size){for(var i=e.keys(),a=void 0;null===(r=(a=i.next()).done)||void 0===r||!r;)if(!n.has(a.value)||!t.equals(e.get(a.value),n.get(a.value)))return!1;return!0}return!1}}).equals));var t}var W=n(78146),H=n(98036);var V,Y=function(){function e(e){this._keySelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Z(e,this._keySelector))},e}(),Z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r._keySelector=n,r.attemptedToUnsubscribe=!1,r.count=0,r._currentGroup=a.none,r}return(0,i.__extends)(t,e),t.prototype._next=function(e){var t=this,n=this._keySelector(e);(0,k.pipe)(this._currentGroup,a.fold((function(){return t._createGroup(n,e)}),(function(r){var i=r.key,s=r.group;i!==n?(s.complete(),t._currentGroup=a.none,t._createGroup(n,e)):s.closed||s.next(e)})))},t.prototype._createGroup=function(e,t){var n=new z.X(t);this._currentGroup=a.some({key:e,group:n}),this.destination.next(new W.T(e,n,this))},t.prototype._error=function(e){(0,k.pipe)(this._currentGroup,a.map((function(t){return t.group.error(e)}))),this._currentGroup=a.none,this.destination.error(e)},t.prototype._complete=function(){(0,k.pipe)(this._currentGroup,a.map((function(e){return e.group.complete()}))),this._currentGroup=a.none,this.destination.complete()},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(H.L);function Q(e,t){return(0,k.pipe)(t,V.mapAction((function(t){return{key:e,action:t}})),s.UI((function(t){return null===t?t:P.cloneElement(t,{key:e})})))}function q(e,t,n){var r,a;if(X(e)&&t.length>0)return{grid:e.grid,child:q(e.child,t,n)};if(J(e)&&t.length>0){var s=t[0],o=t.slice(1);return{grid:e.grid,children:(0,i.__assign)((0,i.__assign)({},e.children),(r={},r[s]=q(e.children[s],o,n),r))}}if(K(e)&&t.length>0)return{foldable:e.foldable,of:q(e.of,t,n)};if(ee(e)&&t.length>0){s=t[0],o=t.slice(1);return{tag:e.tag,members:(0,i.__assign)((0,i.__assign)({},e.members),(a={},a[s]=q(e.members[s],o,n),a))}}return n(e)}function J(e){return"children"in e}function X(e){return"child"in e}function K(e){return"foldable"in e}function ee(e){return"members"in e}function te(e){return P.createElement(U.F.Fragment,{children:e})}!function(e){function t(e){return X(e)?function(n){var r=new Proxy({},{get:function(){var r;return t(e.child)({children:null,notify:n.notify,state:null!==(r=n.state)&&void 0!==r?r:h.E})}});return e.grid({children:r,state:h.E,notify:c.Q1})}:J(e)?function(n){return(0,k.pipe)(n.state,G(o.record),v.U((function(r){var i=(0,k.pipe)(e.children,o.mapWithIndex((function(e,i){return Q(e,t(i))({children:null,notify:n.notify,state:r.get(e)||h.E})})));return e.grid({children:i,state:r.get($)||h.E,notify:function(e){return n.notify({key:$,action:e})}})})),te)}:K(e)?function(n){return(0,k.pipe)(n.state,G(e.foldable),C.R((function(r,i){var a=new Map;return i.forEach((function(i,s){var o=r.get(s);if(void 0!==o)a.set(s,o);else{var l=Q(s,t(e.of));a.set(s,l({children:null,notify:n.notify,state:i}))}})),a}),new Map),v.U((function(e){var t=new Array;return e.forEach((function(e){return t.push(e)})),t})),te)}:ee(e)?function(n){return(0,k.pipe)(n.state,(r=e.tag,function(e){return e.pipe((function(e){return e.lift(new Y((function(e){return e[r]})))}))}),v.U((function(r){return Q(r.key,t(e.members[r.key]))({children:null,notify:n.notify,state:r})})),te);var r}:e}function n(e,t,r){return J(e)?{grid:n(e.grid,t,r),children:e.children}:K(e)?{foldable:e.foldable,of:n(e.of,t,r)}:function(n){return e({children:n.children,notify:(0,k.pipe)(n.notify,s.I_(r)),state:(0,k.pipe)(n.state,v.U(t))})}}!function(t){t.empty=function(){return null},t.make=function(t){return e.Grid.make(t)}}(e.Node||(e.Node={})),function(e){e.make=function(e){return function(t){var n=t.children,r=t.state,i=t.notify;return P.createElement(e,{slots:n,state:r,notify:function(e){return function(){return i(e)}},view:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,k.pipe)(r,b.j.apply(R,e),j.x())}})}}}(e.Grid||(e.Grid={})),function(e){e.make=function(e,t){return{grid:e,child:t}}}(e.Composite||(e.Composite={})),function(e){e.make=function(e,t){return{grid:e,children:t}}}(e.Knot||(e.Knot={})),function(e){e.make=function(e){return{grid:function(e){return te((0,k.pipe)(e.children,o.collect((function(e,t){return t}))))},children:e}}}(e.Group||(e.Group={})),function(e){e.make=function(e,t){return{foldable:e,of:t}}}(e.List||(e.List={})),function(t){t.make=function(e,t){return{tag:e,members:t}},t.asOption=function(t){return{tag:"_tag",members:{Some:e.Group.make({value:t}),None:e.Node.empty}}}}(e.Union||(e.Union={})),function(e){e.make=function(e,t){return function(n){var r;return P.createElement(U.F.div,((r={})["data-purpose"]="animation-wrapper",r.children=n.children.children,r.className=(0,k.pipe)(n.state,v.U((0,c.ls)(a.map((function(n){return Boolean(e[n])?e[n]:t[n]})),a.toUndefined)),j.x()),r.onAnimationStart=(0,k.pipe)(n.state,v.U(a.fold((function(){return c.Q1}),(function(e){return function(){return n.notify({kind:"start",animationType:e})}})))),r.onAnimationEnd=(0,k.pipe)(n.state,v.U(a.fold((function(){return c.Q1}),(function(e){return function(){return n.notify({kind:"end",animationType:e})}})))),r))}}}(e.Transition||(e.Transition={})),function(t){t.make=function(t,n){return e.List.make(o.record,e.Knot.make(t,{children:n}))}}(e.Animated||(e.Animated={})),e.mount=function(e,n){var r=new _.xQ;return t(e)({children:null,notify:function(e){return r.next(e)},state:(0,k.pipe)(n(r),T._(1),M.x())})},e.patch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n){return q(n,e,t)}}},e.mapAction=function(e){return function(t){return n(t,c.yR,e)}},e.contramapState=function(e){return function(t){return n(t,e,c.yR)}},e.squash=t,e.promap=n}(V||(V={}))},31668:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(22232);var i=function(){function e(t,n){void 0===n&&(n=new URLSearchParams),this.base=t,this.params=n;var i=e._toString(t,n).length;(0,r.kG)(i<e.MAX_URL_LENGTH,"url exceeded length limit",String(i))}return e.prototype.addParams=function(t){var n,r=Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e.append(n,r),e}),(n=this.params,new URLSearchParams(n.toString())));return new e(this.base,r)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var n=t.toString();return"".concat(e).concat(n.length?"?".concat(n):"")},e.MAX_URL_LENGTH=2083,e}()},31903:(e,t,n)=>{n.d(t,{Q:()=>l});var r=n(57050),i=n(37492),a=n(51072),s=n(81531);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._capiSDUIClient=t,this._log=s.C8.Logging.getLogger("SDUIFeedbackServiceImpl")}var t,n,l;return t=e,(n=[{key:"sendUserAction",value:function(e,t){var n=this;this._log.debug("Sending user action",{componentId:e,userAction:t}),(0,r.zG)(this._capiSDUIClient.sendUserAction(e,t),a.toPromise,(function(e){return e.catch((function(e){i.EP.isDroppedError(e)?n._log.debug("Stopped listening for sendUserAction message acknowledge",e):i.YG.isNotConnectedError(e)?n._log.warn("Failed to sendUserAction as CAPI was not connected",e):n._log.error("Failed to sendUserAction",e)}))}))}}])&&o(t.prototype,n),l&&o(t,l),e}()},52726:(e,t,n)=>{n.d(t,{p:()=>d});var r=n(57050),i=n(5114),a=n(83078),s=n(56370),o=n(35416),l=n(6100),c=n(76974),u=n(77176);function d(e,t){return s.Z.composeKnot({content:s.Z.fromSideEffect(r.Q1,m(e,t)),root:p()})}var p=function(){return function(){return c.of({})}};function m(e,t){var n=e.view(t.getActiveAlertsCount).view((function(e){return 0===e})),s=e.view(l.v.Prism.getFeedItems());return e.pipe(u.U(o.In.getActiveItem),u.U((function(e){if(i.isNone(e))return{root:"empty",card:{kind:"empty"}};var o=a.unsafeGet(e),l=s.get(),c=(0,r.zG)(l.getAt(l.size-1),i.exists((function(e){return e.id===o.id})));return{root:o.id,card:t.viewState(n.get(),c)(o)}})))}},94810:(e,t,n)=>{n.d(t,{c:()=>r});var r,i=n(27378),a=n(5739),s=n(5114),o=n(56370);!function(e){var t,n=function(e){return o.UI.Knot.make(l,{card:e})};!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.assistant=function(e){return o.UI.Knot.make(r,{content:n(e)})};var r=e.AssistantBox=o.UI.Grid.make((function(e){var n=e.notify,r=e.slots;return i.createElement(a.F.div,{id:"assistant-feed-wrapper",mount:function(e){return n({kind:t.onMount,element:s.fromNullable(e)})()}},r.content)}));e.card=n;var l=e.IdProvider=o.UI.Grid.make((function(e){var t=e.slots,n=e.state;return i.createElement(a.F.div,{"data-id":n},t.card)}))}(r||(r={}))},8821:(e,t,n)=>{n.d(t,{N:()=>r});var r,i,a,s=n(64015),o=n(57050),l=n(77176),c=n(60797),u=n(41398),d=n(85985),p=n(5114),m=n(35416),h=n(40330);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){o=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}a=r||(r={}),((i=a.PrevNextNavigation||(a.PrevNextNavigation={})).Events||(i.Events={})).fromSduiCardActions=(0,o.ls)(l.U((function(e){var t=(0,o.zG)(e.actions,s.hX(h.zx.Action.isTransitionAction));return e.actions.find((function(e){return"prevCard"===e.type}))?p.some({kind:"prevClicked",transitions:t}):e.actions.find((function(e){return"nextCard"===e.type}))?p.some({kind:"nextClicked",transitions:t}):p.none})),c.oA),i.sideEffect=function(e,t,n){return{id:"SingleCardAssistant.prevNextNavigation",when:m.nL.Effect.When.isSidebarOpen,what:m.nL.Effect.ItemsApplicator.create((0,o.zG)(e,u.M(t.pipe(d.h(m.nL.hasCards))),l.U((function(e){var t=f(e,2),n=t[0],r=t[1];return(0,o.zG)(r.currentLens.cardIndex,p.chain((function(e){return r.currentLens.items.getAt("nextClicked"===n.kind?e+1:e-1)})))})),c.oA,l.U((function(e){return function(t){return m.nL.Prism.getLensWithItems().modify(n.selectItemById(e.id),t)}}))))}}},46149:(e,t,n)=>{function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>s});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return r(e)?e.hashCode():s(String(e))}function s(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class o extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:`${n}`,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=o,this.__proto__=o.prototype}errors(){return this.errorsRef.slice()}}class l extends Error{constructor(e){super(e),this.name="DummyError";this.constructor=l,this.__proto__=l.prototype}}class c extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=c,this.__proto__=c.prototype}}class u extends Error{constructor(e){super(e),this.name="IllegalInheritanceError";this.constructor=u,this.__proto__=u.prototype}}class d extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=p,this.__proto__=p.prototype}}class m extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=m,this.__proto__=m.prototype}}class h extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=h,this.__proto__=h.prototype}}function g(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function f(e,t,n){const r=e,i=r.prototype,a="fantasy-land/",s="equals",o=a+s,l="map",c=a+l,u="ap",d=a+u,p=a+"of",m="chain",h=a+m,f="chainRec",y=a+f;i.equals?i[o]=i.equals:n&&(i[o]=g(n.equals)),i.map?i[c]=i.map:t&&(i[c]=g(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=g(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[h]=i.chain:t&&(i[h]=g(t.chain)),r.chainRec?r[y]=r.chainRec:t&&(r[y]=t.chainRec)}class y{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:v(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new c("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?C(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?v(this.value):C(this.value)}toOption(){return this._isRight?E(this.value):A}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new b(e)}static left(e){return v(e)}static right(e){return C(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:C(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:C(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:C(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:C(a(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,a,s){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:C(s(e.value,t.value,n.value,r.value,i.value,a.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return C(r.value);n=r.value}}}class x extends y{constructor(e){super(e,"left")}}function v(e){return new x(e)}class b extends y{constructor(e){super(e,"right")}}function C(e){return new b(e)}const I={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:y.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>y.tailRecM(t,(t=>e(y.left,y.right,t)))};f(y,I,I);class S{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new c("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?A:E(e(this.value))}flatMap(e){return this._isEmpty?A:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?A:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?E(e):A}static some(e){return new S(e,!1)}static none(){return A}static empty(){return A}static pure(e){return E(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?E(n(e.value,t.value)):A}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?E(r(e.value,t.value,n.value)):A}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?E(i(e.value,t.value,n.value,r.value)):A}static map5(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?E(a(e.value,t.value,n.value,r.value,i.value)):A}static map6(e,t,n,r,i,a,s){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?E(s(e.value,t.value,n.value,r.value,i.value,a.value)):A}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return A;{const t=e.value;if(t.isRight())return E(t.value);n=t.value}}}}class w extends S{constructor(e){super(e,!1)}}function E(e){return new w(e)}const A=new class extends S{constructor(){super(void 0,!0)}},k={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:S.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>S.tailRecM(t,(t=>e(y.left,y.right,t)))};f(S,k,k);class T{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?O(new c("try.failed()")):N(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:O(new c(`Predicate does not hold for ${this.value}`))}catch(e){return O(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return O(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?T.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:T.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return O(e)}}toOption(){return this._isSuccess?E(this.value):A}toEither(){return this._isSuccess?C(this.value):v(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return N(e())}catch(e){return O(e)}}static pure(e){return T.success(e)}static unit(){return D}static success(e){return N(e)}static failure(e){return O(e)}static raise(e){return O(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return N(n(e.value,t.value))}catch(e){return O(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return N(r(e.value,t.value,n.value))}catch(e){return O(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return N(i(e.value,t.value,n.value,r.value))}catch(e){return O(e)}}static map5(e,t,n,r,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return N(a(e.value,t.value,n.value,r.value,i.value))}catch(e){return O(e)}}static map6(e,t,n,r,i,a,s){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return N(s(e.value,t.value,n.value,r.value,i.value,a.value))}catch(e){return O(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return N(r.value);n=r.value}catch(e){return O(e)}}}class M extends T{constructor(e){super(e,"success")}}function N(e){return new M(e)}class L extends T{constructor(e){super(e,"failure")}}function O(e){return new L(e)}const _={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:T.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>T.tailRecM(t,(t=>e(y.left,y.right,t)))};f(T,_,_);const D=N(void 0);class F{static of(e){return new P(e)}static empty(){return j}static collection(...e){return new $(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new o(t)}}class P extends F{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class R{constructor(){this._funIsDummy=!0}cancel(){}}const j=new R;class U{static of(e){return new B(e)}static empty(){return new z}static alreadyCanceled(){return G}static collection(...e){return new $(e)}}class $ extends U{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{F.cancelAll(this._refs)}finally{delete this._refs}}}class B extends P{isCanceled(){return null===this.thunk}}class z extends U{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const G=new class extends R{isCanceled(){return!0}};new class extends R{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class W{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof W){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new W}static of(e){return new W(F.of(e))}}class H{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{F.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||F.empty()}static empty(){return new H}static collection(...e){return new H(e)}}class V{constructor(e){this._underlying=e||j,this._chained=!1}update(e){if(!e)throw new p("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=j,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new p("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof R||t.update(e)}else this.cancel();return this}static empty(){return new V}}class Y{toString(){return this.label.toUpperCase()}}const Z=1e3,Q=1e6,q=1e3*Q,J=60*q,X=60*J,K=24*X,ee=9007199254740992,te=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ne(e,t,n){return e>n?ee:e<-n?-9007199254740992:e*t}const re=new class extends Y{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return te(e/1e3)}toMillis(e){return te(e/(Q/1))}toSeconds(e){return te(e/(q/1))}toMinutes(e){return te(e/(J/1))}toHours(e){return te(e/(X/1))}toDays(e){return te(e/(K/1))}};const ie=new class extends Y{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ne(e,1e3,te(ee/1e3))}toMicros(e){return e}toMillis(e){return te(e/1e3)}toSeconds(e){return te(e/(q/Z))}toMinutes(e){return te(e/(J/Z))}toHours(e){return te(e/(X/Z))}toDays(e){return te(e/(K/Z))}};const ae=new class extends Y{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ne(e,Q/1,te(ee/(Q/1)))}toMicros(e){return ne(e,1e3,te(ee/1e3))}toMillis(e){return e}toSeconds(e){return te(e/1e3)}toMinutes(e){return te(e/6e4)}toHours(e){return te(e/(X/Q))}toDays(e){return te(e/(K/Q))}};const se=new class extends Y{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ne(e,q/1,te(ee/(q/1)))}toMicros(e){return ne(e,q/Z,te(ee/(q/Z)))}toMillis(e){return ne(e,1e3,te(ee/1e3))}toSeconds(e){return e}toMinutes(e){return te(e/60)}toHours(e){return te(e/3600)}toDays(e){return te(e/86400)}};const oe=new class extends Y{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ne(e,J/1,te(ee/(J/1)))}toMicros(e){return ne(e,J/Z,te(ee/(J/Z)))}toMillis(e){return ne(e,6e4,te(ee/6e4))}toSeconds(e){return ne(e,60,te(ee/60))}toMinutes(e){return e}toHours(e){return te(e/60)}toDays(e){return te(e/1440)}};const le=new class extends Y{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ne(e,X/1,te(ee/(X/1)))}toMicros(e){return ne(e,X/Z,te(ee/(X/Z)))}toMillis(e){return ne(e,X/Q,te(ee/(X/Q)))}toSeconds(e){return ne(e,3600,te(ee/3600))}toMinutes(e){return ne(e,60,te(ee/60))}toHours(e){return e}toDays(e){return te(e/24)}};const ce=new class extends Y{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ne(e,K/1,te(ee/(K/1)))}toMicros(e){return ne(e,K/Z,te(ee/(K/Z)))}toMillis(e){return ne(e,K/Q,te(ee/(K/Q)))}toSeconds(e){return ne(e,86400,te(ee/86400))}toMinutes(e){return ne(e,1440,te(ee/1440))}toHours(e){return ne(e,24,te(ee/24))}toDays(e){return e}};class ue{constructor(e,t){if(isNaN(e))throw new p("NaN is not supported for a Duration");this.duration=te(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return re.convert(this.duration,this.unit)}toMicros(){return ie.convert(this.duration,this.unit)}toMillis(){return ae.convert(this.duration,this.unit)}toSeconds(){return se.convert(this.duration,this.unit)}toMinutes(){return oe.convert(this.duration,this.unit)}toHours(){return le.convert(this.duration,this.unit)}toDays(){return ce.convert(this.duration,this.unit)}convertTo(e){return new ue(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return ue.negInf();case-1/0:return ue.inf();default:return new ue(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new p("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new ue(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?ue.millis(e):e}static zero(){return new ue(0,ce)}static inf(){return new ue(1/0,ce)}static negInf(){return new ue(-1/0,ce)}static nanos(e){return new ue(e,re)}static micros(e){return new ue(e,ie)}static millis(e){return new ue(e,ae)}static seconds(e){return new ue(e,se)}static minutes(e){return new ue(e,oe)}static hours(e){return new ue(e,le)}static days(e){return new ue(e,ce)}}class de{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new de(e)}}function pe(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const me=Math.log(2);function he(e){if(e<0)throw new p("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/me}(e));return 1<<(t>30?30:t&t)}class ge{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{n(),r(e,i,t)}))),i=W.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const s=e.currentTimeMillis()-i,o=Math.max(0,a-s);r(e,t,a,o)}))),i=W.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}ge.global=de.of((()=>ve));class fe{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=he(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*s(this.type)+this.recommendedBatchSize}static synchronous(){return new fe("synchronous")}static alwaysAsync(){return new fe("alwaysAsync")}static batched(e){return new fe("batched",e)}}fe.global=de.of((()=>fe.batched()));class ye{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class xe extends ge{constructor(e=!1,t=fe.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new ye(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(be(e,this.reportFailure)):e=>setTimeout(be(e,this.reportFailure))}executeAsync(e){throw new m("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,ue.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return F.of((()=>clearTimeout(r)))}withExecutionModel(e){return new xe(this._useSetImmediate,e)}}const ve=new xe(!0);function be(e,t){return()=>{try{e()}catch(e){t(e)}}}class Ce{transform(e,t){return this.transformWith((t=>Ce.pure(e(t),this._scheduler)),(e=>Ce.pure(t(e),this._scheduler)))}attempt(){return this.transform(v,C)}flatMap(e){return this.transformWith(Ce.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(Ce.raise,(t=>Ce.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,Ce.pure)}recover(e){return this.transformWith((t=>Ce.pure(e(t),this._scheduler)),(e=>Ce.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Te(t,(e=>Ce.raise(e,n)),n),Te(e,(e=>Ce.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>Ce.delayedTick(e,this._scheduler).flatMap((()=>Ce.raise(t,this._scheduler)))),(t=>Ce.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=Ce.raise(new h(ue.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,Ce.delayedTick(e,this._scheduler).flatMap((()=>t()))];return Ce.firstCompletedOf(n,this._scheduler)}static of(e,t=ge.global.get()){const n=Ae.empty(t);return t.executeAsync((()=>n.tryComplete(T.of(e)))),n.future()}static pure(e,t=ge.global.get()){return new Ie(N(e),t)}static raise(e,t=ge.global.get()){return new Ie(O(e),t)}static create(e,t=ge.global.get()){const n=Ae.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return Ce.raise(e,t)}}static unit(e=ge.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new Ie(N(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=ge.global.get()){return Ce.create((n=>t.scheduleOnce(e,(()=>n(N(void 0))))),t)}static tailRecM(e,t,n=ge.global.get()){return t(e).flatMap((e=>e.isRight()?Ce.pure(e.get(),n):Ce.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=ge.global.get()){return e instanceof Ce?e.withScheduler(t):Ce.create((t=>{e.then((e=>t(N(e))),(e=>t(O(e))))}),t)}static fromTry(e,t=ge.global.get()){return new Ie(e,t)}static firstCompletedOf(e,t=ge.global.get()){return function(e,t){return Ce.create((n=>{try{const r=Ne(e,t);if(0===r.length)return n(O(new p("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const a=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Me(r,t,a),n(e))}))}return F.of((()=>Me(r,t)))}catch(e){n(O(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=ge.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new p("parallelism <= 0");return Ce.of((()=>pe(e)),r).flatMap((e=>Le(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=ge.global.get()){return function(e,t){return Ce.create((n=>{try{const r=Ne(e,t);if(0===r.length)return n(N([]));const i=F.of((()=>Me(r,t)));let a=!1,s=0,o=[];for(let e=0;e<r.length;e++){const l=e;r[e].onComplete((e=>{s+=1,e.isSuccess()?a||(o[l]=e.get(),a=s===r.length,a&&n(N(o))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),n(e))}))}return i}catch(e){n(O(e))}}),t)}(e,t)}static map2(e,t,n,r=ge.global.get()){return Ce.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=ge.global.get()){return Ce.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,a=ge.global.get()){return Ce.sequence([e,t,n,r],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a,s=ge.global.get()){return Ce.sequence([e,t,n,r,i],s).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s,o=ge.global.get()){return Ce.sequence([e,t,n,r,i,a],o).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Ie extends Ce{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return E(this._value)}withScheduler(e){return this._scheduler===e?this:new Ie(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return ke(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class Se{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return A;case"complete":return E(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const we={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Ce.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Ce.tailRecM(t,(t=>e(y.left,y.right,t)))};f(Ce,we);class Ee extends Ce{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Ee(this._state,this._cancelable,e)}transformWith(e,t){return ke(this,e,t,this._scheduler,this._cancelable)}}class Ae{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new d("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(N(e))}success(e){return this.complete(N(e))}tryFailure(e){return this.tryComplete(O(e))}failure(e){return this.complete(O(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){return"complete"===this._state.id?new Ie(this._state.ref,this._scheduler):new Ee(this._state,e,this._scheduler)}withScheduler(e){return this._scheduler===e?this:new Ae(this._state,e)}static empty(e=ge.global.get()){return new Ae(new Se,e)}static completed(e,t=ge.global.get()){const n=new Se;return n.id="complete",n.ref=e,new Ae(n,t)}}function ke(e,t,n,r,i){const a=Ae.empty(r),s=new V(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=Ce.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof V?e.chainTo(s):!e||e instanceof R||s.update(e)}else s.clear();i instanceof Ee?i._state.chainTo(a._state,r):i.onComplete(a.tryComplete)})),a.future(s)}function Te(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?Ce.fromPromise(i,n):Ce.pure(i,n):Ce.pure(r,n)}}function Me(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function Ne(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw Me(n,t),e}}function Le(e,t,n,r,i,a){if(i>=e.length)return Ce.pure(a,r);let s=[],o=0;try{for(;i<e.length&&o<n;)s.push(t(e[i++])),o+=1;const l=Ce.sequence(s,r).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?l.map((()=>a)):l.flatMap((()=>Le(e,t,n,r,i,a)))}catch(e){return Me(s,r),Ce.raise(e)}}const Oe={next:()=>({done:!0})};function _e(e){if(!e)return Oe;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Oe;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class De{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=ze(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Fe(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const a=t;n=a.f,t=a.source}}(this)}map(e){return new $e(this,(t=>De.now(e(t))))}flatMap(e){return new $e(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Re(this.get);default:return new Re((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return De.always(e)}static pure(e){return De.now(e)}static now(e){return new Fe(e)}static unit(){return Pe}static always(e){return new je(e)}static once(e){return new Re(e)}static suspend(e){return new Ue(e)}static defer(e){return De.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?De.now(e.get()):De.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return De.of((()=>_e(e))).flatMap((e=>Ge([],e)))}(e)}static map2(e,t,n){return De.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return De.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return De.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return De.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s){return De.sequence([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Fe extends De{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Pe=new Fe(void 0);class Re extends De{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class je extends De{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Ue extends De{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class $e extends De{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const Be={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:De.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>De.tailRecM(t,(t=>e(y.left,y.right,t)))};function ze(e,t){return e||(t&&t.length>0?t.pop():null)}function Ge(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?De.pure(e):Ge(e,t))))}if(r)return De.pure(e)}}f(De,Be);class We{run(e=ge.global.get()){return function(e,t){let n=e,r=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let s=t.batchIndex;for(;;)if(n instanceof T){if(n.isSuccess()){const e=nt(r,i);if(!e)return t.batchIndex=s,Ce.pure(n.get());try{n=e(n.get())}catch(e){n=new He(T.failure(e))}}else{const e=n.failed().get(),a=rt(r,i);if(!a)return t.batchIndex=s,Ce.raise(e);try{n=a(e)}catch(e){n=new He(T.failure(e))}}r=null;const e=s+1&a;if(!e)return lt(n,t,r,i,!0);s=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=T.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return lt(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=ge.global.get()){return ot(this,t,null,e,null,null,null)||F.empty()}attempt(){return this.transform((e=>y.left(e)),y.right)}asyncBoundary(e){return this.flatMap((t=>We.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return We.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>We.delayedTick(e).flatMap((()=>We.raise(t)))),(t=>We.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(E(t)).flatMap((()=>We.raise(t)))),(t=>e(A).map((()=>t))))}doOnCancel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(F.of((()=>e.run(r)))),We.unsafeStart(this,t,ct(r,i,n))}))}))}executeForked(e){return We.fork(this,e)}executeWithModel(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Xe(r,t.connection,t.options);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}executeWithOptions(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Xe(r,t.connection,e);r.trampoline((()=>We.unsafeStart(this,i,n)))}))}flatMap(e){return new Qe(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Qe(this,(t=>We.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new Ye(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Je(this,!1):e;default:return new Je(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new Ye(this.thunk,!0);default:return new Je(this,!0)}}recover(e){return this.recoverWith((t=>We.now(e(t))))}recoverWith(e){return this.transformWith(e,We.now)}timeout(e){const t=We.raise(new h(ue.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,We.delayedTick(e).flatMap((()=>t))];return We.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>We.now(e(t))),(e=>We.now(t(e))))}transformWith(e,t){return new Qe(this,t,e)}static always(e){return new Ze(e)}static async(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=ct(r,i,n);try{const n=e(r,t);i.push(n||F.empty())}catch(e){t(O(e))}}))}))}static asyncUnsafe(e){return new qe(e)}static defer(e){return We.unit().flatMap((()=>e()))}static deferAction(e){return We.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=We.raise(e)}r.trampoline((()=>We.unsafeStart(i,t,n)))}))}static deferFuture(e){return We.suspend((()=>We.fromFuture(e())))}static deferFutureAction(e){return We.deferAction((t=>We.fromFuture(e(t))))}static delayedTick(e){return We.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(T.unit())}));r.push(i)}))}static firstCompletedOf(e){return pt(e,Ce.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?We.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):We.fromTry(e.value().get())}static fromTry(e){return new He(e)}static fork(e,t){return We.shift(t).flatMap((()=>e))}static map2(e,t,n){return We.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return We.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return We.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return We.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,s){return We.sequence([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new He(N(e))}static of(e){return We.always(e)}static once(e){return new Ye(e,!1)}static parMap2(e,t,n){return We.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return We.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return We.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,a){return We.gather([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,a,s){return We.gather([e,t,n,r,i,a]).map((e=>s(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return We.now(e)}static raise(e){return new He(O(e))}static sequence(e){return function(e){return We.of((()=>_e(e))).flatMap((e=>dt([],e)))}(e)}static gather(e){return pt(e,Ce.sequence)}static shift(e){return e?et(e):tt}static suspend(e){return We.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?We.now(e.get()):We.tailRecM(e.swap().get(),t)))}catch(e){return We.raise(e)}}static unit(){return Ve}static unsafeStart(e,t,n){return ot(e,t.scheduler,t,n,null,null,null)}}class He extends We{constructor(e){super(),this.value=e,this._tag="pure"}}const Ve=new He(T.unit());class Ye extends We{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new Ye(this._thunk,!1):this}runTry(){if(this._thunk){const e=T.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class Ze extends We{constructor(e){super(),this.thunk=e,this._tag="always"}}class Qe extends We{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class qe extends We{constructor(e){super(),this.register=e,this._tag="async"}}class Je extends We{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Xe{constructor(e,t=new H,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Ke={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:We.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>We.tailRecM(t,(t=>e(y.left,y.right,t)))};function et(e){return We.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(T.unit())))}))}f(We,Ke);const tt=et();function nt(e,t){let n;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function rt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class it{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,ot(new He(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function at(e,t,n,r,i,a,s){if(!t.shouldCancel()){t.scheduler.batchIndex=s;const o=r||new it(t,n);o.prepare(i,a),e(t,o.asFunction)}}function st(e,t,n,r,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{ot(e,t.scheduler,t,n,r,i,a)}))}function ot(e,t,n,r,i,a,s){let o=e,l=a,c=s;const u=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(o instanceof T){if(o.isSuccess()){const e=nt(l,c);if(!e)return t.batchIndex=d,r(o);try{o=e(o.get())}catch(e){o=T.failure(e)}}else{const e=rt(l,c);if(!e)return t.batchIndex=d,r(o);try{o=e(o.failed().get())}catch(e){o=T.failure(e)}}l=null;const e=d+1&u;if(!e){const e=n||new Xe(t);return st(o instanceof T?new He(o):o,e,r,i,l,c),e.connection}d=e}else switch(o._tag){case"pure":o=o.value;break;case"always":o=T.of(o.thunk);break;case"once":o=o.runTry();break;case"flatMap":const e=o;l&&(c||(c=[]),c.push(l)),l=e.g?[e.f,e.g]:e.f,o=e.source;break;case"async":const a=o,s=n||new Xe(t);return at(a.register,s,r,i,l,c,d),s.connection;case"memoize":return ut(o,t,n,r,l,c,d)}}function lt(e,t,n,r,i){return Ce.create((a=>{const s=new Xe(t);return i?st(e,s,a,null,n,r):ot(e,t,s,a,null,n,r),s.connection}))}function ct(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function ut(e,t,n,r,i,a,s){let o;if(t.batchIndex=s,e.result)o=e.result;else{const n=lt(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,o=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(o=n.value().get(),!o.isSuccess()&&e.onlySuccess||(e.result=o))}ot(o instanceof T?new He(o):We.fromFuture(o),t,n,r,null,i,a)}function dt(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?We.pure(e):dt(e,t))))}if(r)return We.pure(e)}}function pt(e,t){return We.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const a=[],s=pe(e);i=!1;for(let e=0;e<s.length;e++){const t=s[e].run(n.scheduler);a.push(t)}const o=t(a,n.scheduler);n.connection.push(o),o.onComplete(ct(n.scheduler,n.connection,r))}catch(e){i?r(O(e)):n.scheduler.reportFailure(e)}}))}))}}}]);